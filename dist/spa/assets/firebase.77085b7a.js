import{g as l1,i as h1,a as dd,b as Z,_ as Hh,C as Ka,r as sc,E as pd,L as Bv,c as Vv,S as Fo,d as f1,e as Ke,q as Fi,f as Yn,h as ba,j as wn,F as Wr,k as qv,l as d1,m as p1,n as kr,o as $v,p as nc,s as m1,t as g1,u as y1}from"./index.7d032ad3.js";import{n as h3}from"./index.7d032ad3.js";function md(s,e){var t={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&e.indexOf(r)<0&&(t[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(s);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(s,r[n])&&(t[r[n]]=s[r[n]]);return t}const na={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Vn={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1(){return{["admin-restricted-operation"]:"This operation is restricted to administrators only.",["argument-error"]:"",["app-not-authorized"]:"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.",["app-not-installed"]:"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.",["captcha-check-failed"]:"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.",["code-expired"]:"The SMS code has expired. Please re-send the verification code to try again.",["cordova-not-ready"]:"Cordova framework is not ready.",["cors-unsupported"]:"This browser is not supported.",["credential-already-in-use"]:"This credential is already associated with a different user account.",["custom-token-mismatch"]:"The custom token corresponds to a different audience.",["requires-recent-login"]:"This operation is sensitive and requires recent authentication. Log in again before retrying this request.",["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.",["dynamic-link-not-activated"]:"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.",["email-change-needs-verification"]:"Multi-factor users must always have a verified email.",["email-already-in-use"]:"The email address is already in use by another account.",["emulator-config-failed"]:'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',["expired-action-code"]:"The action code has expired.",["cancelled-popup-request"]:"This operation has been cancelled due to another conflicting popup being opened.",["internal-error"]:"An internal AuthError has occurred.",["invalid-app-credential"]:"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.",["invalid-app-id"]:"The mobile app identifier is not registed for the current project.",["invalid-user-token"]:"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.",["invalid-auth-event"]:"An internal AuthError has occurred.",["invalid-verification-code"]:"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.",["invalid-continue-uri"]:"The continue URL provided in the request is invalid.",["invalid-cordova-configuration"]:"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.",["invalid-custom-token"]:"The custom token format is incorrect. Please check the documentation.",["invalid-dynamic-link-domain"]:"The provided dynamic link domain is not configured or authorized for the current project.",["invalid-email"]:"The email address is badly formatted.",["invalid-emulator-scheme"]:"Emulator URL must start with a valid scheme (http:// or https://).",["invalid-api-key"]:"Your API key is invalid, please check you have copied it correctly.",["invalid-cert-hash"]:"The SHA-1 certificate hash provided is invalid.",["invalid-credential"]:"The supplied auth credential is malformed or has expired.",["invalid-message-payload"]:"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.",["invalid-multi-factor-session"]:"The request does not contain a valid proof of first factor successful sign-in.",["invalid-oauth-provider"]:"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.",["invalid-oauth-client-id"]:"The OAuth client ID provided is either invalid or does not match the specified API key.",["unauthorized-domain"]:"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.",["invalid-action-code"]:"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.",["wrong-password"]:"The password is invalid or the user does not have a password.",["invalid-persistence-type"]:"The specified persistence type is invalid. It can only be local, session or none.",["invalid-phone-number"]:"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].",["invalid-provider-id"]:"The specified provider ID is invalid.",["invalid-recipient-email"]:"The email corresponding to this action failed to send as the provided recipient email address is invalid.",["invalid-sender"]:"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.",["invalid-verification-id"]:"The verification ID used to create the phone auth credential is invalid.",["invalid-tenant-id"]:"The Auth instance's tenant ID is invalid.",["login-blocked"]:"Login blocked by user-provided method: {$originalMessage}",["missing-android-pkg-name"]:"An Android Package Name must be provided if the Android App is required to be installed.",["auth-domain-config-required"]:"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.",["missing-app-credential"]:"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.",["missing-verification-code"]:"The phone auth credential was created with an empty SMS verification code.",["missing-continue-uri"]:"A continue URL must be provided in the request.",["missing-iframe-start"]:"An internal AuthError has occurred.",["missing-ios-bundle-id"]:"An iOS Bundle ID must be provided if an App Store ID is provided.",["missing-or-invalid-nonce"]:"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.",["missing-multi-factor-info"]:"No second factor identifier is provided.",["missing-multi-factor-session"]:"The request is missing proof of first factor successful sign-in.",["missing-phone-number"]:"To send verification codes, provide a phone number for the recipient.",["missing-verification-id"]:"The phone auth credential was created with an empty verification ID.",["app-deleted"]:"This instance of FirebaseApp has been deleted.",["multi-factor-info-not-found"]:"The user does not have a second factor matching the identifier provided.",["multi-factor-auth-required"]:"Proof of ownership of a second factor is required to complete sign-in.",["account-exists-with-different-credential"]:"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.",["network-request-failed"]:"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.",["no-auth-event"]:"An internal AuthError has occurred.",["no-such-provider"]:"User was not linked to an account with the given provider.",["null-user"]:"A null user object was provided as the argument for an operation which requires a non-null user object.",["operation-not-allowed"]:"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.",["operation-not-supported-in-this-environment"]:'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',["popup-blocked"]:"Unable to establish a connection with the popup. It may have been blocked by the browser.",["popup-closed-by-user"]:"The popup has been closed by the user before finalizing the operation.",["provider-already-linked"]:"User can only be linked to one identity for the given provider.",["quota-exceeded"]:"The project's quota for this operation has been exceeded.",["redirect-cancelled-by-user"]:"The redirect operation has been cancelled by the user before finalizing.",["redirect-operation-pending"]:"A redirect sign-in operation is already pending.",["rejected-credential"]:"The request contains malformed or mismatching credentials.",["second-factor-already-in-use"]:"The second factor is already enrolled on this account.",["maximum-second-factor-count-exceeded"]:"The maximum allowed number of second factors on a user has been exceeded.",["tenant-id-mismatch"]:"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.",["user-token-expired"]:"The user's credential is no longer valid. The user must sign in again.",["too-many-requests"]:"We have blocked all requests from this device due to unusual activity. Try again later.",["unauthorized-continue-uri"]:"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.",["unsupported-first-factor"]:"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.",["unsupported-persistence-type"]:"The current environment does not support the specified persistence type.",["unsupported-tenant-operation"]:"This operation is not supported in a multi-tenant context.",["unverified-email"]:"The operation requires a verified email.",["user-cancelled"]:"The user did not grant your application the permissions it requested.",["user-not-found"]:"There is no user record corresponding to this identifier. The user may have been deleted.",["user-disabled"]:"The user account has been disabled by an administrator.",["user-mismatch"]:"The supplied credentials do not correspond to the previously signed in user.",["user-signed-out"]:"",["weak-password"]:"The password must be 6 characters long or more.",["web-storage-unsupported"]:"This browser is not supported or 3rd party cookies and data may be disabled.",["already-initialized"]:"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}}function jv(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const w1=v1,T1=jv,Gv=new pd("auth","Firebase",jv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tg=new Bv("@firebase/auth");function Uu(s,...e){tg.logLevel<=wn.ERROR&&tg.error(`Auth (${Fo}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(s,...e){throw gd(s,...e)}function mt(s,...e){return gd(s,...e)}function zv(s,e,t){const r=Object.assign(Object.assign({},T1()),{[e]:t});return new pd("auth","Firebase",r).create(e,{appName:s.name})}function Ui(s,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&yt(s,"argument-error"),zv(s,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function gd(s,...e){if(typeof s!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(t,...r)}return Gv.create(s,...e)}function U(s,e,...t){if(!s)throw gd(e,...t)}function Sr(s){const e="INTERNAL ASSERTION FAILED: "+s;throw Uu(e),new Error(e)}function lr(s,e){s||Sr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rg=new Map;function jt(s){lr(s instanceof Function,"Expected a class definition");let e=rg.get(s);return e?(lr(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,rg.set(s,e),e)}function b1(s,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(jt);e!=null&&e.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ha(){var s;return typeof self!="undefined"&&((s=self.location)===null||s===void 0?void 0:s.href)||""}function yd(){return sg()==="http:"||sg()==="https:"}function sg(){var s;return typeof self!="undefined"&&((s=self.location)===null||s===void 0?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S1(){return typeof navigator!="undefined"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(yd()||Vv()||"connection"in navigator)?navigator.onLine:!0}function E1(){if(typeof navigator=="undefined")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(e,t){this.shortDelay=e,this.longDelay=t,lr(t>e,"Short delay should be less than long delay!"),this.isMobile=h1()||dd()}get(){return S1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vd(s,e){lr(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self!="undefined"&&"fetch"in self)return self.fetch;Sr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self!="undefined"&&"Headers"in self)return self.Headers;Sr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self!="undefined"&&"Response"in self)return self.Response;Sr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1=new Uo(3e4,6e4);function Xe(s,e){return s.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:s.tenantId}):e}async function ut(s,e,t,r,n={}){return Kv(s,n,async()=>{let i={},a={};r&&(e==="GET"?a=r:i={body:JSON.stringify(r)});const o=Fi(Object.assign({key:s.config.apiKey},a)).slice(1),u=await s._getAdditionalHeaders();return u["Content-Type"]="application/json",s.languageCode&&(u["X-Firebase-Locale"]=s.languageCode),Wv.fetch()(Hv(s,s.config.apiHost,t,o),Object.assign({method:e,headers:u,referrerPolicy:"no-referrer"},i))})}async function Kv(s,e,t){s._canInitEmulator=!1;const r=Object.assign(Object.assign({},I1),e);try{const n=new x1(s),i=await Promise.race([t(),n.promise]);n.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw Sa(s,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const o=i.ok?a.errorMessage:a.error.message,[u,c]=o.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Sa(s,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw Sa(s,"email-already-in-use",a);if(u==="USER_DISABLED")throw Sa(s,"user-disabled",a);const l=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw zv(s,l,c);yt(s,l)}}catch(n){if(n instanceof Wr)throw n;yt(s,"network-request-failed")}}async function ss(s,e,t,r,n={}){const i=await ut(s,e,t,r,n);return"mfaPendingCredential"in i&&yt(s,"multi-factor-auth-required",{_serverResponse:i}),i}function Hv(s,e,t,r){const n=`${e}${t}?${r}`;return s.config.emulator?vd(s.config,n):`${s.config.apiScheme}://${n}`}class x1{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(mt(this.auth,"network-request-failed")),_1.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Sa(s,e,t){const r={appName:s.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const n=mt(s,e,r);return n.customData._tokenResponse=t,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A1(s,e){return ut(s,"POST","/v1/accounts:delete",e)}async function P1(s,e){return ut(s,"POST","/v1/accounts:update",e)}async function C1(s,e){return ut(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ca(s){if(!!s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function k1(s,e=!1){const t=Z(s),r=await t.getIdToken(e),n=rl(r);U(n&&n.exp&&n.auth_time&&n.iat,t.auth,"internal-error");const i=typeof n.firebase=="object"?n.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:n,token:r,authTime:Ca(uh(n.auth_time)),issuedAtTime:Ca(uh(n.iat)),expirationTime:Ca(uh(n.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function uh(s){return Number(s)*1e3}function rl(s){var e;const[t,r,n]=s.split(".");if(t===void 0||r===void 0||n===void 0)return Uu("JWT malformed, contained fewer than 3 sections"),null;try{const i=d1(r);return i?JSON.parse(i):(Uu("Failed to decode base64 JWT payload"),null)}catch(i){return Uu("Caught error parsing JWT payload as JSON",(e=i)===null||e===void 0?void 0:e.toString()),null}}function N1(s){const e=rl(s);return U(e,"internal-error"),U(typeof e.exp!="undefined","internal-error"),U(typeof e.iat!="undefined","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jr(s,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Wr&&O1(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function O1({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){var e;try{await this.user.getIdToken(!0)}catch(t){((e=t)===null||e===void 0?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ca(this.lastLoginAt),this.creationTime=Ca(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qa(s){var e;const t=s.auth,r=await s.getIdToken(),n=await Jr(s,C1(t,{idToken:r}));U(n==null?void 0:n.users.length,t,"internal-error");const i=n.users[0];s._notifyReloadListener(i);const a=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?L1(i.providerUserInfo):[],o=M1(s.providerData,a),u=s.isAnonymous,c=!(s.email&&i.passwordHash)&&!(o!=null&&o.length),l=u?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Qv(i.createdAt,i.lastLoginAt),isAnonymous:l};Object.assign(s,h)}async function R1(s){const e=Z(s);await Qa(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function M1(s,e){return[...s.filter(r=>!e.some(n=>n.providerId===r.providerId)),...e]}function L1(s){return s.map(e=>{var{providerId:t}=e,r=md(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F1(s,e){const t=await Kv(s,{},async()=>{const r=Fi({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:n,apiKey:i}=s.config,a=Hv(s,n,"/v1/token",`key=${i}`),o=await s._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Wv.fetch()(a,{method:"POST",headers:o,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){U(e.idToken,"internal-error"),U(typeof e.idToken!="undefined","internal-error"),U(typeof e.refreshToken!="undefined","internal-error");const t="expiresIn"in e&&typeof e.expiresIn!="undefined"?Number(e.expiresIn):N1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return U(!this.accessToken||this.refreshToken,e,"user-token-expired"),!t&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:n,expiresIn:i}=await F1(e,t);this.updateTokensAndExpiration(r,n,Number(i))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:n,expirationTime:i}=t,a=new Ya;return r&&(U(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),n&&(U(typeof n=="string","internal-error",{appName:e}),a.accessToken=n),i&&(U(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ya,this.toJSON())}_performRefresh(){return Sr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fs(s,e){U(typeof s=="string"||typeof s=="undefined","internal-error",{appName:e})}class dn{constructor(e){var{uid:t,auth:r,stsTokenManager:n}=e,i=md(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new D1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Qv(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Jr(this,this.stsTokenManager.getToken(this.auth,e));return U(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return k1(this,e)}reload(){return R1(this)}_assign(e){this!==e&&(U(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new dn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){U(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Qa(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Jr(this,A1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,n,i,a,o,u,c,l;const h=(r=t.displayName)!==null&&r!==void 0?r:void 0,f=(n=t.email)!==null&&n!==void 0?n:void 0,d=(i=t.phoneNumber)!==null&&i!==void 0?i:void 0,g=(a=t.photoURL)!==null&&a!==void 0?a:void 0,p=(o=t.tenantId)!==null&&o!==void 0?o:void 0,m=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,v=(c=t.createdAt)!==null&&c!==void 0?c:void 0,S=(l=t.lastLoginAt)!==null&&l!==void 0?l:void 0,{uid:b,emailVerified:I,isAnonymous:y,providerData:T,stsTokenManager:P}=t;U(b&&P,e,"internal-error");const E=Ya.fromJSON(this.name,P);U(typeof b=="string",e,"internal-error"),fs(h,e.name),fs(f,e.name),U(typeof I=="boolean",e,"internal-error"),U(typeof y=="boolean",e,"internal-error"),fs(d,e.name),fs(g,e.name),fs(p,e.name),fs(m,e.name),fs(v,e.name),fs(S,e.name);const w=new dn({uid:b,auth:e,email:f,emailVerified:I,displayName:h,isAnonymous:y,photoURL:g,phoneNumber:d,tenantId:p,stsTokenManager:E,createdAt:v,lastLoginAt:S});return T&&Array.isArray(T)&&(w.providerData=T.map(x=>Object.assign({},x))),m&&(w._redirectEventId=m),w}static async _fromIdTokenResponse(e,t,r=!1){const n=new Ya;n.updateFromServerResponse(t);const i=new dn({uid:t.localId,auth:e,stsTokenManager:n,isAnonymous:r});return await Qa(i),i}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Yv.type="NONE";const mi=Yv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(s,e,t){return`firebase:${s}:${e}:${t}`}class si{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:n,name:i}=this.auth;this.fullUserKey=pn(this.userKey,n.apiKey,i),this.fullPersistenceKey=pn("persistence",n.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?dn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new si(jt(mi),e,r);const n=(await Promise.all(t.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=n[0]||jt(mi);const a=pn(r,e.config.apiKey,e.name);let o=null;for(const c of t)try{const l=await c._get(a);if(l){const h=dn._fromJSON(e,l);c!==i&&(o=h),i=c;break}}catch{}const u=n.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new si(i,e,r):(i=u[0],o&&await i._set(a,o.toJSON()),await Promise.all(t.map(async c=>{if(c!==i)try{await c._remove(a)}catch{}})),new si(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ng(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Zv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Jv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(e0(e))return"Blackberry";if(t0(e))return"Webos";if(wd(e))return"Safari";if((e.includes("chrome/")||Xv(e))&&!e.includes("edge/"))return"Chrome";if(Bo(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Jv(s=Ke()){return/firefox\//i.test(s)}function wd(s=Ke()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Xv(s=Ke()){return/crios\//i.test(s)}function Zv(s=Ke()){return/iemobile/i.test(s)}function Bo(s=Ke()){return/android/i.test(s)}function e0(s=Ke()){return/blackberry/i.test(s)}function t0(s=Ke()){return/webos/i.test(s)}function Bi(s=Ke()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function U1(s=Ke()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(s)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(s)}function B1(s=Ke()){var e;return Bi(s)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function V1(){return qv()&&document.documentMode===10}function r0(s=Ke()){return Bi(s)||Bo(s)||t0(s)||e0(s)||/windows phone/i.test(s)||Zv(s)}function q1(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s0(s,e=[]){let t;switch(s){case"Browser":t=ng(Ke());break;case"Worker":t=`${ng(Ke())}-${s}`;break;default:t=s}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Fo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=i=>new Promise((a,o)=>{try{const u=e(i);a(u)}catch(u){o(u)}});r.onAbort=t,this.queue.push(r);const n=this.queue.length-1;return()=>{this.queue[n]=()=>Promise.resolve()}}async runMiddleware(e){var t;if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const i of r)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:(t=n)===null||t===void 0?void 0:t.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(e,t,r){this.app=e,this.heartbeatServiceProvider=t,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ig(this),this.idTokenSubscription=new ig(this),this.beforeStateQueue=new $1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Gv,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=jt(t)),this._initializationPromise=this.queue(async()=>{var r,n;if(!this._deleted&&(this.persistenceManager=await si.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((n=this.currentUser)===null||n===void 0?void 0:n.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var t;const r=await this.assertedPersistence.getCurrentUser();let n=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,o=n==null?void 0:n._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===o)&&(u==null?void 0:u.user)&&(n=u.user,i=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(n)}catch(a){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return U(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){var t;try{await Qa(e)}catch(r){if(((t=r)===null||t===void 0?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=E1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?Z(e):null;return t&&U(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&U(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(jt(e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new pd("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&jt(e)||this._popupRedirectResolver;U(t,this,"argument-error"),this.redirectPersistenceManager=await si.create(this,[jt(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,n){if(this._deleted)return()=>{};const i=typeof t=="function"?t:t.next.bind(t),a=this._isInitialized?Promise.resolve():this._initializationPromise;return U(a,this,"internal-error"),a.then(()=>i(this.currentUser)),typeof t=="function"?e.addObserver(t,r,n):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return U(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=s0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());return r&&(t["X-Firebase-Client"]=r),t}}function at(s){return Z(s)}class ig{constructor(e){this.auth=e,this.observer=null,this.addObserver=f1(t=>this.observer=t)}get next(){return U(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function G1(s,e,t){const r=at(s);U(r._canInitEmulator,r,"emulator-config-failed"),U(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const n=!!(t!=null&&t.disableWarnings),i=n0(e),{host:a,port:o}=z1(e),u=o===null?"":`:${o}`;r.config.emulator={url:`${i}//${a}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:n})}),n||W1()}function n0(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function z1(s){const e=n0(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",n=/^(\[[^\]]+\])(:|$)/.exec(r);if(n){const i=n[1];return{host:i,port:ag(r.substr(i.length+1))}}else{const[i,a]=r.split(":");return{host:i,port:ag(a)}}}function ag(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function W1(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console!="undefined"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window!="undefined"&&typeof document!="undefined"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Sr("not implemented")}_getIdTokenResponse(e){return Sr("not implemented")}_linkToIdToken(e,t){return Sr("not implemented")}_getReauthenticationResolver(e){return Sr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i0(s,e){return ut(s,"POST","/v1/accounts:resetPassword",Xe(s,e))}async function a0(s,e){return ut(s,"POST","/v1/accounts:update",e)}async function K1(s,e){return ut(s,"POST","/v1/accounts:update",Xe(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H1(s,e){return ss(s,"POST","/v1/accounts:signInWithPassword",Xe(s,e))}async function sl(s,e){return ut(s,"POST","/v1/accounts:sendOobCode",Xe(s,e))}async function Q1(s,e){return sl(s,e)}async function Y1(s,e){return sl(s,e)}async function J1(s,e){return sl(s,e)}async function X1(s,e){return sl(s,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z1(s,e){return ss(s,"POST","/v1/accounts:signInWithEmailLink",Xe(s,e))}async function e_(s,e){return ss(s,"POST","/v1/accounts:signInWithEmailLink",Xe(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja extends Vi{constructor(e,t,r,n=null){super("password",r),this._email=e,this._password=t,this._tenantId=n}static _fromEmailAndPassword(e,t){return new Ja(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Ja(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if((t==null?void 0:t.email)&&(t==null?void 0:t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return H1(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return Z1(e,{email:this._email,oobCode:this._password});default:yt(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return a0(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return e_(e,{idToken:t,email:this._email,oobCode:this._password});default:yt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kr(s,e){return ss(s,"POST","/v1/accounts:signInWithIdp",Xe(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_="http://localhost";class Nr extends Vi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Nr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):yt("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:n}=t,i=md(t,["providerId","signInMethod"]);if(!r||!n)return null;const a=new Nr(r,n);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return Kr(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Kr(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Kr(e,t)}buildRequest(){const e={requestUri:t_,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Fi(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r_(s,e){return ut(s,"POST","/v1/accounts:sendVerificationCode",Xe(s,e))}async function s_(s,e){return ss(s,"POST","/v1/accounts:signInWithPhoneNumber",Xe(s,e))}async function n_(s,e){const t=await ss(s,"POST","/v1/accounts:signInWithPhoneNumber",Xe(s,e));if(t.temporaryProof)throw Sa(s,"account-exists-with-different-credential",t);return t}const i_={USER_NOT_FOUND:"user-not-found"};async function a_(s,e){const t=Object.assign(Object.assign({},e),{operation:"REAUTH"});return ss(s,"POST","/v1/accounts:signInWithPhoneNumber",Xe(s,t),i_)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn extends Vi{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new mn({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new mn({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return s_(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return n_(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return a_(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:n}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:n}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:r,phoneNumber:n,temporaryProof:i}=e;return!r&&!t&&!n&&!i?null:new mn({verificationId:t,verificationCode:r,phoneNumber:n,temporaryProof:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o_(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function u_(s){const e=Yn(ba(s)).link,t=e?Yn(ba(e)).deep_link_id:null,r=Yn(ba(s)).deep_link_id;return(r?Yn(ba(r)).link:null)||r||t||e||s}class nl{constructor(e){var t,r,n,i,a,o;const u=Yn(ba(e)),c=(t=u.apiKey)!==null&&t!==void 0?t:null,l=(r=u.oobCode)!==null&&r!==void 0?r:null,h=o_((n=u.mode)!==null&&n!==void 0?n:null);U(c&&l&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=l,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(a=u.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(o=u.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const t=u_(e);try{return new nl(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(){this.providerId=Fs.PROVIDER_ID}static credential(e,t){return Ja._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=nl.parseLink(t);return U(r,"argument-error"),Ja._fromEmailAndCode(e,r.code,r.tenantId)}}Fs.PROVIDER_ID="password";Fs.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Fs.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi extends ns{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ni extends qi{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return U("providerId"in t&&"signInMethod"in t,"argument-error"),Nr._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return U(e.idToken||e.accessToken,"argument-error"),Nr._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return ni.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return ni.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r,oauthTokenSecret:n,pendingToken:i,nonce:a,providerId:o}=e;if(!r&&!n&&!t&&!i||!o)return null;try{return new ni(o)._credential({idToken:t,accessToken:r,nonce:a,pendingToken:i})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr extends qi{constructor(){super("facebook.com")}static credential(e){return Nr._fromParams({providerId:gr.PROVIDER_ID,signInMethod:gr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gr.credentialFromTaggedObject(e)}static credentialFromError(e){return gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gr.credential(e.oauthAccessToken)}catch{return null}}}gr.FACEBOOK_SIGN_IN_METHOD="facebook.com";gr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr extends qi{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Nr._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return yr.credentialFromTaggedObject(e)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return yr.credential(t,r)}catch{return null}}}yr.GOOGLE_SIGN_IN_METHOD="google.com";yr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr extends qi{constructor(){super("github.com")}static credential(e){return Nr._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vr.credentialFromTaggedObject(e)}static credentialFromError(e){return vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vr.credential(e.oauthAccessToken)}catch{return null}}}vr.GITHUB_SIGN_IN_METHOD="github.com";vr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c_="http://localhost";class gi extends Vi{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){const t=this.buildRequest();return Kr(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Kr(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Kr(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:n,pendingToken:i}=t;return!r||!n||!i||r!==n?null:new gi(r,i)}static _create(e,t){return new gi(e,t)}buildRequest(){return{requestUri:c_,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l_="saml.";class ic extends ns{constructor(e){U(e.startsWith(l_),"argument-error"),super(e)}static credentialFromResult(e){return ic.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return ic.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=gi.fromJSON(e);return U(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:r}=e;if(!t||!r)return null;try{return gi._create(r,t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr extends qi{constructor(){super("twitter.com")}static credential(e,t){return Nr._fromParams({providerId:wr.PROVIDER_ID,signInMethod:wr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return wr.credentialFromTaggedObject(e)}static credentialFromError(e){return wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return wr.credential(t,r)}catch{return null}}}wr.TWITTER_SIGN_IN_METHOD="twitter.com";wr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o0(s,e){return ss(s,"POST","/v1/accounts:signUp",Xe(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,n=!1){const i=await dn._fromIdTokenResponse(e,r,n),a=og(r);return new tr({user:i,providerId:a,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const n=og(r);return new tr({user:e,providerId:n,_tokenResponse:r,operationType:t})}}function og(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h_(s){var e;const t=at(s);if(await t._initializationPromise,!((e=t.currentUser)===null||e===void 0)&&e.isAnonymous)return new tr({user:t.currentUser,providerId:null,operationType:"signIn"});const r=await o0(t,{returnSecureToken:!0}),n=await tr._fromIdTokenResponse(t,"signIn",r,!0);return await t._updateCurrentUser(n.user),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac extends Wr{constructor(e,t,r,n){var i;super(t.code,t.message),this.operationType=r,this.user=n,Object.setPrototypeOf(this,ac.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,n){return new ac(e,t,r,n)}}function u0(s,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?ac._fromErrorAndOperation(s,i,e,r):i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c0(s){return new Set(s.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f_(s,e){const t=Z(s);await il(!0,t,e);const{providerUserInfo:r}=await P1(t.auth,{idToken:await t.getIdToken(),deleteProvider:[e]}),n=c0(r||[]);return t.providerData=t.providerData.filter(i=>n.has(i.providerId)),n.has("phone")||(t.phoneNumber=null),await t.auth._persistUserIfCurrent(t),t}async function Td(s,e,t=!1){const r=await Jr(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return tr._forOperation(s,"link",r)}async function il(s,e,t){await Qa(e);const r=c0(e.providerData),n=s===!1?"provider-already-linked":"no-such-provider";U(r.has(t)===s,e.auth,n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l0(s,e,t=!1){var r;const{auth:n}=s,i="reauthenticate";try{const a=await Jr(s,u0(n,i,e,s),t);U(a.idToken,n,"internal-error");const o=rl(a.idToken);U(o,n,"internal-error");const{sub:u}=o;return U(s.uid===u,n,"user-mismatch"),tr._forOperation(s,i,a)}catch(a){throw((r=a)===null||r===void 0?void 0:r.code)==="auth/user-not-found"&&yt(n,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h0(s,e,t=!1){const r="signIn",n=await u0(s,r,e),i=await tr._fromIdTokenResponse(s,r,n);return t||await s._updateCurrentUser(i.user),i}async function al(s,e){return h0(at(s),e)}async function f0(s,e){const t=Z(s);return await il(!1,t,e.providerId),Td(t,e)}async function d0(s,e){return l0(Z(s),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d_(s,e){return ss(s,"POST","/v1/accounts:signInWithCustomToken",Xe(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p_(s,e){const t=at(s),r=await d_(t,{token:e,returnSecureToken:!0}),n=await tr._fromIdTokenResponse(t,"signIn",r);return await t._updateCurrentUser(n.user),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?bd._fromServerResponse(e,t):yt(e,"internal-error")}}class bd extends ol{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new bd(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ul(s,e,t){var r;U(((r=t.url)===null||r===void 0?void 0:r.length)>0,s,"invalid-continue-uri"),U(typeof t.dynamicLinkDomain=="undefined"||t.dynamicLinkDomain.length>0,s,"invalid-dynamic-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(U(t.iOS.bundleId.length>0,s,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(U(t.android.packageName.length>0,s,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m_(s,e,t){const r=Z(s),n={requestType:"PASSWORD_RESET",email:e};t&&ul(r,n,t),await Y1(r,n)}async function g_(s,e,t){await i0(Z(s),{oobCode:e,newPassword:t})}async function y_(s,e){await K1(Z(s),{oobCode:e})}async function p0(s,e){const t=Z(s),r=await i0(t,{oobCode:e}),n=r.requestType;switch(U(n,t,"internal-error"),n){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":U(r.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":U(r.mfaInfo,t,"internal-error");default:U(r.email,t,"internal-error")}let i=null;return r.mfaInfo&&(i=ol._fromServerResponse(at(t),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:i},operation:n}}async function v_(s,e){const{data:t}=await p0(Z(s),e);return t.email}async function w_(s,e,t){const r=at(s),n=await o0(r,{returnSecureToken:!0,email:e,password:t}),i=await tr._fromIdTokenResponse(r,"signIn",n);return await r._updateCurrentUser(i.user),i}function T_(s,e,t){return al(Z(s),Fs.credential(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b_(s,e,t){const r=Z(s),n={requestType:"EMAIL_SIGNIN",email:e};U(t.handleCodeInApp,r,"argument-error"),t&&ul(r,n,t),await J1(r,n)}function S_(s,e){const t=nl.parseLink(e);return(t==null?void 0:t.operation)==="EMAIL_SIGNIN"}async function E_(s,e,t){const r=Z(s),n=Fs.credentialWithLink(e,t||Ha());return U(n._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),al(r,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I_(s,e){return ut(s,"POST","/v1/accounts:createAuthUri",Xe(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function __(s,e){const t=yd()?Ha():"http://localhost",r={identifier:e,continueUri:t},{signinMethods:n}=await I_(Z(s),r);return n||[]}async function x_(s,e){const t=Z(s),r=await s.getIdToken(),n={requestType:"VERIFY_EMAIL",idToken:r};e&&ul(t.auth,n,e);const{email:i}=await Q1(t.auth,n);i!==s.email&&await s.reload()}async function A_(s,e,t){const r=Z(s),n=await s.getIdToken(),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:n,newEmail:e};t&&ul(r.auth,i,t);const{email:a}=await X1(r.auth,i);a!==s.email&&await s.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P_(s,e){return ut(s,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C_(s,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Z(s),i={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},a=await Jr(r,P_(r.auth,i));r.displayName=a.displayName||null,r.photoURL=a.photoUrl||null;const o=r.providerData.find(({providerId:u})=>u==="password");o&&(o.displayName=r.displayName,o.photoURL=r.photoURL),await r._updateTokensIfNecessary(a)}function k_(s,e){return m0(Z(s),e,null)}function N_(s,e){return m0(Z(s),null,e)}async function m0(s,e,t){const{auth:r}=s,i={idToken:await s.getIdToken(),returnSecureToken:!0};e&&(i.email=e),t&&(i.password=t);const a=await Jr(s,a0(r,i));await s._updateTokensIfNecessary(a,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O_(s){var e,t;if(!s)return null;const{providerId:r}=s,n=s.rawUserInfo?JSON.parse(s.rawUserInfo):{},i=s.isNewUser||s.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(s==null?void 0:s.idToken)){const a=(t=(e=rl(s.idToken))===null||e===void 0?void 0:e.firebase)===null||t===void 0?void 0:t.sign_in_provider;if(a){const o=a!=="anonymous"&&a!=="custom"?a:null;return new ii(i,o)}}if(!r)return null;switch(r){case"facebook.com":return new D_(i,n);case"github.com":return new R_(i,n);case"google.com":return new M_(i,n);case"twitter.com":return new L_(i,n,s.screenName||null);case"custom":case"anonymous":return new ii(i,null);default:return new ii(i,r,n)}}class ii{constructor(e,t,r={}){this.isNewUser=e,this.providerId=t,this.profile=r}}class g0 extends ii{constructor(e,t,r,n){super(e,t,r),this.username=n}}class D_ extends ii{constructor(e,t){super(e,"facebook.com",t)}}class R_ extends g0{constructor(e,t){super(e,"github.com",t,typeof(t==null?void 0:t.login)=="string"?t==null?void 0:t.login:null)}}class M_ extends ii{constructor(e,t){super(e,"google.com",t)}}class L_ extends g0{constructor(e,t,r){super(e,"twitter.com",t,r)}}function F_(s){const{user:e,_tokenResponse:t}=s;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:O_(t)}class sn{constructor(e,t,r){this.type=e,this.credential=t,this.auth=r}static _fromIdtoken(e,t){return new sn("enroll",e,t)}static _fromMfaPendingCredential(e){return new sn("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,r;if(e!=null&&e.multiFactorSession){if(!((t=e.multiFactorSession)===null||t===void 0)&&t.pendingCredential)return sn._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return sn._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e,t,r){this.session=e,this.hints=t,this.signInResolver=r}static _fromError(e,t){const r=at(e),n=t.customData._serverResponse,i=(n.mfaInfo||[]).map(o=>ol._fromServerResponse(r,o));U(n.mfaPendingCredential,r,"internal-error");const a=sn._fromMfaPendingCredential(n.mfaPendingCredential);return new Sd(a,i,async o=>{const u=await o._process(r,a);delete n.mfaInfo,delete n.mfaPendingCredential;const c=Object.assign(Object.assign({},n),{idToken:u.idToken,refreshToken:u.refreshToken});switch(t.operationType){case"signIn":const l=await tr._fromIdTokenResponse(r,t.operationType,c);return await r._updateCurrentUser(l.user),l;case"reauthenticate":return U(t.user,r,"internal-error"),tr._forOperation(t.user,t.operationType,c);default:yt(r,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function U_(s,e){var t;const r=Z(s),n=e;return U(e.customData.operationType,r,"argument-error"),U((t=n.customData._serverResponse)===null||t===void 0?void 0:t.mfaPendingCredential,r,"argument-error"),Sd._fromError(r,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B_(s,e){return ut(s,"POST","/v2/accounts/mfaEnrollment:start",Xe(s,e))}function V_(s,e){return ut(s,"POST","/v2/accounts/mfaEnrollment:finalize",Xe(s,e))}function q_(s,e){return ut(s,"POST","/v2/accounts/mfaEnrollment:withdraw",Xe(s,e))}class Ed{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(r=>ol._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new Ed(e)}async getSession(){return sn._fromIdtoken(await this.user.getIdToken(),this.user.auth)}async enroll(e,t){const r=e,n=await this.getSession(),i=await Jr(this.user,r._process(this.user.auth,n,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){var t;const r=typeof e=="string"?e:e.uid,n=await this.user.getIdToken(),i=await Jr(this.user,q_(this.user.auth,{idToken:n,mfaEnrollmentId:r}));this.enrolledFactors=this.enrolledFactors.filter(({uid:a})=>a!==r),await this.user._updateTokensIfNecessary(i);try{await this.user.reload()}catch(a){if(((t=a)===null||t===void 0?void 0:t.code)!=="auth/user-token-expired")throw a}}}const ch=new WeakMap;function $_(s){const e=Z(s);return ch.has(e)||ch.set(e,Ed._fromUser(e)),ch.get(e)}const oc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(oc,"1"),this.storage.removeItem(oc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j_(){const s=Ke();return wd(s)||Bi(s)}const G_=1e3,z_=10;class v0 extends y0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=j_()&&q1(),this.fallbackToPolling=r0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),n=this.localCache[t];r!==n&&e(t,n,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,o,u)=>{this.notifyListeners(a,u)});return}const r=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(r);if(e.newValue!==a)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!t)return}const n=()=>{const a=this.storage.getItem(r);!t&&this.localCache[r]===a||this.notifyListeners(r,a)},i=this.storage.getItem(r);V1()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(n,z_):n()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const n of Array.from(r))n(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},G_)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}v0.type="LOCAL";const Id=v0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0 extends y0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}w0.type="SESSION";const Tn=w0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W_(s){return Promise.all(s.map(async e=>{try{const t=await e;return{fulfilled:!0,value:t}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(n=>n.isListeningto(e));if(t)return t;const r=new cl(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:n,data:i}=t.data,a=this.handlersMap[n];if(!(a!=null&&a.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:n});const o=Array.from(a).map(async c=>c(t.origin,i)),u=await W_(o);t.ports[0].postMessage({status:"done",eventId:r,eventType:n,response:u})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}cl.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vo(s="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return s+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const n=typeof MessageChannel!="undefined"?new MessageChannel:null;if(!n)throw new Error("connection_unavailable");let i,a;return new Promise((o,u)=>{const c=Vo("",20);n.port1.start();const l=setTimeout(()=>{u(new Error("unsupported_event"))},r);a={messageChannel:n,onMessage(h){const f=h;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(l),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(f.data.response);break;default:clearTimeout(l),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(a),n.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[n.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ye(){return window}function H_(s){Ye().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _d(){return typeof Ye().WorkerGlobalScope!="undefined"&&typeof Ye().importScripts=="function"}async function Q_(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Y_(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)===null||s===void 0?void 0:s.controller)||null}function J_(){return _d()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0="firebaseLocalStorageDb",X_=1,uc="firebaseLocalStorage",b0="fbase_key";class qo{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function ll(s,e){return s.transaction([uc],e?"readwrite":"readonly").objectStore(uc)}function Z_(){const s=indexedDB.deleteDatabase(T0);return new qo(s).toPromise()}function Qh(){const s=indexedDB.open(T0,X_);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(uc,{keyPath:b0})}catch(n){t(n)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(uc)?e(r):(r.close(),await Z_(),e(await Qh()))})})}async function ug(s,e,t){const r=ll(s,!0).put({[b0]:e,value:t});return new qo(r).toPromise()}async function ex(s,e){const t=ll(s,!1).get(e),r=await new qo(t).toPromise();return r===void 0?null:r.value}function cg(s,e){const t=ll(s,!0).delete(e);return new qo(t).toPromise()}const tx=800,rx=3;class S0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Qh(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>rx)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _d()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=cl._getInstance(J_()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await Q_(),!this.activeServiceWorker)return;this.sender=new K_(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);!r||((e=r[0])===null||e===void 0?void 0:e.fulfilled)&&((t=r[0])===null||t===void 0?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Y_()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Qh();return await ug(e,oc,"1"),await cg(e,oc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>ug(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>ex(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>cg(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(n=>{const i=ll(n,!1).getAll();return new qo(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;for(const{fbase_key:n,value:i}of e)r.add(n),JSON.stringify(this.localCache[n])!==JSON.stringify(i)&&(this.notifyListeners(n,i),t.push(n));for(const n of Object.keys(this.localCache))this.localCache[n]&&!r.has(n)&&(this.notifyListeners(n,null),t.push(n));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const n of Array.from(r))n(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),tx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}S0.type="LOCAL";const Xa=S0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sx(s,e){return ut(s,"POST","/v2/accounts/mfaSignIn:start",Xe(s,e))}function nx(s,e){return ut(s,"POST","/v2/accounts/mfaSignIn:finalize",Xe(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ix(s){return(await ut(s,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ax(){var s,e;return(e=(s=document.getElementsByTagName("head"))===null||s===void 0?void 0:s[0])!==null&&e!==void 0?e:document}function E0(s){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=e,r.onerror=n=>{const i=mt("internal-error");i.customData=n,t(i)},r.type="text/javascript",r.charset="UTF-8",ax().appendChild(r)})}function I0(s){return`__${s}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox=500,ux=6e4,pu=1e12;class cx{constructor(e){this.auth=e,this.counter=pu,this._widgets=new Map}render(e,t){const r=this.counter;return this._widgets.set(r,new lx(e,this.auth.name,t||{})),this.counter++,r}reset(e){var t;const r=e||pu;(t=this._widgets.get(r))===null||t===void 0||t.delete(),this._widgets.delete(r)}getResponse(e){var t;const r=e||pu;return((t=this._widgets.get(r))===null||t===void 0?void 0:t.getResponse())||""}async execute(e){var t;const r=e||pu;return(t=this._widgets.get(r))===null||t===void 0||t.execute(),""}}class lx{constructor(e,t,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const n=typeof e=="string"?document.getElementById(e):e;U(n,"argument-error",{appName:t}),this.container=n,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=hx(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},ux)},ox))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function hx(s){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<s;r++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lh=I0("rcb"),fx=new Uo(3e4,6e4),dx="https://www.google.com/recaptcha/api.js?";class px{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=Ye().grecaptcha)===null||e===void 0)&&e.render)}load(e,t=""){return U(mx(t),e,"argument-error"),this.shouldResolveImmediately(t)?Promise.resolve(Ye().grecaptcha):new Promise((r,n)=>{const i=Ye().setTimeout(()=>{n(mt(e,"network-request-failed"))},fx.get());Ye()[lh]=()=>{Ye().clearTimeout(i),delete Ye()[lh];const o=Ye().grecaptcha;if(!o){n(mt(e,"internal-error"));return}const u=o.render;o.render=(c,l)=>{const h=u(c,l);return this.counter++,h},this.hostLanguage=t,r(o)};const a=`${dx}?${Fi({onload:lh,render:"explicit",hl:t})}`;E0(a).catch(()=>{clearTimeout(i),n(mt(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(!((t=Ye().grecaptcha)===null||t===void 0)&&t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function mx(s){return s.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(s)}class gx{async load(e){return new cx(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0="recaptcha",yx={theme:"light",type:"image"};class vx{constructor(e,t=Object.assign({},yx),r){this.parameters=t,this.type=_0,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=at(r),this.isInvisible=this.parameters.size==="invisible",U(typeof document!="undefined",this.auth,"operation-not-supported-in-this-environment");const n=typeof e=="string"?document.getElementById(e):e;U(n,this.auth,"argument-error"),this.container=n,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new gx:new px,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),r=t.getResponse(e);return r||new Promise(n=>{const i=a=>{!a||(this.tokenChangeListeners.delete(i),n(a))};this.tokenChangeListeners.add(i),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){U(!this.parameters.sitekey,this.auth,"argument-error"),U(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),U(typeof document!="undefined",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(r=>r(t)),typeof e=="function")e(t);else if(typeof e=="string"){const r=Ye()[e];typeof r=="function"&&r(t)}}}assertNotDestroyed(){U(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){U(yd()&&!_d(),this.auth,"internal-error"),await wx(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await ix(this.auth);U(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return U(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function wx(){let s=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}s=()=>e(),window.addEventListener("load",s)}).catch(e=>{throw s&&window.removeEventListener("load",s),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=mn._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function Tx(s,e,t){const r=at(s),n=await hl(r,e,Z(t));return new xd(n,i=>al(r,i))}async function bx(s,e,t){const r=Z(s);await il(!1,r,"phone");const n=await hl(r.auth,e,Z(t));return new xd(n,i=>f0(r,i))}async function Sx(s,e,t){const r=Z(s),n=await hl(r.auth,e,Z(t));return new xd(n,i=>d0(r,i))}async function hl(s,e,t){var r;const n=await t.verify();try{U(typeof n=="string",s,"argument-error"),U(t.type===_0,s,"argument-error");let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){const a=i.session;if("phoneNumber"in i)return U(a.type==="enroll",s,"internal-error"),(await B_(s,{idToken:a.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,recaptchaToken:n}})).phoneSessionInfo.sessionInfo;{U(a.type==="signin",s,"internal-error");const o=((r=i.multiFactorHint)===null||r===void 0?void 0:r.uid)||i.multiFactorUid;return U(o,s,"missing-multi-factor-info"),(await sx(s,{mfaPendingCredential:a.credential,mfaEnrollmentId:o,phoneSignInInfo:{recaptchaToken:n}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:a}=await r_(s,{phoneNumber:i.phoneNumber,recaptchaToken:n});return a}}finally{t._reset()}}async function Ex(s,e){await Td(Z(s),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e){this.providerId=ur.PROVIDER_ID,this.auth=at(e)}verifyPhoneNumber(e,t){return hl(this.auth,e,Z(t))}static credential(e,t){return mn._fromVerification(e,t)}static credentialFromResult(e){const t=e;return ur.credentialFromTaggedObject(t)}static credentialFromError(e){return ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:r}=e;return t&&r?mn._fromTokenResponse(t,r):null}}ur.PROVIDER_ID="phone";ur.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(s,e){return e?jt(e):(U(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad extends Vi{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Kr(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Kr(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Kr(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Ix(s){return h0(s.auth,new Ad(s),s.bypassAuthState)}function _x(s){const{auth:e,user:t}=s;return U(t,e,"internal-error"),l0(t,new Ad(s),s.bypassAuthState)}async function xx(s){const{auth:e,user:t}=s;return U(t,e,"internal-error"),Td(t,new Ad(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(e,t,r,n,i=!1){this.auth=e,this.resolver=r,this.user=n,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:n,tenantId:i,error:a,type:o}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:t,sessionId:r,tenantId:i||void 0,postBody:n||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ix;case"linkViaPopup":case"linkViaRedirect":return xx;case"reauthViaPopup":case"reauthViaRedirect":return _x;default:yt(this.auth,"internal-error")}}resolve(e){lr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){lr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax=new Uo(2e3,1e4);async function Px(s,e,t){const r=at(s);Ui(s,e,ns);const n=On(r,t);return new Br(r,"signInViaPopup",e,n).executeNotNull()}async function Cx(s,e,t){const r=Z(s);Ui(r.auth,e,ns);const n=On(r.auth,t);return new Br(r.auth,"reauthViaPopup",e,n,r).executeNotNull()}async function kx(s,e,t){const r=Z(s);Ui(r.auth,e,ns);const n=On(r.auth,t);return new Br(r.auth,"linkViaPopup",e,n,r).executeNotNull()}class Br extends x0{constructor(e,t,r,n,i){super(e,t,n,i),this.provider=r,this.authWindow=null,this.pollId=null,Br.currentPopupAction&&Br.currentPopupAction.cancel(),Br.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return U(e,this.auth,"internal-error"),e}async onExecution(){lr(this.filter.length===1,"Popup operations only handle one event");const e=Vo();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(mt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(mt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Br.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(mt(this.auth,"popup-closed-by-user"))},2e3);return}this.pollId=window.setTimeout(e,Ax.get())};e()}}Br.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx="pendingRedirect",ka=new Map;class Ox extends x0{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=ka.get(this.auth._key());if(!e){try{const r=await Dx(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}ka.set(this.auth._key(),e)}return this.bypassAuthState||ka.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Dx(s,e){const t=P0(e),r=A0(s);if(!await r._isAvailable())return!1;const n=await r._get(t)==="true";return await r._remove(t),n}async function Pd(s,e){return A0(s)._set(P0(e),"true")}function Rx(){ka.clear()}function Cd(s,e){ka.set(s._key(),e)}function A0(s){return jt(s._redirectPersistence)}function P0(s){return pn(Nx,s.config.apiKey,s.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mx(s,e,t){return Lx(s,e,t)}async function Lx(s,e,t){const r=at(s);Ui(s,e,ns);const n=On(r,t);return await Pd(n,r),n._openRedirect(r,e,"signInViaRedirect")}function Fx(s,e,t){return Ux(s,e,t)}async function Ux(s,e,t){const r=Z(s);Ui(r.auth,e,ns);const n=On(r.auth,t);await Pd(n,r.auth);const i=await C0(r);return n._openRedirect(r.auth,e,"reauthViaRedirect",i)}function Bx(s,e,t){return Vx(s,e,t)}async function Vx(s,e,t){const r=Z(s);Ui(r.auth,e,ns);const n=On(r.auth,t);await il(!1,r,e.providerId),await Pd(n,r.auth);const i=await C0(r);return n._openRedirect(r.auth,e,"linkViaRedirect",i)}async function qx(s,e){return await at(s)._initializationPromise,fl(s,e,!1)}async function fl(s,e,t=!1){const r=at(s),n=On(r,e),a=await new Ox(r,n,t).execute();return a&&!t&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}async function C0(s){const e=Vo(`${s.uid}:::`);return s._redirectEventId=e,await s.auth._setRedirectUser(s),await s.auth._persistUserIfCurrent(s),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x=10*60*1e3;class k0{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!jx(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!N0(e)){const n=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(mt(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=$x&&this.cachedEventUids.clear(),this.cachedEventUids.has(lg(e))}saveEventToCache(e){this.cachedEventUids.add(lg(e)),this.lastProcessedEventTime=Date.now()}}function lg(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function N0({type:s,error:e}){return s==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function jx(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return N0(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O0(s,e={}){return ut(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,zx=/^https?/;async function Wx(s){if(s.config.emulator)return;const{authorizedDomains:e}=await O0(s);for(const t of e)try{if(Kx(t))return}catch{}yt(s,"unauthorized-domain")}function Kx(s){const e=Ha(),{protocol:t,hostname:r}=new URL(e);if(s.startsWith("chrome-extension://")){const a=new URL(s);return a.hostname===""&&r===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!zx.test(t))return!1;if(Gx.test(s))return r===s;const n=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+n+"|"+n+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx=new Uo(3e4,6e4);function hg(){const s=Ye().___jsl;if(s!=null&&s.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function Qx(s){return new Promise((e,t)=>{var r,n,i;function a(){hg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{hg(),t(mt(s,"network-request-failed"))},timeout:Hx.get()})}if(!((n=(r=Ye().gapi)===null||r===void 0?void 0:r.iframes)===null||n===void 0)&&n.Iframe)e(gapi.iframes.getContext());else if(!((i=Ye().gapi)===null||i===void 0)&&i.load)a();else{const o=I0("iframefcb");return Ye()[o]=()=>{gapi.load?a():t(mt(s,"network-request-failed"))},E0(`https://apis.google.com/js/api.js?onload=${o}`).catch(u=>t(u))}}).catch(e=>{throw Bu=null,e})}let Bu=null;function Yx(s){return Bu=Bu||Qx(s),Bu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jx=new Uo(5e3,15e3),Xx="__/auth/iframe",Zx="emulator/auth/iframe",eA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function rA(s){const e=s.config;U(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?vd(e,Zx):`https://${s.config.authDomain}/${Xx}`,r={apiKey:e.apiKey,appName:s.name,v:Fo},n=tA.get(s.config.apiHost);n&&(r.eid=n);const i=s._getFrameworks();return i.length&&(r.fw=i.join(",")),`${t}?${Fi(r).slice(1)}`}async function sA(s){const e=await Yx(s),t=Ye().gapi;return U(t,s,"internal-error"),e.open({where:document.body,url:rA(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:eA,dontclear:!0},r=>new Promise(async(n,i)=>{await r.restyle({setHideOnLeave:!1});const a=mt(s,"network-request-failed"),o=Ye().setTimeout(()=>{i(a)},Jx.get());function u(){Ye().clearTimeout(o),n(r)}r.ping(u).then(u,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},iA=500,aA=600,oA="_blank",uA="http://localhost";class fg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function cA(s,e,t,r=iA,n=aA){const i=Math.max((window.screen.availHeight-n)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const u=Object.assign(Object.assign({},nA),{width:r.toString(),height:n.toString(),top:i,left:a}),c=Ke().toLowerCase();t&&(o=Xv(c)?oA:t),Jv(c)&&(e=e||uA,u.scrollbars="yes");const l=Object.entries(u).reduce((f,[d,g])=>`${f}${d}=${g},`,"");if(B1(c)&&o!=="_self")return lA(e||"",o),new fg(null);const h=window.open(e||"",o,l);U(h,s,"popup-blocked");try{h.focus()}catch{}return new fg(h)}function lA(s,e){const t=document.createElement("a");t.href=s,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA="__/auth/handler",fA="emulator/auth/handler";function Yh(s,e,t,r,n,i){U(s.config.authDomain,s,"auth-domain-config-required"),U(s.config.apiKey,s,"invalid-api-key");const a={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:r,v:Fo,eventId:n};if(e instanceof ns){e.setDefaultLanguage(s.languageCode),a.providerId=e.providerId||"",p1(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,c]of Object.entries(i||{}))a[u]=c}if(e instanceof qi){const u=e.getScopes().filter(c=>c!=="");u.length>0&&(a.scopes=u.join(","))}s.tenantId&&(a.tid=s.tenantId);const o=a;for(const u of Object.keys(o))o[u]===void 0&&delete o[u];return`${dA(s)}?${Fi(o).slice(1)}`}function dA({config:s}){return s.emulator?vd(s,fA):`https://${s.authDomain}/${hA}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hh="webStorageSupport";class pA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Tn,this._completeRedirectFn=fl,this._overrideRedirectResult=Cd}async _openPopup(e,t,r,n){var i;lr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const a=Yh(e,t,r,Ha(),n);return cA(e,a,Vo())}async _openRedirect(e,t,r,n){return await this._originValidation(e),H_(Yh(e,t,r,Ha(),n)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:n,promise:i}=this.eventManagers[t];return n?Promise.resolve(n):(lr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await sA(e),r=new k0(e);return t.register("authEvent",n=>(U(n==null?void 0:n.authEvent,e,"invalid-auth-event"),{status:r.onEvent(n.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(hh,{type:hh},n=>{var i;const a=(i=n==null?void 0:n[0])===null||i===void 0?void 0:i[hh];a!==void 0&&t(!!a),yt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Wx(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return r0()||wd()||Bi()}}const mA=pA;class gA{constructor(e){this.factorId=e}_process(e,t,r){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,r);case"signin":return this._finalizeSignIn(e,t.credential);default:return Sr("unexpected MultiFactorSessionType")}}}class kd extends gA{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new kd(e)}_finalizeEnroll(e,t,r){return V_(e,{idToken:t,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return nx(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class D0{constructor(){}static assertion(e){return kd._fromCredential(e)}}D0.FACTOR_ID="phone";var dg="@firebase/auth",pg="0.20.11";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{var n;e(((n=r)===null||n===void 0?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);!t||(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){U(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function wA(s){Hh(new Ka("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat"),{apiKey:i,authDomain:a}=r.options;return((o,u)=>{U(i&&!i.includes(":"),"invalid-api-key",{appName:o.name}),U(!(a!=null&&a.includes(":")),"argument-error",{appName:o.name});const c={apiKey:i,authDomain:a,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:s0(s)},l=new j1(o,u,c);return b1(l,t),l})(r,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Hh(new Ka("auth-internal",e=>{const t=at(e.getProvider("auth").getImmediate());return(r=>new yA(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),sc(dg,pg,vA(s)),sc(dg,pg,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA=5*60;l1("authIdTokenMaxAge");wA("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA=2e3;async function SA(s,e,t){var r;const{BuildInfo:n}=bn();lr(e.sessionId,"AuthEvent did not contain a session ID");const i=await AA(e.sessionId),a={};return Bi()?a.ibi=n.packageName:Bo()?a.apn=n.packageName:yt(s,"operation-not-supported-in-this-environment"),n.displayName&&(a.appDisplayName=n.displayName),a.sessionId=i,Yh(s,t,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,a)}async function EA(s){const{BuildInfo:e}=bn(),t={};Bi()?t.iosBundleId=e.packageName:Bo()?t.androidPackageName=e.packageName:yt(s,"operation-not-supported-in-this-environment"),await O0(s,t)}function IA(s){const{cordova:e}=bn();return new Promise(t=>{e.plugins.browsertab.isAvailable(r=>{let n=null;r?e.plugins.browsertab.openUrl(s):n=e.InAppBrowser.open(s,U1()?"_blank":"_system","location=yes"),t(n)})})}async function _A(s,e,t){const{cordova:r}=bn();let n=()=>{};try{await new Promise((i,a)=>{let o=null;function u(){var h;i();const f=(h=r.plugins.browsertab)===null||h===void 0?void 0:h.close;typeof f=="function"&&f(),typeof(t==null?void 0:t.close)=="function"&&t.close()}function c(){o||(o=window.setTimeout(()=>{a(mt(s,"redirect-cancelled-by-user"))},bA))}function l(){(document==null?void 0:document.visibilityState)==="visible"&&c()}e.addPassiveListener(u),document.addEventListener("resume",c,!1),Bo()&&document.addEventListener("visibilitychange",l,!1),n=()=>{e.removePassiveListener(u),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),o&&window.clearTimeout(o)}})}finally{n()}}function xA(s){var e,t,r,n,i,a,o,u,c,l;const h=bn();U(typeof((e=h==null?void 0:h.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",s,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),U(typeof((t=h==null?void 0:h.BuildInfo)===null||t===void 0?void 0:t.packageName)!="undefined",s,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),U(typeof((i=(n=(r=h==null?void 0:h.cordova)===null||r===void 0?void 0:r.plugins)===null||n===void 0?void 0:n.browsertab)===null||i===void 0?void 0:i.openUrl)=="function",s,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),U(typeof((u=(o=(a=h==null?void 0:h.cordova)===null||a===void 0?void 0:a.plugins)===null||o===void 0?void 0:o.browsertab)===null||u===void 0?void 0:u.isAvailable)=="function",s,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),U(typeof((l=(c=h==null?void 0:h.cordova)===null||c===void 0?void 0:c.InAppBrowser)===null||l===void 0?void 0:l.open)=="function",s,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function AA(s){const e=PA(s),t=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(n=>n.toString(16).padStart(2,"0")).join("")}function PA(s){if(lr(/[0-9a-zA-Z]+/.test(s),"Can only convert alpha-numeric strings"),typeof TextEncoder!="undefined")return new TextEncoder().encode(s);const e=new ArrayBuffer(s.length),t=new Uint8Array(e);for(let r=0;r<s.length;r++)t[r]=s.charCodeAt(r);return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA=20;class kA extends k0{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function NA(s,e,t=null){return{type:e,eventId:t,urlResponse:null,sessionId:RA(),postBody:null,tenantId:s.tenantId,error:mt(s,"no-auth-event")}}function OA(s,e){return Jh()._set(Xh(s),e)}async function mg(s){const e=await Jh()._get(Xh(s));return e&&await Jh()._remove(Xh(s)),e}function DA(s,e){var t,r;const n=LA(e);if(n.includes("/__/auth/callback")){const i=Vu(n),a=i.firebaseError?MA(decodeURIComponent(i.firebaseError)):null,o=(r=(t=a==null?void 0:a.code)===null||t===void 0?void 0:t.split("auth/"))===null||r===void 0?void 0:r[1],u=o?mt(o):null;return u?{type:s.type,eventId:s.eventId,tenantId:s.tenantId,error:u,urlResponse:null,sessionId:null,postBody:null}:{type:s.type,eventId:s.eventId,tenantId:s.tenantId,sessionId:s.sessionId,urlResponse:n,postBody:null}}return null}function RA(){const s=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let t=0;t<CA;t++){const r=Math.floor(Math.random()*e.length);s.push(e.charAt(r))}return s.join("")}function Jh(){return jt(Id)}function Xh(s){return pn("authEvent",s.config.apiKey,s.name)}function MA(s){try{return JSON.parse(s)}catch{return null}}function LA(s){const e=Vu(s),t=e.link?decodeURIComponent(e.link):void 0,r=Vu(t).link,n=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return Vu(n).link||n||r||t||s}function Vu(s){if(!(s!=null&&s.includes("?")))return{};const[e,...t]=s.split("?");return Yn(t.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA=500;class UA{constructor(){this._redirectPersistence=Tn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=fl,this._overrideRedirectResult=Cd}async _initialize(e){const t=e._key();let r=this.eventManagers.get(t);return r||(r=new kA(e),this.eventManagers.set(t,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){yt(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,r,n){xA(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),Rx(),await this._originValidation(e);const a=NA(e,r,n);await OA(e,a);const o=await SA(e,a,t),u=await IA(o);return _A(e,i,u)}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=EA(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:r,handleOpenURL:n,BuildInfo:i}=bn(),a=setTimeout(async()=>{await mg(e),t.onEvent(gg())},FA),o=async l=>{clearTimeout(a);const h=await mg(e);let f=null;h&&(l==null?void 0:l.url)&&(f=DA(h,l.url)),t.onEvent(f||gg())};typeof r!="undefined"&&typeof r.subscribe=="function"&&r.subscribe(null,o);const u=n,c=`${i.packageName.toLowerCase()}://`;bn().handleOpenURL=async l=>{if(l.toLowerCase().startsWith(c)&&o({url:l}),typeof u=="function")try{u(l)}catch(h){console.error(h)}}}}const BA=UA;function gg(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:mt("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VA(s,e){at(s)._logFramework(e)}var qA="@firebase/auth-compat",$A="0.2.24";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA=1e3;function Na(){var s;return((s=self==null?void 0:self.location)===null||s===void 0?void 0:s.protocol)||null}function GA(){return Na()==="http:"||Na()==="https:"}function R0(s=Ke()){return!!((Na()==="file:"||Na()==="ionic:"||Na()==="capacitor:")&&s.toLowerCase().match(/iphone|ipad|ipod|android/))}function zA(){return dd()||$v()}function WA(){return qv()&&(document==null?void 0:document.documentMode)===11}function KA(s=Ke()){return/Edge\/\d+/.test(s)}function HA(s=Ke()){return WA()||KA(s)}function M0(){try{const s=self.localStorage,e=Vo();if(s)return s.setItem(e,"1"),s.removeItem(e),HA()?nc():!0}catch{return Nd()&&nc()}return!1}function Nd(){return typeof global!="undefined"&&"WorkerGlobalScope"in global&&"importScripts"in global}function fh(){return(GA()||Vv()||R0())&&!zA()&&M0()&&!Nd()}function L0(){return R0()&&typeof document!="undefined"}async function QA(){return L0()?new Promise(s=>{const e=setTimeout(()=>{s(!1)},jA);document.addEventListener("deviceready",()=>{clearTimeout(e),s(!0)})}):!1}function YA(){return typeof window!="undefined"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qt={LOCAL:"local",NONE:"none",SESSION:"session"},ia=U,F0="persistence";function JA(s,e){if(ia(Object.values(qt).includes(e),s,"invalid-persistence-type"),dd()){ia(e!==qt.SESSION,s,"unsupported-persistence-type");return}if($v()){ia(e===qt.NONE,s,"unsupported-persistence-type");return}if(Nd()){ia(e===qt.NONE||e===qt.LOCAL&&nc(),s,"unsupported-persistence-type");return}ia(e===qt.NONE||M0(),s,"unsupported-persistence-type")}async function Zh(s){await s._initializationPromise;const e=U0(),t=pn(F0,s.config.apiKey,s.name);e&&e.setItem(t,s._getPersistence())}function XA(s,e){const t=U0();if(!t)return[];const r=pn(F0,s,e);switch(t.getItem(r)){case qt.NONE:return[mi];case qt.LOCAL:return[Xa,Tn];case qt.SESSION:return[Tn];default:return[]}}function U0(){var s;try{return((s=YA())===null||s===void 0?void 0:s.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA=U;class Ss{constructor(){this.browserResolver=jt(mA),this.cordovaResolver=jt(BA),this.underlyingResolver=null,this._redirectPersistence=Tn,this._completeRedirectFn=fl,this._overrideRedirectResult=Cd}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,r,n){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,r,n)}async _openRedirect(e,t,r,n){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,r,n)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return L0()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ZA(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await QA();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B0(s){return s.unwrap()}function eP(s){return s.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tP(s){return V0(s)}function rP(s,e){var t,r;const n=(t=e.customData)===null||t===void 0?void 0:t._tokenResponse;if(((r=e)===null||r===void 0?void 0:r.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new sP(s,U_(s,e))}else if(n){const i=V0(e),a=e;i&&(a.credential=i,a.tenantId=n.tenantId||void 0,a.email=n.email||void 0,a.phoneNumber=n.phoneNumber||void 0)}}function V0(s){const{_tokenResponse:e}=s instanceof Wr?s.customData:s;if(!e)return null;if(!(s instanceof Wr)&&"temporaryProof"in e&&"phoneNumber"in e)return ur.credentialFromResult(s);const t=e.providerId;if(!t||t===na.PASSWORD)return null;let r;switch(t){case na.GOOGLE:r=yr;break;case na.FACEBOOK:r=gr;break;case na.GITHUB:r=vr;break;case na.TWITTER:r=wr;break;default:const{oauthIdToken:n,oauthAccessToken:i,oauthTokenSecret:a,pendingToken:o,nonce:u}=e;return!i&&!a&&!n&&!o?null:o?t.startsWith("saml.")?gi._create(t,o):Nr._fromParams({providerId:t,signInMethod:t,pendingToken:o,idToken:n,accessToken:i}):new ni(t).credential({idToken:n,accessToken:i,rawNonce:u})}return s instanceof Wr?r.credentialFromError(s):r.credentialFromResult(s)}function kt(s,e){return e.catch(t=>{throw t instanceof Wr&&rP(s,t),t}).then(t=>{const r=t.operationType,n=t.user;return{operationType:r,credential:tP(t),additionalUserInfo:F_(t),user:Vr.getOrCreate(n)}})}async function ef(s,e){const t=await e;return{verificationId:t.verificationId,confirm:r=>kt(s,t.confirm(r))}}class sP{constructor(e,t){this.resolver=t,this.auth=eP(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return kt(B0(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e){this._delegate=e,this.multiFactor=$_(e)}static getOrCreate(e){return Vr.USER_MAP.has(e)||Vr.USER_MAP.set(e,new Vr(e)),Vr.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return kt(this.auth,f0(this._delegate,e))}async linkWithPhoneNumber(e,t){return ef(this.auth,bx(this._delegate,e,t))}async linkWithPopup(e){return kt(this.auth,kx(this._delegate,e,Ss))}async linkWithRedirect(e){return await Zh(at(this.auth)),Bx(this._delegate,e,Ss)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return kt(this.auth,d0(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return ef(this.auth,Sx(this._delegate,e,t))}reauthenticateWithPopup(e){return kt(this.auth,Cx(this._delegate,e,Ss))}async reauthenticateWithRedirect(e){return await Zh(at(this.auth)),Fx(this._delegate,e,Ss)}sendEmailVerification(e){return x_(this._delegate,e)}async unlink(e){return await f_(this._delegate,e),this}updateEmail(e){return k_(this._delegate,e)}updatePassword(e){return N_(this._delegate,e)}updatePhoneNumber(e){return Ex(this._delegate,e)}updateProfile(e){return C_(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return A_(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Vr.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa=U;class tf{constructor(e,t){if(this.app=e,t.isInitialized()){this._delegate=t.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;aa(r,"invalid-api-key",{appName:e.name}),aa(r,"invalid-api-key",{appName:e.name});const n=typeof window!="undefined"?Ss:void 0;this._delegate=t.initialize({options:{persistence:nP(r,e.name),popupRedirectResolver:n}}),this._delegate._updateErrorMap(w1),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Vr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){G1(this._delegate,e,t)}applyActionCode(e){return y_(this._delegate,e)}checkActionCode(e){return p0(this._delegate,e)}confirmPasswordReset(e,t){return g_(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return kt(this._delegate,w_(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return __(this._delegate,e)}isSignInWithEmailLink(e){return S_(this._delegate,e)}async getRedirectResult(){aa(fh(),this._delegate,"operation-not-supported-in-this-environment");const e=await qx(this._delegate,Ss);return e?kt(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){VA(this._delegate,e)}onAuthStateChanged(e,t,r){const{next:n,error:i,complete:a}=yg(e,t,r);return this._delegate.onAuthStateChanged(n,i,a)}onIdTokenChanged(e,t,r){const{next:n,error:i,complete:a}=yg(e,t,r);return this._delegate.onIdTokenChanged(n,i,a)}sendSignInLinkToEmail(e,t){return b_(this._delegate,e,t)}sendPasswordResetEmail(e,t){return m_(this._delegate,e,t||void 0)}async setPersistence(e){JA(this._delegate,e);let t;switch(e){case qt.SESSION:t=Tn;break;case qt.LOCAL:t=await jt(Xa)._isAvailable()?Xa:Id;break;case qt.NONE:t=mi;break;default:return yt("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return kt(this._delegate,h_(this._delegate))}signInWithCredential(e){return kt(this._delegate,al(this._delegate,e))}signInWithCustomToken(e){return kt(this._delegate,p_(this._delegate,e))}signInWithEmailAndPassword(e,t){return kt(this._delegate,T_(this._delegate,e,t))}signInWithEmailLink(e,t){return kt(this._delegate,E_(this._delegate,e,t))}signInWithPhoneNumber(e,t){return ef(this._delegate,Tx(this._delegate,e,t))}async signInWithPopup(e){return aa(fh(),this._delegate,"operation-not-supported-in-this-environment"),kt(this._delegate,Px(this._delegate,e,Ss))}async signInWithRedirect(e){return aa(fh(),this._delegate,"operation-not-supported-in-this-environment"),await Zh(this._delegate),Mx(this._delegate,e,Ss)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return v_(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}tf.Persistence=qt;function yg(s,e,t){let r=s;typeof s!="function"&&({next:r,error:e,complete:t}=s);const n=r;return{next:a=>n(a&&Vr.getOrCreate(a)),error:e,complete:t}}function nP(s,e){const t=XA(s,e);if(typeof self!="undefined"&&!t.includes(Xa)&&t.push(Xa),typeof window!="undefined")for(const r of[Id,Tn])t.includes(r)||t.push(r);return t.includes(mi)||t.push(mi),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(){this.providerId="phone",this._delegate=new ur(B0(kr.auth()))}static credential(e,t){return ur.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}Od.PHONE_SIGN_IN_METHOD=ur.PHONE_SIGN_IN_METHOD;Od.PROVIDER_ID=ur.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iP=U;class aP{constructor(e,t,r=kr.app()){var n;iP((n=r.options)===null||n===void 0?void 0:n.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new vx(e,t,r.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oP="auth-compat";function uP(s){s.INTERNAL.registerComponent(new Ka(oP,e=>{const t=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new tf(t,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Vn.EMAIL_SIGNIN,PASSWORD_RESET:Vn.PASSWORD_RESET,RECOVER_EMAIL:Vn.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Vn.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Vn.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Vn.VERIFY_EMAIL}},EmailAuthProvider:Fs,FacebookAuthProvider:gr,GithubAuthProvider:vr,GoogleAuthProvider:yr,OAuthProvider:ni,SAMLAuthProvider:ic,PhoneAuthProvider:Od,PhoneMultiFactorGenerator:D0,RecaptchaVerifier:aP,TwitterAuthProvider:wr,Auth:tf,AuthCredential:Vi,Error:Wr}).setInstantiationMode("LAZY").setMultipleInstances(!1)),s.registerVersion(qA,$A)}uP(kr);var cP=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Q,Dd=Dd||{},ne=cP||self;function cc(){}function dl(s){var e=typeof s;return e=e!="object"?e:s?Array.isArray(s)?"array":e:"null",e=="array"||e=="object"&&typeof s.length=="number"}function $o(s){var e=typeof s;return e=="object"&&s!=null||e=="function"}function lP(s){return Object.prototype.hasOwnProperty.call(s,dh)&&s[dh]||(s[dh]=++hP)}var dh="closure_uid_"+(1e9*Math.random()>>>0),hP=0;function fP(s,e,t){return s.call.apply(s.bind,arguments)}function dP(s,e,t){if(!s)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),s.apply(e,n)}}return function(){return s.apply(e,arguments)}}function St(s,e,t){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?St=fP:St=dP,St.apply(null,arguments)}function mu(s,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),s.apply(this,r)}}function wt(s,e){function t(){}t.prototype=e.prototype,s.X=e.prototype,s.prototype=new t,s.prototype.constructor=s,s.Wb=function(r,n,i){for(var a=Array(arguments.length-2),o=2;o<arguments.length;o++)a[o-2]=arguments[o];return e.prototype[n].apply(r,a)}}function Us(){this.s=this.s,this.o=this.o}var pP=0;Us.prototype.s=!1;Us.prototype.na=function(){!this.s&&(this.s=!0,this.M(),pP!=0)&&lP(this)};Us.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const q0=Array.prototype.indexOf?function(s,e){return Array.prototype.indexOf.call(s,e,void 0)}:function(s,e){if(typeof s=="string")return typeof e!="string"||e.length!=1?-1:s.indexOf(e,0);for(let t=0;t<s.length;t++)if(t in s&&s[t]===e)return t;return-1};function Rd(s){const e=s.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=s[r];return t}return[]}function vg(s,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(dl(r)){const n=s.length||0,i=r.length||0;s.length=n+i;for(let a=0;a<i;a++)s[n+a]=r[a]}else s.push(r)}}function Et(s,e){this.type=s,this.g=this.target=e,this.defaultPrevented=!1}Et.prototype.h=function(){this.defaultPrevented=!0};var mP=function(){if(!ne.addEventListener||!Object.defineProperty)return!1;var s=!1,e=Object.defineProperty({},"passive",{get:function(){s=!0}});try{ne.addEventListener("test",cc,e),ne.removeEventListener("test",cc,e)}catch{}return s}();function lc(s){return/^[\s\xa0]*$/.test(s)}var wg=String.prototype.trim?function(s){return s.trim()}:function(s){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(s)[1]};function ph(s,e){return s<e?-1:s>e?1:0}function pl(){var s=ne.navigator;return s&&(s=s.userAgent)?s:""}function Tr(s){return pl().indexOf(s)!=-1}function Md(s){return Md[" "](s),s}Md[" "]=cc;function gP(s){var e=wP;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=s(9)}var yP=Tr("Opera"),yi=Tr("Trident")||Tr("MSIE"),$0=Tr("Edge"),rf=$0||yi,j0=Tr("Gecko")&&!(pl().toLowerCase().indexOf("webkit")!=-1&&!Tr("Edge"))&&!(Tr("Trident")||Tr("MSIE"))&&!Tr("Edge"),vP=pl().toLowerCase().indexOf("webkit")!=-1&&!Tr("Edge");function G0(){var s=ne.document;return s?s.documentMode:void 0}var hc;e:{var mh="",gh=function(){var s=pl();if(j0)return/rv:([^\);]+)(\)|;)/.exec(s);if($0)return/Edge\/([\d\.]+)/.exec(s);if(yi)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(s);if(vP)return/WebKit\/(\S+)/.exec(s);if(yP)return/(?:Version)[ \/]?(\S+)/.exec(s)}();if(gh&&(mh=gh?gh[1]:""),yi){var yh=G0();if(yh!=null&&yh>parseFloat(mh)){hc=String(yh);break e}}hc=mh}var wP={};function TP(){return gP(function(){let s=0;const e=wg(String(hc)).split("."),t=wg("9").split("."),r=Math.max(e.length,t.length);for(let a=0;s==0&&a<r;a++){var n=e[a]||"",i=t[a]||"";do{if(n=/(\d*)(\D*)(.*)/.exec(n)||["","","",""],i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],n[0].length==0&&i[0].length==0)break;s=ph(n[1].length==0?0:parseInt(n[1],10),i[1].length==0?0:parseInt(i[1],10))||ph(n[2].length==0,i[2].length==0)||ph(n[2],i[2]),n=n[3],i=i[3]}while(s==0)}return 0<=s})}var sf;if(ne.document&&yi){var Tg=G0();sf=Tg||parseInt(hc,10)||void 0}else sf=void 0;var bP=sf;function Za(s,e){if(Et.call(this,s?s.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,s){var t=this.type=s.type,r=s.changedTouches&&s.changedTouches.length?s.changedTouches[0]:null;if(this.target=s.target||s.srcElement,this.g=e,e=s.relatedTarget){if(j0){e:{try{Md(e.nodeName);var n=!0;break e}catch{}n=!1}n||(e=null)}}else t=="mouseover"?e=s.fromElement:t=="mouseout"&&(e=s.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=s.clientX!==void 0?s.clientX:s.pageX,this.clientY=s.clientY!==void 0?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0),this.button=s.button,this.key=s.key||"",this.ctrlKey=s.ctrlKey,this.altKey=s.altKey,this.shiftKey=s.shiftKey,this.metaKey=s.metaKey,this.pointerId=s.pointerId||0,this.pointerType=typeof s.pointerType=="string"?s.pointerType:SP[s.pointerType]||"",this.state=s.state,this.i=s,s.defaultPrevented&&Za.X.h.call(this)}}wt(Za,Et);var SP={2:"touch",3:"pen",4:"mouse"};Za.prototype.h=function(){Za.X.h.call(this);var s=this.i;s.preventDefault?s.preventDefault():s.returnValue=!1};var jo="closure_listenable_"+(1e6*Math.random()|0),EP=0;function IP(s,e,t,r,n){this.listener=s,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=n,this.key=++EP,this.ba=this.ea=!1}function ml(s){s.ba=!0,s.listener=null,s.proxy=null,s.src=null,s.ha=null}function Ld(s,e,t){for(const r in s)e.call(t,s[r],r,s)}function z0(s){const e={};for(const t in s)e[t]=s[t];return e}const bg="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function W0(s,e){let t,r;for(let n=1;n<arguments.length;n++){r=arguments[n];for(t in r)s[t]=r[t];for(let i=0;i<bg.length;i++)t=bg[i],Object.prototype.hasOwnProperty.call(r,t)&&(s[t]=r[t])}}function gl(s){this.src=s,this.g={},this.h=0}gl.prototype.add=function(s,e,t,r,n){var i=s.toString();s=this.g[i],s||(s=this.g[i]=[],this.h++);var a=af(s,e,r,n);return-1<a?(e=s[a],t||(e.ea=!1)):(e=new IP(e,this.src,i,!!r,n),e.ea=t,s.push(e)),e};function nf(s,e){var t=e.type;if(t in s.g){var r=s.g[t],n=q0(r,e),i;(i=0<=n)&&Array.prototype.splice.call(r,n,1),i&&(ml(e),s.g[t].length==0&&(delete s.g[t],s.h--))}}function af(s,e,t,r){for(var n=0;n<s.length;++n){var i=s[n];if(!i.ba&&i.listener==e&&i.capture==!!t&&i.ha==r)return n}return-1}var Fd="closure_lm_"+(1e6*Math.random()|0),vh={};function K0(s,e,t,r,n){if(r&&r.once)return Q0(s,e,t,r,n);if(Array.isArray(e)){for(var i=0;i<e.length;i++)K0(s,e[i],t,r,n);return null}return t=Vd(t),s&&s[jo]?s.N(e,t,$o(r)?!!r.capture:!!r,n):H0(s,e,t,!1,r,n)}function H0(s,e,t,r,n,i){if(!e)throw Error("Invalid event type");var a=$o(n)?!!n.capture:!!n,o=Bd(s);if(o||(s[Fd]=o=new gl(s)),t=o.add(e,t,r,a,i),t.proxy)return t;if(r=_P(),t.proxy=r,r.src=s,r.listener=t,s.addEventListener)mP||(n=a),n===void 0&&(n=!1),s.addEventListener(e.toString(),r,n);else if(s.attachEvent)s.attachEvent(J0(e.toString()),r);else if(s.addListener&&s.removeListener)s.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return t}function _P(){function s(t){return e.call(s.src,s.listener,t)}const e=xP;return s}function Q0(s,e,t,r,n){if(Array.isArray(e)){for(var i=0;i<e.length;i++)Q0(s,e[i],t,r,n);return null}return t=Vd(t),s&&s[jo]?s.O(e,t,$o(r)?!!r.capture:!!r,n):H0(s,e,t,!0,r,n)}function Y0(s,e,t,r,n){if(Array.isArray(e))for(var i=0;i<e.length;i++)Y0(s,e[i],t,r,n);else r=$o(r)?!!r.capture:!!r,t=Vd(t),s&&s[jo]?(s=s.i,e=String(e).toString(),e in s.g&&(i=s.g[e],t=af(i,t,r,n),-1<t&&(ml(i[t]),Array.prototype.splice.call(i,t,1),i.length==0&&(delete s.g[e],s.h--)))):s&&(s=Bd(s))&&(e=s.g[e.toString()],s=-1,e&&(s=af(e,t,r,n)),(t=-1<s?e[s]:null)&&Ud(t))}function Ud(s){if(typeof s!="number"&&s&&!s.ba){var e=s.src;if(e&&e[jo])nf(e.i,s);else{var t=s.type,r=s.proxy;e.removeEventListener?e.removeEventListener(t,r,s.capture):e.detachEvent?e.detachEvent(J0(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Bd(e))?(nf(t,s),t.h==0&&(t.src=null,e[Fd]=null)):ml(s)}}}function J0(s){return s in vh?vh[s]:vh[s]="on"+s}function xP(s,e){if(s.ba)s=!0;else{e=new Za(e,this);var t=s.listener,r=s.ha||s.src;s.ea&&Ud(s),s=t.call(r,e)}return s}function Bd(s){return s=s[Fd],s instanceof gl?s:null}var wh="__closure_events_fn_"+(1e9*Math.random()>>>0);function Vd(s){return typeof s=="function"?s:(s[wh]||(s[wh]=function(e){return s.handleEvent(e)}),s[wh])}function ot(){Us.call(this),this.i=new gl(this),this.P=this,this.I=null}wt(ot,Us);ot.prototype[jo]=!0;ot.prototype.removeEventListener=function(s,e,t,r){Y0(this,s,e,t,r)};function gt(s,e){var t,r=s.I;if(r)for(t=[];r;r=r.I)t.push(r);if(s=s.P,r=e.type||e,typeof e=="string")e=new Et(e,s);else if(e instanceof Et)e.target=e.target||s;else{var n=e;e=new Et(r,s),W0(e,n)}if(n=!0,t)for(var i=t.length-1;0<=i;i--){var a=e.g=t[i];n=gu(a,r,!0,e)&&n}if(a=e.g=s,n=gu(a,r,!0,e)&&n,n=gu(a,r,!1,e)&&n,t)for(i=0;i<t.length;i++)a=e.g=t[i],n=gu(a,r,!1,e)&&n}ot.prototype.M=function(){if(ot.X.M.call(this),this.i){var s=this.i,e;for(e in s.g){for(var t=s.g[e],r=0;r<t.length;r++)ml(t[r]);delete s.g[e],s.h--}}this.I=null};ot.prototype.N=function(s,e,t,r){return this.i.add(String(s),e,!1,t,r)};ot.prototype.O=function(s,e,t,r){return this.i.add(String(s),e,!0,t,r)};function gu(s,e,t,r){if(e=s.i.g[String(e)],!e)return!0;e=e.concat();for(var n=!0,i=0;i<e.length;++i){var a=e[i];if(a&&!a.ba&&a.capture==t){var o=a.listener,u=a.ha||a.src;a.ea&&nf(s.i,a),n=o.call(u,r)!==!1&&n}}return n&&!r.defaultPrevented}var qd=ne.JSON.stringify;function AP(){var s=ew;let e=null;return s.g&&(e=s.g,s.g=s.g.next,s.g||(s.h=null),e.next=null),e}class PP{constructor(){this.h=this.g=null}add(e,t){const r=X0.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}}var X0=new class{constructor(s,e){this.i=s,this.j=e,this.h=0,this.g=null}get(){let s;return 0<this.h?(this.h--,s=this.g,this.g=s.next,s.next=null):s=this.i(),s}}(()=>new CP,s=>s.reset());class CP{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function kP(s){ne.setTimeout(()=>{throw s},0)}function Z0(s,e){of||NP(),uf||(of(),uf=!0),ew.add(s,e)}var of;function NP(){var s=ne.Promise.resolve(void 0);of=function(){s.then(OP)}}var uf=!1,ew=new PP;function OP(){for(var s;s=AP();){try{s.h.call(s.g)}catch(t){kP(t)}var e=X0;e.j(s),100>e.h&&(e.h++,s.next=e.g,e.g=s)}uf=!1}function yl(s,e){ot.call(this),this.h=s||1,this.g=e||ne,this.j=St(this.lb,this),this.l=Date.now()}wt(yl,ot);Q=yl.prototype;Q.ca=!1;Q.R=null;Q.lb=function(){if(this.ca){var s=Date.now()-this.l;0<s&&s<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-s):(this.R&&(this.g.clearTimeout(this.R),this.R=null),gt(this,"tick"),this.ca&&($d(this),this.start()))}};Q.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function $d(s){s.ca=!1,s.R&&(s.g.clearTimeout(s.R),s.R=null)}Q.M=function(){yl.X.M.call(this),$d(this),delete this.g};function jd(s,e,t){if(typeof s=="function")t&&(s=St(s,t));else if(s&&typeof s.handleEvent=="function")s=St(s.handleEvent,s);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:ne.setTimeout(s,e||0)}function tw(s){s.g=jd(()=>{s.g=null,s.i&&(s.i=!1,tw(s))},s.j);const e=s.h;s.h=null,s.m.apply(null,e)}class DP extends Us{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:tw(this)}M(){super.M(),this.g&&(ne.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function eo(s){Us.call(this),this.h=s,this.g={}}wt(eo,Us);var Sg=[];function rw(s,e,t,r){Array.isArray(t)||(t&&(Sg[0]=t.toString()),t=Sg);for(var n=0;n<t.length;n++){var i=K0(e,t[n],r||s.handleEvent,!1,s.h||s);if(!i)break;s.g[i.key]=i}}function sw(s){Ld(s.g,function(e,t){this.g.hasOwnProperty(t)&&Ud(e)},s),s.g={}}eo.prototype.M=function(){eo.X.M.call(this),sw(this)};eo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function vl(){this.g=!0}vl.prototype.Aa=function(){this.g=!1};function RP(s,e,t,r,n,i){s.info(function(){if(s.g)if(i)for(var a="",o=i.split("&"),u=0;u<o.length;u++){var c=o[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");a=2<=h.length&&h[1]=="type"?a+(l+"="+c+"&"):a+(l+"=redacted&")}}else a=null;else a=i;return"XMLHTTP REQ ("+r+") [attempt "+n+"]: "+e+`
`+t+`
`+a})}function MP(s,e,t,r,n,i,a){s.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+n+"]: "+e+`
`+t+`
`+i+" "+a})}function Jn(s,e,t,r){s.info(function(){return"XMLHTTP TEXT ("+e+"): "+FP(s,t)+(r?" "+r:"")})}function LP(s,e){s.info(function(){return"TIMEOUT: "+e})}vl.prototype.info=function(){};function FP(s,e){if(!s.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t){for(s=0;s<t.length;s++)if(Array.isArray(t[s])){var r=t[s];if(!(2>r.length)){var n=r[1];if(Array.isArray(n)&&!(1>n.length)){var i=n[0];if(i!="noop"&&i!="stop"&&i!="close")for(var a=1;a<n.length;a++)n[a]=""}}}}return qd(t)}catch{return e}}var Dn={},Eg=null;function wl(){return Eg=Eg||new ot}Dn.Pa="serverreachability";function nw(s){Et.call(this,Dn.Pa,s)}wt(nw,Et);function to(s){const e=wl();gt(e,new nw(e))}Dn.STAT_EVENT="statevent";function iw(s,e){Et.call(this,Dn.STAT_EVENT,s),this.stat=e}wt(iw,Et);function Pt(s){const e=wl();gt(e,new iw(e,s))}Dn.Qa="timingevent";function aw(s,e){Et.call(this,Dn.Qa,s),this.size=e}wt(aw,Et);function Go(s,e){if(typeof s!="function")throw Error("Fn must not be null and must be a function");return ne.setTimeout(function(){s()},e)}var Tl={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},ow={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Gd(){}Gd.prototype.h=null;function Ig(s){return s.h||(s.h=s.i())}function uw(){}var zo={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function zd(){Et.call(this,"d")}wt(zd,Et);function Wd(){Et.call(this,"c")}wt(Wd,Et);var cf;function bl(){}wt(bl,Gd);bl.prototype.g=function(){return new XMLHttpRequest};bl.prototype.i=function(){return{}};cf=new bl;function Wo(s,e,t,r){this.l=s,this.j=e,this.m=t,this.U=r||1,this.S=new eo(this),this.O=UP,s=rf?125:void 0,this.T=new yl(s),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new cw}function cw(){this.i=null,this.g="",this.h=!1}var UP=45e3,lf={},fc={};Q=Wo.prototype;Q.setTimeout=function(s){this.O=s};function hf(s,e,t){s.K=1,s.v=El(Xr(e)),s.s=t,s.P=!0,lw(s,null)}function lw(s,e){s.F=Date.now(),Ko(s),s.A=Xr(s.v);var t=s.A,r=s.U;Array.isArray(r)||(r=[String(r)]),vw(t.i,"t",r),s.C=0,t=s.l.H,s.h=new cw,s.g=Bw(s.l,t?e:null,!s.s),0<s.N&&(s.L=new DP(St(s.La,s,s.g),s.N)),rw(s.S,s.g,"readystatechange",s.ib),e=s.H?z0(s.H):{},s.s?(s.u||(s.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",s.g.da(s.A,s.u,s.s,e)):(s.u="GET",s.g.da(s.A,s.u,null,e)),to(),RP(s.j,s.u,s.A,s.m,s.U,s.s)}Q.ib=function(s){s=s.target;const e=this.L;e&&qr(s)==3?e.l():this.La(s)};Q.La=function(s){try{if(s==this.g)e:{const l=qr(this.g);var e=this.g.Ea();const h=this.g.aa();if(!(3>l)&&(l!=3||rf||this.g&&(this.h.h||this.g.fa()||Pg(this.g)))){this.I||l!=4||e==7||(e==8||0>=h?to(3):to(2)),Sl(this);var t=this.g.aa();this.Y=t;t:if(hw(this)){var r=Pg(this.g);s="";var n=r.length,i=qr(this.g)==4;if(!this.h.i){if(typeof TextDecoder=="undefined"){nn(this),Oa(this);var a="";break t}this.h.i=new ne.TextDecoder}for(e=0;e<n;e++)this.h.h=!0,s+=this.h.i.decode(r[e],{stream:i&&e==n-1});r.splice(0,n),this.h.g+=s,this.C=0,a=this.h.g}else a=this.g.fa();if(this.i=t==200,MP(this.j,this.u,this.A,this.m,this.U,l,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var o,u=this.g;if((o=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!lc(o)){var c=o;break t}}c=null}if(t=c)Jn(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ff(this,t);else{this.i=!1,this.o=3,Pt(12),nn(this),Oa(this);break e}}this.P?(fw(this,l,a),rf&&this.i&&l==3&&(rw(this.S,this.T,"tick",this.hb),this.T.start())):(Jn(this.j,this.m,a,null),ff(this,a)),l==4&&nn(this),this.i&&!this.I&&(l==4?Mw(this.l,this):(this.i=!1,Ko(this)))}else t==400&&0<a.indexOf("Unknown SID")?(this.o=3,Pt(12)):(this.o=0,Pt(13)),nn(this),Oa(this)}}}catch{}finally{}};function hw(s){return s.g?s.u=="GET"&&s.K!=2&&s.l.Da:!1}function fw(s,e,t){let r=!0,n;for(;!s.I&&s.C<t.length;)if(n=BP(s,t),n==fc){e==4&&(s.o=4,Pt(14),r=!1),Jn(s.j,s.m,null,"[Incomplete Response]");break}else if(n==lf){s.o=4,Pt(15),Jn(s.j,s.m,t,"[Invalid Chunk]"),r=!1;break}else Jn(s.j,s.m,n,null),ff(s,n);hw(s)&&n!=fc&&n!=lf&&(s.h.g="",s.C=0),e!=4||t.length!=0||s.h.h||(s.o=1,Pt(16),r=!1),s.i=s.i&&r,r?0<t.length&&!s.$&&(s.$=!0,e=s.l,e.g==s&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Zd(e),e.K=!0,Pt(11))):(Jn(s.j,s.m,t,"[Invalid Chunked Response]"),nn(s),Oa(s))}Q.hb=function(){if(this.g){var s=qr(this.g),e=this.g.fa();this.C<e.length&&(Sl(this),fw(this,s,e),this.i&&s!=4&&Ko(this))}};function BP(s,e){var t=s.C,r=e.indexOf(`
`,t);return r==-1?fc:(t=Number(e.substring(t,r)),isNaN(t)?lf:(r+=1,r+t>e.length?fc:(e=e.substr(r,t),s.C=r+t,e)))}Q.cancel=function(){this.I=!0,nn(this)};function Ko(s){s.V=Date.now()+s.O,dw(s,s.O)}function dw(s,e){if(s.B!=null)throw Error("WatchDog timer not null");s.B=Go(St(s.gb,s),e)}function Sl(s){s.B&&(ne.clearTimeout(s.B),s.B=null)}Q.gb=function(){this.B=null;const s=Date.now();0<=s-this.V?(LP(this.j,this.A),this.K!=2&&(to(),Pt(17)),nn(this),this.o=2,Oa(this)):dw(this,this.V-s)};function Oa(s){s.l.G==0||s.I||Mw(s.l,s)}function nn(s){Sl(s);var e=s.L;e&&typeof e.na=="function"&&e.na(),s.L=null,$d(s.T),sw(s.S),s.g&&(e=s.g,s.g=null,e.abort(),e.na())}function ff(s,e){try{var t=s.l;if(t.G!=0&&(t.g==s||df(t.h,s))){if(!s.J&&df(t.h,s)&&t.G==3){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var n=r;if(n[0]==0){e:if(!t.u){if(t.g)if(t.g.F+3e3<s.F)mc(t),xl(t);else break e;Xd(t),Pt(18)}}else t.Ba=n[1],0<t.Ba-t.T&&37500>n[2]&&t.L&&t.A==0&&!t.v&&(t.v=Go(St(t.cb,t),6e3));if(1>=bw(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else an(t,11)}else if((s.J||t.g==s)&&mc(t),!lc(e))for(n=t.Fa.g.parse(e),e=0;e<n.length;e++){let c=n[e];if(t.T=c[0],c=c[1],t.G==2)if(c[0]=="c"){t.I=c[1],t.ka=c[2];const l=c[3];l!=null&&(t.ma=l,t.j.info("VER="+t.ma));const h=c[4];h!=null&&(t.Ca=h,t.j.info("SVER="+t.Ca));const f=c[5];f!=null&&typeof f=="number"&&0<f&&(r=1.5*f,t.J=r,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const d=s.g;if(d){const g=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(g){var i=r.h;i.g||g.indexOf("spdy")==-1&&g.indexOf("quic")==-1&&g.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(Kd(i,i.h),i.h=null))}if(r.D){const p=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;p&&(r.za=p,Re(r.F,r.D,p))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-s.F,t.j.info("Handshake RTT: "+t.P+"ms")),r=t;var a=s;if(r.sa=Uw(r,r.H?r.ka:null,r.V),a.J){Sw(r.h,a);var o=a,u=r.J;u&&o.setTimeout(u),o.B&&(Sl(o),Ko(o)),r.g=a}else Dw(r);0<t.i.length&&Al(t)}else c[0]!="stop"&&c[0]!="close"||an(t,7);else t.G==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?an(t,7):Jd(t):c[0]!="noop"&&t.l&&t.l.wa(c),t.A=0)}}to(4)}catch{}}function VP(s){if(s.W&&typeof s.W=="function")return s.W();if(typeof Map!="undefined"&&s instanceof Map||typeof Set!="undefined"&&s instanceof Set)return Array.from(s.values());if(typeof s=="string")return s.split("");if(dl(s)){for(var e=[],t=s.length,r=0;r<t;r++)e.push(s[r]);return e}e=[],t=0;for(r in s)e[t++]=s[r];return e}function qP(s){if(s.oa&&typeof s.oa=="function")return s.oa();if(!s.W||typeof s.W!="function"){if(typeof Map!="undefined"&&s instanceof Map)return Array.from(s.keys());if(!(typeof Set!="undefined"&&s instanceof Set)){if(dl(s)||typeof s=="string"){var e=[];s=s.length;for(var t=0;t<s;t++)e.push(t);return e}e=[],t=0;for(const r in s)e[t++]=r;return e}}}function pw(s,e){if(s.forEach&&typeof s.forEach=="function")s.forEach(e,void 0);else if(dl(s)||typeof s=="string")Array.prototype.forEach.call(s,e,void 0);else for(var t=qP(s),r=VP(s),n=r.length,i=0;i<n;i++)e.call(void 0,r[i],t&&t[i],s)}var mw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $P(s,e){if(s){s=s.split("&");for(var t=0;t<s.length;t++){var r=s[t].indexOf("="),n=null;if(0<=r){var i=s[t].substring(0,r);n=s[t].substring(r+1)}else i=s[t];e(i,n?decodeURIComponent(n.replace(/\+/g," ")):"")}}}function gn(s,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,s instanceof gn){this.h=e!==void 0?e:s.h,dc(this,s.j),this.s=s.s,this.g=s.g,pc(this,s.m),this.l=s.l,e=s.i;var t=new ro;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),_g(this,t),this.o=s.o}else s&&(t=String(s).match(mw))?(this.h=!!e,dc(this,t[1]||"",!0),this.s=Ea(t[2]||""),this.g=Ea(t[3]||"",!0),pc(this,t[4]),this.l=Ea(t[5]||"",!0),_g(this,t[6]||"",!0),this.o=Ea(t[7]||"")):(this.h=!!e,this.i=new ro(null,this.h))}gn.prototype.toString=function(){var s=[],e=this.j;e&&s.push(Ia(e,xg,!0),":");var t=this.g;return(t||e=="file")&&(s.push("//"),(e=this.s)&&s.push(Ia(e,xg,!0),"@"),s.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.m,t!=null&&s.push(":",String(t))),(t=this.l)&&(this.g&&t.charAt(0)!="/"&&s.push("/"),s.push(Ia(t,t.charAt(0)=="/"?zP:GP,!0))),(t=this.i.toString())&&s.push("?",t),(t=this.o)&&s.push("#",Ia(t,KP)),s.join("")};function Xr(s){return new gn(s)}function dc(s,e,t){s.j=t?Ea(e,!0):e,s.j&&(s.j=s.j.replace(/:$/,""))}function pc(s,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);s.m=e}else s.m=null}function _g(s,e,t){e instanceof ro?(s.i=e,HP(s.i,s.h)):(t||(e=Ia(e,WP)),s.i=new ro(e,s.h))}function Re(s,e,t){s.i.set(e,t)}function El(s){return Re(s,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),s}function Ea(s,e){return s?e?decodeURI(s.replace(/%25/g,"%2525")):decodeURIComponent(s):""}function Ia(s,e,t){return typeof s=="string"?(s=encodeURI(s).replace(e,jP),t&&(s=s.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),s):null}function jP(s){return s=s.charCodeAt(0),"%"+(s>>4&15).toString(16)+(s&15).toString(16)}var xg=/[#\/\?@]/g,GP=/[#\?:]/g,zP=/[#\?]/g,WP=/[#\?@]/g,KP=/#/g;function ro(s,e){this.h=this.g=null,this.i=s||null,this.j=!!e}function Bs(s){s.g||(s.g=new Map,s.h=0,s.i&&$P(s.i,function(e,t){s.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}Q=ro.prototype;Q.add=function(s,e){Bs(this),this.i=null,s=$i(this,s);var t=this.g.get(s);return t||this.g.set(s,t=[]),t.push(e),this.h+=1,this};function gw(s,e){Bs(s),e=$i(s,e),s.g.has(e)&&(s.i=null,s.h-=s.g.get(e).length,s.g.delete(e))}function yw(s,e){return Bs(s),e=$i(s,e),s.g.has(e)}Q.forEach=function(s,e){Bs(this),this.g.forEach(function(t,r){t.forEach(function(n){s.call(e,n,r,this)},this)},this)};Q.oa=function(){Bs(this);const s=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const n=s[r];for(let i=0;i<n.length;i++)t.push(e[r])}return t};Q.W=function(s){Bs(this);let e=[];if(typeof s=="string")yw(this,s)&&(e=e.concat(this.g.get($i(this,s))));else{s=Array.from(this.g.values());for(let t=0;t<s.length;t++)e=e.concat(s[t])}return e};Q.set=function(s,e){return Bs(this),this.i=null,s=$i(this,s),yw(this,s)&&(this.h-=this.g.get(s).length),this.g.set(s,[e]),this.h+=1,this};Q.get=function(s,e){return s?(s=this.W(s),0<s.length?String(s[0]):e):e};function vw(s,e,t){gw(s,e),0<t.length&&(s.i=null,s.g.set($i(s,e),Rd(t)),s.h+=t.length)}Q.toString=function(){if(this.i)return this.i;if(!this.g)return"";const s=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const i=encodeURIComponent(String(r)),a=this.W(r);for(r=0;r<a.length;r++){var n=i;a[r]!==""&&(n+="="+encodeURIComponent(String(a[r]))),s.push(n)}}return this.i=s.join("&")};function $i(s,e){return e=String(e),s.j&&(e=e.toLowerCase()),e}function HP(s,e){e&&!s.j&&(Bs(s),s.i=null,s.g.forEach(function(t,r){var n=r.toLowerCase();r!=n&&(gw(this,r),vw(this,n,t))},s)),s.j=e}var QP=class{constructor(s,e){this.h=s,this.g=e}};function ww(s){this.l=s||YP,ne.PerformanceNavigationTiming?(s=ne.performance.getEntriesByType("navigation"),s=0<s.length&&(s[0].nextHopProtocol=="hq"||s[0].nextHopProtocol=="h2")):s=!!(ne.g&&ne.g.Ga&&ne.g.Ga()&&ne.g.Ga().$b),this.j=s?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var YP=10;function Tw(s){return s.h?!0:s.g?s.g.size>=s.j:!1}function bw(s){return s.h?1:s.g?s.g.size:0}function df(s,e){return s.h?s.h==e:s.g?s.g.has(e):!1}function Kd(s,e){s.g?s.g.add(e):s.h=e}function Sw(s,e){s.h&&s.h==e?s.h=null:s.g&&s.g.has(e)&&s.g.delete(e)}ww.prototype.cancel=function(){if(this.i=Ew(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const s of this.g.values())s.cancel();this.g.clear()}};function Ew(s){if(s.h!=null)return s.i.concat(s.h.D);if(s.g!=null&&s.g.size!==0){let e=s.i;for(const t of s.g.values())e=e.concat(t.D);return e}return Rd(s.i)}function Hd(){}Hd.prototype.stringify=function(s){return ne.JSON.stringify(s,void 0)};Hd.prototype.parse=function(s){return ne.JSON.parse(s,void 0)};function JP(){this.g=new Hd}function XP(s,e,t){const r=t||"";try{pw(s,function(n,i){let a=n;$o(n)&&(a=qd(n)),e.push(r+i+"="+encodeURIComponent(a))})}catch(n){throw e.push(r+"type="+encodeURIComponent("_badmap")),n}}function ZP(s,e){const t=new vl;if(ne.Image){const r=new Image;r.onload=mu(yu,t,r,"TestLoadImage: loaded",!0,e),r.onerror=mu(yu,t,r,"TestLoadImage: error",!1,e),r.onabort=mu(yu,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=mu(yu,t,r,"TestLoadImage: timeout",!1,e),ne.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=s}else e(!1)}function yu(s,e,t,r,n){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,n(r)}catch{}}function Ho(s){this.l=s.ac||null,this.j=s.jb||!1}wt(Ho,Gd);Ho.prototype.g=function(){return new Il(this.l,this.j)};Ho.prototype.i=function(s){return function(){return s}}({});function Il(s,e){ot.call(this),this.D=s,this.u=e,this.m=void 0,this.readyState=Qd,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}wt(Il,ot);var Qd=0;Q=Il.prototype;Q.open=function(s,e){if(this.readyState!=Qd)throw this.abort(),Error("Error reopening a connection");this.C=s,this.B=e,this.readyState=1,so(this)};Q.send=function(s){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};s&&(e.body=s),(this.D||ne).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))};Q.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Qo(this)),this.readyState=Qd};Q.Wa=function(s){if(this.g&&(this.l=s,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=s.headers,this.readyState=2,so(this)),this.g&&(this.readyState=3,so(this),this.g)))if(this.responseType==="arraybuffer")s.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof ne.ReadableStream!="undefined"&&"body"in s){if(this.j=s.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Iw(this)}else s.text().then(this.Va.bind(this),this.ga.bind(this))};function Iw(s){s.j.read().then(s.Ta.bind(s)).catch(s.ga.bind(s))}Q.Ta=function(s){if(this.g){if(this.u&&s.value)this.response.push(s.value);else if(!this.u){var e=s.value?s.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!s.done}))&&(this.response=this.responseText+=e)}s.done?Qo(this):so(this),this.readyState==3&&Iw(this)}};Q.Va=function(s){this.g&&(this.response=this.responseText=s,Qo(this))};Q.Ua=function(s){this.g&&(this.response=s,Qo(this))};Q.ga=function(){this.g&&Qo(this)};function Qo(s){s.readyState=4,s.l=null,s.j=null,s.A=null,so(s)}Q.setRequestHeader=function(s,e){this.v.append(s,e)};Q.getResponseHeader=function(s){return this.h&&this.h.get(s.toLowerCase())||""};Q.getAllResponseHeaders=function(){if(!this.h)return"";const s=[],e=this.h.entries();for(var t=e.next();!t.done;)t=t.value,s.push(t[0]+": "+t[1]),t=e.next();return s.join(`\r
`)};function so(s){s.onreadystatechange&&s.onreadystatechange.call(s)}Object.defineProperty(Il.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(s){this.m=s?"include":"same-origin"}});var eC=ne.JSON.parse;function $e(s){ot.call(this),this.headers=new Map,this.u=s||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=_w,this.K=this.L=!1}wt($e,ot);var _w="",tC=/^https?$/i,rC=["POST","PUT"];Q=$e.prototype;Q.Ka=function(s){this.L=s};Q.da=function(s,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+s);e=e?e.toUpperCase():"GET",this.H=s,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():cf.g(),this.C=this.u?Ig(this.u):Ig(cf),this.g.onreadystatechange=St(this.Ha,this);try{this.F=!0,this.g.open(e,String(s),!0),this.F=!1}catch(i){Ag(this,i);return}if(s=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var n in r)t.set(n,r[n]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const i of r.keys())t.set(i,r.get(i));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(t.keys()).find(i=>i.toLowerCase()=="content-type"),n=ne.FormData&&s instanceof ne.FormData,!(0<=q0(rC,e))||r||n||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,a]of t)this.g.setRequestHeader(i,a);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Pw(this),0<this.B&&((this.K=sC(this.g))?(this.g.timeout=this.B,this.g.ontimeout=St(this.qa,this)):this.A=jd(this.qa,this.B,this)),this.v=!0,this.g.send(s),this.v=!1}catch(i){Ag(this,i)}};function sC(s){return yi&&TP()&&typeof s.timeout=="number"&&s.ontimeout!==void 0}Q.qa=function(){typeof Dd!="undefined"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,gt(this,"timeout"),this.abort(8))};function Ag(s,e){s.h=!1,s.g&&(s.l=!0,s.g.abort(),s.l=!1),s.j=e,s.m=5,xw(s),_l(s)}function xw(s){s.D||(s.D=!0,gt(s,"complete"),gt(s,"error"))}Q.abort=function(s){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=s||7,gt(this,"complete"),gt(this,"abort"),_l(this))};Q.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),_l(this,!0)),$e.X.M.call(this)};Q.Ha=function(){this.s||(this.F||this.v||this.l?Aw(this):this.fb())};Q.fb=function(){Aw(this)};function Aw(s){if(s.h&&typeof Dd!="undefined"&&(!s.C[1]||qr(s)!=4||s.aa()!=2)){if(s.v&&qr(s)==4)jd(s.Ha,0,s);else if(gt(s,"readystatechange"),qr(s)==4){s.h=!1;try{const o=s.aa();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=o===0){var n=String(s.H).match(mw)[1]||null;if(!n&&ne.self&&ne.self.location){var i=ne.self.location.protocol;n=i.substr(0,i.length-1)}r=!tC.test(n?n.toLowerCase():"")}t=r}if(t)gt(s,"complete"),gt(s,"success");else{s.m=6;try{var a=2<qr(s)?s.g.statusText:""}catch{a=""}s.j=a+" ["+s.aa()+"]",xw(s)}}finally{_l(s)}}}}function _l(s,e){if(s.g){Pw(s);const t=s.g,r=s.C[0]?cc:null;s.g=null,s.C=null,e||gt(s,"ready");try{t.onreadystatechange=r}catch{}}}function Pw(s){s.g&&s.K&&(s.g.ontimeout=null),s.A&&(ne.clearTimeout(s.A),s.A=null)}function qr(s){return s.g?s.g.readyState:0}Q.aa=function(){try{return 2<qr(this)?this.g.status:-1}catch{return-1}};Q.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}};Q.Sa=function(s){if(this.g){var e=this.g.responseText;return s&&e.indexOf(s)==0&&(e=e.substring(s.length)),eC(e)}};function Pg(s){try{if(!s.g)return null;if("response"in s.g)return s.g.response;switch(s.J){case _w:case"text":return s.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in s.g)return s.g.mozResponseArrayBuffer}return null}catch{return null}}Q.Ea=function(){return this.m};Q.Oa=function(){return typeof this.j=="string"?this.j:String(this.j)};function Cw(s){let e="";return Ld(s,function(t,r){e+=r,e+=":",e+=t,e+=`\r
`}),e}function Yd(s,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=Cw(t),typeof s=="string"?t!=null&&encodeURIComponent(String(t)):Re(s,e,t))}function oa(s,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[s]||e}function kw(s){this.Ca=0,this.i=[],this.j=new vl,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=oa("failFast",!1,s),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=oa("baseRetryDelayMs",5e3,s),this.bb=oa("retryDelaySeedMs",1e4,s),this.$a=oa("forwardChannelMaxRetries",2,s),this.ta=oa("forwardChannelRequestTimeoutMs",2e4,s),this.ra=s&&s.xmlHttpFactory||void 0,this.Da=s&&s.Zb||!1,this.J=void 0,this.H=s&&s.supportsCrossDomainXhr||!1,this.I="",this.h=new ww(s&&s.concurrentRequestLimit),this.Fa=new JP,this.O=s&&s.fastHandshake||!1,this.N=s&&s.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=s&&s.Xb||!1,s&&s.Aa&&this.j.Aa(),s&&s.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&s&&s.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}Q=kw.prototype;Q.ma=8;Q.G=1;function Jd(s){if(Nw(s),s.G==3){var e=s.U++,t=Xr(s.F);Re(t,"SID",s.I),Re(t,"RID",e),Re(t,"TYPE","terminate"),Yo(s,t),e=new Wo(s,s.j,e,void 0),e.K=2,e.v=El(Xr(t)),t=!1,ne.navigator&&ne.navigator.sendBeacon&&(t=ne.navigator.sendBeacon(e.v.toString(),"")),!t&&ne.Image&&(new Image().src=e.v,t=!0),t||(e.g=Bw(e.l,null),e.g.da(e.v)),e.F=Date.now(),Ko(e)}Fw(s)}function xl(s){s.g&&(Zd(s),s.g.cancel(),s.g=null)}function Nw(s){xl(s),s.u&&(ne.clearTimeout(s.u),s.u=null),mc(s),s.h.cancel(),s.m&&(typeof s.m=="number"&&ne.clearTimeout(s.m),s.m=null)}function Al(s){Tw(s.h)||s.m||(s.m=!0,Z0(s.Ja,s),s.C=0)}function nC(s,e){return bw(s.h)>=s.h.j-(s.m?1:0)?!1:s.m?(s.i=e.D.concat(s.i),!0):s.G==1||s.G==2||s.C>=(s.Za?0:s.$a)?!1:(s.m=Go(St(s.Ja,s,e),Lw(s,s.C)),s.C++,!0)}Q.Ja=function(s){if(this.m)if(this.m=null,this.G==1){if(!s){this.U=Math.floor(1e5*Math.random()),s=this.U++;const n=new Wo(this,this.j,s,void 0);let i=this.s;if(this.S&&(i?(i=z0(i),W0(i,this.S)):i=this.S),this.o!==null||this.N||(n.H=i,i=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){t:{var r=this.i[t];if("__data__"in r.g&&(r=r.g.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=t;break e}if(e===4096||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Ow(this,n,e),t=Xr(this.F),Re(t,"RID",s),Re(t,"CVER",22),this.D&&Re(t,"X-HTTP-Session-Id",this.D),Yo(this,t),i&&(this.N?e="headers="+encodeURIComponent(String(Cw(i)))+"&"+e:this.o&&Yd(t,this.o,i)),Kd(this.h,n),this.Ya&&Re(t,"TYPE","init"),this.O?(Re(t,"$req",e),Re(t,"SID","null"),n.Z=!0,hf(n,t,null)):hf(n,t,e),this.G=2}}else this.G==3&&(s?Cg(this,s):this.i.length==0||Tw(this.h)||Cg(this))};function Cg(s,e){var t;e?t=e.m:t=s.U++;const r=Xr(s.F);Re(r,"SID",s.I),Re(r,"RID",t),Re(r,"AID",s.T),Yo(s,r),s.o&&s.s&&Yd(r,s.o,s.s),t=new Wo(s,s.j,t,s.C+1),s.o===null&&(t.H=s.s),e&&(s.i=e.D.concat(s.i)),e=Ow(s,t,1e3),t.setTimeout(Math.round(.5*s.ta)+Math.round(.5*s.ta*Math.random())),Kd(s.h,t),hf(t,r,e)}function Yo(s,e){s.ia&&Ld(s.ia,function(t,r){Re(e,r,t)}),s.l&&pw({},function(t,r){Re(e,r,t)})}function Ow(s,e,t){t=Math.min(s.i.length,t);var r=s.l?St(s.l.Ra,s.l,s):null;e:{var n=s.i;let i=-1;for(;;){const a=["count="+t];i==-1?0<t?(i=n[0].h,a.push("ofs="+i)):i=0:a.push("ofs="+i);let o=!0;for(let u=0;u<t;u++){let c=n[u].h;const l=n[u].g;if(c-=i,0>c)i=Math.max(0,n[u].h-100),o=!1;else try{XP(l,a,"req"+c+"_")}catch{r&&r(l)}}if(o){r=a.join("&");break e}}}return s=s.i.splice(0,t),e.D=s,r}function Dw(s){s.g||s.u||(s.Z=1,Z0(s.Ia,s),s.A=0)}function Xd(s){return s.g||s.u||3<=s.A?!1:(s.Z++,s.u=Go(St(s.Ia,s),Lw(s,s.A)),s.A++,!0)}Q.Ia=function(){if(this.u=null,Rw(this),this.$&&!(this.K||this.g==null||0>=this.P)){var s=2*this.P;this.j.info("BP detection timer enabled: "+s),this.B=Go(St(this.eb,this),s)}};Q.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Pt(10),xl(this),Rw(this))};function Zd(s){s.B!=null&&(ne.clearTimeout(s.B),s.B=null)}function Rw(s){s.g=new Wo(s,s.j,"rpc",s.Z),s.o===null&&(s.g.H=s.s),s.g.N=0;var e=Xr(s.sa);Re(e,"RID","rpc"),Re(e,"SID",s.I),Re(e,"CI",s.L?"0":"1"),Re(e,"AID",s.T),Re(e,"TYPE","xmlhttp"),Yo(s,e),s.o&&s.s&&Yd(e,s.o,s.s),s.J&&s.g.setTimeout(s.J);var t=s.g;s=s.ka,t.K=1,t.v=El(Xr(e)),t.s=null,t.P=!0,lw(t,s)}Q.cb=function(){this.v!=null&&(this.v=null,xl(this),Xd(this),Pt(19))};function mc(s){s.v!=null&&(ne.clearTimeout(s.v),s.v=null)}function Mw(s,e){var t=null;if(s.g==e){mc(s),Zd(s),s.g=null;var r=2}else if(df(s.h,e))t=e.D,Sw(s.h,e),r=1;else return;if(s.G!=0){if(s.pa=e.Y,e.i)if(r==1){t=e.s?e.s.length:0,e=Date.now()-e.F;var n=s.C;r=wl(),gt(r,new aw(r,t)),Al(s)}else Dw(s);else if(n=e.o,n==3||n==0&&0<s.pa||!(r==1&&nC(s,e)||r==2&&Xd(s)))switch(t&&0<t.length&&(e=s.h,e.i=e.i.concat(t)),n){case 1:an(s,5);break;case 4:an(s,10);break;case 3:an(s,6);break;default:an(s,2)}}}function Lw(s,e){let t=s.Xa+Math.floor(Math.random()*s.bb);return s.l||(t*=2),t*e}function an(s,e){if(s.j.info("Error code "+e),e==2){var t=null;s.l&&(t=null);var r=St(s.kb,s);t||(t=new gn("//www.google.com/images/cleardot.gif"),ne.location&&ne.location.protocol=="http"||dc(t,"https"),El(t)),ZP(t.toString(),r)}else Pt(2);s.G=0,s.l&&s.l.va(e),Fw(s),Nw(s)}Q.kb=function(s){s?(this.j.info("Successfully pinged google.com"),Pt(2)):(this.j.info("Failed to ping google.com"),Pt(1))};function Fw(s){if(s.G=0,s.la=[],s.l){const e=Ew(s.h);(e.length!=0||s.i.length!=0)&&(vg(s.la,e),vg(s.la,s.i),s.h.i.length=0,Rd(s.i),s.i.length=0),s.l.ua()}}function Uw(s,e,t){var r=t instanceof gn?Xr(t):new gn(t,void 0);if(r.g!="")e&&(r.g=e+"."+r.g),pc(r,r.m);else{var n=ne.location;r=n.protocol,e=e?e+"."+n.hostname:n.hostname,n=+n.port;var i=new gn(null,void 0);r&&dc(i,r),e&&(i.g=e),n&&pc(i,n),t&&(i.l=t),r=i}return t=s.D,e=s.za,t&&e&&Re(r,t,e),Re(r,"VER",s.ma),Yo(s,r),r}function Bw(s,e,t){if(e&&!s.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=t&&s.Da&&!s.ra?new $e(new Ho({jb:!0})):new $e(s.ra),e.Ka(s.H),e}function Vw(){}Q=Vw.prototype;Q.xa=function(){};Q.wa=function(){};Q.va=function(){};Q.ua=function(){};Q.Ra=function(){};function gc(){if(yi&&!(10<=Number(bP)))throw Error("Environmental error: no available transport.")}gc.prototype.g=function(s,e){return new Wt(s,e)};function Wt(s,e){ot.call(this),this.g=new kw(e),this.l=s,this.h=e&&e.messageUrlParams||null,s=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(s?s["X-Client-Protocol"]="webchannel":s={"X-Client-Protocol":"webchannel"}),this.g.s=s,s=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(s?s["X-WebChannel-Content-Type"]=e.messageContentType:s={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(s?s["X-WebChannel-Client-Profile"]=e.ya:s={"X-WebChannel-Client-Profile":e.ya}),this.g.S=s,(s=e&&e.Yb)&&!lc(s)&&(this.g.o=s),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!lc(e)&&(this.g.D=e,s=this.h,s!==null&&e in s&&(s=this.h,e in s&&delete s[e])),this.j=new ji(this)}wt(Wt,ot);Wt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var s=this.g,e=this.l,t=this.h||void 0;Pt(0),s.V=e,s.ia=t||{},s.L=s.Y,s.F=Uw(s,null,s.V),Al(s)};Wt.prototype.close=function(){Jd(this.g)};Wt.prototype.u=function(s){var e=this.g;if(typeof s=="string"){var t={};t.__data__=s,s=t}else this.v&&(t={},t.__data__=qd(s),s=t);e.i.push(new QP(e.ab++,s)),e.G==3&&Al(e)};Wt.prototype.M=function(){this.g.l=null,delete this.j,Jd(this.g),delete this.g,Wt.X.M.call(this)};function qw(s){zd.call(this);var e=s.__sm__;if(e){e:{for(const t in e){s=t;break e}s=void 0}(this.i=s)&&(s=this.i,e=e!==null&&s in e?e[s]:void 0),this.data=e}else this.data=s}wt(qw,zd);function $w(){Wd.call(this),this.status=1}wt($w,Wd);function ji(s){this.g=s}wt(ji,Vw);ji.prototype.xa=function(){gt(this.g,"a")};ji.prototype.wa=function(s){gt(this.g,new qw(s))};ji.prototype.va=function(s){gt(this.g,new $w)};ji.prototype.ua=function(){gt(this.g,"b")};gc.prototype.createWebChannel=gc.prototype.g;Wt.prototype.send=Wt.prototype.u;Wt.prototype.open=Wt.prototype.m;Wt.prototype.close=Wt.prototype.close;Tl.NO_ERROR=0;Tl.TIMEOUT=8;Tl.HTTP_ERROR=6;ow.COMPLETE="complete";uw.EventType=zo;zo.OPEN="a";zo.CLOSE="b";zo.ERROR="c";zo.MESSAGE="d";ot.prototype.listen=ot.prototype.N;$e.prototype.listenOnce=$e.prototype.O;$e.prototype.getLastError=$e.prototype.Oa;$e.prototype.getLastErrorCode=$e.prototype.Ea;$e.prototype.getStatus=$e.prototype.aa;$e.prototype.getResponseJson=$e.prototype.Sa;$e.prototype.getResponseText=$e.prototype.fa;$e.prototype.send=$e.prototype.da;$e.prototype.setWithCredentials=$e.prototype.Ka;var iC=function(){return new gc},aC=function(){return wl()},Th=Tl,oC=ow,uC=Dn,kg={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},cC=Ho,vu=uw,lC=$e;const Ng="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}st.UNAUTHENTICATED=new st(null),st.GOOGLE_CREDENTIALS=new st("google-credentials-uid"),st.FIRST_PARTY=new st("first-party-uid"),st.MOCK_USER=new st("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gi="9.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs=new Bv("@firebase/firestore");function pf(){return xs.logLevel}function hC(s){xs.setLogLevel(s)}function L(s,...e){if(xs.logLevel<=wn.DEBUG){const t=e.map(ep);xs.debug(`Firestore (${Gi}): ${s}`,...t)}}function ze(s,...e){if(xs.logLevel<=wn.ERROR){const t=e.map(ep);xs.error(`Firestore (${Gi}): ${s}`,...t)}}function vi(s,...e){if(xs.logLevel<=wn.WARN){const t=e.map(ep);xs.warn(`Firestore (${Gi}): ${s}`,...t)}}function ep(s){if(typeof s=="string")return s;try{return e=s,JSON.stringify(e)}catch{return s}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K(s="Unexpected state"){const e=`FIRESTORE (${Gi}) INTERNAL ASSERTION FAILED: `+s;throw ze(e),new Error(e)}function re(s,e){s||K()}function fC(s,e){s||K()}function q(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class M extends Wr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class dC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(st.UNAUTHENTICATED))}shutdown(){}}class pC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class mC{constructor(e){this.t=e,this.currentUser=st.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let r=this.i;const n=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve();let i=new nt;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new nt,e.enqueueRetryable(()=>n(this.currentUser))};const a=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await n(this.currentUser)})},o=u=>{L("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(u=>o(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?o(u):(L("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new nt)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(L("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(re(typeof r.accessToken=="string"),new jw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return re(e===null||typeof e=="string"),new st(e)}}class gC{constructor(e,t,r,n){this.h=e,this.l=t,this.m=r,this.g=n,this.type="FirstParty",this.user=st.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(re(!(typeof this.h!="object"||this.h===null||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class yC{constructor(e,t,r,n){this.h=e,this.l=t,this.m=r,this.g=n}getToken(){return Promise.resolve(new gC(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(st.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class vC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wC{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=i=>{i.error!=null&&L("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.A;return this.A=i.token,L("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const n=i=>{L("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.T.onInit(i=>n(i)),setTimeout(()=>{if(!this.appCheck){const i=this.T.getImmediate({optional:!0});i?n(i):L("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(re(typeof t.token=="string"),this.A=t.token,new vC(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TC(s){const e=typeof self!="undefined"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<s;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const n=TC(40);for(let i=0;i<n.length;++i)r.length<20&&n[i]<t&&(r+=e.charAt(n[i]%e.length))}return r}}function ue(s,e){return s<e?-1:s>e?1:0}function wi(s,e,t){return s.length===e.length&&s.every((r,n)=>t(r,e[n]))}function zw(s){return s+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new M(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new M(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new M(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new M(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Fe.fromMillis(Date.now())}static fromDate(e){return Fe.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Fe(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ue(this.nanoseconds,e.nanoseconds):ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.timestamp=e}static fromTimestamp(e){return new te(e)}static min(){return new te(new Fe(0,0))}static max(){return new te(new Fe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e,t,r){t===void 0?t=0:t>e.length&&K(),r===void 0?r=e.length-t:r>e.length-t&&K(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return no.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof no?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let n=0;n<r;n++){const i=e.get(n),a=t.get(n);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Te extends no{construct(e,t,r){return new Te(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new M(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(n=>n.length>0))}return new Te(t)}static emptyPath(){return new Te([])}}const bC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class We extends no{construct(e,t,r){return new We(e,t,r)}static isValidIdentifier(e){return bC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),We.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new We(["__name__"])}static fromServerFormat(e){const t=[];let r="",n=0;const i=()=>{if(r.length===0)throw new M(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let a=!1;for(;n<e.length;){const o=e[n];if(o==="\\"){if(n+1===e.length)throw new M(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[n+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new M(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,n+=2}else o==="`"?(a=!a,n++):o!=="."||a?(r+=o,n++):(i(),n++)}if(i(),a)throw new M(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new We(t)}static emptyPath(){return new We([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V{constructor(e){this.path=e}static fromPath(e){return new V(Te.fromString(e))}static fromName(e){return new V(Te.fromString(e).popFirst(5))}static empty(){return new V(Te.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Te.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Te.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new V(new Te(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(e,t,r,n){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=n}}function mf(s){return s.fields.find(e=>e.kind===2)}function Qs(s){return s.fields.filter(e=>e.kind!==2)}Ww.UNKNOWN_ID=-1;class SC{constructor(e,t){this.fieldPath=e,this.kind=t}}class yc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new yc(0,Kt.min())}}function Kw(s,e){const t=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,n=te.fromTimestamp(r===1e9?new Fe(t+1,0):new Fe(t,r));return new Kt(n,V.empty(),e)}function Hw(s){return new Kt(s.readTime,s.key,-1)}class Kt{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Kt(te.min(),V.empty(),-1)}static max(){return new Kt(te.max(),V.empty(),-1)}}function tp(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=V.comparator(s.documentKey,e.documentKey),t!==0?t:ue(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Yw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vs(s){if(s.code!==N.FAILED_PRECONDITION||s.message!==Qw)throw s;L("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&K(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new k((r,n)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,n)},this.catchCallback=i=>{this.wrapFailure(t,i).next(r,n)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof k?t:k.resolve(t)}catch(t){return k.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):k.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):k.reject(t)}static resolve(e){return new k((t,r)=>{t(e)})}static reject(e){return new k((t,r)=>{r(e)})}static waitFor(e){return new k((t,r)=>{let n=0,i=0,a=!1;e.forEach(o=>{++n,o.next(()=>{++i,a&&i===n&&t()},u=>r(u))}),a=!0,i===n&&t()})}static or(e){let t=k.resolve(!1);for(const r of e)t=t.next(n=>n?k.resolve(n):r());return t}static forEach(e,t){const r=[];return e.forEach((n,i)=>{r.push(t.call(this,n,i))}),this.waitFor(r)}static mapArray(e,t){return new k((r,n)=>{const i=e.length,a=new Array(i);let o=0;for(let u=0;u<i;u++){const c=u;t(e[c]).next(l=>{a[c]=l,++o,o===i&&r(a)},l=>n(l))}})}static doWhile(e,t){return new k((r,n)=>{const i=()=>{e()===!0?t().next(()=>{i()},n):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new nt,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Da(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const n=rp(r.target.error);this.P.reject(new Da(e,n))}}static open(e,t,r,n){try{return new Pl(t,e.transaction(n,r))}catch(i){throw new Da(t,i)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(L("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new IC(t)}}class ir{constructor(e,t,r){this.name=e,this.version=t,this.S=r,ir.D(Ke())===12.2&&ze("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return L("SimpleDb","Removing database:",e),Ys(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!nc())return!1;if(ir.N())return!0;const e=Ke(),t=ir.D(e),r=0<t&&t<10,n=ir.k(e),i=0<n&&n<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static N(){var e;return typeof process!="undefined"&&((e=process.env)===null||e===void 0?void 0:e.O)==="YES"}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async F(e){return this.db||(L("SimpleDb","Opening database:",this.name),this.db=await new Promise((t,r)=>{const n=indexedDB.open(this.name,this.version);n.onsuccess=i=>{const a=i.target.result;t(a)},n.onblocked=()=>{r(new Da(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},n.onerror=i=>{const a=i.target.error;a.name==="VersionError"?r(new M(N.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?r(new M(N.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):r(new Da(e,a))},n.onupgradeneeded=i=>{L("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const a=i.target.result;this.S.$(a,n.transaction,i.oldVersion,this.version).next(()=>{L("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=t=>this.B(t)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,n){const i=t==="readonly";let a=0;for(;;){++a;try{this.db=await this.F(e);const o=Pl.open(this.db,e,i?"readonly":"readwrite",r),u=n(o).next(c=>(o.V(),c)).catch(c=>(o.abort(c),k.reject(c))).toPromise();return u.catch(()=>{}),await o.v,u}catch(o){const u=o,c=u.name!=="FirebaseError"&&a<3;if(L("SimpleDb","Transaction failed with error:",u.message,"Retrying:",c),this.close(),!c)return Promise.reject(u)}}}close(){this.db&&this.db.close(),this.db=void 0}}class EC{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return Ys(this.U.delete())}}class Da extends M{constructor(e,t){super(N.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function qs(s){return s.name==="IndexedDbTransactionError"}class IC{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(L("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(L("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ys(r)}add(e){return L("SimpleDb","ADD",this.store.name,e,e),Ys(this.store.add(e))}get(e){return Ys(this.store.get(e)).next(t=>(t===void 0&&(t=null),L("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return L("SimpleDb","DELETE",this.store.name,e),Ys(this.store.delete(e))}count(){return L("SimpleDb","COUNT",this.store.name),Ys(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||typeof this.store.getAll!="function"){const n=this.cursor(r),i=[];return this.H(n,(a,o)=>{i.push(o)}).next(()=>i)}{const n=this.store.getAll(r.range);return new k((i,a)=>{n.onerror=o=>{a(o.target.error)},n.onsuccess=o=>{i(o.target.result)}})}}J(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new k((n,i)=>{r.onerror=a=>{i(a.target.error)},r.onsuccess=a=>{n(a.target.result)}})}Y(e,t){L("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const n=this.cursor(r);return this.H(n,(i,a,o)=>o.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const n=this.cursor(r);return this.H(n,t)}tt(e){const t=this.cursor({});return new k((r,n)=>{t.onerror=i=>{const a=rp(i.target.error);n(a)},t.onsuccess=i=>{const a=i.target.result;a?e(a.primaryKey,a.value).next(o=>{o?a.continue():r()}):r()}})}H(e,t){const r=[];return new k((n,i)=>{e.onerror=a=>{i(a.target.error)},e.onsuccess=a=>{const o=a.target.result;if(!o)return void n();const u=new EC(o),c=t(o.primaryKey,o.value,u);if(c instanceof k){const l=c.catch(h=>(u.done(),k.reject(h)));r.push(l)}u.isDone?n():u.G===null?o.continue():o.continue(u.G)}}).next(()=>k.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ys(s){return new k((e,t)=>{s.onsuccess=r=>{const n=r.target.result;e(n)},s.onerror=r=>{const n=rp(r.target.error);t(n)}})}let Og=!1;function rp(s){const e=ir.D(Ke());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(t)>=0){const r=new M("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Og||(Og=!0,setTimeout(()=>{throw r},0)),r}}return s}class _C{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}nt(e){L("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{L("IndexBackiller",`Documents written: ${await this.et.st()}`)}catch(t){qs(t)?L("IndexBackiller","Ignoring IndexedDB error during index backfill: ",t):await Vs(t)}await this.nt(6e4)})}}class xC{constructor(e,t){this.localStore=e,this.persistence=t}async st(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.it(t,e))}it(e,t){const r=new Set;let n=t,i=!0;return k.doWhile(()=>i===!0&&n>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(a=>{if(a!==null&&!r.has(a))return L("IndexBackiller",`Processing collection: ${a}`),this.rt(e,a,n).next(o=>{n-=o,r.add(a)});i=!1})).next(()=>t-n)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(n=>this.localStore.localDocuments.getNextDocuments(e,t,n,r).next(i=>{const a=i.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next(()=>this.ot(n,i)).next(o=>(L("IndexBackiller",`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,t,o))).next(()=>a.size)}))}ot(e,t){let r=e;return t.changes.forEach((n,i)=>{const a=Hw(i);tp(a,r)>0&&(r=a)}),new Kt(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dg(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function Rn(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function Jw(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Dt.at=-1;class je{constructor(e,t){this.comparator=e,this.root=t||ft.EMPTY}insert(e,t){return new je(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ft.BLACK,null,null))}remove(e){return new je(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ft.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return t+r.left.size;n<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wu(this.root,e,this.comparator,!1)}getReverseIterator(){return new wu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wu(this.root,e,this.comparator,!0)}}class wu{constructor(e,t,r,n){this.isReverse=n,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?r(e.key,t):1,t&&n&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ft{constructor(e,t,r,n,i){this.key=e,this.value=t,this.color=r!=null?r:ft.RED,this.left=n!=null?n:ft.EMPTY,this.right=i!=null?i:ft.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,n,i){return new ft(e!=null?e:this.key,t!=null?t:this.value,r!=null?r:this.color,n!=null?n:this.left,i!=null?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let n=this;const i=r(e,n.key);return n=i<0?n.copy(null,null,null,n.left.insert(e,t,r),null):i===0?n.copy(null,t,null,null,null):n.copy(null,null,null,null,n.right.insert(e,t,r)),n.fixUp()}removeMin(){if(this.left.isEmpty())return ft.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,n=this;if(t(e,n.key)<0)n.left.isEmpty()||n.left.isRed()||n.left.left.isRed()||(n=n.moveRedLeft()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed()&&(n=n.rotateRight()),n.right.isEmpty()||n.right.isRed()||n.right.left.isRed()||(n=n.moveRedRight()),t(e,n.key)===0){if(n.right.isEmpty())return ft.EMPTY;r=n.right.min(),n=n.copy(r.key,r.value,null,null,n.right.removeMin())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ft.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ft.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw K();const e=this.left.check();if(e!==this.right.check())throw K();return e+(this.isRed()?0:1)}}ft.EMPTY=null,ft.RED=!0,ft.BLACK=!1;ft.EMPTY=new class{constructor(){this.size=0}get key(){throw K()}get value(){throw K()}get color(){throw K()}get left(){throw K()}get right(){throw K()}copy(s,e,t,r,n){return this}insert(s,e,t){return new ft(s,e)}remove(s,e){return this}isEmpty(){return!0}inorderTraversal(s){return!1}reverseTraversal(s){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.comparator=e,this.data=new je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const n=r.getNext();if(this.comparator(n.key,e[1])>=0)return;t(n.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Rg(this.data.getIterator())}getIteratorFrom(e){return new Rg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof xe)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const n=t.getNext().key,i=r.getNext().key;if(this.comparator(n,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new xe(this.comparator);return t.data=e,t}}class Rg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function qn(s){return s.hasNext()?s.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.fields=e,e.sort(We.comparator)}static empty(){return new Gt([])}unionWith(e){let t=new xe(We.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Gt(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return wi(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AC(){return typeof atob!="undefined"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Je(t)}static fromUint8Array(e){const t=function(r){let n="";for(let i=0;i<r.length;++i)n+=String.fromCharCode(r[i]);return n}(e);return new Je(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Je.EMPTY_BYTE_STRING=new Je("");const PC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function As(s){if(re(!!s),typeof s=="string"){let e=0;const t=PC.exec(s);if(re(!!t),t[1]){let n=t[1];n=(n+"000000000").substr(0,9),e=Number(n)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:qe(s.seconds),nanos:qe(s.nanos)}}function qe(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Sn(s){return typeof s=="string"?Je.fromBase64String(s):Je.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sp(s){var e,t;return((t=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Xw(s){const e=s.mapValue.fields.__previous_value__;return sp(e)?Xw(e):e}function io(s){const e=As(s.mapValue.fields.__local_write_time__.timestampValue);return new Fe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e,t,r,n,i,a,o,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=n,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.useFetchStreams=u}}class Ps{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ps("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ps&&e.projectId===this.projectId&&e.database===this.database}}function Jo(s){return s==null}function ao(s){return s===0&&1/s==-1/0}function Zw(s){return typeof s=="number"&&Number.isInteger(s)&&!ao(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},qu={nullValue:"NULL_VALUE"};function En(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?sp(s)?4:eT(s)?9007199254740991:10:K()}function Or(s,e){if(s===e)return!0;const t=En(s);if(t!==En(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return io(s).isEqual(io(e));case 3:return function(r,n){if(typeof r.timestampValue=="string"&&typeof n.timestampValue=="string"&&r.timestampValue.length===n.timestampValue.length)return r.timestampValue===n.timestampValue;const i=As(r.timestampValue),a=As(n.timestampValue);return i.seconds===a.seconds&&i.nanos===a.nanos}(s,e);case 5:return s.stringValue===e.stringValue;case 6:return function(r,n){return Sn(r.bytesValue).isEqual(Sn(n.bytesValue))}(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return function(r,n){return qe(r.geoPointValue.latitude)===qe(n.geoPointValue.latitude)&&qe(r.geoPointValue.longitude)===qe(n.geoPointValue.longitude)}(s,e);case 2:return function(r,n){if("integerValue"in r&&"integerValue"in n)return qe(r.integerValue)===qe(n.integerValue);if("doubleValue"in r&&"doubleValue"in n){const i=qe(r.doubleValue),a=qe(n.doubleValue);return i===a?ao(i)===ao(a):isNaN(i)&&isNaN(a)}return!1}(s,e);case 9:return wi(s.arrayValue.values||[],e.arrayValue.values||[],Or);case 10:return function(r,n){const i=r.mapValue.fields||{},a=n.mapValue.fields||{};if(Dg(i)!==Dg(a))return!1;for(const o in i)if(i.hasOwnProperty(o)&&(a[o]===void 0||!Or(i[o],a[o])))return!1;return!0}(s,e);default:return K()}}function oo(s,e){return(s.values||[]).find(t=>Or(t,e))!==void 0}function Cs(s,e){if(s===e)return 0;const t=En(s),r=En(e);if(t!==r)return ue(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ue(s.booleanValue,e.booleanValue);case 2:return function(n,i){const a=qe(n.integerValue||n.doubleValue),o=qe(i.integerValue||i.doubleValue);return a<o?-1:a>o?1:a===o?0:isNaN(a)?isNaN(o)?0:-1:1}(s,e);case 3:return Mg(s.timestampValue,e.timestampValue);case 4:return Mg(io(s),io(e));case 5:return ue(s.stringValue,e.stringValue);case 6:return function(n,i){const a=Sn(n),o=Sn(i);return a.compareTo(o)}(s.bytesValue,e.bytesValue);case 7:return function(n,i){const a=n.split("/"),o=i.split("/");for(let u=0;u<a.length&&u<o.length;u++){const c=ue(a[u],o[u]);if(c!==0)return c}return ue(a.length,o.length)}(s.referenceValue,e.referenceValue);case 8:return function(n,i){const a=ue(qe(n.latitude),qe(i.latitude));return a!==0?a:ue(qe(n.longitude),qe(i.longitude))}(s.geoPointValue,e.geoPointValue);case 9:return function(n,i){const a=n.values||[],o=i.values||[];for(let u=0;u<a.length&&u<o.length;++u){const c=Cs(a[u],o[u]);if(c)return c}return ue(a.length,o.length)}(s.arrayValue,e.arrayValue);case 10:return function(n,i){if(n===Es.mapValue&&i===Es.mapValue)return 0;if(n===Es.mapValue)return 1;if(i===Es.mapValue)return-1;const a=n.fields||{},o=Object.keys(a),u=i.fields||{},c=Object.keys(u);o.sort(),c.sort();for(let l=0;l<o.length&&l<c.length;++l){const h=ue(o[l],c[l]);if(h!==0)return h;const f=Cs(a[o[l]],u[c[l]]);if(f!==0)return f}return ue(o.length,c.length)}(s.mapValue,e.mapValue);default:throw K()}}function Mg(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return ue(s,e);const t=As(s),r=As(e),n=ue(t.seconds,r.seconds);return n!==0?n:ue(t.nanos,r.nanos)}function ai(s){return gf(s)}function gf(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(r){const n=As(r);return`time(${n.seconds},${n.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?Sn(s.bytesValue).toBase64():"referenceValue"in s?(t=s.referenceValue,V.fromName(t).toString()):"geoPointValue"in s?`geo(${(e=s.geoPointValue).latitude},${e.longitude})`:"arrayValue"in s?function(r){let n="[",i=!0;for(const a of r.values||[])i?i=!1:n+=",",n+=gf(a);return n+"]"}(s.arrayValue):"mapValue"in s?function(r){const n=Object.keys(r.fields||{}).sort();let i="{",a=!0;for(const o of n)a?a=!1:i+=",",i+=`${o}:${gf(r.fields[o])}`;return i+"}"}(s.mapValue):K();var e,t}function In(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function yf(s){return!!s&&"integerValue"in s}function uo(s){return!!s&&"arrayValue"in s}function Lg(s){return!!s&&"nullValue"in s}function Fg(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function $u(s){return!!s&&"mapValue"in s}function Ra(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const e={mapValue:{fields:{}}};return Rn(s.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ra(r)),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ra(s.arrayValue.values[t]);return e}return Object.assign({},s)}function eT(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function kC(s){return"nullValue"in s?qu:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?In(Ps.empty(),V.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?{mapValue:{}}:K()}function NC(s){return"nullValue"in s?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?In(Ps.empty(),V.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?{mapValue:{}}:"mapValue"in s?Es:K()}function Ug(s,e){const t=Cs(s.value,e.value);return t!==0?t:s.inclusive&&!e.inclusive?-1:!s.inclusive&&e.inclusive?1:0}function Bg(s,e){const t=Cs(s.value,e.value);return t!==0?t:s.inclusive&&!e.inclusive?1:!s.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.value=e}static empty(){return new dt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!$u(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ra(t)}setAll(e){let t=We.emptyPath(),r={},n=[];e.forEach((a,o)=>{if(!t.isImmediateParentOf(o)){const u=this.getFieldsMap(t);this.applyChanges(u,r,n),r={},n=[],t=o.popLast()}a?r[o.lastSegment()]=Ra(a):n.push(o.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,r,n)}delete(e){const t=this.field(e.popLast());$u(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Or(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let n=t.mapValue.fields[e.get(r)];$u(n)&&n.mapValue.fields||(n={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=n),t=n}return t.mapValue.fields}applyChanges(e,t,r){Rn(t,(n,i)=>e[n]=i);for(const n of r)delete e[n]}clone(){return new dt(Ra(this.value))}}function tT(s){const e=[];return Rn(s.fields,(t,r)=>{const n=new We([t]);if($u(r)){const i=tT(r.mapValue).fields;if(i.length===0)e.push(n);else for(const a of i)e.push(n.child(a))}else e.push(n)}),new Gt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e,t,r,n,i,a){this.key=e,this.documentType=t,this.version=r,this.readTime=n,this.data=i,this.documentState=a}static newInvalidDocument(e){return new ke(e,0,te.min(),te.min(),dt.empty(),0)}static newFoundDocument(e,t,r){return new ke(e,1,t,te.min(),r,0)}static newNoDocument(e,t){return new ke(e,2,t,te.min(),dt.empty(),0)}static newUnknownDocument(e,t){return new ke(e,3,t,te.min(),dt.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ke&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ke(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e,t=null,r=[],n=[],i=null,a=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=n,this.limit=i,this.startAt=a,this.endAt=o,this.ht=null}}function Vg(s,e=null,t=[],r=[],n=null,i=null,a=null){return new OC(s,e,t,r,n,i,a)}function _n(s){const e=q(s);if(e.ht===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(n=r).field.canonicalString()+n.op.toString()+ai(n.value);var n}).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(n){return n.field.canonicalString()+n.dir}(r)).join(","),Jo(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ai(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ai(r)).join(",")),e.ht=t}return e.ht}function DC(s){let e=s.path.canonicalString();return s.collectionGroup!==null&&(e+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(e+=`, filters: [${s.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${ai(r.value)}`;var r}).join(", ")}]`),Jo(s.limit)||(e+=", limit: "+s.limit),s.orderBy.length>0&&(e+=`, orderBy: [${s.orderBy.map(t=>function(r){return`${r.field.canonicalString()} (${r.dir})`}(t)).join(", ")}]`),s.startAt&&(e+=", startAt: ",e+=s.startAt.inclusive?"b:":"a:",e+=s.startAt.position.map(t=>ai(t)).join(",")),s.endAt&&(e+=", endAt: ",e+=s.endAt.inclusive?"a:":"b:",e+=s.endAt.position.map(t=>ai(t)).join(",")),`Target(${e})`}function Xo(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!qC(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(t=s.filters[n],r=e.filters[n],t.op!==r.op||!t.field.isEqual(r.field)||!Or(t.value,r.value))return!1;var t,r;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!Gg(s.startAt,e.startAt)&&Gg(s.endAt,e.endAt)}function vc(s){return V.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function wc(s,e){return s.filters.filter(t=>t instanceof pt&&t.field.isEqual(e))}function qg(s,e,t){let r=qu,n=!0;for(const i of wc(s,e)){let a=qu,o=!0;switch(i.op){case"<":case"<=":a=kC(i.value);break;case"==":case"in":case">=":a=i.value;break;case">":a=i.value,o=!1;break;case"!=":case"not-in":a=qu}Ug({value:r,inclusive:n},{value:a,inclusive:o})<0&&(r=a,n=o)}if(t!==null){for(let i=0;i<s.orderBy.length;++i)if(s.orderBy[i].field.isEqual(e)){const a=t.position[i];Ug({value:r,inclusive:n},{value:a,inclusive:t.inclusive})<0&&(r=a,n=t.inclusive);break}}return{value:r,inclusive:n}}function $g(s,e,t){let r=Es,n=!0;for(const i of wc(s,e)){let a=Es,o=!0;switch(i.op){case">=":case">":a=NC(i.value),o=!1;break;case"==":case"in":case"<=":a=i.value;break;case"<":a=i.value,o=!1;break;case"!=":case"not-in":a=Es}Bg({value:r,inclusive:n},{value:a,inclusive:o})>0&&(r=a,n=o)}if(t!==null){for(let i=0;i<s.orderBy.length;++i)if(s.orderBy[i].field.isEqual(e)){const a=t.position[i];Bg({value:r,inclusive:n},{value:a,inclusive:t.inclusive})>0&&(r=a,n=t.inclusive);break}}return{value:r,inclusive:n}}class pt extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.lt(e,t,r):new RC(e,t,r):t==="array-contains"?new FC(e,r):t==="in"?new UC(e,r):t==="not-in"?new BC(e,r):t==="array-contains-any"?new VC(e,r):new pt(e,t,r)}static lt(e,t,r){return t==="in"?new MC(e,r):new LC(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.ft(Cs(t,this.value)):t!==null&&En(this.value)===En(t)&&this.ft(Cs(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return K()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class RC extends pt{constructor(e,t,r){super(e,t,r),this.key=V.fromName(r.referenceValue)}matches(e){const t=V.comparator(e.key,this.key);return this.ft(t)}}class MC extends pt{constructor(e,t){super(e,"in",t),this.keys=rT("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class LC extends pt{constructor(e,t){super(e,"not-in",t),this.keys=rT("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function rT(s,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>V.fromName(r.referenceValue))}class FC extends pt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return uo(t)&&oo(t.arrayValue,this.value)}}class UC extends pt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&oo(this.value.arrayValue,t)}}class BC extends pt{constructor(e,t){super(e,"not-in",t)}matches(e){if(oo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!oo(this.value.arrayValue,t)}}class VC extends pt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!uo(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>oo(this.value.arrayValue,r))}}class ks{constructor(e,t){this.position=e,this.inclusive=t}}class oi{constructor(e,t="asc"){this.field=e,this.dir=t}}function qC(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}function jg(s,e,t){let r=0;for(let n=0;n<s.position.length;n++){const i=e[n],a=s.position[n];if(i.field.isKeyField()?r=V.comparator(V.fromName(a.referenceValue),t.key):r=Cs(a,t.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Gg(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!Or(s.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,t=null,r=[],n=[],i=null,a="F",o=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=n,this.limit=i,this.limitType=a,this.startAt=o,this.endAt=u,this._t=null,this.wt=null,this.startAt,this.endAt}}function sT(s,e,t,r,n,i,a,o){return new is(s,e,t,r,n,i,a,o)}function zi(s){return new is(s)}function zg(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function np(s){return s.explicitOrderBy.length>0?s.explicitOrderBy[0].field:null}function ip(s){for(const e of s.filters)if(e.dt())return e.field;return null}function ap(s){return s.collectionGroup!==null}function Ti(s){const e=q(s);if(e._t===null){e._t=[];const t=ip(e),r=np(e);if(t!==null&&r===null)t.isKeyField()||e._t.push(new oi(t)),e._t.push(new oi(We.keyField(),"asc"));else{let n=!1;for(const i of e.explicitOrderBy)e._t.push(i),i.field.isKeyField()&&(n=!0);if(!n){const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new oi(We.keyField(),i))}}}return e._t}function Lt(s){const e=q(s);if(!e.wt)if(e.limitType==="F")e.wt=Vg(e.path,e.collectionGroup,Ti(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const i of Ti(e)){const a=i.dir==="desc"?"asc":"desc";t.push(new oi(i.field,a))}const r=e.endAt?new ks(e.endAt.position,e.endAt.inclusive):null,n=e.startAt?new ks(e.startAt.position,e.startAt.inclusive):null;e.wt=Vg(e.path,e.collectionGroup,t,e.filters,e.limit,r,n)}return e.wt}function Tc(s,e,t){return new is(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function Zo(s,e){return Xo(Lt(s),Lt(e))&&s.limitType===e.limitType}function nT(s){return`${_n(Lt(s))}|lt:${s.limitType}`}function vf(s){return`Query(target=${DC(Lt(s))}; limitType=${s.limitType})`}function op(s,e){return e.isFoundDocument()&&function(t,r){const n=r.key.path;return t.collectionGroup!==null?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):V.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(s,e)&&function(t,r){for(const n of t.explicitOrderBy)if(!n.field.isKeyField()&&r.data.field(n.field)===null)return!1;return!0}(s,e)&&function(t,r){for(const n of t.filters)if(!n.matches(r))return!1;return!0}(s,e)&&function(t,r){return!(t.startAt&&!function(n,i,a){const o=jg(n,i,a);return n.inclusive?o<=0:o<0}(t.startAt,Ti(t),r)||t.endAt&&!function(n,i,a){const o=jg(n,i,a);return n.inclusive?o>=0:o>0}(t.endAt,Ti(t),r))}(s,e)}function iT(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function aT(s){return(e,t)=>{let r=!1;for(const n of Ti(s)){const i=$C(n,e,t);if(i!==0)return i;r=r||n.field.isKeyField()}return 0}}function $C(s,e,t){const r=s.field.isKeyField()?V.comparator(e.key,t.key):function(n,i,a){const o=i.data.field(n),u=a.data.field(n);return o!==null&&u!==null?Cs(o,u):K()}(s.field,e,t);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return K()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(s,e){if(s.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ao(e)?"-0":e}}function uT(s){return{integerValue:""+s}}function cT(s,e){return Zw(e)?uT(e):oT(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(){this._=void 0}}function jC(s,e,t){return s instanceof bi?function(r,n){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return n&&(i.fields.__previous_value__=n),{mapValue:i}}(t,e):s instanceof xn?hT(s,e):s instanceof An?fT(s,e):function(r,n){const i=lT(r,n),a=Wg(i)+Wg(r.yt);return yf(i)&&yf(r.yt)?uT(a):oT(r.It,a)}(s,e)}function GC(s,e,t){return s instanceof xn?hT(s,e):s instanceof An?fT(s,e):t}function lT(s,e){return s instanceof Si?yf(t=e)||function(r){return!!r&&"doubleValue"in r}(t)?e:{integerValue:0}:null;var t}class bi extends Cl{}class xn extends Cl{constructor(e){super(),this.elements=e}}function hT(s,e){const t=dT(e);for(const r of s.elements)t.some(n=>Or(n,r))||t.push(r);return{arrayValue:{values:t}}}class An extends Cl{constructor(e){super(),this.elements=e}}function fT(s,e){let t=dT(e);for(const r of s.elements)t=t.filter(n=>!Or(n,r));return{arrayValue:{values:t}}}class Si extends Cl{constructor(e,t){super(),this.It=e,this.yt=t}}function Wg(s){return qe(s.integerValue||s.doubleValue)}function dT(s){return uo(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e,t){this.field=e,this.transform=t}}function zC(s,e){return s.field.isEqual(e.field)&&function(t,r){return t instanceof xn&&r instanceof xn||t instanceof An&&r instanceof An?wi(t.elements,r.elements,Or):t instanceof Si&&r instanceof Si?Or(t.yt,r.yt):t instanceof bi&&r instanceof bi}(s.transform,e.transform)}class WC{constructor(e,t){this.version=e,this.transformResults=t}}class Me{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Me}static exists(e){return new Me(void 0,e)}static updateTime(e){return new Me(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ju(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class kl{}function pT(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new Ki(s.key,Me.none()):new Wi(s.key,s.data,Me.none());{const t=s.data,r=dt.empty();let n=new xe(We.comparator);for(let i of e.fields)if(!n.has(i)){let a=t.field(i);a===null&&i.length>1&&(i=i.popLast(),a=t.field(i)),a===null?r.delete(i):r.set(i,a),n=n.add(i)}return new as(s.key,r,new Gt(n.toArray()),Me.none())}}function KC(s,e,t){s instanceof Wi?function(r,n,i){const a=r.value.clone(),o=Hg(r.fieldTransforms,n,i.transformResults);a.setAll(o),n.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(s,e,t):s instanceof as?function(r,n,i){if(!ju(r.precondition,n))return void n.convertToUnknownDocument(i.version);const a=Hg(r.fieldTransforms,n,i.transformResults),o=n.data;o.setAll(mT(r)),o.setAll(a),n.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(s,e,t):function(r,n,i){n.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,t)}function Ma(s,e,t,r){return s instanceof Wi?function(n,i,a,o){if(!ju(n.precondition,i))return a;const u=n.value.clone(),c=Qg(n.fieldTransforms,o,i);return u.setAll(c),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),null}(s,e,t,r):s instanceof as?function(n,i,a,o){if(!ju(n.precondition,i))return a;const u=Qg(n.fieldTransforms,o,i),c=i.data;return c.setAll(mT(n)),c.setAll(u),i.convertToFoundDocument(i.version,c).setHasLocalMutations(),a===null?null:a.unionWith(n.fieldMask.fields).unionWith(n.fieldTransforms.map(l=>l.field))}(s,e,t,r):function(n,i,a){return ju(n.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):a}(s,e,t)}function HC(s,e){let t=null;for(const r of s.fieldTransforms){const n=e.data.field(r.field),i=lT(r.transform,n||null);i!=null&&(t===null&&(t=dt.empty()),t.set(r.field,i))}return t||null}function Kg(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!function(t,r){return t===void 0&&r===void 0||!(!t||!r)&&wi(t,r,(n,i)=>zC(n,i))}(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Wi extends kl{constructor(e,t,r,n=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=n,this.type=0}getFieldMask(){return null}}class as extends kl{constructor(e,t,r,n,i=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=n,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function mT(s){const e=new Map;return s.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=s.data.field(t);e.set(t,r)}}),e}function Hg(s,e,t){const r=new Map;re(s.length===t.length);for(let n=0;n<t.length;n++){const i=s[n],a=i.transform,o=e.data.field(i.field);r.set(i.field,GC(a,o,t[n]))}return r}function Qg(s,e,t){const r=new Map;for(const n of s){const i=n.transform,a=t.data.field(n.field);r.set(n.field,jC(i,a,e))}return r}class Ki extends kl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class up extends kl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e){this.count=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var He,ve;function gT(s){switch(s){default:return K();case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0}}function yT(s){if(s===void 0)return ze("GRPC error has no .code"),N.UNKNOWN;switch(s){case He.OK:return N.OK;case He.CANCELLED:return N.CANCELLED;case He.UNKNOWN:return N.UNKNOWN;case He.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case He.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case He.INTERNAL:return N.INTERNAL;case He.UNAVAILABLE:return N.UNAVAILABLE;case He.UNAUTHENTICATED:return N.UNAUTHENTICATED;case He.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case He.NOT_FOUND:return N.NOT_FOUND;case He.ALREADY_EXISTS:return N.ALREADY_EXISTS;case He.PERMISSION_DENIED:return N.PERMISSION_DENIED;case He.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case He.ABORTED:return N.ABORTED;case He.OUT_OF_RANGE:return N.OUT_OF_RANGE;case He.UNIMPLEMENTED:return N.UNIMPLEMENTED;case He.DATA_LOSS:return N.DATA_LOSS;default:return K()}}(ve=He||(He={}))[ve.OK=0]="OK",ve[ve.CANCELLED=1]="CANCELLED",ve[ve.UNKNOWN=2]="UNKNOWN",ve[ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ve[ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ve[ve.NOT_FOUND=5]="NOT_FOUND",ve[ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",ve[ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",ve[ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",ve[ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ve[ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ve[ve.ABORTED=10]="ABORTED",ve[ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",ve[ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",ve[ve.INTERNAL=13]="INTERNAL",ve[ve.UNAVAILABLE=14]="UNAVAILABLE",ve[ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[n,i]of r)if(this.equalsFn(n,e))return i}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return void(n[i]=[e,t]);n.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return r.length===1?delete this.inner[t]:r.splice(n,1),this.innerSize--,!0;return!1}forEach(e){Rn(this.inner,(t,r)=>{for(const[n,i]of r)e(n,i)})}isEmpty(){return Jw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC=new je(V.comparator);function Rt(){return YC}const vT=new je(V.comparator);function _a(...s){let e=vT;for(const t of s)e=e.insert(t.key,t);return e}function wT(s){let e=vT;return s.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Er(){return La()}function TT(){return La()}function La(){return new $s(s=>s.toString(),(s,e)=>s.isEqual(e))}const JC=new je(V.comparator),XC=new xe(V.comparator);function ce(...s){let e=XC;for(const t of s)e=e.add(t);return e}const ZC=new xe(ue);function Nl(){return ZC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e,t,r,n,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=n,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const n=new Map;return n.set(e,ru.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new tu(te.min(),n,Nl(),Rt(),ce())}}class ru{constructor(e,t,r,n,i){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=n,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new ru(r,t,ce(),ce(),ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(e,t,r,n){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=n}}class bT{constructor(e,t){this.targetId=e,this.At=t}}class ST{constructor(e,t,r=Je.EMPTY_BYTE_STRING,n=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=n}}class Yg{constructor(){this.Rt=0,this.bt=Xg(),this.Pt=Je.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return this.Rt!==0}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=ce(),t=ce(),r=ce();return this.bt.forEach((n,i)=>{switch(i){case 0:e=e.add(n);break;case 2:t=t.add(n);break;case 1:r=r.add(n);break;default:K()}}),new ru(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=Xg()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class ek{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Rt(),this.qt=Jg(),this.Kt=new xe(ue)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:K()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,n)=>{this.Ht(n)&&t(n)})}Yt(e){const t=e.targetId,r=e.At.count,n=this.Xt(t);if(n){const i=n.target;if(vc(i))if(r===0){const a=new V(i.path);this.jt(t,a,ke.newNoDocument(a,te.min()))}else re(r===1);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((i,a)=>{const o=this.Xt(a);if(o){if(i.current&&vc(o.target)){const u=new V(o.target.path);this.Ut.get(u)!==null||this.ee(a,u)||this.jt(a,u,ke.newNoDocument(u,e))}i.Dt&&(t.set(a,i.xt()),i.Nt())}});let r=ce();this.qt.forEach((i,a)=>{let o=!0;a.forEachWhile(u=>{const c=this.Xt(u);return!c||c.purpose===2||(o=!1,!1)}),o&&(r=r.add(i))}),this.Ut.forEach((i,a)=>a.setReadTime(e));const n=new tu(e,t,this.Kt,this.Ut,r);return this.Ut=Rt(),this.qt=Jg(),this.Kt=new xe(ue),n}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const n=this.zt(e);this.ee(e,t)?n.kt(t,1):n.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new Yg,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new xe(ue),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=this.Xt(e)!==null;return t||L("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new Yg),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function Jg(){return new je(V.comparator)}function Xg(){return new je(V.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tk=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),rk=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))();class sk{constructor(e,t){this.databaseId=e,this.gt=t}}function co(s,e){return s.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ET(s,e){return s.gt?e.toBase64():e.toUint8Array()}function nk(s,e){return co(s,e.toTimestamp())}function it(s){return re(!!s),te.fromTimestamp(function(e){const t=As(e);return new Fe(t.seconds,t.nanos)}(s))}function cp(s,e){return function(t){return new Te(["projects",t.projectId,"databases",t.database])}(s).child("documents").child(e).canonicalString()}function IT(s){const e=Te.fromString(s);return re(OT(e)),e}function lo(s,e){return cp(s.databaseId,e.path)}function Ar(s,e){const t=IT(e);if(t.get(1)!==s.databaseId.projectId)throw new M(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new M(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new V(xT(t))}function wf(s,e){return cp(s.databaseId,e)}function _T(s){const e=IT(s);return e.length===4?Te.emptyPath():xT(e)}function ho(s){return new Te(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function xT(s){return re(s.length>4&&s.get(4)==="documents"),s.popFirst(5)}function Zg(s,e,t){return{name:lo(s,e),fields:t.value.mapValue.fields}}function AT(s,e,t){const r=Ar(s,e.name),n=it(e.updateTime),i=new dt({mapValue:{fields:e.fields}}),a=ke.newFoundDocument(r,n,i);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function ik(s,e){return"found"in e?function(t,r){re(!!r.found),r.found.name,r.found.updateTime;const n=Ar(t,r.found.name),i=it(r.found.updateTime),a=new dt({mapValue:{fields:r.found.fields}});return ke.newFoundDocument(n,i,a)}(s,e):"missing"in e?function(t,r){re(!!r.missing),re(!!r.readTime);const n=Ar(t,r.missing),i=it(r.readTime);return ke.newNoDocument(n,i)}(s,e):K()}function ak(s,e){let t;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:K()}(e.targetChange.targetChangeType||"NO_CHANGE"),n=e.targetChange.targetIds||[],i=function(u,c){return u.gt?(re(c===void 0||typeof c=="string"),Je.fromBase64String(c||"")):(re(c===void 0||c instanceof Uint8Array),Je.fromUint8Array(c||new Uint8Array))}(s,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(u){const c=u.code===void 0?N.UNKNOWN:yT(u.code);return new M(c,u.message||"")}(a);t=new ST(r,n,i,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const n=Ar(s,r.document.name),i=it(r.document.updateTime),a=new dt({mapValue:{fields:r.document.fields}}),o=ke.newFoundDocument(n,i,a),u=r.targetIds||[],c=r.removedTargetIds||[];t=new Gu(u,c,o.key,o)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const n=Ar(s,r.document),i=r.readTime?it(r.readTime):te.min(),a=ke.newNoDocument(n,i),o=r.removedTargetIds||[];t=new Gu([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const n=Ar(s,r.document),i=r.removedTargetIds||[];t=new Gu([],i,n,null)}else{if(!("filter"in e))return K();{e.filter;const r=e.filter;r.targetId;const n=r.count||0,i=new QC(n),a=r.targetId;t=new bT(a,i)}}return t}function fo(s,e){let t;if(e instanceof Wi)t={update:Zg(s,e.key,e.value)};else if(e instanceof Ki)t={delete:lo(s,e.key)};else if(e instanceof as)t={update:Zg(s,e.key,e.data),updateMask:dk(e.fieldMask)};else{if(!(e instanceof up))return K();t={verify:lo(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(n,i){const a=i.transform;if(a instanceof bi)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof xn)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof An)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Si)return{fieldPath:i.field.canonicalString(),increment:a.yt};throw K()}(0,r))),e.precondition.isNone||(t.currentDocument=function(r,n){return n.updateTime!==void 0?{updateTime:nk(r,n.updateTime)}:n.exists!==void 0?{exists:n.exists}:K()}(s,e.precondition)),t}function Tf(s,e){const t=e.currentDocument?function(n){return n.updateTime!==void 0?Me.updateTime(it(n.updateTime)):n.exists!==void 0?Me.exists(n.exists):Me.none()}(e.currentDocument):Me.none(),r=e.updateTransforms?e.updateTransforms.map(n=>function(i,a){let o=null;if("setToServerValue"in a)re(a.setToServerValue==="REQUEST_TIME"),o=new bi;else if("appendMissingElements"in a){const c=a.appendMissingElements.values||[];o=new xn(c)}else if("removeAllFromArray"in a){const c=a.removeAllFromArray.values||[];o=new An(c)}else"increment"in a?o=new Si(i,a.increment):K();const u=We.fromServerFormat(a.fieldPath);return new eu(u,o)}(s,n)):[];if(e.update){e.update.name;const n=Ar(s,e.update.name),i=new dt({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=function(o){const u=o.fieldPaths||[];return new Gt(u.map(c=>We.fromServerFormat(c)))}(e.updateMask);return new as(n,i,a,t,r)}return new Wi(n,i,t,r)}if(e.delete){const n=Ar(s,e.delete);return new Ki(n,t)}if(e.verify){const n=Ar(s,e.verify);return new up(n,t)}return K()}function ok(s,e){return s&&s.length>0?(re(e!==void 0),s.map(t=>function(r,n){let i=r.updateTime?it(r.updateTime):it(n);return i.isEqual(te.min())&&(i=it(n)),new WC(i,r.transformResults||[])}(t,e))):[]}function PT(s,e){return{documents:[wf(s,e.path)]}}function CT(s,e){const t={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(t.parent=wf(s,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=wf(s,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const n=function(u){if(u.length===0)return;const c=u.map(l=>function(h){if(h.op==="=="){if(Fg(h.value))return{unaryFilter:{field:$n(h.field),op:"IS_NAN"}};if(Lg(h.value))return{unaryFilter:{field:$n(h.field),op:"IS_NULL"}}}else if(h.op==="!="){if(Fg(h.value))return{unaryFilter:{field:$n(h.field),op:"IS_NOT_NAN"}};if(Lg(h.value))return{unaryFilter:{field:$n(h.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$n(h.field),op:lk(h.op),value:h.value}}}(l));return c.length===1?c[0]:{compositeFilter:{op:"AND",filters:c}}}(e.filters);n&&(t.structuredQuery.where=n);const i=function(u){if(u.length!==0)return u.map(c=>function(l){return{field:$n(l.field),direction:ck(l.dir)}}(c))}(e.orderBy);i&&(t.structuredQuery.orderBy=i);const a=function(u,c){return u.gt||Jo(c)?c:{value:c}}(s,e.limit);var o;return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(o=e.startAt).inclusive,values:o.position}),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),t}function kT(s){let e=_T(s.parent);const t=s.structuredQuery,r=t.from?t.from.length:0;let n=null;if(r>0){re(r===1);const l=t.from[0];l.allDescendants?n=l.collectionId:e=e.child(l.collectionId)}let i=[];t.where&&(i=NT(t.where));let a=[];t.orderBy&&(a=t.orderBy.map(l=>function(h){return new oi(Xn(h.field),function(f){switch(f){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(h.direction))}(l)));let o=null;t.limit&&(o=function(l){let h;return h=typeof l=="object"?l.value:l,Jo(h)?null:h}(t.limit));let u=null;t.startAt&&(u=function(l){const h=!!l.before,f=l.values||[];return new ks(f,h)}(t.startAt));let c=null;return t.endAt&&(c=function(l){const h=!l.before,f=l.values||[];return new ks(f,h)}(t.endAt)),sT(e,n,a,i,o,"F",u,c)}function uk(s,e){const t=function(r,n){switch(n){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return K()}}(0,e.purpose);return t==null?null:{"goog-listen-tags":t}}function NT(s){return s?s.unaryFilter!==void 0?[fk(s)]:s.fieldFilter!==void 0?[hk(s)]:s.compositeFilter!==void 0?s.compositeFilter.filters.map(e=>NT(e)).reduce((e,t)=>e.concat(t)):K():[]}function ck(s){return tk[s]}function lk(s){return rk[s]}function $n(s){return{fieldPath:s.canonicalString()}}function Xn(s){return We.fromServerFormat(s.fieldPath)}function hk(s){return pt.create(Xn(s.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return K()}}(s.fieldFilter.op),s.fieldFilter.value)}function fk(s){switch(s.unaryFilter.op){case"IS_NAN":const e=Xn(s.unaryFilter.field);return pt.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Xn(s.unaryFilter.field);return pt.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Xn(s.unaryFilter.field);return pt.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const n=Xn(s.unaryFilter.field);return pt.create(n,"!=",{nullValue:"NULL_VALUE"});default:return K()}}function dk(s){const e=[];return s.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function OT(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=ey(e)),e=pk(s.get(t),e);return ey(e)}function pk(s,e){let t=e;const r=s.length;for(let n=0;n<r;n++){const i=s.charAt(n);switch(i){case"\0":t+="";break;case"":t+="";break;default:t+=i}}return t}function ey(s){return s+""}function Ir(s){const e=s.length;if(re(e>=2),e===2)return re(s.charAt(0)===""&&s.charAt(1)===""),Te.emptyPath();const t=e-2,r=[];let n="";for(let i=0;i<e;){const a=s.indexOf("",i);switch((a<0||a>t)&&K(),s.charAt(a+1)){case"":const o=s.substring(i,a);let u;n.length===0?u=o:(n+=o,u=n,n=""),r.push(u);break;case"":n+=s.substring(i,a),n+="\0";break;case"":n+=s.substring(i,a+1);break;default:K()}i=a+2}return new Te(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ty=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zu(s,e){return[s,Ct(e)]}function DT(s,e,t){return[s,Ct(e),t]}const mk={},gk=["prefixPath","collectionGroup","readTime","documentId"],yk=["prefixPath","collectionGroup","documentId"],vk=["collectionGroup","readTime","prefixPath","documentId"],wk=["canonicalId","targetId"],Tk=["targetId","path"],bk=["path","targetId"],Sk=["collectionId","parent"],Ek=["indexId","uid"],Ik=["uid","sequenceNumber"],_k=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],xk=["indexId","uid","orderedDocumentKey"],Ak=["userId","collectionPath","documentId"],Pk=["userId","collectionPath","largestBatchId"],Ck=["userId","collectionGroup","largestBatchId"],RT=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],kk=[...RT,"documentOverlays"],MT=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],LT=MT,Nk=[...LT,"indexConfiguration","indexState","indexEntries"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf extends Yw{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function ct(s,e){const t=q(s);return ir.M(t.ie,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e,t,r,n){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=n}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let n=0;n<this.mutations.length;n++){const i=this.mutations[n];i.key.isEqual(e.key)&&KC(i,e,r[n])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ma(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Ma(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=TT();return this.mutations.forEach(n=>{const i=e.get(n.key),a=i.overlayedDocument;let o=this.applyToLocalView(a,i.mutatedFields);o=t.has(n.key)?null:o;const u=pT(a,o);u!==null&&r.set(n.key,u),a.isValidDocument()||a.convertToNoDocument(te.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ce())}isEqual(e){return this.batchId===e.batchId&&wi(this.mutations,e.mutations,(t,r)=>Kg(t,r))&&wi(this.baseMutations,e.baseMutations,(t,r)=>Kg(t,r))}}class hp{constructor(e,t,r,n){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=n}static from(e,t,r){re(e.mutations.length===r.length);let n=JC;const i=e.mutations;for(let a=0;a<i.length;a++)n=n.insert(i[a].key,r[a].version);return new hp(e,t,r,n)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e,t,r,n,i=te.min(),a=te.min(),o=Je.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=n,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o}withSequenceNumber(e){return new Is(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Is(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Is(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e){this.re=e}}function Ok(s,e){let t;if(e.document)t=AT(s.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=V.fromSegments(e.noDocument.path),n=Cn(e.noDocument.readTime);t=ke.newNoDocument(r,n),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return K();{const r=V.fromSegments(e.unknownDocument.path),n=Cn(e.unknownDocument.version);t=ke.newUnknownDocument(r,n)}}return e.readTime&&t.setReadTime(function(r){const n=new Fe(r[0],r[1]);return te.fromTimestamp(n)}(e.readTime)),t}function ry(s,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:bc(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(n,i){return{name:lo(n,i.key),fields:i.data.value.mapValue.fields,updateTime:co(n,i.version.toTimestamp())}}(s.re,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Pn(e.version)};else{if(!e.isUnknownDocument())return K();r.unknownDocument={path:t.path.toArray(),version:Pn(e.version)}}return r}function bc(s){const e=s.toTimestamp();return[e.seconds,e.nanoseconds]}function Pn(s){const e=s.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Cn(s){const e=new Fe(s.seconds,s.nanoseconds);return te.fromTimestamp(e)}function Js(s,e){const t=(e.baseMutations||[]).map(i=>Tf(s.re,i));for(let i=0;i<e.mutations.length-1;++i){const a=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const o=e.mutations[i+1];a.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map(i=>Tf(s.re,i)),n=Fe.fromMillis(e.localWriteTimeMs);return new lp(e.batchId,n,t,r)}function xa(s){const e=Cn(s.readTime),t=s.lastLimboFreeSnapshotVersion!==void 0?Cn(s.lastLimboFreeSnapshotVersion):te.min();let r;var n;return s.query.documents!==void 0?(re((n=s.query).documents.length===1),r=Lt(zi(_T(n.documents[0])))):r=function(i){return Lt(kT(i))}(s.query),new Is(r,s.targetId,0,s.lastListenSequenceNumber,e,t,Je.fromBase64String(s.resumeToken))}function UT(s,e){const t=Pn(e.snapshotVersion),r=Pn(e.lastLimboFreeSnapshotVersion);let n;n=vc(e.target)?PT(s.re,e.target):CT(s.re,e.target);const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:_n(e.target),readTime:t,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:n}}function dp(s){const e=kT({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Tc(e,e.limit,"L"):e}function bh(s,e){return new fp(e.largestBatchId,Tf(s.re,e.overlayMutation))}function sy(s,e){const t=e.path.lastSegment();return[s,Ct(e.path.popLast()),t]}function ny(s,e,t,r){return{indexId:s,uid:e.uid||"",sequenceNumber:t,readTime:Pn(r.readTime),documentKey:Ct(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{getBundleMetadata(e,t){return iy(e).get(t).next(r=>{if(r)return{id:(n=r).bundleId,createTime:Cn(n.createTime),version:n.version};var n})}saveBundleMetadata(e,t){return iy(e).put({bundleId:(r=t).id,createTime:Pn(it(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return ay(e).get(t).next(r=>{if(r)return{name:(n=r).name,query:dp(n.bundledQuery),readTime:Cn(n.readTime)};var n})}saveNamedQuery(e,t){return ay(e).put(function(r){return{name:r.name,readTime:Pn(it(r.readTime)),bundledQuery:r.bundledQuery}}(t))}}function iy(s){return ct(s,"bundles")}function ay(s){return ct(s,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){const r=t.uid||"";return new Ol(e,r)}getOverlay(e,t){return ua(e).get(sy(this.userId,t)).next(r=>r?bh(this.It,r):null)}getOverlays(e,t){const r=Er();return k.forEach(t,n=>this.getOverlay(e,n).next(i=>{i!==null&&r.set(n,i)})).next(()=>r)}saveOverlays(e,t,r){const n=[];return r.forEach((i,a)=>{const o=new fp(t,a);n.push(this.ue(e,o))}),k.waitFor(n)}removeOverlaysForBatchId(e,t,r){const n=new Set;t.forEach(a=>n.add(Ct(a.getCollectionPath())));const i=[];return n.forEach(a=>{const o=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,r+1],!1,!0);i.push(ua(e).Y("collectionPathOverlayIndex",o))}),k.waitFor(i)}getOverlaysForCollection(e,t,r){const n=Er(),i=Ct(t),a=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return ua(e).W("collectionPathOverlayIndex",a).next(o=>{for(const u of o){const c=bh(this.It,u);n.set(c.getKey(),c)}return n})}getOverlaysForCollectionGroup(e,t,r,n){const i=Er();let a;const o=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ua(e).Z({index:"collectionGroupOverlayIndex",range:o},(u,c,l)=>{const h=bh(this.It,c);i.size()<n||h.largestBatchId===a?(i.set(h.getKey(),h),a=h.largestBatchId):l.done()}).next(()=>i)}ue(e,t){return ua(e).put(function(r,n,i){const[a,o,u]=sy(n,i.mutation.key);return{userId:n,collectionPath:o,documentId:u,collectionGroup:i.mutation.key.getCollectionGroup(),largestBatchId:i.largestBatchId,overlayMutation:fo(r.re,i.mutation)}}(this.It,this.userId,t))}}function ua(s){return ct(s,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(qe(e.integerValue));else if("doubleValue"in e){const r=qe(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),ao(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),typeof r=="string"?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(Sn(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?eT(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):K()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const n of Object.keys(r))this._e(n,t),this.ae(r[n],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const n of r)this.ae(n,t)}ge(e,t){this.le(t,37),V.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}Xs.Te=new Xs;function Rk(s){if(s===0)return 8;let e=0;return s>>4==0&&(e+=4,s<<=4),s>>6==0&&(e+=2,s<<=2),s>>7==0&&(e+=1),e}function oy(s){const e=64-function(t){let r=0;for(let n=0;n<8;++n){const i=Rk(255&t[n]);if(r+=i,i!==8)break}return r}(s);return Math.ceil(e/8)}class Mk{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const n=t.codePointAt(0);this.Ae(240|n>>>18),this.Ae(128|63&n>>>12),this.Ae(128|63&n>>>6),this.Ae(128|63&n)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const n=t.codePointAt(0);this.Pe(240|n>>>18),this.Pe(128|63&n>>>12),this.Pe(128|63&n>>>6),this.Pe(128|63&n)}}this.ve()}De(e){const t=this.Ce(e),r=oy(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let n=t.length-r;n<t.length;++n)this.buffer[this.position++]=255&t[n]}Ne(e){const t=this.Ce(e),r=oy(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let n=t.length-r;n<t.length;++n)this.buffer[this.position++]=~(255&t[n])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(n){const i=new DataView(new ArrayBuffer(8));return i.setFloat64(0,n,!1),new Uint8Array(i.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let n=1;n<t.length;++n)t[n]^=r?255:0;return t}Ae(e){const t=255&e;t===0?(this.Oe(0),this.Oe(255)):t===255?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;t===0?(this.Fe(0),this.Fe(255)):t===255?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const n=new Uint8Array(r);n.set(this.buffer),this.buffer=n}}class Lk{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class Fk{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class ca{constructor(){this.Be=new Mk,this.Le=new Lk(this.Be),this.Ue=new Fk(this.Be)}seed(e){this.Be.seed(e)}qe(e){return e===0?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e,t,r,n){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=n}Ke(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Zs(this.indexId,this.documentKey,this.arrayValue,r)}}function Ws(s,e){let t=s.indexId-e.indexId;return t!==0?t:(t=uy(s.arrayValue,e.arrayValue),t!==0?t:(t=uy(s.directionalValue,e.directionalValue),t!==0?t:V.comparator(s.documentKey,e.documentKey)))}function uy(s,e){for(let t=0;t<s.length&&t<e.length;++t){const r=s[t]-e[t];if(r!==0)return r}return s.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(e){this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=mf(e);if(t!==void 0&&!this.ze(t))return!1;const r=Qs(e);let n=0,i=0;for(;n<r.length&&this.ze(r[n]);++n);if(n===r.length)return!0;if(this.je!==void 0){const a=r[n];if(!this.He(this.je,a)||!this.Je(this.Ge[i++],a))return!1;++n}for(;n<r.length;++n){const a=r[n];if(i>=this.Ge.length||!this.Je(this.Ge[i++],a))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(){this.Ye=new pp}addToCollectionParentIndex(e,t){return this.Ye.add(t),k.resolve()}getCollectionParents(e,t){return k.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return k.resolve()}deleteFieldIndex(e,t){return k.resolve()}getDocumentsMatchingTarget(e,t){return k.resolve(null)}getIndexType(e,t){return k.resolve(0)}getFieldIndexes(e,t){return k.resolve([])}getNextCollectionGroupToUpdate(e){return k.resolve(null)}getMinOffset(e,t){return k.resolve(Kt.min())}getMinOffsetFromCollectionGroup(e,t){return k.resolve(Kt.min())}updateCollectionGroup(e,t,r){return k.resolve()}updateIndexEntries(e,t){return k.resolve()}}class pp{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),n=this.index[t]||new xe(Te.comparator),i=!n.has(r);return this.index[t]=n.add(r),i}has(e){const t=e.lastSegment(),r=e.popLast(),n=this.index[t];return n&&n.has(r)}getEntries(e){return(this.index[e]||new xe(Te.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tu=new Uint8Array(0);class Vk{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new pp,this.Ze=new $s(r=>_n(r),(r,n)=>Xo(r,n)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),n=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const i={collectionId:r,parent:Ct(n)};return cy(e).put(i)}return k.resolve()}getCollectionParents(e,t){const r=[],n=IDBKeyRange.bound([t,""],[zw(t),""],!1,!0);return cy(e).W(n).next(i=>{for(const a of i){if(a.collectionId!==t)break;r.push(Ir(a.parent))}return r})}addFieldIndex(e,t){const r=bu(e),n=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(o=>[o.fieldPath.canonicalString(),o.kind])}}(t);delete n.indexId;const i=r.add(n);if(t.indexState){const a=ha(e);return i.next(o=>{a.put(ny(o,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return i.next()}deleteFieldIndex(e,t){const r=bu(e),n=ha(e),i=la(e);return r.delete(t.indexId).next(()=>n.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=la(e);let n=!0;const i=new Map;return k.forEach(this.tn(t),a=>this.en(e,a).next(o=>{n&&(n=!!o),i.set(a,o)})).next(()=>{if(n){let a=ce();const o=[];return k.forEach(i,(u,c)=>{var l;L("IndexedDbIndexManager",`Using index ${l=u,`id=${l.indexId}|cg=${l.collectionGroup}|f=${l.fields.map(b=>`${b.fieldPath}:${b.kind}`).join(",")}`} to execute ${_n(t)}`);const h=function(b,I){const y=mf(I);if(y===void 0)return null;for(const T of wc(b,y.fieldPath))switch(T.op){case"array-contains-any":return T.value.arrayValue.values||[];case"array-contains":return[T.value]}return null}(c,u),f=function(b,I){const y=new Map;for(const T of Qs(I))for(const P of wc(b,T.fieldPath))switch(P.op){case"==":case"in":y.set(T.fieldPath.canonicalString(),P.value);break;case"not-in":case"!=":return y.set(T.fieldPath.canonicalString(),P.value),Array.from(y.values())}return null}(c,u),d=function(b,I){const y=[];let T=!0;for(const P of Qs(I)){const E=P.kind===0?qg(b,P.fieldPath,b.startAt):$g(b,P.fieldPath,b.startAt);y.push(E.value),T&&(T=E.inclusive)}return new ks(y,T)}(c,u),g=function(b,I){const y=[];let T=!0;for(const P of Qs(I)){const E=P.kind===0?$g(b,P.fieldPath,b.endAt):qg(b,P.fieldPath,b.endAt);y.push(E.value),T&&(T=E.inclusive)}return new ks(y,T)}(c,u),p=this.nn(u,c,d),m=this.nn(u,c,g),v=this.sn(u,c,f),S=this.rn(u.indexId,h,p,d.inclusive,m,g.inclusive,v);return k.forEach(S,b=>r.J(b,t.limit).next(I=>{I.forEach(y=>{const T=V.fromSegments(y.documentKey);a.has(T)||(a=a.add(T),o.push(T))})}))}).next(()=>o)}return k.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,n,i,a,o){const u=(t!=null?t.length:1)*Math.max(r.length,i.length),c=u/(t!=null?t.length:1),l=[];for(let h=0;h<u;++h){const f=t?this.on(t[h/c]):Tu,d=this.un(e,f,r[h%c],n),g=this.cn(e,f,i[h%c],a),p=o.map(m=>this.un(e,f,m,!0));l.push(...this.createRange(d,g,p))}return l}un(e,t,r,n){const i=new Zs(e,V.empty(),t,r);return n?i:i.Ke()}cn(e,t,r,n){const i=new Zs(e,V.empty(),t,r);return n?i.Ke():i}en(e,t){const r=new Uk(t),n=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,n).next(i=>{let a=null;for(const o of i)r.We(o)&&(!a||o.fields.length>a.fields.length)&&(a=o);return a})}getIndexType(e,t){let r=2;return k.forEach(this.tn(t),n=>this.en(e,n).next(i=>{i?r!==0&&i.fields.length<function(a){let o=new xe(We.comparator),u=!1;for(const c of a.filters){const l=c;l.field.isKeyField()||(l.op==="array-contains"||l.op==="array-contains-any"?u=!0:o=o.add(l.field))}for(const c of a.orderBy)c.field.isKeyField()||(o=o.add(c.field));return o.size+(u?1:0)}(n)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new ca;for(const n of Qs(e)){const i=t.data.field(n.fieldPath);if(i==null)return null;const a=r.qe(n.kind);Xs.Te.ce(i,a)}return r.$e()}on(e){const t=new ca;return Xs.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new ca;return Xs.Te.ce(In(this.databaseId,t),r.qe(function(n){const i=Qs(n);return i.length===0?0:i[i.length-1].kind}(e))),r.$e()}sn(e,t,r){if(r===null)return[];let n=[];n.push(new ca);let i=0;for(const a of Qs(e)){const o=r[i++];for(const u of n)if(this.ln(t,a.fieldPath)&&uo(o))n=this.fn(n,a,o);else{const c=u.qe(a.kind);Xs.Te.ce(o,c)}}return this.dn(n)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const n=[...e],i=[];for(const a of r.arrayValue.values||[])for(const o of n){const u=new ca;u.seed(o.$e()),Xs.Te.ce(a,u.qe(t.kind)),i.push(u)}return i}ln(e,t){return!!e.filters.find(r=>r instanceof pt&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=bu(e),n=ha(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(i=>{const a=[];return k.forEach(i,o=>n.get([o.indexId,this.uid]).next(u=>{a.push(function(c,l){const h=l?new yc(l.sequenceNumber,new Kt(Cn(l.readTime),new V(Ir(l.documentKey)),l.largestBatchId)):yc.empty(),f=c.fields.map(([d,g])=>new SC(We.fromServerFormat(d),g));return new Ww(c.indexId,c.collectionGroup,f,h)}(o,u))})).next(()=>a)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,n)=>{const i=r.indexState.sequenceNumber-n.indexState.sequenceNumber;return i!==0?i:ue(r.collectionGroup,n.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const n=bu(e),i=ha(e);return this._n(e).next(a=>n.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(o=>k.forEach(o,u=>i.put(ny(u.indexId,this.user,a,r)))))}updateIndexEntries(e,t){const r=new Map;return k.forEach(t,(n,i)=>{const a=r.get(n.collectionGroup);return(a?k.resolve(a):this.getFieldIndexes(e,n.collectionGroup)).next(o=>(r.set(n.collectionGroup,o),k.forEach(o,u=>this.wn(e,n,u).next(c=>{const l=this.mn(i,u);return c.isEqual(l)?k.resolve():this.gn(e,i,u,c,l)}))))})}yn(e,t,r,n){return la(e).put({indexId:n.indexId,uid:this.uid,arrayValue:n.arrayValue,directionalValue:n.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,n){return la(e).delete([n.indexId,this.uid,n.arrayValue,n.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const n=la(e);let i=new xe(Ws);return n.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(a,o)=>{i=i.add(new Zs(r.indexId,t,o.arrayValue,o.directionalValue))}).next(()=>i)}mn(e,t){let r=new xe(Ws);const n=this.an(t,e);if(n==null)return r;const i=mf(t);if(i!=null){const a=e.data.field(i.fieldPath);if(uo(a))for(const o of a.arrayValue.values||[])r=r.add(new Zs(t.indexId,e.key,this.on(o),n))}else r=r.add(new Zs(t.indexId,e.key,Tu,n));return r}gn(e,t,r,n,i){L("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const a=[];return function(o,u,c,l,h){const f=o.getIterator(),d=u.getIterator();let g=qn(f),p=qn(d);for(;g||p;){let m=!1,v=!1;if(g&&p){const S=c(g,p);S<0?v=!0:S>0&&(m=!0)}else g!=null?v=!0:m=!0;m?(l(p),p=qn(d)):v?(h(g),g=qn(f)):(g=qn(f),p=qn(d))}}(n,i,Ws,o=>{a.push(this.yn(e,t,r,o))},o=>{a.push(this.pn(e,t,r,o))}),k.waitFor(a)}_n(e){let t=1;return ha(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,n,i)=>{i.done(),t=n.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((a,o)=>Ws(a,o)).filter((a,o,u)=>!o||Ws(a,u[o-1])!==0);const n=[];n.push(e);for(const a of r){const o=Ws(a,e),u=Ws(a,t);if(o===0)n[0]=e.Ke();else if(o>0&&u<0)n.push(a),n.push(a.Ke());else if(u>0)break}n.push(t);const i=[];for(let a=0;a<n.length;a+=2)i.push(IDBKeyRange.bound([n[a].indexId,this.uid,n[a].arrayValue,n[a].directionalValue,Tu,[]],[n[a+1].indexId,this.uid,n[a+1].arrayValue,n[a+1].directionalValue,Tu,[]]));return i}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(ly)}getMinOffset(e,t){return k.mapArray(this.tn(t),r=>this.en(e,r).next(n=>n||K())).next(ly)}}function cy(s){return ct(s,"collectionParents")}function la(s){return ct(s,"indexEntries")}function bu(s){return ct(s,"indexConfiguration")}function ha(s){return ct(s,"indexState")}function ly(s){re(s.length!==0);let e=s[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<s.length;r++){const n=s[r].indexState.offset;tp(n,e)<0&&(e=n),t<n.largestBatchId&&(t=n.largestBatchId)}return new Kt(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Nt{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Nt(e,Nt.DEFAULT_COLLECTION_PERCENTILE,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BT(s,e,t){const r=s.store("mutations"),n=s.store("documentMutations"),i=[],a=IDBKeyRange.only(t.batchId);let o=0;const u=r.Z({range:a},(l,h,f)=>(o++,f.delete()));i.push(u.next(()=>{re(o===1)}));const c=[];for(const l of t.mutations){const h=DT(e,l.key.path,t.batchId);i.push(n.delete(h)),c.push(l.key)}return k.waitFor(i).next(()=>c)}function Sc(s){if(!s)return 0;let e;if(s.document)e=s.document;else if(s.unknownDocument)e=s.unknownDocument;else{if(!s.noDocument)throw K();e=s.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nt.DEFAULT_COLLECTION_PERCENTILE=10,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nt.DEFAULT=new Nt(41943040,Nt.DEFAULT_COLLECTION_PERCENTILE,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nt.DISABLED=new Nt(-1,0,0);class Dl{constructor(e,t,r,n){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=n,this.In={}}static oe(e,t,r,n){re(e.uid!=="");const i=e.isAuthenticated()?e.uid:"";return new Dl(i,t,r,n)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ds(e).Z({index:"userMutationsIndex",range:r},(n,i,a)=>{t=!1,a.done()}).next(()=>t)}addMutationBatch(e,t,r,n){const i=Wn(e),a=ds(e);return a.add({}).next(o=>{re(typeof o=="number");const u=new lp(o,t,r,n),c=function(f,d,g){const p=g.baseMutations.map(v=>fo(f.re,v)),m=g.mutations.map(v=>fo(f.re,v));return{userId:d,batchId:g.batchId,localWriteTimeMs:g.localWriteTime.toMillis(),baseMutations:p,mutations:m}}(this.It,this.userId,u),l=[];let h=new xe((f,d)=>ue(f.canonicalString(),d.canonicalString()));for(const f of n){const d=DT(this.userId,f.key.path,o);h=h.add(f.key.path.popLast()),l.push(a.put(c)),l.push(i.put(d,mk))}return h.forEach(f=>{l.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.In[o]=u.keys()}),k.waitFor(l).next(()=>u)})}lookupMutationBatch(e,t){return ds(e).get(t).next(r=>r?(re(r.userId===this.userId),Js(this.It,r)):null)}Tn(e,t){return this.In[t]?k.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const n=r.keys();return this.In[t]=n,n}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,n=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return ds(e).Z({index:"userMutationsIndex",range:n},(a,o,u)=>{o.userId===this.userId&&(re(o.batchId>=r),i=Js(this.It,o)),u.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ds(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(n,i,a)=>{r=i.batchId,a.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ds(e).W("userMutationsIndex",t).next(r=>r.map(n=>Js(this.It,n)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=zu(this.userId,t.path),n=IDBKeyRange.lowerBound(r),i=[];return Wn(e).Z({range:n},(a,o,u)=>{const[c,l,h]=a,f=Ir(l);if(c===this.userId&&t.path.isEqual(f))return ds(e).get(h).next(d=>{if(!d)throw K();re(d.userId===this.userId),i.push(Js(this.It,d))});u.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new xe(ue);const n=[];return t.forEach(i=>{const a=zu(this.userId,i.path),o=IDBKeyRange.lowerBound(a),u=Wn(e).Z({range:o},(c,l,h)=>{const[f,d,g]=c,p=Ir(d);f===this.userId&&i.path.isEqual(p)?r=r.add(g):h.done()});n.push(u)}),k.waitFor(n).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,n=r.length+1,i=zu(this.userId,r),a=IDBKeyRange.lowerBound(i);let o=new xe(ue);return Wn(e).Z({range:a},(u,c,l)=>{const[h,f,d]=u,g=Ir(f);h===this.userId&&r.isPrefixOf(g)?g.length===n&&(o=o.add(d)):l.done()}).next(()=>this.En(e,o))}En(e,t){const r=[],n=[];return t.forEach(i=>{n.push(ds(e).get(i).next(a=>{if(a===null)throw K();re(a.userId===this.userId),r.push(Js(this.It,a))}))}),k.waitFor(n).next(()=>r)}removeMutationBatch(e,t){return BT(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),k.forEach(r,n=>this.referenceDelegate.markPotentiallyOrphaned(e,n))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return k.resolve();const r=IDBKeyRange.lowerBound([this.userId]),n=[];return Wn(e).Z({range:r},(i,a,o)=>{if(i[0]===this.userId){const u=Ir(i[1]);n.push(u)}else o.done()}).next(()=>{re(n.length===0)})})}containsKey(e,t){return VT(e,this.userId,t)}Rn(e){return qT(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function VT(s,e,t){const r=zu(e,t.path),n=r[1],i=IDBKeyRange.lowerBound(r);let a=!1;return Wn(s).Z({range:i,X:!0},(o,u,c)=>{const[l,h,f]=o;l===e&&h===n&&(a=!0),c.done()}).next(()=>a)}function ds(s){return ct(s,"mutations")}function Wn(s){return ct(s,"documentMutations")}function qT(s){return ct(s,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new kn(0)}static vn(){return new kn(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new kn(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>te.fromTimestamp(new Fe(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(n=>(n.highestListenSequenceNumber=t,r&&(n.lastRemoteSnapshotVersion=r.toTimestamp()),t>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=t),this.Sn(e,n)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>jn(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(re(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let n=0;const i=[];return jn(e).Z((a,o)=>{const u=xa(o);u.sequenceNumber<=t&&r.get(u.targetId)===null&&(n++,i.push(this.removeTargetData(e,u)))}).next(()=>k.waitFor(i)).next(()=>n)}forEachTarget(e,t){return jn(e).Z((r,n)=>{const i=xa(n);t(i)})}Vn(e){return fy(e).get("targetGlobalKey").next(t=>(re(t!==null),t))}Sn(e,t){return fy(e).put("targetGlobalKey",t)}Dn(e,t){return jn(e).put(UT(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=_n(t),n=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return jn(e).Z({range:n,index:"queryTargetsIndex"},(a,o,u)=>{const c=xa(o);Xo(t,c.target)&&(i=c,u.done())}).next(()=>i)}addMatchingKeys(e,t,r){const n=[],i=ws(e);return t.forEach(a=>{const o=Ct(a.path);n.push(i.put({targetId:r,path:o})),n.push(this.referenceDelegate.addReference(e,r,a))}),k.waitFor(n)}removeMatchingKeys(e,t,r){const n=ws(e);return k.forEach(t,i=>{const a=Ct(i.path);return k.waitFor([n.delete([r,a]),this.referenceDelegate.removeReference(e,r,i)])})}removeMatchingKeysForTargetId(e,t){const r=ws(e),n=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(n)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),n=ws(e);let i=ce();return n.Z({range:r,X:!0},(a,o,u)=>{const c=Ir(a[1]),l=new V(c);i=i.add(l)}).next(()=>i)}containsKey(e,t){const r=Ct(t.path),n=IDBKeyRange.bound([r],[zw(r)],!1,!0);let i=0;return ws(e).Z({index:"documentTargetsIndex",X:!0,range:n},([a,o],u,c)=>{a!==0&&(i++,c.done())}).next(()=>i>0)}se(e,t){return jn(e).get(t).next(r=>r?xa(r):null)}}function jn(s){return ct(s,"targets")}function fy(s){return ct(s,"targetGlobal")}function ws(s){return ct(s,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dy([s,e],[t,r]){const n=ue(s,t);return n===0?ue(e,r):n}class $k{constructor(e){this.xn=e,this.buffer=new xe(dy),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();dy(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class jk{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return this.Mn!==null}Fn(e){L("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Mn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){qs(t)?L("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await Vs(t)}await this.Fn(3e5)})}}class Gk{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return k.resolve(Dt.at);const r=new $k(t);return this.$n.forEachTarget(e,n=>r.On(n.sequenceNumber)).next(()=>this.$n.Ln(e,n=>r.On(n))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(L("LruGarbageCollector","Garbage collection skipped; disabled"),k.resolve(hy)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(L("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hy):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,n,i,a,o,u,c;const l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(L("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),n=this.params.maximumSequenceNumbersToCollect):n=h,a=Date.now(),this.nthSequenceNumber(e,n))).next(h=>(r=h,o=Date.now(),this.removeTargets(e,r,t))).next(h=>(i=h,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),pf()<=wn.DEBUG&&L("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-l}ms
	Determined least recently used ${n} in `+(o-a)+`ms
	Removed ${i} targets in `+(u-o)+`ms
	Removed ${h} documents in `+(c-u)+`ms
Total Duration: ${c-l}ms`),k.resolve({didRun:!0,sequenceNumbersCollected:n,targetsRemoved:i,documentsRemoved:h})))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e,t){this.db=e,this.garbageCollector=function(r,n){return new Gk(r,n)}(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(n=>r+n))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,n)=>t(n))}addReference(e,t,r){return Su(e,r)}removeReference(e,t,r){return Su(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Su(e,t)}Gn(e,t){return function(r,n){let i=!1;return qT(r).tt(a=>VT(r,a,n).next(o=>(o&&(i=!0),k.resolve(!o)))).next(()=>i)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),n=[];let i=0;return this.Kn(e,(a,o)=>{if(o<=t){const u=this.Gn(e,a).next(c=>{if(!c)return i++,r.getEntry(e,a).next(()=>(r.removeEntry(a,te.min()),ws(e).delete([0,Ct(a.path)])))});n.push(u)}}).next(()=>k.waitFor(n)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Su(e,t)}Kn(e,t){const r=ws(e);let n,i=Dt.at;return r.Z({index:"documentTargetsIndex"},([a,o],{path:u,sequenceNumber:c})=>{a===0?(i!==Dt.at&&t(new V(Ir(n)),i),i=c,n=u):i=Dt.at}).next(()=>{i!==Dt.at&&t(new V(Ir(n)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Su(s,e){return ws(s).put(function(t,r){return{targetId:0,path:Ct(t.path),sequenceNumber:r}}(e,s.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(){this.changes=new $s(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ke.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?k.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ks(e).put(r)}removeEntry(e,t,r){return Ks(e).delete(function(n,i){const a=n.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],bc(i),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=ke.newInvalidDocument(t);return Ks(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(fa(t))},(n,i)=>{r=this.jn(t,i)}).next(()=>r)}Wn(e,t){let r={size:0,document:ke.newInvalidDocument(t)};return Ks(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(fa(t))},(n,i)=>{r={document:this.jn(t,i),size:Sc(i)}}).next(()=>r)}getEntries(e,t){let r=Rt();return this.zn(e,t,(n,i)=>{const a=this.jn(n,i);r=r.insert(n,a)}).next(()=>r)}Hn(e,t){let r=Rt(),n=new je(V.comparator);return this.zn(e,t,(i,a)=>{const o=this.jn(i,a);r=r.insert(i,o),n=n.insert(i,Sc(a))}).next(()=>({documents:r,Jn:n}))}zn(e,t,r){if(t.isEmpty())return k.resolve();let n=new xe(gy);t.forEach(u=>n=n.add(u));const i=IDBKeyRange.bound(fa(n.first()),fa(n.last())),a=n.getIterator();let o=a.getNext();return Ks(e).Z({index:"documentKeyIndex",range:i},(u,c,l)=>{const h=V.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;o&&gy(o,h)<0;)r(o,null),o=a.getNext();o&&o.isEqual(h)&&(r(o,c),o=a.hasNext()?a.getNext():null),o?l.j(fa(o)):l.done()}).next(()=>{for(;o;)r(o,null),o=a.hasNext()?a.getNext():null})}getAllFromCollection(e,t,r){const n=[t.popLast().toArray(),t.lastSegment(),bc(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],i=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ks(e).W(IDBKeyRange.bound(n,i,!0)).next(a=>{let o=Rt();for(const u of a){const c=this.jn(V.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);o=o.insert(c.key,c)}return o})}getAllFromCollectionGroup(e,t,r,n){let i=Rt();const a=my(t,r),o=my(t,Kt.max());return Ks(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(a,o,!0)},(u,c,l)=>{const h=this.jn(V.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);i=i.insert(h.key,h),i.size===n&&l.done()}).next(()=>i)}newChangeBuffer(e){return new Kk(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return py(e).get("remoteDocumentGlobalKey").next(t=>(re(!!t),t))}Qn(e,t){return py(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=Ok(this.It,t);if(!(r.isNoDocument()&&r.version.isEqual(te.min())))return r}return ke.newInvalidDocument(e)}}function jT(s){return new Wk(s)}class Kk extends $T{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new $s(r=>r.toString(),(r,n)=>r.isEqual(n))}applyChanges(e){const t=[];let r=0,n=new xe((i,a)=>ue(i.canonicalString(),a.canonicalString()));return this.changes.forEach((i,a)=>{const o=this.Xn.get(i);if(t.push(this.Yn.removeEntry(e,i,o.readTime)),a.isValidDocument()){const u=ry(this.Yn.It,a);n=n.add(i.path.popLast()),r+=Sc(u)-o.size,t.push(this.Yn.addEntry(e,i,u))}else if(r-=o.size,this.trackRemovals){const u=ry(this.Yn.It,a.convertToNoDocument(te.min()));t.push(this.Yn.addEntry(e,i,u))}}),n.forEach(i=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,i))}),t.push(this.Yn.updateMetadata(e,r)),k.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:n})=>(n.forEach((i,a)=>{this.Xn.set(i,{size:a,readTime:r.get(i).readTime})}),r))}}function py(s){return ct(s,"remoteDocumentGlobal")}function Ks(s){return ct(s,"remoteDocumentsV14")}function fa(s){const e=s.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function my(s,e){const t=e.documentKey.path.toArray();return[s,bc(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function gy(s,e){const t=s.path.toArray(),r=e.path.toArray();let n=0;for(let i=0;i<t.length-2&&i<r.length-2;++i)if(n=ue(t[i],r[i]),n)return n;return n=ue(t.length,r.length),n||(n=ue(t[t.length-2],r[r.length-2]),n||ue(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(e,t,r,n){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=n}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(n=>(r=n,this.getBaseDocument(e,t,r))).next(n=>(r!==null&&Ma(r.mutation,n,Gt.empty(),Fe.now()),n))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ce()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ce()){const n=Er();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,r).next(i=>{let a=_a();return i.forEach((o,u)=>{a=a.insert(o,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){const r=Er();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ce()))}populateOverlays(e,t,r){const n=[];return r.forEach(i=>{t.has(i)||n.push(i)}),this.documentOverlayCache.getOverlays(e,n).next(i=>{i.forEach((a,o)=>{t.set(a,o)})})}computeViews(e,t,r,n){let i=Rt();const a=La(),o=La();return t.forEach((u,c)=>{const l=r.get(c.key);n.has(c.key)&&(l===void 0||l.mutation instanceof as)?i=i.insert(c.key,c):l!==void 0&&(a.set(c.key,l.mutation.getFieldMask()),Ma(l.mutation,c,l.mutation.getFieldMask(),Fe.now()))}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((c,l)=>a.set(c,l)),t.forEach((c,l)=>{var h;return o.set(c,new Hk(l,(h=a.get(c))!==null&&h!==void 0?h:null))}),o))}recalculateAndSaveOverlays(e,t){const r=La();let n=new je((a,o)=>a-o),i=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(const o of a)o.keys().forEach(u=>{const c=t.get(u);if(c===null)return;let l=r.get(u)||Gt.empty();l=o.applyToLocalView(c,l),r.set(u,l);const h=(n.get(o.batchId)||ce()).add(u);n=n.insert(o.batchId,h)})}).next(()=>{const a=[],o=n.getReverseIterator();for(;o.hasNext();){const u=o.getNext(),c=u.key,l=u.value,h=TT();l.forEach(f=>{if(!i.has(f)){const d=pT(t.get(f),r.get(f));d!==null&&h.set(f,d),i=i.add(f)}}),a.push(this.documentOverlayCache.saveOverlays(e,c,h))}return k.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return function(n){return V.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ap(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r)}getNextDocuments(e,t,r,n){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,n).next(i=>{const a=n-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,n-i.size):k.resolve(Er());let o=-1,u=i;return a.next(c=>k.forEach(c,(l,h)=>(o<h.largestBatchId&&(o=h.largestBatchId),i.get(l)?k.resolve():this.getBaseDocument(e,l,h).next(f=>{u=u.insert(l,f)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,u,c,ce())).next(l=>({batchId:o,changes:wT(l)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new V(t)).next(r=>{let n=_a();return r.isFoundDocument()&&(n=n.insert(r.key,r)),n})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const n=t.collectionGroup;let i=_a();return this.indexManager.getCollectionParents(e,n).next(a=>k.forEach(a,o=>{const u=function(c,l){return new is(l,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt)}(t,o.child(n));return this.getDocumentsMatchingCollectionQuery(e,u,r).next(c=>{c.forEach((l,h)=>{i=i.insert(l,h)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,r){let n;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(i=>(n=i,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(i=>{i.forEach((o,u)=>{const c=u.getKey();n.get(c)===null&&(n=n.insert(c,ke.newInvalidDocument(c)))});let a=_a();return n.forEach((o,u)=>{const c=i.get(o);c!==void 0&&Ma(c.mutation,u,Gt.empty(),Fe.now()),op(t,u)&&(a=a.insert(o,u))}),a})}getBaseDocument(e,t,r){return r===null||r.mutation.type===1?this.remoteDocumentCache.getEntry(e,t):k.resolve(ke.newInvalidDocument(t))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return k.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:it(r.createTime)}),k.resolve()}getNamedQuery(e,t){return k.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,function(r){return{name:r.name,query:dp(r.bundledQuery),readTime:it(r.readTime)}}(t)),k.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(){this.overlays=new je(V.comparator),this.es=new Map}getOverlay(e,t){return k.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Er();return k.forEach(t,n=>this.getOverlay(e,n).next(i=>{i!==null&&r.set(n,i)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((n,i)=>{this.ue(e,t,i)}),k.resolve()}removeOverlaysForBatchId(e,t,r){const n=this.es.get(r);return n!==void 0&&(n.forEach(i=>this.overlays=this.overlays.remove(i)),this.es.delete(r)),k.resolve()}getOverlaysForCollection(e,t,r){const n=Er(),i=t.length+1,a=new V(t.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const u=o.getNext().value,c=u.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===i&&u.largestBatchId>r&&n.set(u.getKey(),u)}return k.resolve(n)}getOverlaysForCollectionGroup(e,t,r,n){let i=new je((c,l)=>c-l);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>r){let l=i.get(c.largestBatchId);l===null&&(l=Er(),i=i.insert(c.largestBatchId,l)),l.set(c.getKey(),c)}}const o=Er(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,l)=>o.set(c,l)),!(o.size()>=n)););return k.resolve(o)}ue(e,t,r){const n=this.overlays.get(r.key);if(n!==null){const a=this.es.get(n.largestBatchId).delete(r.key);this.es.set(n.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new fp(t,r));let i=this.es.get(t);i===void 0&&(i=ce(),this.es.set(t,i)),this.es.set(t,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(){this.ns=new xe(rt.ss),this.rs=new xe(rt.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new rt(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new rt(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new V(new Te([])),r=new rt(t,e),n=new rt(t,e+1),i=[];return this.rs.forEachInRange([r,n],a=>{this.cs(a),i.push(a.key)}),i}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new V(new Te([])),r=new rt(t,e),n=new rt(t,e+1);let i=ce();return this.rs.forEachInRange([r,n],a=>{i=i.add(a.key)}),i}containsKey(e){const t=new rt(e,0),r=this.ns.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class rt{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return V.comparator(e.key,t.key)||ue(e._s,t._s)}static os(e,t){return ue(e._s,t._s)||V.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new xe(rt.ss)}checkEmpty(e){return k.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,n){const i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new lp(i,t,r,n);this.mutationQueue.push(a);for(const o of n)this.gs=this.gs.add(new rt(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return k.resolve(a)}lookupMutationBatch(e,t){return k.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,n=this.ps(r),i=n<0?0:n;return k.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return k.resolve(this.mutationQueue.length===0?-1:this.ws-1)}getAllMutationBatches(e){return k.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new rt(t,0),n=new rt(t,Number.POSITIVE_INFINITY),i=[];return this.gs.forEachInRange([r,n],a=>{const o=this.ys(a._s);i.push(o)}),k.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new xe(ue);return t.forEach(n=>{const i=new rt(n,0),a=new rt(n,Number.POSITIVE_INFINITY);this.gs.forEachInRange([i,a],o=>{r=r.add(o._s)})}),k.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,n=r.length+1;let i=r;V.isDocumentKey(i)||(i=i.child(""));const a=new rt(new V(i),0);let o=new xe(ue);return this.gs.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===n&&(o=o.add(u._s)),!0)},a),k.resolve(this.Is(o))}Is(e){const t=[];return e.forEach(r=>{const n=this.ys(r);n!==null&&t.push(n)}),t}removeMutationBatch(e,t){re(this.Ts(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.gs;return k.forEach(t.mutations,n=>{const i=new rt(n.key,t.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,n.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new rt(t,0),n=this.gs.firstAfterOrEqual(r);return k.resolve(t.isEqual(n&&n.key))}performConsistencyCheck(e){return this.mutationQueue.length,k.resolve()}Ts(e,t){return this.ps(e)}ps(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(e){this.Es=e,this.docs=new je(V.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,n=this.docs.get(r),i=n?n.size:0,a=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return k.resolve(r?r.document.mutableCopy():ke.newInvalidDocument(t))}getEntries(e,t){let r=Rt();return t.forEach(n=>{const i=this.docs.get(n);r=r.insert(n,i?i.document.mutableCopy():ke.newInvalidDocument(n))}),k.resolve(r)}getAllFromCollection(e,t,r){let n=Rt();const i=new V(t.child("")),a=this.docs.getIteratorFrom(i);for(;a.hasNext();){const{key:o,value:{document:u}}=a.getNext();if(!t.isPrefixOf(o.path))break;o.path.length>t.length+1||tp(Hw(u),r)<=0||(n=n.insert(u.key,u.mutableCopy()))}return k.resolve(n)}getAllFromCollectionGroup(e,t,r,n){K()}As(e,t){return k.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Zk(this)}getSize(e){return k.resolve(this.size)}}class Zk extends $T{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,n)=>{n.isValidDocument()?t.push(this.Yn.addEntry(e,n)):this.Yn.removeEntry(r)}),k.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e){this.persistence=e,this.Rs=new $s(t=>_n(t),Xo),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this.bs=0,this.Ps=new mp,this.targetCount=0,this.vs=kn.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,n)=>t(n)),k.resolve()}getLastRemoteSnapshotVersion(e){return k.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return k.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),k.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),k.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new kn(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,k.resolve()}updateTargetData(e,t){return this.Dn(t),k.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,k.resolve()}removeTargets(e,t,r){let n=0;const i=[];return this.Rs.forEach((a,o)=>{o.sequenceNumber<=t&&r.get(o.targetId)===null&&(this.Rs.delete(a),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),n++)}),k.waitFor(i).next(()=>n)}getTargetCount(e){return k.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return k.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),k.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const n=this.persistence.referenceDelegate,i=[];return n&&t.forEach(a=>{i.push(n.markPotentiallyOrphaned(e,a))}),k.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),k.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return k.resolve(r)}containsKey(e,t){return k.resolve(this.Ps.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Dt(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new eN(this),this.indexManager=new Bk,this.remoteDocumentCache=function(r){return new Xk(r)}(r=>this.referenceDelegate.xs(r)),this.It=new FT(t),this.Ns=new Qk(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Yk,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new Jk(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){L("MemoryPersistence","Starting transaction:",e);const n=new tN(this.Ss.next());return this.referenceDelegate.ks(),r(n).next(i=>this.referenceDelegate.Os(n).next(()=>i)).toPromise().then(i=>(n.raiseOnCommittedEvent(),i))}Ms(e,t){return k.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class tN extends Yw{constructor(e){super(),this.currentSequenceNumber=e}}class Rl{constructor(e){this.persistence=e,this.Fs=new mp,this.$s=null}static Bs(e){return new Rl(e)}get Ls(){if(this.$s)return this.$s;throw K()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),k.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),k.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),k.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(n=>this.Ls.add(n.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(n=>{n.forEach(i=>this.Ls.add(i.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return k.forEach(this.Ls,r=>{const n=V.fromPath(r);return this.Us(e,n).next(i=>{i||t.removeEntry(n,te.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return k.or([()=>k.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(e){this.It=e}$(e,t,r,n){const i=new Pl("createOrUpgrade",t);r<1&&n>=1&&(function(o){o.createObjectStore("owner")}(e),function(o){o.createObjectStore("mutationQueues",{keyPath:"userId"}),o.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ty,{unique:!0}),o.createObjectStore("documentMutations")}(e),yy(e),function(o){o.createObjectStore("remoteDocuments")}(e));let a=k.resolve();return r<3&&n>=3&&(r!==0&&(function(o){o.deleteObjectStore("targetDocuments"),o.deleteObjectStore("targets"),o.deleteObjectStore("targetGlobal")}(e),yy(e)),a=a.next(()=>function(o){const u=o.store("targetGlobal"),c={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:te.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",c)}(i))),r<4&&n>=4&&(r!==0&&(a=a.next(()=>function(o,u){return u.store("mutations").W().next(c=>{o.deleteObjectStore("mutations"),o.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ty,{unique:!0});const l=u.store("mutations"),h=c.map(f=>l.put(f));return k.waitFor(h)})}(e,i))),a=a.next(()=>{(function(o){o.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&n>=5&&(a=a.next(()=>this.qs(i))),r<6&&n>=6&&(a=a.next(()=>(function(o){o.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(i)))),r<7&&n>=7&&(a=a.next(()=>this.Gs(i))),r<8&&n>=8&&(a=a.next(()=>this.Qs(e,i))),r<9&&n>=9&&(a=a.next(()=>{(function(o){o.objectStoreNames.contains("remoteDocumentChanges")&&o.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&n>=10&&(a=a.next(()=>this.js(i))),r<11&&n>=11&&(a=a.next(()=>{(function(o){o.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(o){o.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&n>=12&&(a=a.next(()=>{(function(o){const u=o.createObjectStore("documentOverlays",{keyPath:Ak});u.createIndex("collectionPathOverlayIndex",Pk,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",Ck,{unique:!1})})(e)})),r<13&&n>=13&&(a=a.next(()=>function(o){const u=o.createObjectStore("remoteDocumentsV14",{keyPath:gk});u.createIndex("documentKeyIndex",yk),u.createIndex("collectionGroupIndex",vk)}(e)).next(()=>this.Ws(e,i)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&n>=14&&(a=a.next(()=>this.zs(e,i))),r<15&&n>=15&&(a=a.next(()=>function(o){o.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),o.createObjectStore("indexState",{keyPath:Ek}).createIndex("sequenceNumberIndex",Ik,{unique:!1}),o.createObjectStore("indexEntries",{keyPath:_k}).createIndex("documentKeyIndex",xk,{unique:!1})}(e))),a}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,n)=>{t+=Sc(n)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(n=>k.forEach(n,i=>{const a=IDBKeyRange.bound([i.userId,-1],[i.userId,i.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",a).next(o=>k.forEach(o,u=>{re(u.userId===i.userId);const c=Js(this.It,u);return BT(e,i.userId,c).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(n=>{const i=[];return r.Z((a,o)=>{const u=new Te(a),c=function(l){return[0,Ct(l)]}(u);i.push(t.get(c).next(l=>l?k.resolve():(h=>t.put({targetId:0,path:Ct(h),sequenceNumber:n.highestListenSequenceNumber}))(u)))}).next(()=>k.waitFor(i))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:Sk});const r=t.store("collectionParents"),n=new pp,i=a=>{if(n.add(a)){const o=a.lastSegment(),u=a.popLast();return r.put({collectionId:o,parent:Ct(u)})}};return t.store("remoteDocuments").Z({X:!0},(a,o)=>{const u=new Te(a);return i(u.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([a,o,u],c)=>{const l=Ir(o);return i(l.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,n)=>{const i=xa(n),a=UT(this.It,i);return t.put(a)})}Ws(e,t){const r=t.store("remoteDocuments"),n=[];return r.Z((i,a)=>{const o=t.store("remoteDocumentsV14"),u=(c=a,c.document?new V(Te.fromString(c.document.name).popFirst(5)):c.noDocument?V.fromSegments(c.noDocument.path):c.unknownDocument?V.fromSegments(c.unknownDocument.path):K()).path.toArray();var c;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};n.push(o.put(l))}).next(()=>k.waitFor(n))}zs(e,t){const r=t.store("mutations"),n=jT(this.It),i=new zT(Rl.Bs,this.It.re);return r.W().next(a=>{const o=new Map;return a.forEach(u=>{var c;let l=(c=o.get(u.userId))!==null&&c!==void 0?c:ce();Js(this.It,u).keys().forEach(h=>l=l.add(h)),o.set(u.userId,l)}),k.forEach(o,(u,c)=>{const l=new st(c),h=Ol.oe(this.It,l),f=i.getIndexManager(l),d=Dl.oe(l,this.It,f,i.referenceDelegate);return new GT(n,d,h,f).recalculateAndSaveOverlaysForDocumentKeys(new bf(t,Dt.at),u).next()})})}}function yy(s){s.createObjectStore("targetDocuments",{keyPath:Tk}).createIndex("documentTargetsIndex",bk,{unique:!0}),s.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",wk,{unique:!0}),s.createObjectStore("targetGlobal")}const Sh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class gp{constructor(e,t,r,n,i,a,o,u,c,l,h=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=i,this.window=a,this.document=o,this.Js=c,this.Ys=l,this.Xs=h,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=f=>Promise.resolve(),!gp.C())throw new M(N.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new zk(this,n),this.ii=t+"main",this.It=new FT(u),this.ri=new ir(this.ii,this.Xs,new rN(this.It)),this.Cs=new qk(this.referenceDelegate,this.It),this.remoteDocumentCache=jT(this.It),this.Ns=new Dk,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,l===!1&&ze("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new M(N.FAILED_PRECONDITION,Sh);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Dt(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){return this.si=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget(async()=>{this.started&&await this.ui()}))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Eu(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(qs(e))return L("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return L("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return da(e).get("owner").next(t=>k.resolve(this.mi(t)))}gi(e){return Eu(e).delete(this.clientId)}async yi(){if(this.isPrimary&&!this.pi(this.ni,18e5)){this.ni=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=ct(t,"clientMetadata");return r.W().next(n=>{const i=this.Ii(n,18e5),a=n.filter(o=>i.indexOf(o)===-1);return k.forEach(a,o=>r.delete(o.clientId)).next(()=>a)})}).catch(()=>[]);if(this.oi)for(const t of e)this.oi.removeItem(this.Ti(t.clientId))}}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?k.resolve(!0):da(e).get("owner").next(t=>{if(t!==null&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new M(N.FAILED_PRECONDITION,Sh);return!1}}return!(!this.networkEnabled||!this.inForeground)||Eu(e).W().next(r=>this.Ii(r,5e3).find(n=>{if(this.clientId!==n.clientId){const i=!this.networkEnabled&&n.networkEnabled,a=!this.inForeground&&n.inForeground,o=this.networkEnabled===n.networkEnabled;if(i||a&&o)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&L("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.Ds=!1,this.Ai(),this.ei&&(this.ei.cancel(),this.ei=null),this.Ri(),this.bi(),await this.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const t=new bf(e,Dt.at);return this._i(t).next(()=>this.gi(t))}),this.ri.close(),this.Pi()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>Eu(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return Dl.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Vk(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return Ol.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){L("IndexedDbPersistence","Starting transaction:",e);const n=t==="readonly"?"readonly":"readwrite",i=(a=this.Xs)===15?Nk:a===14?LT:a===13?MT:a===12?kk:a===11?RT:void K();var a;let o;return this.ri.runTransaction(e,n,i,u=>(o=new bf(u,this.Ss?this.Ss.next():Dt.at),t==="readwrite-primary"?this.fi(o).next(c=>!!c||this.di(o)).next(c=>{if(!c)throw ze(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new M(N.FAILED_PRECONDITION,Qw);return r(o)}).next(c=>this.wi(o).next(()=>c)):this.Vi(o).next(()=>r(o)))).then(u=>(o.raiseOnCommittedEvent(),u))}Vi(e){return da(e).get("owner").next(t=>{if(t!==null&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new M(N.FAILED_PRECONDITION,Sh)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return da(e).put("owner",t)}static C(){return ir.C()}_i(e){const t=da(e);return t.get("owner").next(r=>this.mi(r)?(L("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):k.resolve())}pi(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(ze(`Detected an update time that is in the future: ${e} > ${r}`),!1))}ci(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground=this.document.visibilityState==="visible")}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Zs=()=>{this.Ai(),g1()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=((t=this.oi)===null||t===void 0?void 0:t.getItem(this.Ti(e)))!==null;return L("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ze("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){ze("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function da(s){return ct(s,"owner")}function Eu(s){return ct(s,"clientMetadata")}function yp(s,e){let t=s.projectId;return s.isDefaultDatabase||(t+="."+s.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(e,t,r,n){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=n}static Ci(e,t){let r=ce(),n=ce();for(const i of t.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:n=n.add(i.doc.key)}return new vp(e,t.fromCache,r,n)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,n){return this.ki(e,t).next(i=>i||this.Oi(e,t,n,r)).next(i=>i||this.Mi(e,t))}ki(e,t){if(zg(t))return k.resolve(null);let r=Lt(t);return this.indexManager.getIndexType(e,r).next(n=>n===0?null:(t.limit!==null&&n===1&&(t=Tc(t,null,"F"),r=Lt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=ce(...i);return this.Ni.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.Fi(t,o);return this.$i(t,c,a,u.readTime)?this.ki(e,Tc(t,null,"F")):this.Bi(e,c,t,u)}))})))}Oi(e,t,r,n){return zg(t)||n.isEqual(te.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(i=>{const a=this.Fi(t,i);return this.$i(t,a,r,n)?this.Mi(e,t):(pf()<=wn.DEBUG&&L("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),vf(t)),this.Bi(e,a,t,Kw(n,-1)))})}Fi(e,t){let r=new xe(aT(e));return t.forEach((n,i)=>{op(e,i)&&(r=r.add(i))}),r}$i(e,t,r,n){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const i=e.limitType==="F"?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(n)>0)}Mi(e,t){return pf()<=wn.DEBUG&&L("QueryEngine","Using full collection scan to execute query:",vf(t)),this.Ni.getDocumentsMatchingQuery(e,t,Kt.min())}Bi(e,t,r,n){return this.Ni.getDocumentsMatchingQuery(e,r,n).next(i=>(t.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(e,t,r,n){this.persistence=e,this.Li=t,this.It=n,this.Ui=new je(ue),this.qi=new $s(i=>_n(i),Xo),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new GT(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function KT(s,e,t,r){return new sN(s,e,t,r)}async function HT(s,e){const t=q(s);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let n;return t.mutationQueue.getAllMutationBatches(r).next(i=>(n=i,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],o=[];let u=ce();for(const c of n){a.push(c.batchId);for(const l of c.mutations)u=u.add(l.key)}for(const c of i){o.push(c.batchId);for(const l of c.mutations)u=u.add(l.key)}return t.localDocuments.getDocuments(r,u).next(c=>({ji:c,removedBatchIds:a,addedBatchIds:o}))})})}function nN(s,e){const t=q(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const n=e.batch.keys(),i=t.Gi.newChangeBuffer({trackRemovals:!0});return function(a,o,u,c){const l=u.batch,h=l.keys();let f=k.resolve();return h.forEach(d=>{f=f.next(()=>c.getEntry(o,d)).next(g=>{const p=u.docVersions.get(d);re(p!==null),g.version.compareTo(p)<0&&(l.applyToRemoteDocument(g,u),g.isValidDocument()&&(g.setReadTime(u.commitVersion),c.addEntry(g)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(o,l))}(t,r,e,i).next(()=>i.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,n,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let o=ce();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(o=o.add(a.batch.mutations[u].key));return o}(e))).next(()=>t.localDocuments.getDocuments(r,n))})}function QT(s){const e=q(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function iN(s,e){const t=q(s),r=e.snapshotVersion;let n=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=t.Gi.newChangeBuffer({trackRemovals:!0});n=t.Ui;const o=[];e.targetChanges.forEach((l,h)=>{const f=n.get(h);if(!f)return;o.push(t.Cs.removeMatchingKeys(i,l.removedDocuments,h).next(()=>t.Cs.addMatchingKeys(i,l.addedDocuments,h)));let d=f.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.has(h)?d=d.withResumeToken(Je.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):l.resumeToken.approximateByteSize()>0&&(d=d.withResumeToken(l.resumeToken,r)),n=n.insert(h,d),function(g,p,m){return g.resumeToken.approximateByteSize()===0||p.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=3e8?!0:m.addedDocuments.size+m.modifiedDocuments.size+m.removedDocuments.size>0}(f,d,l)&&o.push(t.Cs.updateTargetData(i,d))});let u=Rt(),c=ce();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&o.push(t.persistence.referenceDelegate.updateLimboDocument(i,l))}),o.push(YT(i,a,e.documentUpdates).next(l=>{u=l.Wi,c=l.zi})),!r.isEqual(te.min())){const l=t.Cs.getLastRemoteSnapshotVersion(i).next(h=>t.Cs.setTargetsMetadata(i,i.currentSequenceNumber,r));o.push(l)}return k.waitFor(o).next(()=>a.apply(i)).next(()=>t.localDocuments.getLocalViewOfDocuments(i,u,c)).next(()=>u)}).then(i=>(t.Ui=n,i))}function YT(s,e,t){let r=ce(),n=ce();return t.forEach(i=>r=r.add(i)),e.getEntries(s,r).next(i=>{let a=Rt();return t.forEach((o,u)=>{const c=i.get(o);u.isFoundDocument()!==c.isFoundDocument()&&(n=n.add(o)),u.isNoDocument()&&u.version.isEqual(te.min())?(e.removeEntry(o,u.readTime),a=a.insert(o,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),a=a.insert(o,u)):L("LocalStore","Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",u.version)}),{Wi:a,zi:n}})}function aN(s,e){const t=q(s);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ei(s,e){const t=q(s);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let n;return t.Cs.getTargetData(r,e).next(i=>i?(n=i,k.resolve(n)):t.Cs.allocateTargetId(r).next(a=>(n=new Is(e,a,0,r.currentSequenceNumber),t.Cs.addTargetData(r,n).next(()=>n))))}).then(r=>{const n=t.Ui.get(r.targetId);return(n===null||r.snapshotVersion.compareTo(n.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}async function Ii(s,e,t){const r=q(s),n=r.Ui.get(e),i=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,n))}catch(a){if(!qs(a))throw a;L("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ui=r.Ui.remove(e),r.qi.delete(n.target)}function Ec(s,e,t){const r=q(s);let n=te.min(),i=ce();return r.persistence.runTransaction("Execute query","readonly",a=>function(o,u,c){const l=q(o),h=l.qi.get(c);return h!==void 0?k.resolve(l.Ui.get(h)):l.Cs.getTargetData(u,c)}(r,a,Lt(e)).next(o=>{if(o)return n=o.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(a,o.targetId).next(u=>{i=u})}).next(()=>r.Li.getDocumentsMatchingQuery(a,e,t?n:te.min(),t?i:ce())).next(o=>(ZT(r,iT(e),o),{documents:o,Hi:i})))}function JT(s,e){const t=q(s),r=q(t.Cs),n=t.Ui.get(e);return n?Promise.resolve(n.target):t.persistence.runTransaction("Get target data","readonly",i=>r.se(i,e).next(a=>a?a.target:null))}function XT(s,e){const t=q(s),r=t.Ki.get(e)||te.min();return t.persistence.runTransaction("Get new document changes","readonly",n=>t.Gi.getAllFromCollectionGroup(n,e,Kw(r,-1),Number.MAX_SAFE_INTEGER)).then(n=>(ZT(t,e,n),n))}function ZT(s,e,t){let r=s.Ki.get(e)||te.min();t.forEach((n,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),s.Ki.set(e,r)}async function oN(s,e,t,r){const n=q(s);let i=ce(),a=Rt();for(const c of t){const l=e.Ji(c.metadata.name);c.document&&(i=i.add(l));const h=e.Yi(c);h.setReadTime(e.Xi(c.metadata.readTime)),a=a.insert(l,h)}const o=n.Gi.newChangeBuffer({trackRemovals:!0}),u=await Ei(n,function(c){return Lt(zi(Te.fromString(`__bundle__/docs/${c}`)))}(r));return n.persistence.runTransaction("Apply bundle documents","readwrite",c=>YT(c,o,a).next(l=>(o.apply(c),l)).next(l=>n.Cs.removeMatchingKeysForTargetId(c,u.targetId).next(()=>n.Cs.addMatchingKeys(c,i,u.targetId)).next(()=>n.localDocuments.getLocalViewOfDocuments(c,l.Wi,l.zi)).next(()=>l.Wi)))}async function uN(s,e,t=ce()){const r=await Ei(s,Lt(dp(e.bundledQuery))),n=q(s);return n.persistence.runTransaction("Save named query","readwrite",i=>{const a=it(e.readTime);if(r.snapshotVersion.compareTo(a)>=0)return n.Ns.saveNamedQuery(i,e);const o=r.withResumeToken(Je.EMPTY_BYTE_STRING,a);return n.Ui=n.Ui.insert(o.targetId,o),n.Cs.updateTargetData(i,o).next(()=>n.Cs.removeMatchingKeysForTargetId(i,r.targetId)).next(()=>n.Cs.addMatchingKeys(i,t,r.targetId)).next(()=>n.Ns.saveNamedQuery(i,e))})}function vy(s,e){return`firestore_clients_${s}_${e}`}function wy(s,e,t){let r=`firestore_mutations_${s}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Eh(s,e){return`firestore_targets_${s}_${e}`}class Ic{constructor(e,t,r,n){this.user=e,this.batchId=t,this.state=r,this.error=n}static Zi(e,t,r){const n=JSON.parse(r);let i,a=typeof n=="object"&&["pending","acknowledged","rejected"].indexOf(n.state)!==-1&&(n.error===void 0||typeof n.error=="object");return a&&n.error&&(a=typeof n.error.message=="string"&&typeof n.error.code=="string",a&&(i=new M(n.error.code,n.error.message))),a?new Ic(e,t,n.state,i):(ze("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Fa{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let n,i=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return i&&r.error&&(i=typeof r.error.message=="string"&&typeof r.error.code=="string",i&&(n=new M(r.error.code,r.error.message))),i?new Fa(e,r.state,n):(ze("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class _c{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let n=typeof r=="object"&&r.activeTargetIds instanceof Array,i=Nl();for(let a=0;n&&a<r.activeTargetIds.length;++a)n=Zw(r.activeTargetIds[a]),i=i.add(r.activeTargetIds[a]);return n?new _c(e,i):(ze("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class wp{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new wp(t.clientId,t.onlineState):(ze("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Sf{constructor(){this.activeTargetIds=Nl()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ih{constructor(e,t,r,n,i){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=n,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new je(ue),this.started=!1,this.cr=[];const a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ar=vy(this.persistenceKey,this.sr),this.hr=function(o){return`firestore_sequence_number_${o}`}(this.persistenceKey),this.ur=this.ur.insert(this.sr,new Sf),this.lr=new RegExp(`^firestore_clients_${a}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${a}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${a}_(\\d+)$`),this.wr=function(o){return`firestore_online_state_${o}`}(this.persistenceKey),this.mr=function(o){return`firestore_bundle_loaded_v2_${o}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.vi();for(const r of e){if(r===this.sr)continue;const n=this.getItem(vy(this.persistenceKey,r));if(n){const i=_c.Zi(r,n);i&&(this.ur=this.ur.insert(i.clientId,i))}}this.gr();const t=this.storage.getItem(this.wr);if(t){const r=this.yr(t);r&&this.pr(r)}for(const r of this.cr)this.rr(r);this.cr=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,n)=>{n.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Eh(this.persistenceKey,e));if(r){const n=Fa.Zi(e,r);n&&(t=n.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Eh(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(n=>{this.Er(n)}),this.currentUser=e,r.forEach(n=>{this.addPendingMutation(n)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return L("SharedClientState","READ",e,t),t}setItem(e,t){L("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){L("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){const t=e;if(t.storageArea===this.storage){if(L("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ar)return void ze("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable(async()=>{if(this.started){if(t.key!==null){if(this.lr.test(t.key)){if(t.newValue==null){const r=this.vr(t.key);return this.Vr(r,null)}{const r=this.Sr(t.key,t.newValue);if(r)return this.Vr(r.clientId,r)}}else if(this.dr.test(t.key)){if(t.newValue!==null){const r=this.Dr(t.key,t.newValue);if(r)return this.Cr(r)}}else if(this._r.test(t.key)){if(t.newValue!==null){const r=this.Nr(t.key,t.newValue);if(r)return this.kr(r)}}else if(t.key===this.wr){if(t.newValue!==null){const r=this.yr(t.newValue);if(r)return this.pr(r)}}else if(t.key===this.hr){const r=function(n){let i=Dt.at;if(n!=null)try{const a=JSON.parse(n);re(typeof a=="number"),i=a}catch(a){ze("SharedClientState","Failed to read sequence number from WebStorage",a)}return i}(t.newValue);r!==Dt.at&&this.sequenceNumberHandler(r)}else if(t.key===this.mr){const r=this.Or(t.newValue);await Promise.all(r.map(n=>this.syncEngine.Mr(n)))}}}else this.cr.push(t)})}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const n=new Ic(this.currentUser,e,t,r),i=wy(this.persistenceKey,this.currentUser,e);this.setItem(i,n.tr())}Er(e){const t=wy(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){const t={clientId:this.sr,onlineState:e};this.storage.setItem(this.wr,JSON.stringify(t))}Rr(e,t,r){const n=Eh(this.persistenceKey,e),i=new Fa(e,t,r);this.setItem(n,i.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return _c.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),n=Number(r[1]),i=r[2]!==void 0?r[2]:null;return Ic.Zi(new st(i),n,t)}Nr(e,t){const r=this._r.exec(e),n=Number(r[1]);return Fa.Zi(n,t)}yr(e){return wp.Zi(e)}Or(e){return JSON.parse(e)}async Cr(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Fr(e.batchId,e.state,e.error);L("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),n=this.Ir(this.ur),i=this.Ir(r),a=[],o=[];return i.forEach(u=>{n.has(u)||a.push(u)}),n.forEach(u=>{i.has(u)||o.push(u)}),this.syncEngine.Br(a,o).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=Nl();return e.forEach((r,n)=>{t=t.unionWith(n.activeTargetIds)}),t}}class eb{constructor(){this.Lr=new Sf,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new Sf,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{qr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){L("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){L("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window!="undefined"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.oo=t+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,n,i){const a=this.ho(e,t);L("RestConnection","Sending: ",a,r);const o={};return this.lo(o,n,i),this.fo(e,a,o,r).then(u=>(L("RestConnection","Received: ",u),u),u=>{throw vi("RestConnection",`${e} failed with error: `,u,"url: ",a,"request:",r),u})}_o(e,t,r,n,i,a){return this.ao(e,t,r,n,i)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Gi,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((n,i)=>e[i]=n),r&&r.headers.forEach((n,i)=>e[i]=n)}ho(e,t){const r=lN[e];return`${this.oo}/v1/${t}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,n){return new Promise((i,a)=>{const o=new lC;o.setWithCredentials(!0),o.listenOnce(oC.COMPLETE,()=>{var c;try{switch(o.getLastErrorCode()){case Th.NO_ERROR:const l=o.getResponseJson();L("Connection","XHR received:",JSON.stringify(l)),i(l);break;case Th.TIMEOUT:L("Connection",'RPC "'+e+'" timed out'),a(new M(N.DEADLINE_EXCEEDED,"Request time out"));break;case Th.HTTP_ERROR:const h=o.getStatus();if(L("Connection",'RPC "'+e+'" failed with status:',h,"response text:",o.getResponseText()),h>0){let f=o.getResponseJson();Array.isArray(f)&&(f=f[0]);const d=(c=f)===null||c===void 0?void 0:c.error;if(d&&d.status&&d.message){const g=function(p){const m=p.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(m)>=0?m:N.UNKNOWN}(d.status);a(new M(g,d.message))}else a(new M(N.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new M(N.UNAVAILABLE,"Connection failed."));break;default:K()}}finally{L("Connection",'RPC "'+e+'" completed.')}});const u=JSON.stringify(n);o.send(t,"POST",u,r,15)})}wo(e,t,r){const n=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=iC(),a=aC(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new cC({})),this.lo(o.initMessageHeaders,t,r),o.encodeInitMessageHeaders=!0;const u=n.join("");L("Connection","Creating WebChannel: "+u,o);const c=i.createWebChannel(u,o);let l=!1,h=!1;const f=new hN({Hr:g=>{h?L("Connection","Not sending because WebChannel is closed:",g):(l||(L("Connection","Opening WebChannel transport."),c.open(),l=!0),L("Connection","WebChannel sending:",g),c.send(g))},Jr:()=>c.close()}),d=(g,p,m)=>{g.listen(p,v=>{try{m(v)}catch(S){setTimeout(()=>{throw S},0)}})};return d(c,vu.EventType.OPEN,()=>{h||L("Connection","WebChannel transport opened.")}),d(c,vu.EventType.CLOSE,()=>{h||(h=!0,L("Connection","WebChannel transport closed"),f.io())}),d(c,vu.EventType.ERROR,g=>{h||(h=!0,vi("Connection","WebChannel transport errored:",g),f.io(new M(N.UNAVAILABLE,"The operation could not be completed")))}),d(c,vu.EventType.MESSAGE,g=>{var p;if(!h){const m=g.data[0];re(!!m);const v=m,S=v.error||((p=v[0])===null||p===void 0?void 0:p.error);if(S){L("Connection","WebChannel received error:",S);const b=S.status;let I=function(T){const P=He[T];if(P!==void 0)return yT(P)}(b),y=S.message;I===void 0&&(I=N.INTERNAL,y="Unknown error status: "+b+" with message "+S.message),h=!0,f.io(new M(I,y)),c.close()}else L("Connection","WebChannel received:",m),f.ro(m)}}),d(a,uC.STAT_EVENT,g=>{g.stat===kg.PROXY?L("Connection","Detected buffering proxy"):g.stat===kg.NOPROXY&&L("Connection","Detected no buffering proxy")}),setTimeout(()=>{f.so()},0),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tb(){return typeof window!="undefined"?window:null}function Wu(){return typeof document!="undefined"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function su(s){return new sk(s,!0)}class Tp{constructor(e,t,r=1e3,n=1.5,i=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=n,this.po=i,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),n=Math.max(0,t-r);n>0&&L("ExponentialBackoff",`Backing off for ${n} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,n,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){this.To!==null&&(this.To.skipDelay(),this.To=null)}cancel(){this.To!==null&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(e,t,r,n,i,a,o,u){this.Hs=e,this.vo=r,this.Vo=n,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=u,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new Tp(e,t)}No(){return this.state===1||this.state===5||this.ko()}ko(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Oo()}async stop(){this.No()&&await this.close(0)}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&this.Do===null&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}async $o(){if(this.ko())return this.close(0)}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}async close(e,t){this.Lo(),this.Uo(),this.xo.cancel(),this.So++,e!==4?this.xo.reset():t&&t.code===N.RESOURCE_EXHAUSTED?(ze(t.toString()),ze("Using maximum backoff delay to prevent overloading the backend."),this.xo.Ao()):t&&t.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.qo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zr(t)}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,n])=>{this.So===t&&this.Go(r,n)},r=>{e(()=>{const n=new M(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(n)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(n=>{r(()=>this.Qo(n))}),this.stream.onMessage(n=>{r(()=>this.onMessage(n))})}Oo(){this.state=5,this.xo.Ro(async()=>{this.state=0,this.start()})}Qo(e){return L("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(L("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class dN extends rb{constructor(e,t,r,n,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,n,a),this.It=i}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=ak(this.It,e),r=function(n){if(!("targetChange"in n))return te.min();const i=n.targetChange;return i.targetIds&&i.targetIds.length?te.min():i.readTime?it(i.readTime):te.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=ho(this.It),t.addTarget=function(n,i){let a;const o=i.target;return a=vc(o)?{documents:PT(n,o)}:{query:CT(n,o)},a.targetId=i.targetId,i.resumeToken.approximateByteSize()>0?a.resumeToken=ET(n,i.resumeToken):i.snapshotVersion.compareTo(te.min())>0&&(a.readTime=co(n,i.snapshotVersion.toTimestamp())),a}(this.It,e);const r=uk(this.It,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=ho(this.It),t.removeTarget=e,this.Bo(t)}}class pN extends rb{constructor(e,t,r,n,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,n,a),this.It=i,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(re(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=ok(e.writeResults,e.commitTime),r=it(e.commitTime);return this.listener.Zo(r,t)}return re(!e.writeResults||e.writeResults.length===0),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=ho(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>fo(this.It,r))};this.Bo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN extends class{}{constructor(e,t,r,n){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.It=n,this.nu=!1}su(){if(this.nu)throw new M(N.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([n,i])=>this.connection.ao(e,t,r,n,i)).catch(n=>{throw n.name==="FirebaseError"?(n.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),n):new M(N.UNKNOWN,n.toString())})}_o(e,t,r,n){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection._o(e,t,r,i,a,n)).catch(i=>{throw i.name==="FirebaseError"?(i.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new M(N.UNKNOWN,i.toString())})}terminate(){this.nu=!0}}class gN{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){this.iu===0&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){this.state==="Online"?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,e==="Online"&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(ze(t),this.ou=!1):L("OnlineStateTracker",t)}lu(){this.ru!==null&&(this.ru.cancel(),this.ru=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e,t,r,n,i){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=i,this.mu.qr(a=>{r.enqueueAndForget(async()=>{js(this)&&(L("RemoteStore","Restarting streams for network reachability change."),await async function(o){const u=q(o);u._u.add(4),await Hi(u),u.gu.set("Unknown"),u._u.delete(4),await nu(u)}(this))})}),this.gu=new gN(r,n)}}async function nu(s){if(js(s))for(const e of s.wu)await e(!0)}async function Hi(s){for(const e of s.wu)await e(!1)}function Ml(s,e){const t=q(s);t.du.has(e.targetId)||(t.du.set(e.targetId,e),Ep(t)?Sp(t):Yi(t).ko()&&bp(t,e))}function po(s,e){const t=q(s),r=Yi(t);t.du.delete(e),r.ko()&&sb(t,e),t.du.size===0&&(r.ko()?r.Fo():js(t)&&t.gu.set("Unknown"))}function bp(s,e){s.yu.Mt(e.targetId),Yi(s).zo(e)}function sb(s,e){s.yu.Mt(e),Yi(s).Ho(e)}function Sp(s){s.yu=new ek({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),se:e=>s.du.get(e)||null}),Yi(s).start(),s.gu.uu()}function Ep(s){return js(s)&&!Yi(s).No()&&s.du.size>0}function js(s){return q(s)._u.size===0}function nb(s){s.yu=void 0}async function vN(s){s.du.forEach((e,t)=>{bp(s,e)})}async function wN(s,e){nb(s),Ep(s)?(s.gu.hu(e),Sp(s)):s.gu.set("Unknown")}async function TN(s,e,t){if(s.gu.set("Online"),e instanceof ST&&e.state===2&&e.cause)try{await async function(r,n){const i=n.cause;for(const a of n.targetIds)r.du.has(a)&&(await r.remoteSyncer.rejectListen(a,i),r.du.delete(a),r.yu.removeTarget(a))}(s,e)}catch(r){L("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await xc(s,r)}else if(e instanceof Gu?s.yu.Gt(e):e instanceof bT?s.yu.Yt(e):s.yu.Wt(e),!t.isEqual(te.min()))try{const r=await QT(s.localStore);t.compareTo(r)>=0&&await function(n,i){const a=n.yu.te(i);return a.targetChanges.forEach((o,u)=>{if(o.resumeToken.approximateByteSize()>0){const c=n.du.get(u);c&&n.du.set(u,c.withResumeToken(o.resumeToken,i))}}),a.targetMismatches.forEach(o=>{const u=n.du.get(o);if(!u)return;n.du.set(o,u.withResumeToken(Je.EMPTY_BYTE_STRING,u.snapshotVersion)),sb(n,o);const c=new Is(u.target,o,1,u.sequenceNumber);bp(n,c)}),n.remoteSyncer.applyRemoteEvent(a)}(s,t)}catch(r){L("RemoteStore","Failed to raise snapshot:",r),await xc(s,r)}}async function xc(s,e,t){if(!qs(e))throw e;s._u.add(1),await Hi(s),s.gu.set("Offline"),t||(t=()=>QT(s.localStore)),s.asyncQueue.enqueueRetryable(async()=>{L("RemoteStore","Retrying IndexedDB access"),await t(),s._u.delete(1),await nu(s)})}function ib(s,e){return e().catch(t=>xc(s,t,e))}async function Qi(s){const e=q(s),t=Ns(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;bN(e);)try{const n=await aN(e.localStore,r);if(n===null){e.fu.length===0&&t.Fo();break}r=n.batchId,SN(e,n)}catch(n){await xc(e,n)}ab(e)&&ob(e)}function bN(s){return js(s)&&s.fu.length<10}function SN(s,e){s.fu.push(e);const t=Ns(s);t.ko()&&t.Yo&&t.Xo(e.mutations)}function ab(s){return js(s)&&!Ns(s).No()&&s.fu.length>0}function ob(s){Ns(s).start()}async function EN(s){Ns(s).eu()}async function IN(s){const e=Ns(s);for(const t of s.fu)e.Xo(t.mutations)}async function _N(s,e,t){const r=s.fu.shift(),n=hp.from(r,e,t);await ib(s,()=>s.remoteSyncer.applySuccessfulWrite(n)),await Qi(s)}async function xN(s,e){e&&Ns(s).Yo&&await async function(t,r){if(n=r.code,gT(n)&&n!==N.ABORTED){const i=t.fu.shift();Ns(t).Mo(),await ib(t,()=>t.remoteSyncer.rejectFailedWrite(i.batchId,r)),await Qi(t)}var n}(s,e),ab(s)&&ob(s)}async function by(s,e){const t=q(s);t.asyncQueue.verifyOperationInProgress(),L("RemoteStore","RemoteStore received new credentials");const r=js(t);t._u.add(3),await Hi(t),r&&t.gu.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),await nu(t)}async function Ef(s,e){const t=q(s);e?(t._u.delete(2),await nu(t)):e||(t._u.add(2),await Hi(t),t.gu.set("Unknown"))}function Yi(s){return s.pu||(s.pu=function(e,t,r){const n=q(e);return n.su(),new dN(t,n.connection,n.authCredentials,n.appCheckCredentials,n.It,r)}(s.datastore,s.asyncQueue,{Yr:vN.bind(null,s),Zr:wN.bind(null,s),Wo:TN.bind(null,s)}),s.wu.push(async e=>{e?(s.pu.Mo(),Ep(s)?Sp(s):s.gu.set("Unknown")):(await s.pu.stop(),nb(s))})),s.pu}function Ns(s){return s.Iu||(s.Iu=function(e,t,r){const n=q(e);return n.su(),new pN(t,n.connection,n.authCredentials,n.appCheckCredentials,n.It,r)}(s.datastore,s.asyncQueue,{Yr:EN.bind(null,s),Zr:xN.bind(null,s),tu:IN.bind(null,s),Zo:_N.bind(null,s)}),s.wu.push(async e=>{e?(s.Iu.Mo(),await Qi(s)):(await s.Iu.stop(),s.fu.length>0&&(L("RemoteStore",`Stopping write stream with ${s.fu.length} pending writes`),s.fu=[]))})),s.Iu}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(e,t,r,n,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=n,this.removalCallback=i,this.deferred=new nt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}static createAndSchedule(e,t,r,n,i){const a=Date.now()+r,o=new Ip(e,t,a,n,i);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new M(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ji(s,e){if(ze("AsyncQueue",`${e}: ${s}`),qs(s))return new M(N.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e){this.comparator=e?(t,r)=>e(t,r)||V.comparator(t.key,r.key):(t,r)=>V.comparator(t.key,r.key),this.keyedMap=_a(),this.sortedSet=new je(this.comparator)}static emptySet(e){return new ui(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ui)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const n=t.getNext().key,i=r.getNext().key;if(!n.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new ui;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(){this.Tu=new je(V.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?e.type!==0&&r.type===3?this.Tu=this.Tu.insert(t,e):e.type===3&&r.type!==1?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Tu=this.Tu.remove(t):e.type===1&&r.type===2?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):K():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class _i{constructor(e,t,r,n,i,a,o,u,c){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=n,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,t,r,n,i){const a=[];return t.forEach(o=>{a.push({type:0,doc:o})}),new _i(e,t,ui.emptySet(t),a,r,n,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zo(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let n=0;n<t.length;n++)if(t[n].type!==r[n].type||!t[n].doc.isEqual(r[n].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(){this.Au=void 0,this.listeners=[]}}class PN{constructor(){this.queries=new $s(e=>nT(e),Zo),this.onlineState="Unknown",this.Ru=new Set}}async function _p(s,e){const t=q(s),r=e.query;let n=!1,i=t.queries.get(r);if(i||(n=!0,i=new AN),n)try{i.Au=await t.onListen(r)}catch(a){const o=Ji(a,`Initialization of query '${vf(e.query)}' failed`);return void e.onError(o)}t.queries.set(r,i),i.listeners.push(e),e.bu(t.onlineState),i.Au&&e.Pu(i.Au)&&Ap(t)}async function xp(s,e){const t=q(s),r=e.query;let n=!1;const i=t.queries.get(r);if(i){const a=i.listeners.indexOf(e);a>=0&&(i.listeners.splice(a,1),n=i.listeners.length===0)}if(n)return t.queries.delete(r),t.onUnlisten(r)}function CN(s,e){const t=q(s);let r=!1;for(const n of e){const i=n.query,a=t.queries.get(i);if(a){for(const o of a.listeners)o.Pu(n)&&(r=!0);a.Au=n}}r&&Ap(t)}function kN(s,e,t){const r=q(s),n=r.queries.get(e);if(n)for(const i of n.listeners)i.onError(t);r.queries.delete(e)}function Ap(s){s.Ru.forEach(e=>{e.next()})}class Pp{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const n of e.docChanges)n.type!==3&&r.push(n);e=new _i(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){if(!e.fromCache)return!0;const r=t!=="Offline";return(!this.options.Nu||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Du(e){if(e.docChanges.length>0)return!0;const t=this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}xu(e){e=_i.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(e){this.It=e}Ji(e){return Ar(this.It,e)}Yi(e){return e.metadata.exists?AT(this.It,e.document,!1):ke.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return it(e)}}class ON{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=ub(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=Te.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new Ey(this.It);for(const n of e)if(n.metadata.queries){const i=r.Ji(n.metadata.name);for(const a of n.metadata.queries){const o=(t.get(a)||ce()).add(i);t.set(a,o)}}return t}async complete(){const e=await oN(this.localStore,new Ey(this.It),this.documents,this.Mu.id),t=this.$u(this.documents);for(const r of this.queries)await uN(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Bu:this.collectionGroups,Lu:e}}}function ub(s){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:s.totalDocuments,totalBytes:s.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(e){this.key=e}}class lb{constructor(e){this.key=e}}class hb{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=ce(),this.mutatedKeys=ce(),this.Gu=aT(e),this.Qu=new ui(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new Sy,n=t?t.Qu:this.Qu;let i=t?t.mutatedKeys:this.mutatedKeys,a=n,o=!1;const u=this.query.limitType==="F"&&n.size===this.query.limit?n.last():null,c=this.query.limitType==="L"&&n.size===this.query.limit?n.first():null;if(e.inorderTraversal((l,h)=>{const f=n.get(l),d=op(this.query,h)?h:null,g=!!f&&this.mutatedKeys.has(f.key),p=!!d&&(d.hasLocalMutations||this.mutatedKeys.has(d.key)&&d.hasCommittedMutations);let m=!1;f&&d?f.data.isEqual(d.data)?g!==p&&(r.track({type:3,doc:d}),m=!0):this.Hu(f,d)||(r.track({type:2,doc:d}),m=!0,(u&&this.Gu(d,u)>0||c&&this.Gu(d,c)<0)&&(o=!0)):!f&&d?(r.track({type:0,doc:d}),m=!0):f&&!d&&(r.track({type:1,doc:f}),m=!0,(u||c)&&(o=!0)),m&&(d?(a=a.add(d),i=p?i.add(l):i.delete(l)):(a=a.delete(l),i=i.delete(l)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const l=this.query.limitType==="F"?a.last():a.first();a=a.delete(l.key),i=i.delete(l.key),r.track({type:1,doc:l})}return{Qu:a,zu:r,$i:o,mutatedKeys:i}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const n=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const i=e.zu.Eu();i.sort((c,l)=>function(h,f){const d=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K()}};return d(h)-d(f)}(c.type,l.type)||this.Gu(c.doc,l.doc)),this.Ju(r);const a=t?this.Yu():[],o=this.Ku.size===0&&this.current?1:0,u=o!==this.qu;return this.qu=o,i.length!==0||u?{snapshot:new _i(this.query,e.Qu,n,i,e.mutatedKeys,o===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:a}:{Xu:a}}bu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Sy,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=ce(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new lb(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new cb(r))}),t}tc(e){this.Uu=e.Hi,this.Ku=ce();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return _i.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,this.qu===0,this.hasCachedResults)}}class DN{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class RN{constructor(e){this.key=e,this.nc=!1}}class MN{constructor(e,t,r,n,i,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=n,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.sc={},this.ic=new $s(o=>nT(o),Zo),this.rc=new Map,this.oc=new Set,this.uc=new je(V.comparator),this.cc=new Map,this.ac=new mp,this.hc={},this.lc=new Map,this.fc=kn.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return this.dc===!0}}async function LN(s,e){const t=Dp(s);let r,n;const i=t.ic.get(e);if(i)r=i.targetId,t.sharedClientState.addLocalQueryTarget(r),n=i.view.ec();else{const a=await Ei(t.localStore,Lt(e));t.isPrimaryClient&&Ml(t.remoteStore,a);const o=t.sharedClientState.addLocalQueryTarget(a.targetId);r=a.targetId,n=await Cp(t,e,r,o==="current",a.resumeToken)}return n}async function Cp(s,e,t,r,n){s._c=(h,f,d)=>async function(g,p,m,v){let S=p.view.Wu(m);S.$i&&(S=await Ec(g.localStore,p.query,!1).then(({documents:y})=>p.view.Wu(y,S)));const b=v&&v.targetChanges.get(p.targetId),I=p.view.applyChanges(S,g.isPrimaryClient,b);return If(g,p.targetId,I.Xu),I.snapshot}(s,h,f,d);const i=await Ec(s.localStore,e,!0),a=new hb(e,i.Hi),o=a.Wu(i.documents),u=ru.createSynthesizedTargetChangeForCurrentChange(t,r&&s.onlineState!=="Offline",n),c=a.applyChanges(o,s.isPrimaryClient,u);If(s,t,c.Xu);const l=new DN(e,t,a);return s.ic.set(e,l),s.rc.has(t)?s.rc.get(t).push(e):s.rc.set(t,[e]),c.snapshot}async function FN(s,e){const t=q(s),r=t.ic.get(e),n=t.rc.get(r.targetId);if(n.length>1)return t.rc.set(r.targetId,n.filter(i=>!Zo(i,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||await Ii(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),po(t.remoteStore,r.targetId),xi(t,r.targetId)}).catch(Vs)):(xi(t,r.targetId),await Ii(t.localStore,r.targetId,!0))}async function UN(s,e,t){const r=Rp(s);try{const n=await function(i,a){const o=q(i),u=Fe.now(),c=a.reduce((f,d)=>f.add(d.key),ce());let l,h;return o.persistence.runTransaction("Locally write mutations","readwrite",f=>{let d=Rt(),g=ce();return o.Gi.getEntries(f,c).next(p=>{d=p,d.forEach((m,v)=>{v.isValidDocument()||(g=g.add(m))})}).next(()=>o.localDocuments.getOverlayedDocuments(f,d)).next(p=>{l=p;const m=[];for(const v of a){const S=HC(v,l.get(v.key).overlayedDocument);S!=null&&m.push(new as(v.key,S,tT(S.value.mapValue),Me.exists(!0)))}return o.mutationQueue.addMutationBatch(f,u,m,a)}).next(p=>{h=p;const m=p.applyToLocalDocumentSet(l,g);return o.documentOverlayCache.saveOverlays(f,p.batchId,m)})}).then(()=>({batchId:h.batchId,changes:wT(l)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(n.batchId),function(i,a,o){let u=i.hc[i.currentUser.toKey()];u||(u=new je(ue)),u=u.insert(a,o),i.hc[i.currentUser.toKey()]=u}(r,n.batchId,t),await os(r,n.changes),await Qi(r.remoteStore)}catch(n){const i=Ji(n,"Failed to persist write");t.reject(i)}}async function fb(s,e){const t=q(s);try{const r=await iN(t.localStore,e);e.targetChanges.forEach((n,i)=>{const a=t.cc.get(i);a&&(re(n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size<=1),n.addedDocuments.size>0?a.nc=!0:n.modifiedDocuments.size>0?re(a.nc):n.removedDocuments.size>0&&(re(a.nc),a.nc=!1))}),await os(t,r,e)}catch(r){await Vs(r)}}function Iy(s,e,t){const r=q(s);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const n=[];r.ic.forEach((i,a)=>{const o=a.view.bu(e);o.snapshot&&n.push(o.snapshot)}),function(i,a){const o=q(i);o.onlineState=a;let u=!1;o.queries.forEach((c,l)=>{for(const h of l.listeners)h.bu(a)&&(u=!0)}),u&&Ap(o)}(r.eventManager,e),n.length&&r.sc.Wo(n),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function BN(s,e,t){const r=q(s);r.sharedClientState.updateQueryState(e,"rejected",t);const n=r.cc.get(e),i=n&&n.key;if(i){let a=new je(V.comparator);a=a.insert(i,ke.newNoDocument(i,te.min()));const o=ce().add(i),u=new tu(te.min(),new Map,new xe(ue),a,o);await fb(r,u),r.uc=r.uc.remove(i),r.cc.delete(e),Op(r)}else await Ii(r.localStore,e,!1).then(()=>xi(r,e,t)).catch(Vs)}async function VN(s,e){const t=q(s),r=e.batch.batchId;try{const n=await nN(t.localStore,e);Np(t,r,null),kp(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await os(t,n)}catch(n){await Vs(n)}}async function qN(s,e,t){const r=q(s);try{const n=await function(i,a){const o=q(i);return o.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return o.mutationQueue.lookupMutationBatch(u,a).next(l=>(re(l!==null),c=l.keys(),o.mutationQueue.removeMutationBatch(u,l))).next(()=>o.mutationQueue.performConsistencyCheck(u)).next(()=>o.documentOverlayCache.removeOverlaysForBatchId(u,c,a)).next(()=>o.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c)).next(()=>o.localDocuments.getDocuments(u,c))})}(r.localStore,e);Np(r,e,t),kp(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await os(r,n)}catch(n){await Vs(n)}}async function $N(s,e){const t=q(s);js(t.remoteStore)||L("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(i){const a=q(i);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",o=>a.mutationQueue.getHighestUnacknowledgedBatchId(o))}(t.localStore);if(r===-1)return void e.resolve();const n=t.lc.get(r)||[];n.push(e),t.lc.set(r,n)}catch(r){const n=Ji(r,"Initialization of waitForPendingWrites() operation failed");e.reject(n)}}function kp(s,e){(s.lc.get(e)||[]).forEach(t=>{t.resolve()}),s.lc.delete(e)}function Np(s,e,t){const r=q(s);let n=r.hc[r.currentUser.toKey()];if(n){const i=n.get(e);i&&(t?i.reject(t):i.resolve(),n=n.remove(e)),r.hc[r.currentUser.toKey()]=n}}function xi(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.rc.get(e))s.ic.delete(r),t&&s.sc.wc(r,t);s.rc.delete(e),s.isPrimaryClient&&s.ac.ls(e).forEach(r=>{s.ac.containsKey(r)||db(s,r)})}function db(s,e){s.oc.delete(e.path.canonicalString());const t=s.uc.get(e);t!==null&&(po(s.remoteStore,t),s.uc=s.uc.remove(e),s.cc.delete(t),Op(s))}function If(s,e,t){for(const r of t)r instanceof cb?(s.ac.addReference(r.key,e),jN(s,r)):r instanceof lb?(L("SyncEngine","Document no longer in limbo: "+r.key),s.ac.removeReference(r.key,e),s.ac.containsKey(r.key)||db(s,r.key)):K()}function jN(s,e){const t=e.key,r=t.path.canonicalString();s.uc.get(t)||s.oc.has(r)||(L("SyncEngine","New document in limbo: "+t),s.oc.add(r),Op(s))}function Op(s){for(;s.oc.size>0&&s.uc.size<s.maxConcurrentLimboResolutions;){const e=s.oc.values().next().value;s.oc.delete(e);const t=new V(Te.fromString(e)),r=s.fc.next();s.cc.set(r,new RN(t)),s.uc=s.uc.insert(t,r),Ml(s.remoteStore,new Is(Lt(zi(t.path)),r,2,Dt.at))}}async function os(s,e,t){const r=q(s),n=[],i=[],a=[];r.ic.isEmpty()||(r.ic.forEach((o,u)=>{a.push(r._c(u,e,t).then(c=>{if((c||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,c!=null&&c.fromCache?"not-current":"current"),c){n.push(c);const l=vp.Ci(u.targetId,c);i.push(l)}}))}),await Promise.all(a),r.sc.Wo(n),await async function(o,u){const c=q(o);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",l=>k.forEach(u,h=>k.forEach(h.Si,f=>c.persistence.referenceDelegate.addReference(l,h.targetId,f)).next(()=>k.forEach(h.Di,f=>c.persistence.referenceDelegate.removeReference(l,h.targetId,f)))))}catch(l){if(!qs(l))throw l;L("LocalStore","Failed to update sequence numbers: "+l)}for(const l of u){const h=l.targetId;if(!l.fromCache){const f=c.Ui.get(h),d=f.snapshotVersion,g=f.withLastLimboFreeSnapshotVersion(d);c.Ui=c.Ui.insert(h,g)}}}(r.localStore,i))}async function GN(s,e){const t=q(s);if(!t.currentUser.isEqual(e)){L("SyncEngine","User change. New user:",e.toKey());const r=await HT(t.localStore,e);t.currentUser=e,function(n,i){n.lc.forEach(a=>{a.forEach(o=>{o.reject(new M(N.CANCELLED,i))})}),n.lc.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await os(t,r.ji)}}function zN(s,e){const t=q(s),r=t.cc.get(e);if(r&&r.nc)return ce().add(r.key);{let n=ce();const i=t.rc.get(e);if(!i)return n;for(const a of i){const o=t.ic.get(a);n=n.unionWith(o.view.ju)}return n}}async function WN(s,e){const t=q(s),r=await Ec(t.localStore,e.query,!0),n=e.view.tc(r);return t.isPrimaryClient&&If(t,e.targetId,n.Xu),n}async function KN(s,e){const t=q(s);return XT(t.localStore,e).then(r=>os(t,r))}async function HN(s,e,t,r){const n=q(s),i=await function(a,o){const u=q(a),c=q(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",l=>c.Tn(l,o).next(h=>h?u.localDocuments.getDocuments(l,h):k.resolve(null)))}(n.localStore,e);i!==null?(t==="pending"?await Qi(n.remoteStore):t==="acknowledged"||t==="rejected"?(Np(n,e,r||null),kp(n,e),function(a,o){q(q(a).mutationQueue).An(o)}(n.localStore,e)):K(),await os(n,i)):L("SyncEngine","Cannot apply mutation batch with id: "+e)}async function QN(s,e){const t=q(s);if(Dp(t),Rp(t),e===!0&&t.dc!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),n=await _y(t,r.toArray());t.dc=!0,await Ef(t.remoteStore,!0);for(const i of n)Ml(t.remoteStore,i)}else if(e===!1&&t.dc!==!1){const r=[];let n=Promise.resolve();t.rc.forEach((i,a)=>{t.sharedClientState.isLocalQueryTarget(a)?r.push(a):n=n.then(()=>(xi(t,a),Ii(t.localStore,a,!0))),po(t.remoteStore,a)}),await n,await _y(t,r),function(i){const a=q(i);a.cc.forEach((o,u)=>{po(a.remoteStore,u)}),a.ac.fs(),a.cc=new Map,a.uc=new je(V.comparator)}(t),t.dc=!1,await Ef(t.remoteStore,!1)}}async function _y(s,e,t){const r=q(s),n=[],i=[];for(const a of e){let o;const u=r.rc.get(a);if(u&&u.length!==0){o=await Ei(r.localStore,Lt(u[0]));for(const c of u){const l=r.ic.get(c),h=await WN(r,l);h.snapshot&&i.push(h.snapshot)}}else{const c=await JT(r.localStore,a);o=await Ei(r.localStore,c),await Cp(r,pb(c),a,!1,o.resumeToken)}n.push(o)}return r.sc.Wo(i),n}function pb(s){return sT(s.path,s.collectionGroup,s.orderBy,s.filters,s.limit,"F",s.startAt,s.endAt)}function YN(s){const e=q(s);return q(q(e.localStore).persistence).vi()}async function JN(s,e,t,r){const n=q(s);if(n.dc)return void L("SyncEngine","Ignoring unexpected query state notification.");const i=n.rc.get(e);if(i&&i.length>0)switch(t){case"current":case"not-current":{const a=await XT(n.localStore,iT(i[0])),o=tu.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Je.EMPTY_BYTE_STRING);await os(n,a,o);break}case"rejected":await Ii(n.localStore,e,!0),xi(n,e,r);break;default:K()}}async function XN(s,e,t){const r=Dp(s);if(r.dc){for(const n of e){if(r.rc.has(n)){L("SyncEngine","Adding an already active target "+n);continue}const i=await JT(r.localStore,n),a=await Ei(r.localStore,i);await Cp(r,pb(i),a.targetId,!1,a.resumeToken),Ml(r.remoteStore,a)}for(const n of t)r.rc.has(n)&&await Ii(r.localStore,n,!1).then(()=>{po(r.remoteStore,n),xi(r,n)}).catch(Vs)}}function Dp(s){const e=q(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=fb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=zN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=BN.bind(null,e),e.sc.Wo=CN.bind(null,e.eventManager),e.sc.wc=kN.bind(null,e.eventManager),e}function Rp(s){const e=q(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=VN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qN.bind(null,e),e}function ZN(s,e,t){const r=q(s);(async function(n,i,a){try{const o=await i.getMetadata();if(await function(h,f){const d=q(h),g=it(f.createTime);return d.persistence.runTransaction("hasNewerBundle","readonly",p=>d.Ns.getBundleMetadata(p,f.id)).then(p=>!!p&&p.createTime.compareTo(g)>=0)}(n.localStore,o))return await i.close(),a._completeWith(function(h){return{taskState:"Success",documentsLoaded:h.totalDocuments,bytesLoaded:h.totalBytes,totalDocuments:h.totalDocuments,totalBytes:h.totalBytes}}(o)),Promise.resolve(new Set);a._updateProgress(ub(o));const u=new ON(o,n.localStore,i.It);let c=await i.mc();for(;c;){const h=await u.Fu(c);h&&a._updateProgress(h),c=await i.mc()}const l=await u.complete();return await os(n,l.Lu,void 0),await function(h,f){const d=q(h);return d.persistence.runTransaction("Save bundle","readwrite",g=>d.Ns.saveBundleMetadata(g,f))}(n.localStore,o),a._completeWith(l.progress),Promise.resolve(l.Bu)}catch(o){return vi("SyncEngine",`Loading bundle failed with ${o}`),a._failWith(o),Promise.resolve(new Set)}})(r,e,t).then(n=>{r.sharedClientState.notifyBundleLoaded(n)})}class mb{constructor(){this.synchronizeTabs=!1}async initialize(e){this.It=su(e.databaseInfo.databaseId),this.sharedClientState=this.gc(e),this.persistence=this.yc(e),await this.persistence.start(),this.localStore=this.Ic(e),this.gcScheduler=this.Tc(e,this.localStore),this.indexBackfillerScheduler=this.Ec(e,this.localStore)}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return KT(this.persistence,new WT,e.initialUser,this.It)}yc(e){return new zT(Rl.Bs,this.It)}gc(e){return new eb}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class gb extends mb{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ac.initialize(this,e),await Rp(this.Ac.syncEngine),await Qi(this.Ac.remoteStore),await this.persistence.li(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}Ic(e){return KT(this.persistence,new WT,e.initialUser,this.It)}Tc(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new jk(r,e.asyncQueue,t)}Ec(e,t){const r=new xC(t,this.persistence);return new _C(e.asyncQueue,r)}yc(e){const t=yp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Nt.withCacheSize(this.cacheSizeBytes):Nt.DEFAULT;return new gp(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,tb(),Wu(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new eb}}class eO extends gb{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Ac.syncEngine;this.sharedClientState instanceof Ih&&(this.sharedClientState.syncEngine={Fr:HN.bind(null,t),$r:JN.bind(null,t),Br:XN.bind(null,t),vi:YN.bind(null,t),Mr:KN.bind(null,t)},await this.sharedClientState.start()),await this.persistence.li(async r=>{await QN(this.Ac.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}gc(e){const t=tb();if(!Ih.C(t))throw new M(N.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=yp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ih(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Mp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Iy(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=GN.bind(null,this.syncEngine),await Ef(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new PN}createDatastore(e){const t=su(e.databaseInfo.databaseId),r=(n=e.databaseInfo,new fN(n));var n;return function(i,a,o,u){return new mN(i,a,o,u)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,n=e.asyncQueue,i=o=>Iy(this.syncEngine,o,0),a=Ty.C()?new Ty:new cN,new yN(t,r,n,i,a);var t,r,n,i,a}createSyncEngine(e,t){return function(r,n,i,a,o,u,c){const l=new MN(r,n,i,a,o,u);return c&&(l.dc=!0),l}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=q(e);L("RemoteStore","RemoteStore shutting down."),t._u.add(5),await Hi(t),t.mu.shutdown(),t.gu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lp(s,e,t){if(!t)throw new M(N.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function yb(s,e,t,r){if(e===!0&&r===!0)throw new M(N.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function xy(s){if(!V.isDocumentKey(s))throw new M(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Ay(s){if(V.isDocumentKey(s))throw new M(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function Ll(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":K()}function Ee(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new M(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Ll(s);throw new M(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}function vb(s,e){if(e<=0)throw new M(N.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Py=new Map;class Cy{constructor(e){var t;if(e.host===void 0){if(e.ssl!==void 0)throw new M(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new M(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,yb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e,t,r,n){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Cy({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new M(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new M(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Cy(e),e.credentials!==void 0&&(this._authCredentials=function(t){if(!t)return new dC;switch(t.type){case"gapi":const r=t.client;return new yC(r,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new M(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Py.get(e);t&&(L("ComponentProvider","Removing Datastore"),Py.delete(e),t.terminate())}(this),Promise.resolve()}}function tO(s,e,t,r={}){var n;const i=(s=Ee(s,iu))._getSettings();if(i.host!=="firestore.googleapis.com"&&i.host!==e&&vi("Host has been set in both settings() and useEmulator(), emulator host will be used"),s._setSettings(Object.assign(Object.assign({},i),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let a,o;if(typeof r.mockUserToken=="string")a=r.mockUserToken,o=st.MOCK_USER;else{a=m1(r.mockUserToken,(n=s._app)===null||n===void 0?void 0:n.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new M(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");o=new st(u)}s._authCredentials=new pC(new jw(a,o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Oe(this.firestore,e,this._key)}}class It{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new It(this.firestore,e,this._query)}}class Pr extends It{constructor(e,t,r){super(e,t,zi(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Oe(this.firestore,null,new V(e))}withConverter(e){return new Pr(this.firestore,e,this._path)}}function wb(s,e,...t){if(s=Z(s),Lp("collection","path",e),s instanceof iu){const r=Te.fromString(e,...t);return Ay(r),new Pr(s,null,r)}{if(!(s instanceof Oe||s instanceof Pr))throw new M(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Te.fromString(e,...t));return Ay(r),new Pr(s.firestore,null,r)}}function rO(s,e){if(s=Ee(s,iu),Lp("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new M(N.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new It(s,null,function(t){return new is(Te.emptyPath(),t)}(e))}function Ac(s,e,...t){if(s=Z(s),arguments.length===1&&(e=Gw.R()),Lp("doc","path",e),s instanceof iu){const r=Te.fromString(e,...t);return xy(r),new Oe(s,null,new V(r))}{if(!(s instanceof Oe||s instanceof Pr))throw new M(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Te.fromString(e,...t));return xy(r),new Oe(s.firestore,s instanceof Pr?s.converter:null,new V(r))}}function Tb(s,e){return s=Z(s),e=Z(e),(s instanceof Oe||s instanceof Pr)&&(e instanceof Oe||e instanceof Pr)&&s.firestore===e.firestore&&s.path===e.path&&s.converter===e.converter}function bb(s,e){return s=Z(s),e=Z(e),s instanceof It&&e instanceof It&&s.firestore===e.firestore&&Zo(s._query,e._query)&&s.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ky(s,e=10240){let t=0;return{async read(){if(t<s.byteLength){const r={value:s.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.reject("unimplemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):ze("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new nt,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}async getMetadata(){return this.metadata.promise}async mc(){return await this.getMetadata(),this.Vc()}async Vc(){const e=await this.Sc();if(e===null)return null;const t=this.vc.decode(e),r=Number(t);isNaN(r)&&this.Dc(`length string (${t}) is not valid number`);const n=await this.Cc(r);return new NN(JSON.parse(n),e.length+r)}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async Sc(){for(;this.xc()<0&&!await this.Nc(););if(this.buffer.length===0)return null;const e=this.xc();e<0&&this.Dc("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Cc(e){for(;this.buffer.length<e;)await this.Nc()&&this.Dc("Reached the end of bundle when more is expected.");const t=this.vc.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}async Nc(){const e=await this.Pc.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new M(N.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const t=await async function(r,n){const i=q(r),a=ho(i.It)+"/documents",o={documents:n.map(h=>lo(i.It,h))},u=await i._o("BatchGetDocuments",a,o,n.length),c=new Map;u.forEach(h=>{const f=ik(i.It,h);c.set(f.key.toString(),f)});const l=[];return n.forEach(h=>{const f=c.get(h.toString());re(!!f),l.push(f)}),l}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ki(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{const n=V.fromPath(r);this.mutations.push(new up(n,this.precondition(n)))}),await async function(t,r){const n=q(t),i=ho(n.It)+"/documents",a={writes:r.map(o=>fo(n.It,o))};await n.ao("Commit",i,a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw K();t=te.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new M(N.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(te.min())?Me.exists(!1):Me.updateTime(t):Me.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(te.min()))throw new M(N.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Me.updateTime(t)}return Me.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(e,t,r,n,i){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=n,this.deferred=i,this.kc=r.maxAttempts,this.xo=new Tp(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){this.xo.Ro(async()=>{const e=new nO(this.datastore),t=this.Mc(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(n=>{this.Fc(n)}))}).catch(r=>{this.Fc(r)})})}Mc(e){try{const t=this.updateFunction(e);return!Jo(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!gT(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(e,t,r,n){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=n,this.user=st.UNAUTHENTICATED,this.clientId=Gw.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{L("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(L("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new M(N.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new nt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Ji(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Sb(s,e){s.asyncQueue.verifyOperationInProgress(),L("FirestoreClient","Initializing OfflineComponentProvider");const t=await s.getConfiguration();await e.initialize(t);let r=t.initialUser;s.setCredentialChangeListener(async n=>{r.isEqual(n)||(await HT(e.localStore,n),r=n)}),e.persistence.setDatabaseDeletedListener(()=>s.terminate()),s.offlineComponents=e}async function Eb(s,e){s.asyncQueue.verifyOperationInProgress();const t=await Fp(s);L("FirestoreClient","Initializing OnlineComponentProvider");const r=await s.getConfiguration();await e.initialize(t,r),s.setCredentialChangeListener(n=>by(e.remoteStore,n)),s.setAppCheckTokenChangeListener((n,i)=>by(e.remoteStore,i)),s.onlineComponents=e}async function Fp(s){return s.offlineComponents||(L("FirestoreClient","Using default OfflineComponentProvider"),await Sb(s,new mb)),s.offlineComponents}async function Ul(s){return s.onlineComponents||(L("FirestoreClient","Using default OnlineComponentProvider"),await Eb(s,new Mp)),s.onlineComponents}function Ib(s){return Fp(s).then(e=>e.persistence)}function Up(s){return Fp(s).then(e=>e.localStore)}function _b(s){return Ul(s).then(e=>e.remoteStore)}function Bp(s){return Ul(s).then(e=>e.syncEngine)}function oO(s){return Ul(s).then(e=>e.datastore)}async function Ai(s){const e=await Ul(s),t=e.eventManager;return t.onListen=LN.bind(null,e.syncEngine),t.onUnlisten=FN.bind(null,e.syncEngine),t}function uO(s){return s.asyncQueue.enqueue(async()=>{const e=await Ib(s),t=await _b(s);return e.setNetworkEnabled(!0),function(r){const n=q(r);return n._u.delete(0),nu(n)}(t)})}function cO(s){return s.asyncQueue.enqueue(async()=>{const e=await Ib(s),t=await _b(s);return e.setNetworkEnabled(!1),async function(r){const n=q(r);n._u.add(0),await Hi(n),n.gu.set("Offline")}(t)})}function lO(s,e){const t=new nt;return s.asyncQueue.enqueueAndForget(async()=>async function(r,n,i){try{const a=await function(o,u){const c=q(o);return c.persistence.runTransaction("read document","readonly",l=>c.localDocuments.getDocument(l,u))}(r,n);a.isFoundDocument()?i.resolve(a):a.isNoDocument()?i.resolve(null):i.reject(new M(N.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const o=Ji(a,`Failed to get document '${n} from cache`);i.reject(o)}}(await Up(s),e,t)),t.promise}function xb(s,e,t={}){const r=new nt;return s.asyncQueue.enqueueAndForget(async()=>function(n,i,a,o,u){const c=new Fl({next:h=>{i.enqueueAndForget(()=>xp(n,l));const f=h.docs.has(a);!f&&h.fromCache?u.reject(new M(N.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&o&&o.source==="server"?u.reject(new M(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(h)},error:h=>u.reject(h)}),l=new Pp(zi(a.path),c,{includeMetadataChanges:!0,Nu:!0});return _p(n,l)}(await Ai(s),s.asyncQueue,e,t,r)),r.promise}function hO(s,e){const t=new nt;return s.asyncQueue.enqueueAndForget(async()=>async function(r,n,i){try{const a=await Ec(r,n,!0),o=new hb(n,a.Hi),u=o.Wu(a.documents),c=o.applyChanges(u,!1);i.resolve(c.snapshot)}catch(a){const o=Ji(a,`Failed to execute query '${n} against cache`);i.reject(o)}}(await Up(s),e,t)),t.promise}function Ab(s,e,t={}){const r=new nt;return s.asyncQueue.enqueueAndForget(async()=>function(n,i,a,o,u){const c=new Fl({next:h=>{i.enqueueAndForget(()=>xp(n,l)),h.fromCache&&o.source==="server"?u.reject(new M(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(h)},error:h=>u.reject(h)}),l=new Pp(a,c,{includeMetadataChanges:!0,Nu:!0});return _p(n,l)}(await Ai(s),s.asyncQueue,e,t,r)),r.promise}function fO(s,e){const t=new Fl(e);return s.asyncQueue.enqueueAndForget(async()=>function(r,n){q(r).Ru.add(n),n.next()}(await Ai(s),t)),()=>{t.bc(),s.asyncQueue.enqueueAndForget(async()=>function(r,n){q(r).Ru.delete(n)}(await Ai(s),t))}}function dO(s,e,t,r){const n=function(i,a){let o;return o=typeof i=="string"?new TextEncoder().encode(i):i,function(u,c){return new sO(u,c)}(function(u,c){if(u instanceof Uint8Array)return ky(u,c);if(u instanceof ArrayBuffer)return ky(new Uint8Array(u),c);if(u instanceof ReadableStream)return u.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(o),a)}(t,su(e));s.asyncQueue.enqueueAndForget(async()=>{ZN(await Bp(s),n,r)})}function pO(s,e){return s.asyncQueue.enqueue(async()=>function(t,r){const n=q(t);return n.persistence.runTransaction("Get named query","readonly",i=>n.Ns.getNamedQuery(i,r))}(await Up(s),e))}class mO{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new Tp(this,"async_queue_retry"),this.Wc=()=>{const t=Wu();t&&L("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=Wu();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=Wu();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new nt;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}async Jc(){if(this.Lc.length!==0){try{await this.Lc[0](),this.Lc.shift(),this.xo.reset()}catch(e){if(!qs(e))throw e;L("AsyncQueue","Operation failed with retryable error: "+e)}this.Lc.length>0&&this.xo.Ro(()=>this.Jc())}}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{this.Kc=r,this.Gc=!1;const n=function(i){let a=i.message||"";return i.stack&&(a=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),a}(r);throw ze("INTERNAL UNHANDLED ERROR: ",n),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const n=Ip.createAndSchedule(this,e,t,r,i=>this.Yc(i));return this.qc.push(n),n}zc(){this.Kc&&K()}verifyOperationInProgress(){}async Xc(){let e;do e=this.Bc,await e;while(e!==this.Bc)}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function _f(s){return function(e,t){if(typeof e!="object"||e===null)return!1;const r=e;for(const n of t)if(n in r&&typeof r[n]=="function")return!0;return!1}(s,["next","error","complete"])}class gO{constructor(){this._progressObserver={},this._taskCompletionResolver=new nt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yO=-1;class Ge extends iu{constructor(e,t,r,n){super(e,t,r,n),this.type="firestore",this._queue=new mO,this._persistenceKey=(n==null?void 0:n.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Pb(this),this._firestoreClient.terminate()}}function lt(s){return s._firestoreClient||Pb(s),s._firestoreClient.verifyNotTerminated(),s._firestoreClient}function Pb(s){var e;const t=s._freezeSettings(),r=function(n,i,a,o){return new CC(n,i,a,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,o.useFetchStreams)}(s._databaseId,((e=s._app)===null||e===void 0?void 0:e.options.appId)||"",s._persistenceKey,t);s._firestoreClient=new aO(s._authCredentials,s._appCheckCredentials,s._queue,r)}function vO(s,e){kb(s=Ee(s,Ge));const t=lt(s),r=s._freezeSettings(),n=new Mp;return Cb(t,n,new gb(n,r.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function wO(s){kb(s=Ee(s,Ge));const e=lt(s),t=s._freezeSettings(),r=new Mp;return Cb(e,r,new eO(r,t.cacheSizeBytes))}function Cb(s,e,t){const r=new nt;return s.asyncQueue.enqueue(async()=>{try{await Sb(s,t),await Eb(s,e),r.resolve()}catch(n){const i=n;if(!function(a){return a.name==="FirebaseError"?a.code===N.FAILED_PRECONDITION||a.code===N.UNIMPLEMENTED:typeof DOMException!="undefined"&&a instanceof DOMException?a.code===22||a.code===20||a.code===11:!0}(i))throw i;vi("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}}).then(()=>r.promise)}function TO(s){if(s._initialized&&!s._terminated)throw new M(N.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new nt;return s._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(t){if(!ir.C())return Promise.resolve();const r=t+"main";await ir.delete(r)}(yp(s._databaseId,s._persistenceKey)),e.resolve()}catch(t){e.reject(t)}}),e.promise}function bO(s){return function(e){const t=new nt;return e.asyncQueue.enqueueAndForget(async()=>$N(await Bp(e),t)),t.promise}(lt(s=Ee(s,Ge)))}function SO(s){return uO(lt(s=Ee(s,Ge)))}function EO(s){return cO(lt(s=Ee(s,Ge)))}function IO(s,e){const t=lt(s=Ee(s,Ge)),r=new gO;return dO(t,s._databaseId,e,r),r}function _O(s,e){return pO(lt(s=Ee(s,Ge)),e).then(t=>t?new It(s,null,t.query):null)}function kb(s){if(s._initialized||s._terminated)throw new M(N.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Dr(Je.fromBase64String(e))}catch(t){throw new M(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Dr(Je.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new M(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new We(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new M(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new M(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ue(this._lat,e._lat)||ue(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xO=/^__.*__$/;class AO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new as(e,this.data,this.fieldMask,t,this.fieldTransforms):new Wi(e,this.data,t,this.fieldTransforms)}}class Nb{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new as(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Ob(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K()}}class Vl{constructor(e,t,r,n,i,a){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=n,i===void 0&&this.na(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new Vl(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),n=this.ia({path:r,oa:!1});return n.ua(e),n}ca(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),n=this.ia({path:r,oa:!1});return n.na(),n}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return Pc(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(e.length===0)throw this.ha("Document fields must not be empty");if(Ob(this.sa)&&xO.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class PO{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||su(e)}da(e,t,r,n=!1){return new Vl({sa:e,methodName:t,fa:r,path:We.emptyPath(),oa:!1,la:n},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Ln(s){const e=s._freezeSettings(),t=su(s._databaseId);return new PO(s._databaseId,!!e.ignoreUndefinedProperties,t)}function ql(s,e,t,r,n,i={}){const a=s.da(i.merge||i.mergeFields?2:0,e,t,n);jp("Data must be an object, but it was:",a,r);const o=Mb(r,a);let u,c;if(i.merge)u=new Gt(a.fieldMask),c=a.fieldTransforms;else if(i.mergeFields){const l=[];for(const h of i.mergeFields){const f=xf(e,h,t);if(!a.contains(f))throw new M(N.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);Fb(l,f)||l.push(f)}u=new Gt(l),c=a.fieldTransforms.filter(h=>u.covers(h.field))}else u=null,c=a.fieldTransforms;return new AO(new dt(o),u,c)}class au extends Mn{_toFieldTransform(e){if(e.sa!==2)throw e.sa===1?e.ha(`${this._methodName}() can only appear at the top level of your update data`):e.ha(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof au}}function Db(s,e,t){return new Vl({sa:3,fa:e.settings.fa,methodName:s._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class Vp extends Mn{_toFieldTransform(e){return new eu(e.path,new bi)}isEqual(e){return e instanceof Vp}}class CO extends Mn{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=Db(this,e,!0),r=this._a.map(i=>Fn(i,t)),n=new xn(r);return new eu(e.path,n)}isEqual(e){return this===e}}class kO extends Mn{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=Db(this,e,!0),r=this._a.map(i=>Fn(i,t)),n=new An(r);return new eu(e.path,n)}isEqual(e){return this===e}}class NO extends Mn{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new Si(e.It,cT(e.It,this.wa));return new eu(e.path,t)}isEqual(e){return this===e}}function qp(s,e,t,r){const n=s.da(1,e,t);jp("Data must be an object, but it was:",n,r);const i=[],a=dt.empty();Rn(r,(u,c)=>{const l=Gp(e,u,t);c=Z(c);const h=n.ca(l);if(c instanceof au)i.push(l);else{const f=Fn(c,h);f!=null&&(i.push(l),a.set(l,f))}});const o=new Gt(i);return new Nb(a,o,n.fieldTransforms)}function $p(s,e,t,r,n,i){const a=s.da(1,e,t),o=[xf(e,r,t)],u=[n];if(i.length%2!=0)throw new M(N.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<i.length;f+=2)o.push(xf(e,i[f])),u.push(i[f+1]);const c=[],l=dt.empty();for(let f=o.length-1;f>=0;--f)if(!Fb(c,o[f])){const d=o[f];let g=u[f];g=Z(g);const p=a.ca(d);if(g instanceof au)c.push(d);else{const m=Fn(g,p);m!=null&&(c.push(d),l.set(d,m))}}const h=new Gt(c);return new Nb(l,h,a.fieldTransforms)}function Rb(s,e,t,r=!1){return Fn(t,s.da(r?4:3,e))}function Fn(s,e){if(Lb(s=Z(s)))return jp("Unsupported field value:",e,s),Mb(s,e);if(s instanceof Mn)return function(t,r){if(!Ob(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const n=t._toFieldTransform(r);n&&r.fieldTransforms.push(n)}(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.oa&&e.sa!==4)throw e.ha("Nested arrays are not supported");return function(t,r){const n=[];let i=0;for(const a of t){let o=Fn(a,r.aa(i));o==null&&(o={nullValue:"NULL_VALUE"}),n.push(o),i++}return{arrayValue:{values:n}}}(s,e)}return function(t,r){if((t=Z(t))===null)return{nullValue:"NULL_VALUE"};if(typeof t=="number")return cT(r.It,t);if(typeof t=="boolean")return{booleanValue:t};if(typeof t=="string")return{stringValue:t};if(t instanceof Date){const n=Fe.fromDate(t);return{timestampValue:co(r.It,n)}}if(t instanceof Fe){const n=new Fe(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:co(r.It,n)}}if(t instanceof Bl)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Dr)return{bytesValue:ET(r.It,t._byteString)};if(t instanceof Oe){const n=r.databaseId,i=t.firestore._databaseId;if(!i.isEqual(n))throw r.ha(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:cp(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${Ll(t)}`)}(s,e)}function Mb(s,e){const t={};return Jw(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Rn(s,(r,n)=>{const i=Fn(n,e.ra(r));i!=null&&(t[r]=i)}),{mapValue:{fields:t}}}function Lb(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Fe||s instanceof Bl||s instanceof Dr||s instanceof Oe||s instanceof Mn)}function jp(s,e,t){if(!Lb(t)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(t)){const r=Ll(t);throw r==="an object"?e.ha(s+" a custom object"):e.ha(s+" "+r)}}function xf(s,e,t){if((e=Z(e))instanceof Os)return e._internalPath;if(typeof e=="string")return Gp(s,e);throw Pc("Field path arguments must be of type string or ",s,!1,void 0,t)}const OO=new RegExp("[~\\*/\\[\\]]");function Gp(s,e,t){if(e.search(OO)>=0)throw Pc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new Os(...e.split("."))._internalPath}catch{throw Pc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function Pc(s,e,t,r,n){const i=r&&!r.isEmpty(),a=n!==void 0;let o=`Function ${e}() called with invalid data`;t&&(o+=" (via `toFirestore()`)"),o+=". ";let u="";return(i||a)&&(u+=" (found",i&&(u+=` in field ${r}`),a&&(u+=` in document ${n}`),u+=")"),new M(N.INVALID_ARGUMENT,o+s+u)}function Fb(s,e){return s.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e,t,r,n,i){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=n,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Oe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new DO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field($l("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class DO extends mo{data(){return super.data()}}function $l(s,e){return typeof e=="string"?Gp(s,e):e instanceof Os?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ub(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new M(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ou{}function ps(s,...e){for(const t of e)s=t._apply(s);return s}class RO extends ou{constructor(e,t,r){super(),this.ma=e,this.ga=t,this.ya=r,this.type="where"}_apply(e){const t=Ln(e.firestore),r=function(n,i,a,o,u,c,l){let h;if(u.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new M(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){Oy(l,c);const d=[];for(const g of l)d.push(Ny(o,n,g));h={arrayValue:{values:d}}}else h=Ny(o,n,l)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||Oy(l,c),h=Rb(a,i,l,c==="in"||c==="not-in");const f=pt.create(u,c,h);return function(d,g){if(g.dt()){const m=ip(d);if(m!==null&&!m.isEqual(g.field))throw new M(N.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${m.toString()}' and '${g.field.toString()}'`);const v=np(d);v!==null&&jb(d,g.field,v)}const p=function(m,v){for(const S of m.filters)if(v.indexOf(S.op)>=0)return S.op;return null}(d,function(m){switch(m){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(g.op));if(p!==null)throw p===g.op?new M(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${g.op.toString()}' filter.`):new M(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${g.op.toString()}' filters with '${p.toString()}' filters.`)}(n,f),f}(e._query,"where",t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new It(e.firestore,e.converter,function(n,i){const a=n.filters.concat([i]);return new is(n.path,n.collectionGroup,n.explicitOrderBy.slice(),a,n.limit,n.limitType,n.startAt,n.endAt)}(e._query,r))}}function MO(s,e,t){const r=e,n=$l("where",s);return new RO(n,r,t)}class LO extends ou{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(r,n,i){if(r.startAt!==null)throw new M(N.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new M(N.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const a=new oi(n,i);return function(o,u){if(np(o)===null){const c=ip(o);c!==null&&jb(o,c,u.field)}}(r,a),a}(e._query,this.ma,this.pa);return new It(e.firestore,e.converter,function(r,n){const i=r.explicitOrderBy.concat([n]);return new is(r.path,r.collectionGroup,i,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}function FO(s,e="asc"){const t=e,r=$l("orderBy",s);return new LO(r,t)}class Bb extends ou{constructor(e,t,r){super(),this.type=e,this.Ia=t,this.Ta=r}_apply(e){return new It(e.firestore,e.converter,Tc(e._query,this.Ia,this.Ta))}}function UO(s){return vb("limit",s),new Bb("limit",s,"F")}function BO(s){return vb("limitToLast",s),new Bb("limitToLast",s,"L")}class Vb extends ou{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=$b(e,this.type,this.Ea,this.Aa);return new It(e.firestore,e.converter,function(r,n){return new is(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,n,r.endAt)}(e._query,t))}}function VO(...s){return new Vb("startAt",s,!0)}function qO(...s){return new Vb("startAfter",s,!1)}class qb extends ou{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=$b(e,this.type,this.Ea,this.Aa);return new It(e.firestore,e.converter,function(r,n){return new is(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,n)}(e._query,t))}}function $O(...s){return new qb("endBefore",s,!1)}function jO(...s){return new qb("endAt",s,!0)}function $b(s,e,t,r){if(t[0]=Z(t[0]),t[0]instanceof mo)return function(n,i,a,o,u){if(!o)throw new M(N.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const c=[];for(const l of Ti(n))if(l.field.isKeyField())c.push(In(i,o.key));else{const h=o.data.field(l.field);if(sp(h))throw new M(N.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+l.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){const f=l.field.canonicalString();throw new M(N.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${f}' (used as the orderBy) does not exist.`)}c.push(h)}return new ks(c,u)}(s._query,s.firestore._databaseId,e,t[0]._document,r);{const n=Ln(s.firestore);return function(i,a,o,u,c,l){const h=i.explicitOrderBy;if(c.length>h.length)throw new M(N.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const f=[];for(let d=0;d<c.length;d++){const g=c[d];if(h[d].field.isKeyField()){if(typeof g!="string")throw new M(N.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof g}`);if(!ap(i)&&g.indexOf("/")!==-1)throw new M(N.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${g}' contains a slash.`);const p=i.path.child(Te.fromString(g));if(!V.isDocumentKey(p))throw new M(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${p}' is not because it contains an odd number of segments.`);const m=new V(p);f.push(In(a,m))}else{const p=Rb(o,u,g);f.push(p)}}return new ks(f,l)}(s._query,s.firestore._databaseId,n,e,t,r)}}function Ny(s,e,t){if(typeof(t=Z(t))=="string"){if(t==="")throw new M(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ap(e)&&t.indexOf("/")!==-1)throw new M(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Te.fromString(t));if(!V.isDocumentKey(r))throw new M(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return In(s,new V(r))}if(t instanceof Oe)return In(s,t._key);throw new M(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ll(t)}.`)}function Oy(s,e){if(!Array.isArray(s)||s.length===0)throw new M(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(s.length>10)throw new M(N.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function jb(s,e,t){if(!t.isEqual(e))throw new M(N.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{convertValue(e,t="none"){switch(En(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Sn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw K()}}convertObject(e,t){const r={};return Rn(e.fields,(n,i)=>{r[n]=this.convertValue(i,t)}),r}convertGeoPoint(e){return new Bl(qe(e.latitude),qe(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Xw(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(io(e));default:return null}}convertTimestamp(e){const t=As(e);return new Fe(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Te.fromString(e);re(OT(r));const n=new Ps(r.get(1),r.get(3)),i=new V(r.popFirst(5));return n.isEqual(t)||ze(`Document ${i} contains a document reference within a different database (${n.projectId}/${n.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jl(s,e,t){let r;return r=s?t&&(t.merge||t.mergeFields)?s.toFirestore(e,t):s.toFirestore(e):e,r}class GO extends zp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Oe(this.firestore,null,t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Zr extends mo{constructor(e,t,r,n,i,a){super(e,t,r,n,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ua(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field($l("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Ua extends Zr{data(e={}){return super.data(e)}}class Ds{constructor(e,t,r,n){this._firestore=e,this._userDataWriter=t,this._snapshot=n,this.metadata=new on(n.hasPendingWrites,n.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ua(this._firestore,this._userDataWriter,r.key,r,new on(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new M(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,n){if(r._snapshot.oldDocs.isEmpty()){let i=0;return r._snapshot.docChanges.map(a=>{const o=new Ua(r._firestore,r._userDataWriter,a.doc.key,a.doc,new on(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:o,oldIndex:-1,newIndex:i++}})}{let i=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>n||a.type!==3).map(a=>{const o=new Ua(r._firestore,r._userDataWriter,a.doc.key,a.doc,new on(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let u=-1,c=-1;return a.type!==0&&(u=i.indexOf(a.doc.key),i=i.delete(a.doc.key)),a.type!==1&&(i=i.add(a.doc),c=i.indexOf(a.doc.key)),{type:zO(a.type),doc:o,oldIndex:u,newIndex:c}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function zO(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K()}}function Gb(s,e){return s instanceof Zr&&e instanceof Zr?s._firestore===e._firestore&&s._key.isEqual(e._key)&&(s._document===null?e._document===null:s._document.isEqual(e._document))&&s._converter===e._converter:s instanceof Ds&&e instanceof Ds&&s._firestore===e._firestore&&bb(s.query,e.query)&&s.metadata.isEqual(e.metadata)&&s._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WO(s){s=Ee(s,Oe);const e=Ee(s.firestore,Ge);return xb(lt(e),s._key).then(t=>Wp(e,s,t))}class Un extends zp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Oe(this.firestore,null,t)}}function KO(s){s=Ee(s,Oe);const e=Ee(s.firestore,Ge),t=lt(e),r=new Un(e);return lO(t,s._key).then(n=>new Zr(e,r,s._key,n,new on(n!==null&&n.hasLocalMutations,!0),s.converter))}function HO(s){s=Ee(s,Oe);const e=Ee(s.firestore,Ge);return xb(lt(e),s._key,{source:"server"}).then(t=>Wp(e,s,t))}function QO(s){s=Ee(s,It);const e=Ee(s.firestore,Ge),t=lt(e),r=new Un(e);return Ub(s._query),Ab(t,s._query).then(n=>new Ds(e,r,s,n))}function YO(s){s=Ee(s,It);const e=Ee(s.firestore,Ge),t=lt(e),r=new Un(e);return hO(t,s._query).then(n=>new Ds(e,r,s,n))}function JO(s){s=Ee(s,It);const e=Ee(s.firestore,Ge),t=lt(e),r=new Un(e);return Ab(t,s._query,{source:"server"}).then(n=>new Ds(e,r,s,n))}function Dy(s,e,t){s=Ee(s,Oe);const r=Ee(s.firestore,Ge),n=jl(s.converter,e,t);return uu(r,[ql(Ln(r),"setDoc",s._key,n,s.converter!==null,t).toMutation(s._key,Me.none())])}function Ry(s,e,t,...r){s=Ee(s,Oe);const n=Ee(s.firestore,Ge),i=Ln(n);let a;return a=typeof(e=Z(e))=="string"||e instanceof Os?$p(i,"updateDoc",s._key,e,t,r):qp(i,"updateDoc",s._key,e),uu(n,[a.toMutation(s._key,Me.exists(!0))])}function XO(s){return uu(Ee(s.firestore,Ge),[new Ki(s._key,Me.none())])}function ZO(s,e){const t=Ee(s.firestore,Ge),r=Ac(s),n=jl(s.converter,e);return uu(t,[ql(Ln(s.firestore),"addDoc",r._key,n,s.converter!==null,{}).toMutation(r._key,Me.exists(!1))]).then(()=>r)}function zb(s,...e){var t,r,n;s=Z(s);let i={includeMetadataChanges:!1},a=0;typeof e[a]!="object"||_f(e[a])||(i=e[a],a++);const o={includeMetadataChanges:i.includeMetadataChanges};if(_f(e[a])){const h=e[a];e[a]=(t=h.next)===null||t===void 0?void 0:t.bind(h),e[a+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[a+2]=(n=h.complete)===null||n===void 0?void 0:n.bind(h)}let u,c,l;if(s instanceof Oe)c=Ee(s.firestore,Ge),l=zi(s._key.path),u={next:h=>{e[a]&&e[a](Wp(c,s,h))},error:e[a+1],complete:e[a+2]};else{const h=Ee(s,It);c=Ee(h.firestore,Ge),l=h._query;const f=new Un(c);u={next:d=>{e[a]&&e[a](new Ds(c,f,h,d))},error:e[a+1],complete:e[a+2]},Ub(s._query)}return function(h,f,d,g){const p=new Fl(g),m=new Pp(f,p,d);return h.asyncQueue.enqueueAndForget(async()=>_p(await Ai(h),m)),()=>{p.bc(),h.asyncQueue.enqueueAndForget(async()=>xp(await Ai(h),m))}}(lt(c),l,o,u)}function eD(s,e){return fO(lt(s=Ee(s,Ge)),_f(e)?e:{next:e})}function uu(s,e){return function(t,r){const n=new nt;return t.asyncQueue.enqueueAndForget(async()=>UN(await Bp(t),r,n)),n.promise}(lt(s),e)}function Wp(s,e,t){const r=t.docs.get(e._key),n=new Un(s);return new Zr(s,n,e._key,r,new on(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ln(e)}set(e,t,r){this._verifyNotCommitted();const n=Ts(e,this._firestore),i=jl(n.converter,t,r),a=ql(this._dataReader,"WriteBatch.set",n._key,i,n.converter!==null,r);return this._mutations.push(a.toMutation(n._key,Me.none())),this}update(e,t,r,...n){this._verifyNotCommitted();const i=Ts(e,this._firestore);let a;return a=typeof(t=Z(t))=="string"||t instanceof Os?$p(this._dataReader,"WriteBatch.update",i._key,t,r,n):qp(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(a.toMutation(i._key,Me.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ts(e,this._firestore);return this._mutations=this._mutations.concat(new Ki(t._key,Me.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new M(N.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ts(s,e){if((s=Z(s)).firestore!==e)throw new M(N.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Ln(e)}get(e){const t=Ts(e,this._firestore),r=new GO(this._firestore);return this._transaction.lookup([t._key]).then(n=>{if(!n||n.length!==1)return K();const i=n[0];if(i.isFoundDocument())return new mo(this._firestore,r,i.key,i,t.converter);if(i.isNoDocument())return new mo(this._firestore,r,t._key,null,t.converter);throw K()})}set(e,t,r){const n=Ts(e,this._firestore),i=jl(n.converter,t,r),a=ql(this._dataReader,"Transaction.set",n._key,i,n.converter!==null,r);return this._transaction.set(n._key,a),this}update(e,t,r,...n){const i=Ts(e,this._firestore);let a;return a=typeof(t=Z(t))=="string"||t instanceof Os?$p(this._dataReader,"Transaction.update",i._key,t,r,n):qp(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,a),this}delete(e){const t=Ts(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ts(e,this._firestore),r=new Un(this._firestore);return super.get(e).then(n=>new Zr(this._firestore,r,t._key,n._document,new on(!1,!1),t.converter))}}function nD(s,e,t){s=Ee(s,Ge);const r=Object.assign(Object.assign({},tD),t);return function(n){if(n.maxAttempts<1)throw new M(N.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(n,i,a){const o=new nt;return n.asyncQueue.enqueueAndForget(async()=>{const u=await oO(n);new iO(n.asyncQueue,u,a,i,o).run()}),o.promise}(lt(s),n=>e(new sD(s,n)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iD(){return new au("deleteField")}function aD(){return new Vp("serverTimestamp")}function oD(...s){return new CO("arrayUnion",s)}function uD(...s){return new kO("arrayRemove",s)}function cD(s){return new NO("increment",s)}(function(s,e=!0){(function(t){Gi=t})(Fo),Hh(new Ka("firestore",(t,{instanceIdentifier:r,options:n})=>{const i=t.getProvider("app").getImmediate(),a=new Ge(new mC(t.getProvider("auth-internal")),new wC(t.getProvider("app-check-internal")),function(o,u){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new M(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ps(o.options.projectId,u)}(i,r),i);return n=Object.assign({useFetchStreams:e},n),a._setSettings(n),a},"PUBLIC").setMultipleInstances(!0)),sc(Ng,"3.7.3",s),sc(Ng,"3.7.3","esm2017")})();const lD="@firebase/firestore-compat",hD="0.2.3";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kp(s,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new M("invalid-argument",`Invalid options passed to function ${s}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function My(){if(typeof Uint8Array=="undefined")throw new M("unimplemented","Uint8Arrays are not available in this environment.")}function Ly(){if(!AC())throw new M("unimplemented","Blobs are unavailable in Firestore in this environment.")}class go{constructor(e){this._delegate=e}static fromBase64String(e){return Ly(),new go(Dr.fromBase64String(e))}static fromUint8Array(e){return My(),new go(Dr.fromUint8Array(e))}toBase64(){return Ly(),this._delegate.toBase64()}toUint8Array(){return My(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Af(s){return fD(s,["next","error","complete"])}function fD(s,e){if(typeof s!="object"||s===null)return!1;const t=s;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{enableIndexedDbPersistence(e,t){return vO(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return wO(e._delegate)}clearIndexedDbPersistence(e){return TO(e._delegate)}}class Wb{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ps||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&vi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){tO(this._delegate,e,t,r)}enableNetwork(){return SO(this._delegate)}disableNetwork(){return EO(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,yb("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return bO(this._delegate)}onSnapshotsInSync(e){return eD(this._delegate,e)}get app(){if(!this._appCompat)throw new M("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Pi(this,wb(this._delegate,e))}catch(t){throw At(t,"collection()","Firestore.collection()")}}doc(e){try{return new Jt(this,Ac(this._delegate,e))}catch(t){throw At(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new xt(this,rO(this._delegate,e))}catch(t){throw At(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return nD(this._delegate,t=>e(new Kb(this,t)))}batch(){return lt(this._delegate),new Hb(new rD(this._delegate,e=>uu(this._delegate,e)))}loadBundle(e){return IO(this._delegate,e)}namedQuery(e){return _O(this._delegate,e).then(t=>t?new xt(this,t):null)}}class Gl extends zp{constructor(e){super(),this.firestore=e}convertBytes(e){return new go(new Dr(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Jt.forKey(t,this.firestore,null)}}function pD(s){hC(s)}class Kb{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Gl(e)}get(e){const t=un(e);return this._delegate.get(t).then(r=>new yo(this._firestore,new Zr(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const n=un(e);return r?(Kp("Transaction.set",r),this._delegate.set(n,t,r)):this._delegate.set(n,t),this}update(e,t,r,...n){const i=un(e);return arguments.length===2?this._delegate.update(i,t):this._delegate.update(i,t,r,...n),this}delete(e){const t=un(e);return this._delegate.delete(t),this}}class Hb{constructor(e){this._delegate=e}set(e,t,r){const n=un(e);return r?(Kp("WriteBatch.set",r),this._delegate.set(n,t,r)):this._delegate.set(n,t),this}update(e,t,r,...n){const i=un(e);return arguments.length===2?this._delegate.update(i,t):this._delegate.update(i,t,r,...n),this}delete(e){const t=un(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Nn{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Ua(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new vo(this._firestore,r),t!=null?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Nn.INSTANCES;let n=r.get(e);n||(n=new WeakMap,r.set(e,n));let i=n.get(t);return i||(i=new Nn(e,new Gl(e),t),n.set(t,i)),i}}Nn.INSTANCES=new WeakMap;class Jt{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Gl(e)}static forPath(e,t,r){if(e.length%2!==0)throw new M("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Jt(t,new Oe(t._delegate,r,new V(e)))}static forKey(e,t,r){return new Jt(t,new Oe(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Pi(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Pi(this.firestore,wb(this._delegate,e))}catch(t){throw At(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Z(e),e instanceof Oe?Tb(this._delegate,e):!1}set(e,t){t=Kp("DocumentReference.set",t);try{return t?Dy(this._delegate,e,t):Dy(this._delegate,e)}catch(r){throw At(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?Ry(this._delegate,e):Ry(this._delegate,e,t,...r)}catch(n){throw At(n,"updateDoc()","DocumentReference.update()")}}delete(){return XO(this._delegate)}onSnapshot(...e){const t=Qb(e),r=Yb(e,n=>new yo(this.firestore,new Zr(this.firestore._delegate,this._userDataWriter,n._key,n._document,n.metadata,this._delegate.converter)));return zb(this._delegate,t,r)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=KO(this._delegate):(e==null?void 0:e.source)==="server"?t=HO(this._delegate):t=WO(this._delegate),t.then(r=>new yo(this.firestore,new Zr(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Jt(this.firestore,e?this._delegate.withConverter(Nn.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function At(s,e,t){return s.message=s.message.replace(e,t),s}function Qb(s){for(const e of s)if(typeof e=="object"&&!Af(e))return e;return{}}function Yb(s,e){var t,r;let n;return Af(s[0])?n=s[0]:Af(s[1])?n=s[1]:typeof s[0]=="function"?n={next:s[0],error:s[1],complete:s[2]}:n={next:s[1],error:s[2],complete:s[3]},{next:i=>{n.next&&n.next(e(i))},error:(t=n.error)===null||t===void 0?void 0:t.bind(n),complete:(r=n.complete)===null||r===void 0?void 0:r.bind(n)}}class yo{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Jt(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Gb(this._delegate,e._delegate)}}class vo extends yo{data(e){const t=this._delegate.data(e);return fC(t!==void 0),t}}class xt{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Gl(e)}where(e,t,r){try{return new xt(this.firestore,ps(this._delegate,MO(e,t,r)))}catch(n){throw At(n,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new xt(this.firestore,ps(this._delegate,FO(e,t)))}catch(r){throw At(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new xt(this.firestore,ps(this._delegate,UO(e)))}catch(t){throw At(t,"limit()","Query.limit()")}}limitToLast(e){try{return new xt(this.firestore,ps(this._delegate,BO(e)))}catch(t){throw At(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new xt(this.firestore,ps(this._delegate,VO(...e)))}catch(t){throw At(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new xt(this.firestore,ps(this._delegate,qO(...e)))}catch(t){throw At(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new xt(this.firestore,ps(this._delegate,$O(...e)))}catch(t){throw At(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new xt(this.firestore,ps(this._delegate,jO(...e)))}catch(t){throw At(t,"endAt()","Query.endAt()")}}isEqual(e){return bb(this._delegate,e._delegate)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=YO(this._delegate):(e==null?void 0:e.source)==="server"?t=JO(this._delegate):t=QO(this._delegate),t.then(r=>new Pf(this.firestore,new Ds(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=Qb(e),r=Yb(e,n=>new Pf(this.firestore,new Ds(this.firestore._delegate,this._userDataWriter,this._delegate,n._snapshot)));return zb(this._delegate,t,r)}withConverter(e){return new xt(this.firestore,e?this._delegate.withConverter(Nn.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class mD{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new vo(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Pf{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new xt(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new vo(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new mD(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new vo(this._firestore,r))})}isEqual(e){return Gb(this._delegate,e._delegate)}}class Pi extends xt{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Jt(this.firestore,e):null}doc(e){try{return e===void 0?new Jt(this.firestore,Ac(this._delegate)):new Jt(this.firestore,Ac(this._delegate,e))}catch(t){throw At(t,"doc()","CollectionReference.doc()")}}add(e){return ZO(this._delegate,e).then(t=>new Jt(this.firestore,t))}isEqual(e){return Tb(this._delegate,e._delegate)}withConverter(e){return new Pi(this.firestore,e?this._delegate.withConverter(Nn.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function un(s){return Ee(s,Oe)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(...e){this._delegate=new Os(...e)}static documentId(){return new Hp(We.keyField().canonicalString())}isEqual(e){return e=Z(e),e instanceof Os?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this._delegate=e}static serverTimestamp(){const e=aD();return e._methodName="FieldValue.serverTimestamp",new en(e)}static delete(){const e=iD();return e._methodName="FieldValue.delete",new en(e)}static arrayUnion(...e){const t=oD(...e);return t._methodName="FieldValue.arrayUnion",new en(t)}static arrayRemove(...e){const t=uD(...e);return t._methodName="FieldValue.arrayRemove",new en(t)}static increment(e){const t=cD(e);return t._methodName="FieldValue.increment",new en(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gD={Firestore:Wb,GeoPoint:Bl,Timestamp:Fe,Blob:go,Transaction:Kb,WriteBatch:Hb,DocumentReference:Jt,DocumentSnapshot:yo,Query:xt,QueryDocumentSnapshot:vo,QuerySnapshot:Pf,CollectionReference:Pi,FieldPath:Hp,FieldValue:en,setLogLevel:pD,CACHE_SIZE_UNLIMITED:yO};function yD(s,e){s.INTERNAL.registerComponent(new Ka("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),n=t.getProvider("firestore").getImmediate();return e(r,n)},"PUBLIC").setServiceProps(Object.assign({},gD)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vD(s){yD(s,(e,t)=>new Wb(e,t,new dD)),s.registerVersion(lD,hD)}vD(kr);function wD(s){if(s.__esModule)return s;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(s).forEach(function(t){var r=Object.getOwnPropertyDescriptor(s,t);Object.defineProperty(e,t,r.get?r:{enumerable:!0,get:function(){return s[t]}})}),e}function TD(s){throw new Error('Could not dynamically require "'+s+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var wo={exports:{}},bD={},SD=Object.freeze(Object.defineProperty({__proto__:null,default:bD},Symbol.toStringTag,{value:"Module"})),ED=wD(SD),Jb=typeof process!="undefined"&&process.pid?process.pid.toString(36):"",Xb="";if(typeof __webpack_require__!="function"&&typeof TD!="undefined"){var _h="",Fy=ED;if(Fy.networkInterfaces)var xh=Fy.networkInterfaces();if(xh){e:for(let s in xh){const e=xh[s],t=e.length;for(var Gn=0;Gn<t;Gn++)if(e[Gn]!==void 0&&e[Gn].mac&&e[Gn].mac!="00:00:00:00:00:00"){_h=e[Gn].mac;break e}}Xb=_h?parseInt(_h.replace(/\:|\D+/gi,"")).toString(36):""}}wo.exports=wo.exports.default=function(s,e){return(s||"")+Xb+Jb+To().toString(36)+(e||"")};wo.exports.process=function(s,e){return(s||"")+Jb+To().toString(36)+(e||"")};wo.exports.time=function(s,e){return(s||"")+To().toString(36)+(e||"")};function To(){var s=Date.now(),e=To.last||s;return To.last=s>e?s:e+1}var ID=wo.exports;function us(s,e){const t=Object.create(null),r=s.split(",");for(let n=0;n<r.length;n++)t[r[n]]=!0;return e?n=>!!t[n.toLowerCase()]:n=>!!t[n]}const _s={[1]:"TEXT",[2]:"CLASS",[4]:"STYLE",[8]:"PROPS",[16]:"FULL_PROPS",[32]:"HYDRATE_EVENTS",[64]:"STABLE_FRAGMENT",[128]:"KEYED_FRAGMENT",[256]:"UNKEYED_FRAGMENT",[512]:"NEED_PATCH",[1024]:"DYNAMIC_SLOTS",[2048]:"DEV_ROOT_FRAGMENT",[-1]:"HOISTED",[-2]:"BAIL"},_D={[1]:"STABLE",[2]:"DYNAMIC",[3]:"FORWARDED"},xD="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt",Zb=us(xD),AD=/;(?![^(]*\))/g,PD=/:(.+)/;function CD(s){const e={};return s.split(AD).forEach(t=>{if(t){const r=t.split(PD);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}Object.freeze({});Object.freeze([]);const kD=/^on[^a-z]/,eS=s=>kD.test(s),ND=Object.assign,OD=Object.prototype.hasOwnProperty,DD=(s,e)=>OD.call(s,e),RD=Array.isArray,er=s=>typeof s=="string",tS=s=>typeof s=="symbol",rS=s=>s!==null&&typeof s=="object",Uy=us(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),MD=us("bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo"),zl=s=>{const e=Object.create(null);return t=>e[t]||(e[t]=s(t))},LD=/-(\w)/g,Ci=zl(s=>s.replace(LD,(e,t)=>t?t.toUpperCase():"")),FD=/\B([A-Z])/g,UD=zl(s=>s.replace(FD,"-$1").toLowerCase()),Wl=zl(s=>s.charAt(0).toUpperCase()+s.slice(1)),BD=zl(s=>s?`on${Wl(s)}`:""),VD=/^[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*$/;function By(s){return VD.test(s)?`__props.${s}`:`__props[${JSON.stringify(s)}]`}function Ue(s,e,t,r){const n=(t||qD)[s]+(r||""),i=new SyntaxError(String(n));return i.code=s,i.loc=e,i}const qD={[0]:"Illegal comment.",[1]:"CDATA section is allowed only in XML context.",[2]:"Duplicate attribute.",[3]:"End tag cannot have attributes.",[4]:"Illegal '/' in tags.",[5]:"Unexpected EOF in tag.",[6]:"Unexpected EOF in CDATA section.",[7]:"Unexpected EOF in comment.",[8]:"Unexpected EOF in script.",[9]:"Unexpected EOF in tag.",[10]:"Incorrectly closed comment.",[11]:"Incorrectly opened comment.",[12]:"Illegal tag name. Use '&lt;' to print '<'.",[13]:"Attribute value was expected.",[14]:"End tag name was expected.",[15]:"Whitespace was expected.",[16]:"Unexpected '<!--' in comment.",[17]:`Attribute name cannot contain U+0022 ("), U+0027 ('), and U+003C (<).`,[18]:"Unquoted attribute value cannot contain U+0022 (\"), U+0027 ('), U+003C (<), U+003D (=), and U+0060 (`).",[19]:"Attribute name cannot start with '='.",[21]:"'<?' is allowed only in XML context.",[20]:"Unexpected null character.",[22]:"Illegal '/' in tags.",[23]:"Invalid end tag.",[24]:"Element is missing end tag.",[25]:"Interpolation end sign was not found.",[27]:"End bracket for dynamic directive argument was not found. Note that dynamic directive argument cannot contain spaces.",[26]:"Legal directive name was expected.",[28]:"v-if/v-else-if is missing expression.",[29]:"v-if/else branches must use unique keys.",[30]:"v-else/v-else-if has no adjacent v-if or v-else-if.",[31]:"v-for is missing expression.",[32]:"v-for has invalid expression.",[33]:"<template v-for> key should be placed on the <template> tag.",[34]:"v-bind is missing expression.",[35]:"v-on is missing expression.",[36]:"Unexpected custom directive on <slot> outlet.",[37]:"Mixed v-slot usage on both the component and nested <template>.When there are multiple named slots, all slots should use <template> syntax to avoid scope ambiguity.",[38]:"Duplicate slot names found. ",[39]:"Extraneous children found when component already has explicitly named default slot. These children will be ignored.",[40]:"v-slot can only be used on components or <template> tags.",[41]:"v-model is missing expression.",[42]:"v-model value must be a valid JavaScript member expression.",[43]:"v-model cannot be used on v-for or v-slot scope variables because they are not writable.",[44]:"Error parsing JavaScript expression: ",[45]:"<KeepAlive> expects exactly one child component.",[46]:'"prefixIdentifiers" option is not supported in this build of compiler.',[47]:"ES module mode is not supported in this build of compiler.",[48]:'"cacheHandlers" option is only supported when the "prefixIdentifiers" option is enabled.',[49]:'"scopeId" option is only supported in module mode.',[50]:""},Cc=Symbol("Fragment"),Ba=Symbol("Teleport"),Qp=Symbol("Suspense"),kc=Symbol("KeepAlive"),sS=Symbol("BaseTransition"),ki=Symbol("openBlock"),nS=Symbol("createBlock"),iS=Symbol("createElementBlock"),aS=Symbol("createVNode"),oS=Symbol("createElementVNode"),Yp=Symbol("createCommentVNode"),uS=Symbol("createTextVNode"),$D=Symbol("createStaticVNode"),Cf=Symbol("resolveComponent"),Nc=Symbol("resolveDynamicComponent"),cS=Symbol("resolveDirective"),jD=Symbol("resolveFilter"),lS=Symbol("withDirectives"),Jp=Symbol("renderList"),hS=Symbol("renderSlot"),fS=Symbol("createSlots"),Xp=Symbol("toDisplayString"),Oc=Symbol("mergeProps"),Zp=Symbol("normalizeClass"),em=Symbol("normalizeStyle"),bo=Symbol("normalizeProps"),cu=Symbol("guardReactiveProps"),tm=Symbol("toHandlers"),kf=Symbol("camelize"),GD=Symbol("capitalize"),Nf=Symbol("toHandlerKey"),dS=Symbol("setBlockTracking"),zD=Symbol("pushScopeId"),WD=Symbol("popScopeId"),pS=Symbol("withCtx"),Dc=Symbol("unref"),Rc=Symbol("isRef"),rm=Symbol("withMemo"),mS=Symbol("isMemoSame"),KD={[Cc]:"Fragment",[Ba]:"Teleport",[Qp]:"Suspense",[kc]:"KeepAlive",[sS]:"BaseTransition",[ki]:"openBlock",[nS]:"createBlock",[iS]:"createElementBlock",[aS]:"createVNode",[oS]:"createElementVNode",[Yp]:"createCommentVNode",[uS]:"createTextVNode",[$D]:"createStaticVNode",[Cf]:"resolveComponent",[Nc]:"resolveDynamicComponent",[cS]:"resolveDirective",[jD]:"resolveFilter",[lS]:"withDirectives",[Jp]:"renderList",[hS]:"renderSlot",[fS]:"createSlots",[Xp]:"toDisplayString",[Oc]:"mergeProps",[Zp]:"normalizeClass",[em]:"normalizeStyle",[bo]:"normalizeProps",[cu]:"guardReactiveProps",[tm]:"toHandlers",[kf]:"camelize",[GD]:"capitalize",[Nf]:"toHandlerKey",[dS]:"setBlockTracking",[zD]:"pushScopeId",[WD]:"popScopeId",[pS]:"withCtx",[Dc]:"unref",[Rc]:"isRef",[rm]:"withMemo",[mS]:"isMemoSame"};function gS(s){Object.getOwnPropertySymbols(s).forEach(e=>{KD[e]=s[e]})}const hr={source:"",start:{line:1,column:1,offset:0},end:{line:1,column:1,offset:0}};function Mc(s,e,t,r,n,i,a,o=!1,u=!1,c=!1,l=hr){return s&&(o?(s.helper(ki),s.helper(Ao(s.inSSR,c))):s.helper(xo(s.inSSR,c)),a&&s.helper(lS)),{type:13,tag:e,props:t,children:r,patchFlag:n,dynamicProps:i,directives:a,isBlock:o,disableTracking:u,isComponent:c,loc:l}}function Kl(s,e=hr){return{type:17,loc:e,elements:s}}function Xt(s,e=hr){return{type:15,loc:e,properties:s}}function Be(s,e){return{type:16,loc:hr,key:er(s)?oe(s,!0):s,value:e}}function oe(s,e=!1,t=hr,r=0){return{type:4,loc:t,content:s,isStatic:e,constType:e?3:r}}function Ot(s,e=hr){return{type:8,loc:e,children:s}}function Qe(s,e=[],t=hr){return{type:14,loc:t,callee:s,arguments:e}}function Ni(s,e=void 0,t=!1,r=!1,n=hr){return{type:18,params:s,returns:e,newline:t,isSlot:r,loc:n}}function Of(s,e,t,r=!0){return{type:19,test:s,consequent:e,alternate:t,newline:r,loc:hr}}function HD(s){return{type:21,body:s,loc:hr}}const sm=/\r\n?|[\n\u2028\u2029]/,cn=new RegExp(sm.source,"g");function tn(s){switch(s){case 10:case 13:case 8232:case 8233:return!0;default:return!1}}const Ah=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,QD=/(?:[^\S\n\r\u2028\u2029]|\/\/.*|\/\*.*?\*\/)*/y,Vy=new RegExp("(?=("+QD.source+"))\\1"+/(?=[\n\r\u2028\u2029]|\/\*(?!.*?\*\/)|$)/.source,"y");function YD(s){switch(s){case 9:case 11:case 12:case 32:case 160:case 5760:case 8192:case 8193:case 8194:case 8195:case 8196:case 8197:case 8198:case 8199:case 8200:case 8201:case 8202:case 8239:case 8287:case 12288:case 65279:return!0;default:return!1}}class So{constructor(e,t){this.line=void 0,this.column=void 0,this.line=e,this.column=t}}class Lc{constructor(e,t){this.start=void 0,this.end=void 0,this.filename=void 0,this.identifierName=void 0,this.start=e,this.end=t}}function JD(s,e){let t=1,r=0,n;for(cn.lastIndex=0;(n=cn.exec(s))&&n.index<e;)t++,r=cn.lastIndex;return new So(t,e-r)}class XD{constructor(){this.sawUnambiguousESM=!1,this.ambiguousScriptDifferentAst=!1}hasPlugin(e){return this.plugins.has(e)}getPluginOption(e,t){if(this.hasPlugin(e))return this.plugins.get(e)[t]}}function yS(s,e){s.trailingComments===void 0?s.trailingComments=e:s.trailingComments.unshift(...e)}function ZD(s,e){s.leadingComments===void 0?s.leadingComments=e:s.leadingComments.unshift(...e)}function Eo(s,e){s.innerComments===void 0?s.innerComments=e:s.innerComments.unshift(...e)}function pa(s,e,t){let r=null,n=e.length;for(;r===null&&n>0;)r=e[--n];r===null||r.start>t.start?Eo(s,t.comments):yS(r,t.comments)}class eR extends XD{addComment(e){this.filename&&(e.loc.filename=this.filename),this.state.comments.push(e)}processComment(e){const{commentStack:t}=this.state,r=t.length;if(r===0)return;let n=r-1;const i=t[n];i.start===e.end&&(i.leadingNode=e,n--);const{start:a}=e;for(;n>=0;n--){const o=t[n],u=o.end;if(u>a)o.containingNode=e,this.finalizeComment(o),t.splice(n,1);else{u===a&&(o.trailingNode=e);break}}}finalizeComment(e){const{comments:t}=e;if(e.leadingNode!==null||e.trailingNode!==null)e.leadingNode!==null&&yS(e.leadingNode,t),e.trailingNode!==null&&ZD(e.trailingNode,t);else{const{containingNode:r,start:n}=e;if(this.input.charCodeAt(n-1)===44)switch(r.type){case"ObjectExpression":case"ObjectPattern":case"RecordExpression":pa(r,r.properties,e);break;case"CallExpression":case"OptionalCallExpression":pa(r,r.arguments,e);break;case"FunctionDeclaration":case"FunctionExpression":case"ArrowFunctionExpression":case"ObjectMethod":case"ClassMethod":case"ClassPrivateMethod":pa(r,r.params,e);break;case"ArrayExpression":case"ArrayPattern":case"TupleExpression":pa(r,r.elements,e);break;case"ExportNamedDeclaration":case"ImportDeclaration":pa(r,r.specifiers,e);break;default:Eo(r,t)}else Eo(r,t)}}finalizeRemainingComments(){const{commentStack:e}=this.state;for(let t=e.length-1;t>=0;t--)this.finalizeComment(e[t]);this.state.commentStack=[]}resetPreviousNodeTrailingComments(e){const{commentStack:t}=this.state,{length:r}=t;if(r===0)return;const n=t[r-1];n.leadingNode===e&&(n.leadingNode=null)}takeSurroundingComments(e,t,r){const{commentStack:n}=this.state,i=n.length;if(i===0)return;let a=i-1;for(;a>=0;a--){const o=n[a],u=o.end;if(o.start===r)o.leadingNode=e;else if(u===t)o.trailingNode=e;else if(u<t)break}}}const Hr=Object.freeze({SyntaxError:"BABEL_PARSER_SYNTAX_ERROR",SourceTypeModuleError:"BABEL_PARSER_SOURCETYPE_MODULE_REQUIRED"}),_=Xi({AccessorIsGenerator:"A %0ter cannot be a generator.",ArgumentsInClass:"'arguments' is only allowed in functions and class methods.",AsyncFunctionInSingleStatementContext:"Async functions can only be declared at the top level or inside a block.",AwaitBindingIdentifier:"Can not use 'await' as identifier inside an async function.",AwaitBindingIdentifierInStaticBlock:"Can not use 'await' as identifier inside a static block.",AwaitExpressionFormalParameter:"'await' is not allowed in async function parameters.",AwaitNotInAsyncContext:"'await' is only allowed within async functions and at the top levels of modules.",AwaitNotInAsyncFunction:"'await' is only allowed within async functions.",BadGetterArity:"A 'get' accesor must not have any formal parameters.",BadSetterArity:"A 'set' accesor must have exactly one formal parameter.",BadSetterRestParameter:"A 'set' accesor function argument must not be a rest parameter.",ConstructorClassField:"Classes may not have a field named 'constructor'.",ConstructorClassPrivateField:"Classes may not have a private field named '#constructor'.",ConstructorIsAccessor:"Class constructor may not be an accessor.",ConstructorIsAsync:"Constructor can't be an async function.",ConstructorIsGenerator:"Constructor can't be a generator.",DeclarationMissingInitializer:"'%0' require an initialization value.",DecoratorBeforeExport:"Decorators must be placed *before* the 'export' keyword. You can set the 'decoratorsBeforeExport' option to false to use the 'export @decorator class {}' syntax.",DecoratorConstructor:"Decorators can't be used with a constructor. Did you mean '@dec class { ... }'?",DecoratorExportClass:"Using the export keyword between a decorator and a class is not allowed. Please use `export @dec class` instead.",DecoratorSemicolon:"Decorators must not be followed by a semicolon.",DecoratorStaticBlock:"Decorators can't be used with a static block.",DeletePrivateField:"Deleting a private field is not allowed.",DestructureNamedImport:"ES2015 named imports do not destructure. Use another statement for destructuring after the import.",DuplicateConstructor:"Duplicate constructor in the same class.",DuplicateDefaultExport:"Only one default export allowed per module.",DuplicateExport:"`%0` has already been exported. Exported identifiers must be unique.",DuplicateProto:"Redefinition of __proto__ property.",DuplicateRegExpFlags:"Duplicate regular expression flag.",ElementAfterRest:"Rest element must be last element.",EscapedCharNotAnIdentifier:"Invalid Unicode escape.",ExportBindingIsString:"A string literal cannot be used as an exported binding without `from`.\n- Did you mean `export { '%0' as '%1' } from 'some-module'`?",ExportDefaultFromAsIdentifier:"'from' is not allowed as an identifier after 'export default'.",ForInOfLoopInitializer:"'%0' loop variable declaration may not have an initializer.",ForOfAsync:"The left-hand side of a for-of loop may not be 'async'.",ForOfLet:"The left-hand side of a for-of loop may not start with 'let'.",GeneratorInSingleStatementContext:"Generators can only be declared at the top level or inside a block.",IllegalBreakContinue:"Unsyntactic %0.",IllegalLanguageModeDirective:"Illegal 'use strict' directive in function with non-simple parameter list.",IllegalReturn:"'return' outside of function.",ImportBindingIsString:'A string literal cannot be used as an imported binding.\n- Did you mean `import { "%0" as foo }`?',ImportCallArgumentTrailingComma:"Trailing comma is disallowed inside import(...) arguments.",ImportCallArity:"`import()` requires exactly %0.",ImportCallNotNewExpression:"Cannot use new with import(...).",ImportCallSpreadArgument:"`...` is not allowed in `import()`.",InvalidBigIntLiteral:"Invalid BigIntLiteral.",InvalidCodePoint:"Code point out of bounds.",InvalidDecimal:"Invalid decimal.",InvalidDigit:"Expected number in radix %0.",InvalidEscapeSequence:"Bad character escape sequence.",InvalidEscapeSequenceTemplate:"Invalid escape sequence in template.",InvalidEscapedReservedWord:"Escape sequence in keyword %0.",InvalidIdentifier:"Invalid identifier %0.",InvalidLhs:"Invalid left-hand side in %0.",InvalidLhsBinding:"Binding invalid left-hand side in %0.",InvalidNumber:"Invalid number.",InvalidOrMissingExponent:"Floating-point numbers require a valid exponent after the 'e'.",InvalidOrUnexpectedToken:"Unexpected character '%0'.",InvalidParenthesizedAssignment:"Invalid parenthesized assignment pattern.",InvalidPrivateFieldResolution:"Private name #%0 is not defined.",InvalidPropertyBindingPattern:"Binding member expression.",InvalidRecordProperty:"Only properties and spread elements are allowed in record definitions.",InvalidRestAssignmentPattern:"Invalid rest operator's argument.",LabelRedeclaration:"Label '%0' is already declared.",LetInLexicalBinding:"'let' is not allowed to be used as a name in 'let' or 'const' declarations.",LineTerminatorBeforeArrow:"No line break is allowed before '=>'.",MalformedRegExpFlags:"Invalid regular expression flag.",MissingClassName:"A class name is required.",MissingEqInAssignment:"Only '=' operator can be used for specifying default value.",MissingSemicolon:"Missing semicolon.",MissingUnicodeEscape:"Expecting Unicode escape sequence \\uXXXX.",MixingCoalesceWithLogical:"Nullish coalescing operator(??) requires parens when mixing with logical operators.",ModuleAttributeDifferentFromType:"The only accepted module attribute is `type`.",ModuleAttributeInvalidValue:"Only string literals are allowed as module attribute values.",ModuleAttributesWithDuplicateKeys:'Duplicate key "%0" is not allowed in module attributes.',ModuleExportNameHasLoneSurrogate:"An export name cannot include a lone surrogate, found '\\u%0'.",ModuleExportUndefined:"Export '%0' is not defined.",MultipleDefaultsInSwitch:"Multiple default clauses.",NewlineAfterThrow:"Illegal newline after throw.",NoCatchOrFinally:"Missing catch or finally clause.",NumberIdentifier:"Identifier directly after number.",NumericSeparatorInEscapeSequence:"Numeric separators are not allowed inside unicode escape sequences or hex escape sequences.",ObsoleteAwaitStar:"'await*' has been removed from the async functions proposal. Use Promise.all() instead.",OptionalChainingNoNew:"Constructors in/after an Optional Chain are not allowed.",OptionalChainingNoTemplate:"Tagged Template Literals are not allowed in optionalChain.",OverrideOnConstructor:"'override' modifier cannot appear on a constructor declaration.",ParamDupe:"Argument name clash.",PatternHasAccessor:"Object pattern can't contain getter or setter.",PatternHasMethod:"Object pattern can't contain methods.",PipeBodyIsTighter:"Unexpected %0 after pipeline body; any %0 expression acting as Hack-style pipe body must be parenthesized due to its loose operator precedence.",PipeTopicRequiresHackPipes:'Topic reference is used, but the pipelineOperator plugin was not passed a "proposal": "hack" or "smart" option.',PipeTopicUnbound:"Topic reference is unbound; it must be inside a pipe body.",PipeTopicUnconfiguredToken:'Invalid topic token %0. In order to use %0 as a topic reference, the pipelineOperator plugin must be configured with { "proposal": "hack", "topicToken": "%0" }.',PipeTopicUnused:"Hack-style pipe body does not contain a topic reference; Hack-style pipes must use topic at least once.",PipeUnparenthesizedBody:"Hack-style pipe body cannot be an unparenthesized %0 expression; please wrap it in parentheses.",PipelineBodyNoArrow:'Unexpected arrow "=>" after pipeline body; arrow function in pipeline body must be parenthesized.',PipelineBodySequenceExpression:"Pipeline body may not be a comma-separated sequence expression.",PipelineHeadSequenceExpression:"Pipeline head should not be a comma-separated sequence expression.",PipelineTopicUnused:"Pipeline is in topic style but does not use topic reference.",PrimaryTopicNotAllowed:"Topic reference was used in a lexical context without topic binding.",PrimaryTopicRequiresSmartPipeline:'Topic reference is used, but the pipelineOperator plugin was not passed a "proposal": "hack" or "smart" option.',PrivateInExpectedIn:"Private names are only allowed in property accesses (`obj.#%0`) or in `in` expressions (`#%0 in obj`).",PrivateNameRedeclaration:"Duplicate private name #%0.",RecordExpressionBarIncorrectEndSyntaxType:"Record expressions ending with '|}' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'bar'.",RecordExpressionBarIncorrectStartSyntaxType:"Record expressions starting with '{|' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'bar'.",RecordExpressionHashIncorrectStartSyntaxType:"Record expressions starting with '#{' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'hash'.",RecordNoProto:"'__proto__' is not allowed in Record expressions.",RestTrailingComma:"Unexpected trailing comma after rest element.",SloppyFunction:"In non-strict mode code, functions can only be declared at top level, inside a block, or as the body of an if statement.",StaticPrototype:"Classes may not have static property named prototype.",StrictDelete:"Deleting local variable in strict mode.",StrictEvalArguments:"Assigning to '%0' in strict mode.",StrictEvalArgumentsBinding:"Binding '%0' in strict mode.",StrictFunction:"In strict mode code, functions can only be declared at top level or inside a block.",StrictNumericEscape:"The only valid numeric escape in strict mode is '\\0'.",StrictOctalLiteral:"Legacy octal literals are not allowed in strict mode.",StrictWith:"'with' in strict mode.",SuperNotAllowed:"`super()` is only valid inside a class constructor of a subclass. Maybe a typo in the method name ('constructor') or not extending another class?",SuperPrivateField:"Private fields can't be accessed on super.",TrailingDecorator:"Decorators must be attached to a class element.",TupleExpressionBarIncorrectEndSyntaxType:"Tuple expressions ending with '|]' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'bar'.",TupleExpressionBarIncorrectStartSyntaxType:"Tuple expressions starting with '[|' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'bar'.",TupleExpressionHashIncorrectStartSyntaxType:"Tuple expressions starting with '#[' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'hash'.",UnexpectedArgumentPlaceholder:"Unexpected argument placeholder.",UnexpectedAwaitAfterPipelineBody:'Unexpected "await" after pipeline body; await must have parentheses in minimal proposal.',UnexpectedDigitAfterHash:"Unexpected digit after hash token.",UnexpectedImportExport:"'import' and 'export' may only appear at the top level.",UnexpectedKeyword:"Unexpected keyword '%0'.",UnexpectedLeadingDecorator:"Leading decorators must be attached to a class declaration.",UnexpectedLexicalDeclaration:"Lexical declaration cannot appear in a single-statement context.",UnexpectedNewTarget:"`new.target` can only be used in functions or class properties.",UnexpectedNumericSeparator:"A numeric separator is only allowed between two digits.",UnexpectedPrivateField:`Private names can only be used as the name of a class element (i.e. class C { #p = 42; #m() {} } )
 or a property of member expression (i.e. this.#p).`,UnexpectedReservedWord:"Unexpected reserved word '%0'.",UnexpectedSuper:"'super' is only allowed in object methods and classes.",UnexpectedToken:"Unexpected token '%0'.",UnexpectedTokenUnaryExponentiation:"Illegal expression. Wrap left hand side or entire exponentiation in parentheses.",UnsupportedBind:"Binding should be performed on object property.",UnsupportedDecoratorExport:"A decorated export must export a class declaration.",UnsupportedDefaultExport:"Only expressions, functions or classes are allowed as the `default` export.",UnsupportedImport:"`import` can only be used in `import()` or `import.meta`.",UnsupportedMetaProperty:"The only valid meta property for %0 is %0.%1.",UnsupportedParameterDecorator:"Decorators cannot be used to decorate parameters.",UnsupportedPropertyDecorator:"Decorators cannot be used to decorate object literal properties.",UnsupportedSuper:"'super' can only be used with function calls (i.e. super()) or in property accesses (i.e. super.prop or super[prop]).",UnterminatedComment:"Unterminated comment.",UnterminatedRegExp:"Unterminated regular expression.",UnterminatedString:"Unterminated string constant.",UnterminatedTemplate:"Unterminated template.",VarRedeclaration:"Identifier '%0' has already been declared.",YieldBindingIdentifier:"Can not use 'yield' as identifier inside a generator.",YieldInParameter:"Yield expression is not allowed in formal parameters.",ZeroDigitNumericSeparator:"Numeric separator can not be used after leading 0."},Hr.SyntaxError),vS=Xi({ImportMetaOutsideModule:`import.meta may appear only with 'sourceType: "module"'`,ImportOutsideModule:`'import' and 'export' may appear only with 'sourceType: "module"'`},Hr.SourceTypeModuleError);function tR(s,e){return e==="flow"&&s==="PatternIsOptional"?"OptionalBindingPattern":s}function Xi(s,e,t){const r={};return Object.keys(s).forEach(n=>{r[n]=Object.freeze({code:e,reasonCode:tR(n,t),template:s[n]})}),Object.freeze(r)}class rR extends eR{getLocationForPosition(e){let t;return e===this.state.start?t=this.state.startLoc:e===this.state.lastTokStart?t=this.state.lastTokStartLoc:e===this.state.end?t=this.state.endLoc:e===this.state.lastTokEnd?t=this.state.lastTokEndLoc:t=JD(this.input,e),t}raise(e,{code:t,reasonCode:r,template:n},...i){return this.raiseWithData(e,{code:t,reasonCode:r},n,...i)}raiseOverwrite(e,{code:t,template:r},...n){const i=this.getLocationForPosition(e),a=r.replace(/%(\d+)/g,(o,u)=>n[u])+` (${i.line}:${i.column})`;if(this.options.errorRecovery){const o=this.state.errors;for(let u=o.length-1;u>=0;u--){const c=o[u];if(c.pos===e)return Object.assign(c,{message:a});if(c.pos<e)break}}return this._raise({code:t,loc:i,pos:e},a)}raiseWithData(e,t,r,...n){const i=this.getLocationForPosition(e),a=r.replace(/%(\d+)/g,(o,u)=>n[u])+` (${i.line}:${i.column})`;return this._raise(Object.assign({loc:i,pos:e},t),a)}_raise(e,t){const r=new SyntaxError(t);if(Object.assign(r,e),this.options.errorRecovery)return this.isLookahead||this.state.errors.push(r),r;throw r}}var sR=s=>class extends s{parseRegExpLiteral({pattern:e,flags:t}){let r=null;try{r=new RegExp(e,t)}catch{}const n=this.estreeParseLiteral(r);return n.regex={pattern:e,flags:t},n}parseBigIntLiteral(e){let t;try{t=BigInt(e)}catch{t=null}const r=this.estreeParseLiteral(t);return r.bigint=String(r.value||e),r}parseDecimalLiteral(e){const r=this.estreeParseLiteral(null);return r.decimal=String(r.value||e),r}estreeParseLiteral(e){return this.parseLiteral(e,"Literal")}parseStringLiteral(e){return this.estreeParseLiteral(e)}parseNumericLiteral(e){return this.estreeParseLiteral(e)}parseNullLiteral(){return this.estreeParseLiteral(null)}parseBooleanLiteral(e){return this.estreeParseLiteral(e)}directiveToStmt(e){const t=e.value,r=this.startNodeAt(e.start,e.loc.start),n=this.startNodeAt(t.start,t.loc.start);return n.value=t.extra.expressionValue,n.raw=t.extra.raw,r.expression=this.finishNodeAt(n,"Literal",t.end,t.loc.end),r.directive=t.extra.raw.slice(1,-1),this.finishNodeAt(r,"ExpressionStatement",e.end,e.loc.end)}initFunction(e,t){super.initFunction(e,t),e.expression=!1}checkDeclaration(e){e!=null&&this.isObjectProperty(e)?this.checkDeclaration(e.value):super.checkDeclaration(e)}getObjectOrClassMethodParams(e){return e.value.params}isValidDirective(e){var t;return e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&!((t=e.expression.extra)!=null&&t.parenthesized)}parseBlockBody(e,...t){super.parseBlockBody(e,...t);const r=e.directives.map(n=>this.directiveToStmt(n));e.body=r.concat(e.body),delete e.directives}pushClassMethod(e,t,r,n,i,a){this.parseMethod(t,r,n,i,a,"ClassMethod",!0),t.typeParameters&&(t.value.typeParameters=t.typeParameters,delete t.typeParameters),e.body.push(t)}parsePrivateName(){const e=super.parsePrivateName();return this.getPluginOption("estree","classFeatures")?this.convertPrivateNameToPrivateIdentifier(e):e}convertPrivateNameToPrivateIdentifier(e){const t=super.getPrivateNameSV(e);return e=e,delete e.id,e.name=t,e.type="PrivateIdentifier",e}isPrivateName(e){return this.getPluginOption("estree","classFeatures")?e.type==="PrivateIdentifier":super.isPrivateName(e)}getPrivateNameSV(e){return this.getPluginOption("estree","classFeatures")?e.name:super.getPrivateNameSV(e)}parseLiteral(e,t){const r=super.parseLiteral(e,t);return r.raw=r.extra.raw,delete r.extra,r}parseFunctionBody(e,t,r=!1){super.parseFunctionBody(e,t,r),e.expression=e.body.type!=="BlockStatement"}parseMethod(e,t,r,n,i,a,o=!1){let u=this.startNode();return u.kind=e.kind,u=super.parseMethod(u,t,r,n,i,a,o),u.type="FunctionExpression",delete u.kind,e.value=u,a==="ClassPrivateMethod"&&(e.computed=!1),a="MethodDefinition",this.finishNode(e,a)}parseClassProperty(...e){const t=super.parseClassProperty(...e);return this.getPluginOption("estree","classFeatures")&&(t.type="PropertyDefinition"),t}parseClassPrivateProperty(...e){const t=super.parseClassPrivateProperty(...e);return this.getPluginOption("estree","classFeatures")&&(t.type="PropertyDefinition",t.computed=!1),t}parseObjectMethod(e,t,r,n,i){const a=super.parseObjectMethod(e,t,r,n,i);return a&&(a.type="Property",a.kind==="method"&&(a.kind="init"),a.shorthand=!1),a}parseObjectProperty(e,t,r,n,i){const a=super.parseObjectProperty(e,t,r,n,i);return a&&(a.kind="init",a.type="Property"),a}isAssignable(e,t){return e!=null&&this.isObjectProperty(e)?this.isAssignable(e.value,t):super.isAssignable(e,t)}toAssignable(e,t=!1){return e!=null&&this.isObjectProperty(e)?(this.toAssignable(e.value,t),e):super.toAssignable(e,t)}toAssignableObjectExpressionProp(e,...t){e.kind==="get"||e.kind==="set"?this.raise(e.key.start,_.PatternHasAccessor):e.method?this.raise(e.key.start,_.PatternHasMethod):super.toAssignableObjectExpressionProp(e,...t)}finishCallExpression(e,t){if(super.finishCallExpression(e,t),e.callee.type==="Import"){if(e.type="ImportExpression",e.source=e.arguments[0],this.hasPlugin("importAssertions")){var r;e.attributes=(r=e.arguments[1])!=null?r:null}delete e.arguments,delete e.callee}return e}toReferencedArguments(e){e.type!=="ImportExpression"&&super.toReferencedArguments(e)}parseExport(e){switch(super.parseExport(e),e.type){case"ExportAllDeclaration":e.exported=null;break;case"ExportNamedDeclaration":e.specifiers.length===1&&e.specifiers[0].type==="ExportNamespaceSpecifier"&&(e.type="ExportAllDeclaration",e.exported=e.specifiers[0].exported,delete e.specifiers);break}return e}parseSubscript(e,t,r,n,i){const a=super.parseSubscript(e,t,r,n,i);if(i.optionalChainMember){if((a.type==="OptionalMemberExpression"||a.type==="OptionalCallExpression")&&(a.type=a.type.substring(8)),i.stop){const o=this.startNodeAtNode(a);return o.expression=a,this.finishNode(o,"ChainExpression")}}else(a.type==="MemberExpression"||a.type==="CallExpression")&&(a.optional=!1);return a}hasPropertyAsPrivateName(e){return e.type==="ChainExpression"&&(e=e.expression),super.hasPropertyAsPrivateName(e)}isOptionalChain(e){return e.type==="ChainExpression"}isObjectProperty(e){return e.type==="Property"&&e.kind==="init"&&!e.method}isObjectMethod(e){return e.method||e.kind==="get"||e.kind==="set"}};class Io{constructor(e,t){this.token=void 0,this.preserveSpace=void 0,this.token=e,this.preserveSpace=!!t}}const Pe={brace:new Io("{"),template:new Io("`",!0)},pe=!0,$=!0,Ph=!0,ma=!0,ms=!0,nR=!0;class wS{constructor(e,t={}){this.label=void 0,this.keyword=void 0,this.beforeExpr=void 0,this.startsExpr=void 0,this.rightAssociative=void 0,this.isLoop=void 0,this.isAssign=void 0,this.prefix=void 0,this.postfix=void 0,this.binop=void 0,this.label=e,this.keyword=t.keyword,this.beforeExpr=!!t.beforeExpr,this.startsExpr=!!t.startsExpr,this.rightAssociative=!!t.rightAssociative,this.isLoop=!!t.isLoop,this.isAssign=!!t.isAssign,this.prefix=!!t.prefix,this.postfix=!!t.postfix,this.binop=t.binop!=null?t.binop:null,this.updateContext=null}}const nm=new Map;function ge(s,e={}){e.keyword=s;const t=X(s,e);return nm.set(s,t),t}function Bt(s,e){return X(s,{beforeExpr:pe,binop:e})}let Va=-1;const Ur=[],im=[],am=[],om=[],um=[],cm=[];function X(s,e={}){var t,r,n,i;return++Va,im.push(s),am.push((t=e.binop)!=null?t:-1),om.push((r=e.beforeExpr)!=null?r:!1),um.push((n=e.startsExpr)!=null?n:!1),cm.push((i=e.prefix)!=null?i:!1),Ur.push(new wS(s,e)),Va}function ye(s,e={}){var t,r,n,i;return++Va,nm.set(s,Va),im.push(s),am.push((t=e.binop)!=null?t:-1),om.push((r=e.beforeExpr)!=null?r:!1),um.push((n=e.startsExpr)!=null?n:!1),cm.push((i=e.prefix)!=null?i:!1),Ur.push(new wS("name",e)),Va}const iR={bracketL:X("[",{beforeExpr:pe,startsExpr:$}),bracketHashL:X("#[",{beforeExpr:pe,startsExpr:$}),bracketBarL:X("[|",{beforeExpr:pe,startsExpr:$}),bracketR:X("]"),bracketBarR:X("|]"),braceL:X("{",{beforeExpr:pe,startsExpr:$}),braceBarL:X("{|",{beforeExpr:pe,startsExpr:$}),braceHashL:X("#{",{beforeExpr:pe,startsExpr:$}),braceR:X("}",{beforeExpr:pe}),braceBarR:X("|}"),parenL:X("(",{beforeExpr:pe,startsExpr:$}),parenR:X(")"),comma:X(",",{beforeExpr:pe}),semi:X(";",{beforeExpr:pe}),colon:X(":",{beforeExpr:pe}),doubleColon:X("::",{beforeExpr:pe}),dot:X("."),question:X("?",{beforeExpr:pe}),questionDot:X("?."),arrow:X("=>",{beforeExpr:pe}),template:X("template"),ellipsis:X("...",{beforeExpr:pe}),backQuote:X("`",{startsExpr:$}),dollarBraceL:X("${",{beforeExpr:pe,startsExpr:$}),at:X("@"),hash:X("#",{startsExpr:$}),interpreterDirective:X("#!..."),eq:X("=",{beforeExpr:pe,isAssign:ma}),assign:X("_=",{beforeExpr:pe,isAssign:ma}),slashAssign:X("_=",{beforeExpr:pe,isAssign:ma}),xorAssign:X("_=",{beforeExpr:pe,isAssign:ma}),moduloAssign:X("_=",{beforeExpr:pe,isAssign:ma}),incDec:X("++/--",{prefix:ms,postfix:nR,startsExpr:$}),bang:X("!",{beforeExpr:pe,prefix:ms,startsExpr:$}),tilde:X("~",{beforeExpr:pe,prefix:ms,startsExpr:$}),pipeline:Bt("|>",0),nullishCoalescing:Bt("??",1),logicalOR:Bt("||",1),logicalAND:Bt("&&",2),bitwiseOR:Bt("|",3),bitwiseXOR:Bt("^",4),bitwiseAND:Bt("&",5),equality:Bt("==/!=/===/!==",6),lt:Bt("</>/<=/>=",7),gt:Bt("</>/<=/>=",7),relational:Bt("</>/<=/>=",7),bitShift:Bt("<</>>/>>>",8),plusMin:X("+/-",{beforeExpr:pe,binop:9,prefix:ms,startsExpr:$}),modulo:X("%",{binop:10,startsExpr:$}),star:X("*",{binop:10}),slash:Bt("/",10),exponent:X("**",{beforeExpr:pe,binop:11,rightAssociative:!0}),_in:ge("in",{beforeExpr:pe,binop:7}),_instanceof:ge("instanceof",{beforeExpr:pe,binop:7}),_break:ge("break"),_case:ge("case",{beforeExpr:pe}),_catch:ge("catch"),_continue:ge("continue"),_debugger:ge("debugger"),_default:ge("default",{beforeExpr:pe}),_else:ge("else",{beforeExpr:pe}),_finally:ge("finally"),_function:ge("function",{startsExpr:$}),_if:ge("if"),_return:ge("return",{beforeExpr:pe}),_switch:ge("switch"),_throw:ge("throw",{beforeExpr:pe,prefix:ms,startsExpr:$}),_try:ge("try"),_var:ge("var"),_const:ge("const"),_with:ge("with"),_new:ge("new",{beforeExpr:pe,startsExpr:$}),_this:ge("this",{startsExpr:$}),_super:ge("super",{startsExpr:$}),_class:ge("class",{startsExpr:$}),_extends:ge("extends",{beforeExpr:pe}),_export:ge("export"),_import:ge("import",{startsExpr:$}),_null:ge("null",{startsExpr:$}),_true:ge("true",{startsExpr:$}),_false:ge("false",{startsExpr:$}),_typeof:ge("typeof",{beforeExpr:pe,prefix:ms,startsExpr:$}),_void:ge("void",{beforeExpr:pe,prefix:ms,startsExpr:$}),_delete:ge("delete",{beforeExpr:pe,prefix:ms,startsExpr:$}),_do:ge("do",{isLoop:Ph,beforeExpr:pe}),_for:ge("for",{isLoop:Ph}),_while:ge("while",{isLoop:Ph}),_as:ye("as",{startsExpr:$}),_assert:ye("assert",{startsExpr:$}),_async:ye("async",{startsExpr:$}),_await:ye("await",{startsExpr:$}),_from:ye("from",{startsExpr:$}),_get:ye("get",{startsExpr:$}),_let:ye("let",{startsExpr:$}),_meta:ye("meta",{startsExpr:$}),_of:ye("of",{startsExpr:$}),_sent:ye("sent",{startsExpr:$}),_set:ye("set",{startsExpr:$}),_static:ye("static",{startsExpr:$}),_yield:ye("yield",{startsExpr:$}),_asserts:ye("asserts",{startsExpr:$}),_checks:ye("checks",{startsExpr:$}),_exports:ye("exports",{startsExpr:$}),_global:ye("global",{startsExpr:$}),_implements:ye("implements",{startsExpr:$}),_intrinsic:ye("intrinsic",{startsExpr:$}),_infer:ye("infer",{startsExpr:$}),_is:ye("is",{startsExpr:$}),_mixins:ye("mixins",{startsExpr:$}),_proto:ye("proto",{startsExpr:$}),_require:ye("require",{startsExpr:$}),_keyof:ye("keyof",{startsExpr:$}),_readonly:ye("readonly",{startsExpr:$}),_unique:ye("unique",{startsExpr:$}),_abstract:ye("abstract",{startsExpr:$}),_declare:ye("declare",{startsExpr:$}),_enum:ye("enum",{startsExpr:$}),_module:ye("module",{startsExpr:$}),_namespace:ye("namespace",{startsExpr:$}),_interface:ye("interface",{startsExpr:$}),_type:ye("type",{startsExpr:$}),_opaque:ye("opaque",{startsExpr:$}),name:X("name",{startsExpr:$}),string:X("string",{startsExpr:$}),num:X("num",{startsExpr:$}),bigint:X("bigint",{startsExpr:$}),decimal:X("decimal",{startsExpr:$}),regexp:X("regexp",{startsExpr:$}),privateName:X("#name",{startsExpr:$}),eof:X("eof"),jsxName:X("jsxName"),jsxText:X("jsxText",{beforeExpr:!0}),jsxTagStart:X("jsxTagStart",{startsExpr:!0}),jsxTagEnd:X("jsxTagEnd"),placeholder:X("%%",{startsExpr:!0})};function we(s){return s>=87&&s<=122}function aR(s){return s<=86}function Qr(s){return s>=52&&s<=122}function TS(s){return s>=52&&s<=126}function oR(s){return om[s]}function qy(s){return um[s]}function uR(s){return s>=27&&s<=31}function $y(s){return s>=119&&s<=121}function cR(s){return s>=84&&s<=86}function lm(s){return s>=52&&s<=86}function lR(s){return s>=35&&s<=53}function hR(s){return s===32}function fR(s){return cm[s]}function dR(s){return s>=111&&s<=113}function pR(s){return s>=114&&s<=120}function Rs(s){return im[s]}function Ku(s){return am[s]}function mR(s){return s===51}function Hu(s){return Ur[s]}function gR(s){return typeof s=="number"}Ur[8].updateContext=s=>{s.pop()},Ur[5].updateContext=Ur[7].updateContext=Ur[23].updateContext=s=>{s.push(Pe.brace)},Ur[22].updateContext=s=>{s[s.length-1]===Pe.template?s.pop():s.push(Pe.template)},Ur[132].updateContext=s=>{s.push(Pe.j_expr,Pe.j_oTag)};let hm="\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC",bS="\u200C\u200D\xB7\u0300-\u036F\u0387\u0483-\u0487\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u0669\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u06F0-\u06F9\u0711\u0730-\u074A\u07A6-\u07B0\u07C0-\u07C9\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0966-\u096F\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09E6-\u09EF\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A66-\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AE6-\u0AEF\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B66-\u0B6F\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0BE6-\u0BEF\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CE6-\u0CEF\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D66-\u0D6F\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0E50-\u0E59\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0ED0-\u0ED9\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1040-\u1049\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F-\u109D\u135D-\u135F\u1369-\u1371\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u17E0-\u17E9\u180B-\u180D\u180F-\u1819\u18A9\u1920-\u192B\u1930-\u193B\u1946-\u194F\u19D0-\u19DA\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AB0-\u1ABD\u1ABF-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BB0-\u1BB9\u1BE6-\u1BF3\u1C24-\u1C37\u1C40-\u1C49\u1C50-\u1C59\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u203F\u2040\u2054\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA620-\uA629\uA66F\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F1\uA8FF-\uA909\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9D0-\uA9D9\uA9E5\uA9F0-\uA9F9\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA50-\uAA59\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uABF0-\uABF9\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFF10-\uFF19\uFF3F";const yR=new RegExp("["+hm+"]"),vR=new RegExp("["+hm+bS+"]");hm=bS=null;const SS=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,190,0,80,921,103,110,18,195,2637,96,16,1070,4050,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,46,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,482,44,11,6,17,0,322,29,19,43,1269,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4152,8,221,3,5761,15,7472,3104,541,1507,4938],wR=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,154,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,357,0,62,13,1495,6,110,6,6,9,4759,9,787719,239];function Df(s,e){let t=65536;for(let r=0,n=e.length;r<n;r+=2){if(t+=e[r],t>s)return!1;if(t+=e[r+1],t>=s)return!0}return!1}function bs(s){return s<65?s===36:s<=90?!0:s<97?s===95:s<=122?!0:s<=65535?s>=170&&yR.test(String.fromCharCode(s)):Df(s,SS)}function ci(s){return s<48?s===36:s<58?!0:s<65?!1:s<=90?!0:s<97?s===95:s<=122?!0:s<=65535?s>=170&&vR.test(String.fromCharCode(s)):Df(s,SS)||Df(s,wR)}const fm={keyword:["break","case","catch","continue","debugger","default","do","else","finally","for","function","if","return","switch","throw","try","var","const","while","with","new","this","super","class","extends","export","import","null","true","false","in","instanceof","typeof","void","delete"],strict:["implements","interface","let","package","private","protected","public","static","yield"],strictBind:["eval","arguments"]},TR=new Set(fm.keyword),bR=new Set(fm.strict),SR=new Set(fm.strictBind);function ES(s,e){return e&&s==="await"||s==="enum"}function IS(s,e){return ES(s,e)||bR.has(s)}function _S(s){return SR.has(s)}function xS(s,e){return IS(s,e)||_S(s)}function ER(s){return TR.has(s)}function IR(s,e){return s===64&&e===64}const _R=new Set(["break","case","catch","continue","debugger","default","do","else","finally","for","function","if","return","switch","throw","try","var","const","while","with","new","this","super","class","extends","export","import","null","true","false","in","instanceof","typeof","void","delete","implements","interface","let","package","private","protected","public","static","yield","eval","arguments","enum","await"]);function xR(s){return _R.has(s)}const Zn=0,qa=1,$r=2,dm=4,AS=8,Fc=16,PS=32,ln=64,CS=128,Qu=256,Iu=qa|$r|Qu,es=1,Oi=2,kS=4,li=8,Yu=16,NS=64,Uc=128,Rf=256,Mf=512,pm=1024,Lf=2048,OS=es|Oi|li|Uc,Yt=es|0|li|0,Bc=es|0|kS|0,DS=es|0|Yu|0,AR=0|Oi|0|Uc,PR=0|Oi|0|0,RS=es|Oi|li|Rf,jy=0|pm,ga=0|NS,CR=es|0|0|NS,kR=RS|Mf,NR=0|pm,OR=Lf,Vc=4,mm=2,gm=1,Ch=mm|gm,DR=mm|Vc,RR=gm|Vc,MR=mm,LR=gm,Gy=0;class ym{constructor(e){this.var=new Set,this.lexical=new Set,this.functions=new Set,this.flags=e}}class vm{constructor(e,t){this.scopeStack=[],this.undefinedExports=new Map,this.undefinedPrivateNames=new Map,this.raise=e,this.inModule=t}get inFunction(){return(this.currentVarScopeFlags()&$r)>0}get allowSuper(){return(this.currentThisScopeFlags()&Fc)>0}get allowDirectSuper(){return(this.currentThisScopeFlags()&PS)>0}get inClass(){return(this.currentThisScopeFlags()&ln)>0}get inClassAndNotInNonArrowFunction(){const e=this.currentThisScopeFlags();return(e&ln)>0&&(e&$r)===0}get inStaticBlock(){for(let e=this.scopeStack.length-1;;e--){const{flags:t}=this.scopeStack[e];if(t&CS)return!0;if(t&(Iu|ln))return!1}}get inNonArrowFunction(){return(this.currentThisScopeFlags()&$r)>0}get treatFunctionsAsVar(){return this.treatFunctionsAsVarInScope(this.currentScope())}createScope(e){return new ym(e)}enter(e){this.scopeStack.push(this.createScope(e))}exit(){this.scopeStack.pop()}treatFunctionsAsVarInScope(e){return!!(e.flags&$r||!this.inModule&&e.flags&qa)}declareName(e,t,r){let n=this.currentScope();if(t&li||t&Yu)this.checkRedeclarationInScope(n,e,t,r),t&Yu?n.functions.add(e):n.lexical.add(e),t&li&&this.maybeExportDefined(n,e);else if(t&kS)for(let i=this.scopeStack.length-1;i>=0&&(n=this.scopeStack[i],this.checkRedeclarationInScope(n,e,t,r),n.var.add(e),this.maybeExportDefined(n,e),!(n.flags&Iu));--i);this.inModule&&n.flags&qa&&this.undefinedExports.delete(e)}maybeExportDefined(e,t){this.inModule&&e.flags&qa&&this.undefinedExports.delete(t)}checkRedeclarationInScope(e,t,r,n){this.isRedeclaredInScope(e,t,r)&&this.raise(n,_.VarRedeclaration,t)}isRedeclaredInScope(e,t,r){return r&es?r&li?e.lexical.has(t)||e.functions.has(t)||e.var.has(t):r&Yu?e.lexical.has(t)||!this.treatFunctionsAsVarInScope(e)&&e.var.has(t):e.lexical.has(t)&&!(e.flags&AS&&e.lexical.values().next().value===t)||!this.treatFunctionsAsVarInScope(e)&&e.functions.has(t):!1}checkLocalExport(e){const{name:t}=e,r=this.scopeStack[0];!r.lexical.has(t)&&!r.var.has(t)&&!r.functions.has(t)&&this.undefinedExports.set(t,e.start)}currentScope(){return this.scopeStack[this.scopeStack.length-1]}currentVarScopeFlags(){for(let e=this.scopeStack.length-1;;e--){const{flags:t}=this.scopeStack[e];if(t&Iu)return t}}currentThisScopeFlags(){for(let e=this.scopeStack.length-1;;e--){const{flags:t}=this.scopeStack[e];if(t&(Iu|ln)&&!(t&dm))return t}}}class FR extends ym{constructor(...e){super(...e),this.declareFunctions=new Set}}class UR extends vm{createScope(e){return new FR(e)}declareName(e,t,r){const n=this.currentScope();if(t&Lf){this.checkRedeclarationInScope(n,e,t,r),this.maybeExportDefined(n,e),n.declareFunctions.add(e);return}super.declareName(...arguments)}isRedeclaredInScope(e,t,r){return super.isRedeclaredInScope(...arguments)?!0:r&Lf?!e.declareFunctions.has(t)&&(e.lexical.has(t)||e.functions.has(t)):!1}checkLocalExport(e){this.scopeStack[0].declareFunctions.has(e.name)||super.checkLocalExport(e)}}class wm{constructor(){this.strict=void 0,this.curLine=void 0,this.lineStart=void 0,this.startLoc=void 0,this.endLoc=void 0,this.errors=[],this.potentialArrowAt=-1,this.noArrowAt=[],this.noArrowParamsConversionAt=[],this.maybeInArrowParameters=!1,this.inType=!1,this.noAnonFunctionType=!1,this.hasFlowComment=!1,this.isAmbientContext=!1,this.inAbstractClass=!1,this.topicContext={maxNumOfResolvableTopics:0,maxTopicIndex:null},this.soloAwait=!1,this.inFSharpPipelineDirectBody=!1,this.labels=[],this.decoratorStack=[[]],this.comments=[],this.commentStack=[],this.pos=0,this.type=129,this.value=null,this.start=0,this.end=0,this.lastTokEndLoc=null,this.lastTokStartLoc=null,this.lastTokStart=0,this.lastTokEnd=0,this.context=[Pe.brace],this.canStartJSXElement=!0,this.containsEsc=!1,this.strictErrors=new Map,this.tokensLength=0}init({strictMode:e,sourceType:t,startLine:r,startColumn:n}){this.strict=e===!1?!1:e===!0?!0:t==="module",this.curLine=r,this.lineStart=-n,this.startLoc=this.endLoc=new So(r,n)}curPosition(){return new So(this.curLine,this.pos-this.lineStart)}clone(e){const t=new wm,r=Object.keys(this);for(let n=0,i=r.length;n<i;n++){const a=r[n];let o=this[a];!e&&Array.isArray(o)&&(o=o.slice()),t[a]=o}return t}}var BR=function(e){return e>=48&&e<=57};const VR=new Set([103,109,115,105,121,117,100]),zy={decBinOct:[46,66,69,79,95,98,101,111],hex:[46,88,95,120]},ar={};ar.bin=[48,49];ar.oct=[...ar.bin,50,51,52,53,54,55];ar.dec=[...ar.oct,56,57];ar.hex=[...ar.dec,65,66,67,68,69,70,97,98,99,100,101,102];class Ff{constructor(e){this.type=e.type,this.value=e.value,this.start=e.start,this.end=e.end,this.loc=new Lc(e.startLoc,e.endLoc)}}class qR extends rR{constructor(e,t){super(),this.isLookahead=void 0,this.tokens=[],this.state=new wm,this.state.init(e),this.input=t,this.length=t.length,this.isLookahead=!1}pushToken(e){this.tokens.length=this.state.tokensLength,this.tokens.push(e),++this.state.tokensLength}next(){this.checkKeywordEscapes(),this.options.tokens&&this.pushToken(new Ff(this.state)),this.state.lastTokEnd=this.state.end,this.state.lastTokStart=this.state.start,this.state.lastTokEndLoc=this.state.endLoc,this.state.lastTokStartLoc=this.state.startLoc,this.nextToken()}eat(e){return this.match(e)?(this.next(),!0):!1}match(e){return this.state.type===e}createLookaheadState(e){return{pos:e.pos,value:null,type:e.type,start:e.start,end:e.end,lastTokEnd:e.end,context:[this.curContext()],inType:e.inType}}lookahead(){const e=this.state;this.state=this.createLookaheadState(e),this.isLookahead=!0,this.nextToken(),this.isLookahead=!1;const t=this.state;return this.state=e,t}nextTokenStart(){return this.nextTokenStartSince(this.state.pos)}nextTokenStartSince(e){return Ah.lastIndex=e,Ah.test(this.input)?Ah.lastIndex:e}lookaheadCharCode(){return this.input.charCodeAt(this.nextTokenStart())}codePointAtPos(e){let t=this.input.charCodeAt(e);if((t&64512)===55296&&++e<this.input.length){const r=this.input.charCodeAt(e);(r&64512)===56320&&(t=65536+((t&1023)<<10)+(r&1023))}return t}setStrict(e){this.state.strict=e,e&&(this.state.strictErrors.forEach((t,r)=>this.raise(r,t)),this.state.strictErrors.clear())}curContext(){return this.state.context[this.state.context.length-1]}nextToken(){const e=this.curContext();if(e.preserveSpace||this.skipSpace(),this.state.start=this.state.pos,this.isLookahead||(this.state.startLoc=this.state.curPosition()),this.state.pos>=this.length){this.finishToken(129);return}e===Pe.template?this.readTmplToken():this.getTokenFromCode(this.codePointAtPos(this.state.pos))}skipBlockComment(){let e;this.isLookahead||(e=this.state.curPosition());const t=this.state.pos,r=this.input.indexOf("*/",t+2);if(r===-1)throw this.raise(t,_.UnterminatedComment);for(this.state.pos=r+2,cn.lastIndex=t+2;cn.test(this.input)&&cn.lastIndex<=r;)++this.state.curLine,this.state.lineStart=cn.lastIndex;if(this.isLookahead)return;const n={type:"CommentBlock",value:this.input.slice(t+2,r),start:t,end:r+2,loc:new Lc(e,this.state.curPosition())};return this.options.tokens&&this.pushToken(n),n}skipLineComment(e){const t=this.state.pos;let r;this.isLookahead||(r=this.state.curPosition());let n=this.input.charCodeAt(this.state.pos+=e);if(this.state.pos<this.length)for(;!tn(n)&&++this.state.pos<this.length;)n=this.input.charCodeAt(this.state.pos);if(this.isLookahead)return;const i=this.state.pos,a=this.input.slice(t+e,i),o={type:"CommentLine",value:a,start:t,end:i,loc:new Lc(r,this.state.curPosition())};return this.options.tokens&&this.pushToken(o),o}skipSpace(){const e=this.state.pos,t=[];e:for(;this.state.pos<this.length;){const r=this.input.charCodeAt(this.state.pos);switch(r){case 32:case 160:case 9:++this.state.pos;break;case 13:this.input.charCodeAt(this.state.pos+1)===10&&++this.state.pos;case 10:case 8232:case 8233:++this.state.pos,++this.state.curLine,this.state.lineStart=this.state.pos;break;case 47:switch(this.input.charCodeAt(this.state.pos+1)){case 42:{const n=this.skipBlockComment();n!==void 0&&(this.addComment(n),this.options.attachComment&&t.push(n));break}case 47:{const n=this.skipLineComment(2);n!==void 0&&(this.addComment(n),this.options.attachComment&&t.push(n));break}default:break e}break;default:if(YD(r))++this.state.pos;else if(r===45&&!this.inModule){const n=this.state.pos;if(this.input.charCodeAt(n+1)===45&&this.input.charCodeAt(n+2)===62&&(e===0||this.state.lineStart>e)){const i=this.skipLineComment(3);i!==void 0&&(this.addComment(i),this.options.attachComment&&t.push(i))}else break e}else if(r===60&&!this.inModule){const n=this.state.pos;if(this.input.charCodeAt(n+1)===33&&this.input.charCodeAt(n+2)===45&&this.input.charCodeAt(n+3)===45){const i=this.skipLineComment(4);i!==void 0&&(this.addComment(i),this.options.attachComment&&t.push(i))}else break e}else break e}}if(t.length>0){const r=this.state.pos,n={start:e,end:r,comments:t,leadingNode:null,trailingNode:null,containingNode:null};this.state.commentStack.push(n)}}finishToken(e,t){this.state.end=this.state.pos;const r=this.state.type;this.state.type=e,this.state.value=t,this.isLookahead||(this.state.endLoc=this.state.curPosition(),this.updateContext(r))}replaceToken(e){this.state.type=e,this.updateContext()}readToken_numberSign(){if(this.state.pos===0&&this.readToken_interpreter())return;const e=this.state.pos+1,t=this.codePointAtPos(e);if(t>=48&&t<=57)throw this.raise(this.state.pos,_.UnexpectedDigitAfterHash);if(t===123||t===91&&this.hasPlugin("recordAndTuple")){if(this.expectPlugin("recordAndTuple"),this.getPluginOption("recordAndTuple","syntaxType")!=="hash")throw this.raise(this.state.pos,t===123?_.RecordExpressionHashIncorrectStartSyntaxType:_.TupleExpressionHashIncorrectStartSyntaxType);this.state.pos+=2,t===123?this.finishToken(7):this.finishToken(1)}else bs(t)?(++this.state.pos,this.finishToken(128,this.readWord1(t))):t===92?(++this.state.pos,this.finishToken(128,this.readWord1())):this.finishOp(25,1)}readToken_dot(){const e=this.input.charCodeAt(this.state.pos+1);if(e>=48&&e<=57){this.readNumber(!0);return}e===46&&this.input.charCodeAt(this.state.pos+2)===46?(this.state.pos+=3,this.finishToken(21)):(++this.state.pos,this.finishToken(16))}readToken_slash(){this.input.charCodeAt(this.state.pos+1)===61?this.finishOp(29,2):this.finishOp(50,1)}readToken_interpreter(){if(this.state.pos!==0||this.length<2)return!1;let e=this.input.charCodeAt(this.state.pos+1);if(e!==33)return!1;const t=this.state.pos;for(this.state.pos+=1;!tn(e)&&++this.state.pos<this.length;)e=this.input.charCodeAt(this.state.pos);const r=this.input.slice(t+2,this.state.pos);return this.finishToken(26,r),!0}readToken_mult_modulo(e){let t=e===42?49:48,r=1,n=this.input.charCodeAt(this.state.pos+1);e===42&&n===42&&(r++,n=this.input.charCodeAt(this.state.pos+2),t=51),n===61&&!this.state.inType&&(r++,t=e===37?31:28),this.finishOp(t,r)}readToken_pipe_amp(e){const t=this.input.charCodeAt(this.state.pos+1);if(t===e){this.input.charCodeAt(this.state.pos+2)===61?this.finishOp(28,3):this.finishOp(e===124?37:38,2);return}if(e===124){if(t===62){this.finishOp(35,2);return}if(this.hasPlugin("recordAndTuple")&&t===125){if(this.getPluginOption("recordAndTuple","syntaxType")!=="bar")throw this.raise(this.state.pos,_.RecordExpressionBarIncorrectEndSyntaxType);this.state.pos+=2,this.finishToken(9);return}if(this.hasPlugin("recordAndTuple")&&t===93){if(this.getPluginOption("recordAndTuple","syntaxType")!=="bar")throw this.raise(this.state.pos,_.TupleExpressionBarIncorrectEndSyntaxType);this.state.pos+=2,this.finishToken(4);return}}if(t===61){this.finishOp(28,2);return}this.finishOp(e===124?39:41,1)}readToken_caret(){this.input.charCodeAt(this.state.pos+1)===61&&!this.state.inType?this.finishOp(30,2):this.finishOp(40,1)}readToken_plus_min(e){const t=this.input.charCodeAt(this.state.pos+1);if(t===e){this.finishOp(32,2);return}t===61?this.finishOp(28,2):this.finishOp(47,1)}readToken_lt(){const{pos:e}=this.state,t=this.input.charCodeAt(e+1);if(t===60){if(this.input.charCodeAt(e+2)===61){this.finishOp(28,3);return}this.finishOp(46,2);return}if(t===61){this.finishOp(45,2);return}this.finishOp(43,1)}readToken_gt(){const{pos:e}=this.state,t=this.input.charCodeAt(e+1);if(t===62){const r=this.input.charCodeAt(e+2)===62?3:2;if(this.input.charCodeAt(e+r)===61){this.finishOp(28,r+1);return}this.finishOp(46,r);return}if(t===61){this.finishOp(45,2);return}this.finishOp(44,1)}readToken_eq_excl(e){const t=this.input.charCodeAt(this.state.pos+1);if(t===61){this.finishOp(42,this.input.charCodeAt(this.state.pos+2)===61?3:2);return}if(e===61&&t===62){this.state.pos+=2,this.finishToken(19);return}this.finishOp(e===61?27:33,1)}readToken_question(){const e=this.input.charCodeAt(this.state.pos+1),t=this.input.charCodeAt(this.state.pos+2);e===63?t===61?this.finishOp(28,3):this.finishOp(36,2):e===46&&!(t>=48&&t<=57)?(this.state.pos+=2,this.finishToken(18)):(++this.state.pos,this.finishToken(17))}getTokenFromCode(e){switch(e){case 46:this.readToken_dot();return;case 40:++this.state.pos,this.finishToken(10);return;case 41:++this.state.pos,this.finishToken(11);return;case 59:++this.state.pos,this.finishToken(13);return;case 44:++this.state.pos,this.finishToken(12);return;case 91:if(this.hasPlugin("recordAndTuple")&&this.input.charCodeAt(this.state.pos+1)===124){if(this.getPluginOption("recordAndTuple","syntaxType")!=="bar")throw this.raise(this.state.pos,_.TupleExpressionBarIncorrectStartSyntaxType);this.state.pos+=2,this.finishToken(2)}else++this.state.pos,this.finishToken(0);return;case 93:++this.state.pos,this.finishToken(3);return;case 123:if(this.hasPlugin("recordAndTuple")&&this.input.charCodeAt(this.state.pos+1)===124){if(this.getPluginOption("recordAndTuple","syntaxType")!=="bar")throw this.raise(this.state.pos,_.RecordExpressionBarIncorrectStartSyntaxType);this.state.pos+=2,this.finishToken(6)}else++this.state.pos,this.finishToken(5);return;case 125:++this.state.pos,this.finishToken(8);return;case 58:this.hasPlugin("functionBind")&&this.input.charCodeAt(this.state.pos+1)===58?this.finishOp(15,2):(++this.state.pos,this.finishToken(14));return;case 63:this.readToken_question();return;case 96:++this.state.pos,this.finishToken(22);return;case 48:{const t=this.input.charCodeAt(this.state.pos+1);if(t===120||t===88){this.readRadixNumber(16);return}if(t===111||t===79){this.readRadixNumber(8);return}if(t===98||t===66){this.readRadixNumber(2);return}}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:this.readNumber(!1);return;case 34:case 39:this.readString(e);return;case 47:this.readToken_slash();return;case 37:case 42:this.readToken_mult_modulo(e);return;case 124:case 38:this.readToken_pipe_amp(e);return;case 94:this.readToken_caret();return;case 43:case 45:this.readToken_plus_min(e);return;case 60:this.readToken_lt();return;case 62:this.readToken_gt();return;case 61:case 33:this.readToken_eq_excl(e);return;case 126:this.finishOp(34,1);return;case 64:++this.state.pos,this.finishToken(24);return;case 35:this.readToken_numberSign();return;case 92:this.readWord();return;default:if(bs(e)){this.readWord(e);return}}throw this.raise(this.state.pos,_.InvalidOrUnexpectedToken,String.fromCodePoint(e))}finishOp(e,t){const r=this.input.slice(this.state.pos,this.state.pos+t);this.state.pos+=t,this.finishToken(e,r)}readRegexp(){const e=this.state.start+1;let t,r,{pos:n}=this.state;for(;;++n){if(n>=this.length)throw this.raise(e,_.UnterminatedRegExp);const o=this.input.charCodeAt(n);if(tn(o))throw this.raise(e,_.UnterminatedRegExp);if(t)t=!1;else{if(o===91)r=!0;else if(o===93&&r)r=!1;else if(o===47&&!r)break;t=o===92}}const i=this.input.slice(e,n);++n;let a="";for(;n<this.length;){const o=this.codePointAtPos(n),u=String.fromCharCode(o);if(VR.has(o))a.includes(u)&&this.raise(n+1,_.DuplicateRegExpFlags);else if(ci(o)||o===92)this.raise(n+1,_.MalformedRegExpFlags);else break;++n,a+=u}this.state.pos=n,this.finishToken(127,{pattern:i,flags:a})}readInt(e,t,r,n=!0){const i=this.state.pos,a=e===16?zy.hex:zy.decBinOct,o=e===16?ar.hex:e===10?ar.dec:e===8?ar.oct:ar.bin;let u=!1,c=0;for(let l=0,h=t==null?1/0:t;l<h;++l){const f=this.input.charCodeAt(this.state.pos);let d;if(f===95){const g=this.input.charCodeAt(this.state.pos-1),p=this.input.charCodeAt(this.state.pos+1);o.indexOf(p)===-1?this.raise(this.state.pos,_.UnexpectedNumericSeparator):(a.indexOf(g)>-1||a.indexOf(p)>-1||Number.isNaN(p))&&this.raise(this.state.pos,_.UnexpectedNumericSeparator),n||this.raise(this.state.pos,_.NumericSeparatorInEscapeSequence),++this.state.pos;continue}if(f>=97?d=f-97+10:f>=65?d=f-65+10:BR(f)?d=f-48:d=1/0,d>=e)if(this.options.errorRecovery&&d<=9)d=0,this.raise(this.state.start+l+2,_.InvalidDigit,e);else if(r)d=0,u=!0;else break;++this.state.pos,c=c*e+d}return this.state.pos===i||t!=null&&this.state.pos-i!==t||u?null:c}readRadixNumber(e){const t=this.state.pos;let r=!1;this.state.pos+=2;const n=this.readInt(e);n==null&&this.raise(this.state.start+2,_.InvalidDigit,e);const i=this.input.charCodeAt(this.state.pos);if(i===110)++this.state.pos,r=!0;else if(i===109)throw this.raise(t,_.InvalidDecimal);if(bs(this.codePointAtPos(this.state.pos)))throw this.raise(this.state.pos,_.NumberIdentifier);if(r){const a=this.input.slice(t,this.state.pos).replace(/[_n]/g,"");this.finishToken(125,a);return}this.finishToken(124,n)}readNumber(e){const t=this.state.pos;let r=!1,n=!1,i=!1,a=!1,o=!1;!e&&this.readInt(10)===null&&this.raise(t,_.InvalidNumber);const u=this.state.pos-t>=2&&this.input.charCodeAt(t)===48;if(u){const f=this.input.slice(t,this.state.pos);if(this.recordStrictModeErrors(t,_.StrictOctalLiteral),!this.state.strict){const d=f.indexOf("_");d>0&&this.raise(d+t,_.ZeroDigitNumericSeparator)}o=u&&!/[89]/.test(f)}let c=this.input.charCodeAt(this.state.pos);if(c===46&&!o&&(++this.state.pos,this.readInt(10),r=!0,c=this.input.charCodeAt(this.state.pos)),(c===69||c===101)&&!o&&(c=this.input.charCodeAt(++this.state.pos),(c===43||c===45)&&++this.state.pos,this.readInt(10)===null&&this.raise(t,_.InvalidOrMissingExponent),r=!0,a=!0,c=this.input.charCodeAt(this.state.pos)),c===110&&((r||u)&&this.raise(t,_.InvalidBigIntLiteral),++this.state.pos,n=!0),c===109&&(this.expectPlugin("decimal",this.state.pos),(a||u)&&this.raise(t,_.InvalidDecimal),++this.state.pos,i=!0),bs(this.codePointAtPos(this.state.pos)))throw this.raise(this.state.pos,_.NumberIdentifier);const l=this.input.slice(t,this.state.pos).replace(/[_mn]/g,"");if(n){this.finishToken(125,l);return}if(i){this.finishToken(126,l);return}const h=o?parseInt(l,8):parseFloat(l);this.finishToken(124,h)}readCodePoint(e){const t=this.input.charCodeAt(this.state.pos);let r;if(t===123){const n=++this.state.pos;if(r=this.readHexChar(this.input.indexOf("}",this.state.pos)-this.state.pos,!0,e),++this.state.pos,r!==null&&r>1114111)if(e)this.raise(n,_.InvalidCodePoint);else return null}else r=this.readHexChar(4,!1,e);return r}readString(e){let t="",r=++this.state.pos;for(;;){if(this.state.pos>=this.length)throw this.raise(this.state.start,_.UnterminatedString);const n=this.input.charCodeAt(this.state.pos);if(n===e)break;if(n===92)t+=this.input.slice(r,this.state.pos),t+=this.readEscapedChar(!1),r=this.state.pos;else if(n===8232||n===8233)++this.state.pos,++this.state.curLine,this.state.lineStart=this.state.pos;else{if(tn(n))throw this.raise(this.state.start,_.UnterminatedString);++this.state.pos}}t+=this.input.slice(r,this.state.pos++),this.finishToken(123,t)}readTmplToken(){let e="",t=this.state.pos,r=!1;for(;;){if(this.state.pos>=this.length)throw this.raise(this.state.start,_.UnterminatedTemplate);const n=this.input.charCodeAt(this.state.pos);if(n===96||n===36&&this.input.charCodeAt(this.state.pos+1)===123){if(this.state.pos===this.state.start&&this.match(20))if(n===36){this.state.pos+=2,this.finishToken(23);return}else{++this.state.pos,this.finishToken(22);return}e+=this.input.slice(t,this.state.pos),this.finishToken(20,r?null:e);return}if(n===92){e+=this.input.slice(t,this.state.pos);const i=this.readEscapedChar(!0);i===null?r=!0:e+=i,t=this.state.pos}else if(tn(n)){switch(e+=this.input.slice(t,this.state.pos),++this.state.pos,n){case 13:this.input.charCodeAt(this.state.pos)===10&&++this.state.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}++this.state.curLine,this.state.lineStart=this.state.pos,t=this.state.pos}else++this.state.pos}}recordStrictModeErrors(e,t){this.state.strict&&!this.state.strictErrors.has(e)?this.raise(e,t):this.state.strictErrors.set(e,t)}readEscapedChar(e){const t=!e,r=this.input.charCodeAt(++this.state.pos);switch(++this.state.pos,r){case 110:return`
`;case 114:return"\r";case 120:{const n=this.readHexChar(2,!1,t);return n===null?null:String.fromCharCode(n)}case 117:{const n=this.readCodePoint(t);return n===null?null:String.fromCodePoint(n)}case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.state.pos)===10&&++this.state.pos;case 10:this.state.lineStart=this.state.pos,++this.state.curLine;case 8232:case 8233:return"";case 56:case 57:if(e)return null;this.recordStrictModeErrors(this.state.pos-1,_.StrictNumericEscape);default:if(r>=48&&r<=55){const n=this.state.pos-1;let a=this.input.substr(this.state.pos-1,3).match(/^[0-7]+/)[0],o=parseInt(a,8);o>255&&(a=a.slice(0,-1),o=parseInt(a,8)),this.state.pos+=a.length-1;const u=this.input.charCodeAt(this.state.pos);if(a!=="0"||u===56||u===57){if(e)return null;this.recordStrictModeErrors(n,_.StrictNumericEscape)}return String.fromCharCode(o)}return String.fromCharCode(r)}}readHexChar(e,t,r){const n=this.state.pos,i=this.readInt(16,e,t,!1);return i===null&&(r?this.raise(n,_.InvalidEscapeSequence):this.state.pos=n-1),i}readWord1(e){this.state.containsEsc=!1;let t="";const r=this.state.pos;let n=this.state.pos;for(e!==void 0&&(this.state.pos+=e<=65535?1:2);this.state.pos<this.length;){const i=this.codePointAtPos(this.state.pos);if(ci(i))this.state.pos+=i<=65535?1:2;else if(i===92){this.state.containsEsc=!0,t+=this.input.slice(n,this.state.pos);const a=this.state.pos,o=this.state.pos===r?bs:ci;if(this.input.charCodeAt(++this.state.pos)!==117){this.raise(this.state.pos,_.MissingUnicodeEscape),n=this.state.pos-1;continue}++this.state.pos;const u=this.readCodePoint(!0);u!==null&&(o(u)||this.raise(a,_.EscapedCharNotAnIdentifier),t+=String.fromCodePoint(u)),n=this.state.pos}else break}return t+this.input.slice(n,this.state.pos)}readWord(e){const t=this.readWord1(e),r=nm.get(t);r!==void 0?this.finishToken(r,Rs(r)):this.finishToken(122,t)}checkKeywordEscapes(){const{type:e}=this.state;lm(e)&&this.state.containsEsc&&this.raise(this.state.start,_.InvalidEscapedReservedWord,Rs(e))}updateContext(e){const{context:t,type:r}=this.state;switch(r){case 8:t.pop();break;case 5:case 7:case 23:t.push(Pe.brace);break;case 22:t[t.length-1]===Pe.template?t.pop():t.push(Pe.template);break}}}class $R{constructor(){this.privateNames=new Set,this.loneAccessors=new Map,this.undefinedPrivateNames=new Map}}class jR{constructor(e){this.stack=[],this.undefinedPrivateNames=new Map,this.raise=e}current(){return this.stack[this.stack.length-1]}enter(){this.stack.push(new $R)}exit(){const e=this.stack.pop(),t=this.current();for(const[r,n]of Array.from(e.undefinedPrivateNames))t?t.undefinedPrivateNames.has(r)||t.undefinedPrivateNames.set(r,n):this.raise(n,_.InvalidPrivateFieldResolution,r)}declarePrivateName(e,t,r){const n=this.current();let i=n.privateNames.has(e);if(t&Ch){const a=i&&n.loneAccessors.get(e);if(a){const o=a&Vc,u=t&Vc,c=a&Ch,l=t&Ch;i=c===l||o!==u,i||n.loneAccessors.delete(e)}else i||n.loneAccessors.set(e,t)}i&&this.raise(r,_.PrivateNameRedeclaration,e),n.privateNames.add(e),n.undefinedPrivateNames.delete(e)}usePrivateName(e,t){let r;for(r of this.stack)if(r.privateNames.has(e))return;r?r.undefinedPrivateNames.set(e,t):this.raise(t,_.InvalidPrivateFieldResolution,e)}}const GR=0,MS=1,Tm=2,LS=3;class Hl{constructor(e=GR){this.type=void 0,this.type=e}canBeArrowParameterDeclaration(){return this.type===Tm||this.type===MS}isCertainlyParameterDeclaration(){return this.type===LS}}class FS extends Hl{constructor(e){super(e),this.errors=new Map}recordDeclarationError(e,t){this.errors.set(e,t)}clearDeclarationError(e){this.errors.delete(e)}iterateErrors(e){this.errors.forEach(e)}}class zR{constructor(e){this.stack=[new Hl],this.raise=e}enter(e){this.stack.push(e)}exit(){this.stack.pop()}recordParameterInitializerError(e,t){const{stack:r}=this;let n=r.length-1,i=r[n];for(;!i.isCertainlyParameterDeclaration();){if(i.canBeArrowParameterDeclaration())i.recordDeclarationError(e,t);else return;i=r[--n]}this.raise(e,t)}recordParenthesizedIdentifierError(e,t){const{stack:r}=this,n=r[r.length-1];if(n.isCertainlyParameterDeclaration())this.raise(e,t);else if(n.canBeArrowParameterDeclaration())n.recordDeclarationError(e,t);else return}recordAsyncArrowParametersError(e,t){const{stack:r}=this;let n=r.length-1,i=r[n];for(;i.canBeArrowParameterDeclaration();)i.type===Tm&&i.recordDeclarationError(e,t),i=r[--n]}validateAsPattern(){const{stack:e}=this,t=e[e.length-1];!t.canBeArrowParameterDeclaration()||t.iterateErrors((r,n)=>{this.raise(n,r);let i=e.length-2,a=e[i];for(;a.canBeArrowParameterDeclaration();)a.clearDeclarationError(n),a=e[--i]})}}function WR(){return new Hl(LS)}function KR(){return new FS(MS)}function HR(){return new FS(Tm)}function US(){return new Hl}const hi=0,BS=1,Ql=2,VS=4,Kn=8;class QR{constructor(){this.stacks=[]}enter(e){this.stacks.push(e)}exit(){this.stacks.pop()}currentFlags(){return this.stacks[this.stacks.length-1]}get hasAwait(){return(this.currentFlags()&Ql)>0}get hasYield(){return(this.currentFlags()&BS)>0}get hasReturn(){return(this.currentFlags()&VS)>0}get hasIn(){return(this.currentFlags()&Kn)>0}}function Ju(s,e){return(s?Ql:0)|(e?BS:0)}class YR extends qR{addExtra(e,t,r){if(!e)return;const n=e.extra=e.extra||{};n[t]=r}isContextual(e){return this.state.type===e&&!this.state.containsEsc}isUnparsedContextual(e,t){const r=e+t.length;if(this.input.slice(e,r)===t){const n=this.input.charCodeAt(r);return!(ci(n)||(n&64512)===55296)}return!1}isLookaheadContextual(e){const t=this.nextTokenStart();return this.isUnparsedContextual(t,e)}eatContextual(e){return this.isContextual(e)?(this.next(),!0):!1}expectContextual(e,t){this.eatContextual(e)||this.unexpected(null,t)}canInsertSemicolon(){return this.match(129)||this.match(8)||this.hasPrecedingLineBreak()}hasPrecedingLineBreak(){return sm.test(this.input.slice(this.state.lastTokEnd,this.state.start))}hasFollowingLineBreak(){return Vy.lastIndex=this.state.end,Vy.test(this.input)}isLineTerminator(){return this.eat(13)||this.canInsertSemicolon()}semicolon(e=!0){(e?this.isLineTerminator():this.eat(13))||this.raise(this.state.lastTokEnd,_.MissingSemicolon)}expect(e,t){this.eat(e)||this.unexpected(t,e)}assertNoSpace(e="Unexpected space."){this.state.start>this.state.lastTokEnd&&this.raise(this.state.lastTokEnd,{code:Hr.SyntaxError,reasonCode:"UnexpectedSpace",template:e})}unexpected(e,t={code:Hr.SyntaxError,reasonCode:"UnexpectedToken",template:"Unexpected token"}){throw gR(t)&&(t={code:Hr.SyntaxError,reasonCode:"UnexpectedToken",template:`Unexpected token, expected "${Rs(t)}"`}),this.raise(e!=null?e:this.state.start,t)}expectPlugin(e,t){if(!this.hasPlugin(e))throw this.raiseWithData(t!=null?t:this.state.start,{missingPlugin:[e]},`This experimental syntax requires enabling the parser plugin: '${e}'`);return!0}expectOnePlugin(e,t){if(!e.some(r=>this.hasPlugin(r)))throw this.raiseWithData(t!=null?t:this.state.start,{missingPlugin:e},`This experimental syntax requires enabling one of the following parser plugin(s): '${e.join(", ")}'`)}tryParse(e,t=this.state.clone()){const r={node:null};try{const n=e((i=null)=>{throw r.node=i,r});if(this.state.errors.length>t.errors.length){const i=this.state;return this.state=t,this.state.tokensLength=i.tokensLength,{node:n,error:i.errors[t.errors.length],thrown:!1,aborted:!1,failState:i}}return{node:n,error:null,thrown:!1,aborted:!1,failState:null}}catch(n){const i=this.state;if(this.state=t,n instanceof SyntaxError)return{node:null,error:n,thrown:!0,aborted:!1,failState:i};if(n===r)return{node:r.node,error:null,thrown:!1,aborted:!0,failState:i};throw n}}checkExpressionErrors(e,t){if(!e)return!1;const{shorthandAssign:r,doubleProto:n,optionalParameters:i}=e,a=r+n+i>-3;if(t)a&&(r>=0&&this.unexpected(r),n>=0&&this.raise(n,_.DuplicateProto),i>=0&&this.unexpected(i));else return a}isLiteralPropertyName(){return TS(this.state.type)}isPrivateName(e){return e.type==="PrivateName"}getPrivateNameSV(e){return e.id.name}hasPropertyAsPrivateName(e){return(e.type==="MemberExpression"||e.type==="OptionalMemberExpression")&&this.isPrivateName(e.property)}isOptionalChain(e){return e.type==="OptionalMemberExpression"||e.type==="OptionalCallExpression"}isObjectProperty(e){return e.type==="ObjectProperty"}isObjectMethod(e){return e.type==="ObjectMethod"}initializeScopes(e=this.options.sourceType==="module"){const t=this.state.labels;this.state.labels=[];const r=this.exportedIdentifiers;this.exportedIdentifiers=new Set;const n=this.inModule;this.inModule=e;const i=this.scope,a=this.getScopeHandler();this.scope=new a(this.raise.bind(this),this.inModule);const o=this.prodParam;this.prodParam=new QR;const u=this.classScope;this.classScope=new jR(this.raise.bind(this));const c=this.expressionScope;return this.expressionScope=new zR(this.raise.bind(this)),()=>{this.state.labels=t,this.exportedIdentifiers=r,this.inModule=n,this.scope=i,this.prodParam=o,this.classScope=u,this.expressionScope=c}}enterInitialScopes(){let e=hi;this.inModule&&(e|=Ql),this.scope.enter(qa),this.prodParam.enter(e)}}class Xu{constructor(){this.shorthandAssign=-1,this.doubleProto=-1,this.optionalParameters=-1}}class qc{constructor(e,t,r){this.type="",this.start=t,this.end=0,this.loc=new Lc(r),e!=null&&e.options.ranges&&(this.range=[t,0]),e!=null&&e.filename&&(this.loc.filename=e.filename)}}const bm=qc.prototype;bm.__clone=function(){const s=new qc,e=Object.keys(this);for(let t=0,r=e.length;t<r;t++){const n=e[t];n!=="leadingComments"&&n!=="trailingComments"&&n!=="innerComments"&&(s[n]=this[n])}return s};function JR(s){return Yr(s)}function Yr(s){const{type:e,start:t,end:r,loc:n,range:i,extra:a,name:o}=s,u=Object.create(bm);return u.type=e,u.start=t,u.end=r,u.loc=n,u.range=i,u.extra=a,u.name=o,e==="Placeholder"&&(u.expectedNode=s.expectedNode),u}function XR(s){const{type:e,start:t,end:r,loc:n,range:i,extra:a}=s;if(e==="Placeholder")return JR(s);const o=Object.create(bm);return o.type="StringLiteral",o.start=t,o.end=r,o.loc=n,o.range=i,o.extra=a,o.value=s.value,o}class ZR extends YR{startNode(){return new qc(this,this.state.start,this.state.startLoc)}startNodeAt(e,t){return new qc(this,e,t)}startNodeAtNode(e){return this.startNodeAt(e.start,e.loc.start)}finishNode(e,t){return this.finishNodeAt(e,t,this.state.lastTokEnd,this.state.lastTokEndLoc)}finishNodeAt(e,t,r,n){return e.type=t,e.end=r,e.loc.end=n,this.options.ranges&&(e.range[1]=r),this.options.attachComment&&this.processComment(e),e}resetStartLocation(e,t,r){e.start=t,e.loc.start=r,this.options.ranges&&(e.range[0]=t)}resetEndLocation(e,t=this.state.lastTokEnd,r=this.state.lastTokEndLoc){e.end=t,e.loc.end=r,this.options.ranges&&(e.range[1]=t)}resetStartLocationFromNode(e,t){this.resetStartLocation(e,t.start,t.loc.start)}}const eM=new Set(["_","any","bool","boolean","empty","extends","false","interface","mixed","null","number","static","string","true","typeof","void"]),J=Xi({AmbiguousConditionalArrow:"Ambiguous expression: wrap the arrow functions in parentheses to disambiguate.",AmbiguousDeclareModuleKind:"Found both `declare module.exports` and `declare export` in the same module. Modules can only have 1 since they are either an ES module or they are a CommonJS module.",AssignReservedType:"Cannot overwrite reserved type %0.",DeclareClassElement:"The `declare` modifier can only appear on class fields.",DeclareClassFieldInitializer:"Initializers are not allowed in fields with the `declare` modifier.",DuplicateDeclareModuleExports:"Duplicate `declare module.exports` statement.",EnumBooleanMemberNotInitialized:"Boolean enum members need to be initialized. Use either `%0 = true,` or `%0 = false,` in enum `%1`.",EnumDuplicateMemberName:"Enum member names need to be unique, but the name `%0` has already been used before in enum `%1`.",EnumInconsistentMemberValues:"Enum `%0` has inconsistent member initializers. Either use no initializers, or consistently use literals (either booleans, numbers, or strings) for all member initializers.",EnumInvalidExplicitType:"Enum type `%1` is not valid. Use one of `boolean`, `number`, `string`, or `symbol` in enum `%0`.",EnumInvalidExplicitTypeUnknownSupplied:"Supplied enum type is not valid. Use one of `boolean`, `number`, `string`, or `symbol` in enum `%0`.",EnumInvalidMemberInitializerPrimaryType:"Enum `%0` has type `%2`, so the initializer of `%1` needs to be a %2 literal.",EnumInvalidMemberInitializerSymbolType:"Symbol enum members cannot be initialized. Use `%1,` in enum `%0`.",EnumInvalidMemberInitializerUnknownType:"The enum member initializer for `%1` needs to be a literal (either a boolean, number, or string) in enum `%0`.",EnumInvalidMemberName:"Enum member names cannot start with lowercase 'a' through 'z'. Instead of using `%0`, consider using `%1`, in enum `%2`.",EnumNumberMemberNotInitialized:"Number enum members need to be initialized, e.g. `%1 = 1` in enum `%0`.",EnumStringMemberInconsistentlyInitailized:"String enum members need to consistently either all use initializers, or use no initializers, in enum `%0`.",GetterMayNotHaveThisParam:"A getter cannot have a `this` parameter.",ImportTypeShorthandOnlyInPureImport:"The `type` and `typeof` keywords on named imports can only be used on regular `import` statements. It cannot be used with `import type` or `import typeof` statements.",InexactInsideExact:"Explicit inexact syntax cannot appear inside an explicit exact object type.",InexactInsideNonObject:"Explicit inexact syntax cannot appear in class or interface definitions.",InexactVariance:"Explicit inexact syntax cannot have variance.",InvalidNonTypeImportInDeclareModule:"Imports within a `declare module` body must always be `import type` or `import typeof`.",MissingTypeParamDefault:"Type parameter declaration needs a default, since a preceding type parameter declaration has a default.",NestedDeclareModule:"`declare module` cannot be used inside another `declare module`.",NestedFlowComment:"Cannot have a flow comment inside another flow comment.",PatternIsOptional:"A binding pattern parameter cannot be optional in an implementation signature.",SetterMayNotHaveThisParam:"A setter cannot have a `this` parameter.",SpreadVariance:"Spread properties cannot have variance.",ThisParamAnnotationRequired:"A type annotation is required for the `this` parameter.",ThisParamBannedInConstructor:"Constructors cannot have a `this` parameter; constructors don't bind `this` like other functions.",ThisParamMayNotBeOptional:"The `this` parameter cannot be optional.",ThisParamMustBeFirst:"The `this` parameter must be the first function parameter.",ThisParamNoDefault:"The `this` parameter may not have a default value.",TypeBeforeInitializer:"Type annotations must come before default assignments, e.g. instead of `age = 25: number` use `age: number = 25`.",TypeCastInPattern:"The type cast expression is expected to be wrapped with parenthesis.",UnexpectedExplicitInexactInObject:"Explicit inexact syntax must appear at the end of an inexact object.",UnexpectedReservedType:"Unexpected reserved type %0.",UnexpectedReservedUnderscore:"`_` is only allowed as a type argument to call or new.",UnexpectedSpaceBetweenModuloChecks:"Spaces between `%` and `checks` are not allowed here.",UnexpectedSpreadType:"Spread operator cannot appear in class or interface definitions.",UnexpectedSubtractionOperand:'Unexpected token, expected "number" or "bigint".',UnexpectedTokenAfterTypeParameter:"Expected an arrow function after this type parameter declaration.",UnexpectedTypeParameterBeforeAsyncArrowFunction:"Type parameters must come after the async keyword, e.g. instead of `<T> async () => {}`, use `async <T>() => {}`.",UnsupportedDeclareExportKind:"`declare export %0` is not supported. Use `%1` instead.",UnsupportedStatementInDeclareModule:"Only declares and type imports are allowed inside declare module.",UnterminatedFlowComment:"Unterminated flow-comment."},Hr.SyntaxError,"flow");function tM(s){return s.type==="DeclareExportAllDeclaration"||s.type==="DeclareExportDeclaration"&&(!s.declaration||s.declaration.type!=="TypeAlias"&&s.declaration.type!=="InterfaceDeclaration")}function kh(s){return s.importKind==="type"||s.importKind==="typeof"}function Wy(s){return Qr(s)&&s!==91}const rM={const:"declare export var",let:"declare export var",type:"export type",interface:"export interface"};function sM(s,e){const t=[],r=[];for(let n=0;n<s.length;n++)(e(s[n],n,s)?t:r).push(s[n]);return[t,r]}const nM=/\*?\s*@((?:no)?flow)\b/;var iM=s=>class extends s{constructor(...e){super(...e),this.flowPragma=void 0}getScopeHandler(){return UR}shouldParseTypes(){return this.getPluginOption("flow","all")||this.flowPragma==="flow"}shouldParseEnums(){return!!this.getPluginOption("flow","enums")}finishToken(e,t){return e!==123&&e!==13&&e!==26&&this.flowPragma===void 0&&(this.flowPragma=null),super.finishToken(e,t)}addComment(e){if(this.flowPragma===void 0){const t=nM.exec(e.value);if(t)if(t[1]==="flow")this.flowPragma="flow";else if(t[1]==="noflow")this.flowPragma="noflow";else throw new Error("Unexpected flow pragma")}return super.addComment(e)}flowParseTypeInitialiser(e){const t=this.state.inType;this.state.inType=!0,this.expect(e||14);const r=this.flowParseType();return this.state.inType=t,r}flowParsePredicate(){const e=this.startNode(),t=this.state.start;return this.next(),this.expectContextual(101),this.state.lastTokStart>t+1&&this.raise(t,J.UnexpectedSpaceBetweenModuloChecks),this.eat(10)?(e.value=this.parseExpression(),this.expect(11),this.finishNode(e,"DeclaredPredicate")):this.finishNode(e,"InferredPredicate")}flowParseTypeAndPredicateInitialiser(){const e=this.state.inType;this.state.inType=!0,this.expect(14);let t=null,r=null;return this.match(48)?(this.state.inType=e,r=this.flowParsePredicate()):(t=this.flowParseType(),this.state.inType=e,this.match(48)&&(r=this.flowParsePredicate())),[t,r]}flowParseDeclareClass(e){return this.next(),this.flowParseInterfaceish(e,!0),this.finishNode(e,"DeclareClass")}flowParseDeclareFunction(e){this.next();const t=e.id=this.parseIdentifier(),r=this.startNode(),n=this.startNode();this.match(43)?r.typeParameters=this.flowParseTypeParameterDeclaration():r.typeParameters=null,this.expect(10);const i=this.flowParseFunctionTypeParams();return r.params=i.params,r.rest=i.rest,r.this=i._this,this.expect(11),[r.returnType,e.predicate]=this.flowParseTypeAndPredicateInitialiser(),n.typeAnnotation=this.finishNode(r,"FunctionTypeAnnotation"),t.typeAnnotation=this.finishNode(n,"TypeAnnotation"),this.resetEndLocation(t),this.semicolon(),this.scope.declareName(e.id.name,OR,e.id.start),this.finishNode(e,"DeclareFunction")}flowParseDeclare(e,t){if(this.match(74))return this.flowParseDeclareClass(e);if(this.match(62))return this.flowParseDeclareFunction(e);if(this.match(68))return this.flowParseDeclareVariable(e);if(this.eatContextual(117))return this.match(16)?this.flowParseDeclareModuleExports(e):(t&&this.raise(this.state.lastTokStart,J.NestedDeclareModule),this.flowParseDeclareModule(e));if(this.isContextual(120))return this.flowParseDeclareTypeAlias(e);if(this.isContextual(121))return this.flowParseDeclareOpaqueType(e);if(this.isContextual(119))return this.flowParseDeclareInterface(e);if(this.match(76))return this.flowParseDeclareExportDeclaration(e,t);throw this.unexpected()}flowParseDeclareVariable(e){return this.next(),e.id=this.flowParseTypeAnnotatableIdentifier(!0),this.scope.declareName(e.id.name,Bc,e.id.start),this.semicolon(),this.finishNode(e,"DeclareVariable")}flowParseDeclareModule(e){this.scope.enter(Zn),this.match(123)?e.id=this.parseExprAtom():e.id=this.parseIdentifier();const t=e.body=this.startNode(),r=t.body=[];for(this.expect(5);!this.match(8);){let a=this.startNode();this.match(77)?(this.next(),!this.isContextual(120)&&!this.match(81)&&this.raise(this.state.lastTokStart,J.InvalidNonTypeImportInDeclareModule),this.parseImport(a)):(this.expectContextual(115,J.UnsupportedStatementInDeclareModule),a=this.flowParseDeclare(a,!0)),r.push(a)}this.scope.exit(),this.expect(8),this.finishNode(t,"BlockStatement");let n=null,i=!1;return r.forEach(a=>{tM(a)?(n==="CommonJS"&&this.raise(a.start,J.AmbiguousDeclareModuleKind),n="ES"):a.type==="DeclareModuleExports"&&(i&&this.raise(a.start,J.DuplicateDeclareModuleExports),n==="ES"&&this.raise(a.start,J.AmbiguousDeclareModuleKind),n="CommonJS",i=!0)}),e.kind=n||"CommonJS",this.finishNode(e,"DeclareModule")}flowParseDeclareExportDeclaration(e,t){if(this.expect(76),this.eat(59))return this.match(62)||this.match(74)?e.declaration=this.flowParseDeclare(this.startNode()):(e.declaration=this.flowParseType(),this.semicolon()),e.default=!0,this.finishNode(e,"DeclareExportDeclaration");if(this.match(69)||this.isLet()||(this.isContextual(120)||this.isContextual(119))&&!t){const r=this.state.value,n=rM[r];throw this.raise(this.state.start,J.UnsupportedDeclareExportKind,r,n)}if(this.match(68)||this.match(62)||this.match(74)||this.isContextual(121))return e.declaration=this.flowParseDeclare(this.startNode()),e.default=!1,this.finishNode(e,"DeclareExportDeclaration");if(this.match(49)||this.match(5)||this.isContextual(119)||this.isContextual(120)||this.isContextual(121))return e=this.parseExport(e),e.type==="ExportNamedDeclaration"&&(e.type="ExportDeclaration",e.default=!1,delete e.exportKind),e.type="Declare"+e.type,e;throw this.unexpected()}flowParseDeclareModuleExports(e){return this.next(),this.expectContextual(102),e.typeAnnotation=this.flowParseTypeAnnotation(),this.semicolon(),this.finishNode(e,"DeclareModuleExports")}flowParseDeclareTypeAlias(e){return this.next(),this.flowParseTypeAlias(e),e.type="DeclareTypeAlias",e}flowParseDeclareOpaqueType(e){return this.next(),this.flowParseOpaqueType(e,!0),e.type="DeclareOpaqueType",e}flowParseDeclareInterface(e){return this.next(),this.flowParseInterfaceish(e),this.finishNode(e,"DeclareInterface")}flowParseInterfaceish(e,t=!1){if(e.id=this.flowParseRestrictedIdentifier(!t,!0),this.scope.declareName(e.id.name,t?DS:Yt,e.id.start),this.match(43)?e.typeParameters=this.flowParseTypeParameterDeclaration():e.typeParameters=null,e.extends=[],e.implements=[],e.mixins=[],this.eat(75))do e.extends.push(this.flowParseInterfaceExtends());while(!t&&this.eat(12));if(this.isContextual(108)){this.next();do e.mixins.push(this.flowParseInterfaceExtends());while(this.eat(12))}if(this.isContextual(104)){this.next();do e.implements.push(this.flowParseInterfaceExtends());while(this.eat(12))}e.body=this.flowParseObjectType({allowStatic:t,allowExact:!1,allowSpread:!1,allowProto:t,allowInexact:!1})}flowParseInterfaceExtends(){const e=this.startNode();return e.id=this.flowParseQualifiedTypeIdentifier(),this.match(43)?e.typeParameters=this.flowParseTypeParameterInstantiation():e.typeParameters=null,this.finishNode(e,"InterfaceExtends")}flowParseInterface(e){return this.flowParseInterfaceish(e),this.finishNode(e,"InterfaceDeclaration")}checkNotUnderscore(e){e==="_"&&this.raise(this.state.start,J.UnexpectedReservedUnderscore)}checkReservedType(e,t,r){!eM.has(e)||this.raise(t,r?J.AssignReservedType:J.UnexpectedReservedType,e)}flowParseRestrictedIdentifier(e,t){return this.checkReservedType(this.state.value,this.state.start,t),this.parseIdentifier(e)}flowParseTypeAlias(e){return e.id=this.flowParseRestrictedIdentifier(!1,!0),this.scope.declareName(e.id.name,Yt,e.id.start),this.match(43)?e.typeParameters=this.flowParseTypeParameterDeclaration():e.typeParameters=null,e.right=this.flowParseTypeInitialiser(27),this.semicolon(),this.finishNode(e,"TypeAlias")}flowParseOpaqueType(e,t){return this.expectContextual(120),e.id=this.flowParseRestrictedIdentifier(!0,!0),this.scope.declareName(e.id.name,Yt,e.id.start),this.match(43)?e.typeParameters=this.flowParseTypeParameterDeclaration():e.typeParameters=null,e.supertype=null,this.match(14)&&(e.supertype=this.flowParseTypeInitialiser(14)),e.impltype=null,t||(e.impltype=this.flowParseTypeInitialiser(27)),this.semicolon(),this.finishNode(e,"OpaqueType")}flowParseTypeParameter(e=!1){const t=this.state.start,r=this.startNode(),n=this.flowParseVariance(),i=this.flowParseTypeAnnotatableIdentifier();return r.name=i.name,r.variance=n,r.bound=i.typeAnnotation,this.match(27)?(this.eat(27),r.default=this.flowParseType()):e&&this.raise(t,J.MissingTypeParamDefault),this.finishNode(r,"TypeParameter")}flowParseTypeParameterDeclaration(){const e=this.state.inType,t=this.startNode();t.params=[],this.state.inType=!0,this.match(43)||this.match(132)?this.next():this.unexpected();let r=!1;do{const n=this.flowParseTypeParameter(r);t.params.push(n),n.default&&(r=!0),this.match(44)||this.expect(12)}while(!this.match(44));return this.expect(44),this.state.inType=e,this.finishNode(t,"TypeParameterDeclaration")}flowParseTypeParameterInstantiation(){const e=this.startNode(),t=this.state.inType;e.params=[],this.state.inType=!0,this.expect(43);const r=this.state.noAnonFunctionType;for(this.state.noAnonFunctionType=!1;!this.match(44);)e.params.push(this.flowParseType()),this.match(44)||this.expect(12);return this.state.noAnonFunctionType=r,this.expect(44),this.state.inType=t,this.finishNode(e,"TypeParameterInstantiation")}flowParseTypeParameterInstantiationCallOrNew(){const e=this.startNode(),t=this.state.inType;for(e.params=[],this.state.inType=!0,this.expect(43);!this.match(44);)e.params.push(this.flowParseTypeOrImplicitInstantiation()),this.match(44)||this.expect(12);return this.expect(44),this.state.inType=t,this.finishNode(e,"TypeParameterInstantiation")}flowParseInterfaceType(){const e=this.startNode();if(this.expectContextual(119),e.extends=[],this.eat(75))do e.extends.push(this.flowParseInterfaceExtends());while(this.eat(12));return e.body=this.flowParseObjectType({allowStatic:!1,allowExact:!1,allowSpread:!1,allowProto:!1,allowInexact:!1}),this.finishNode(e,"InterfaceTypeAnnotation")}flowParseObjectPropertyKey(){return this.match(124)||this.match(123)?this.parseExprAtom():this.parseIdentifier(!0)}flowParseObjectTypeIndexer(e,t,r){return e.static=t,this.lookahead().type===14?(e.id=this.flowParseObjectPropertyKey(),e.key=this.flowParseTypeInitialiser()):(e.id=null,e.key=this.flowParseType()),this.expect(3),e.value=this.flowParseTypeInitialiser(),e.variance=r,this.finishNode(e,"ObjectTypeIndexer")}flowParseObjectTypeInternalSlot(e,t){return e.static=t,e.id=this.flowParseObjectPropertyKey(),this.expect(3),this.expect(3),this.match(43)||this.match(10)?(e.method=!0,e.optional=!1,e.value=this.flowParseObjectTypeMethodish(this.startNodeAt(e.start,e.loc.start))):(e.method=!1,this.eat(17)&&(e.optional=!0),e.value=this.flowParseTypeInitialiser()),this.finishNode(e,"ObjectTypeInternalSlot")}flowParseObjectTypeMethodish(e){for(e.params=[],e.rest=null,e.typeParameters=null,e.this=null,this.match(43)&&(e.typeParameters=this.flowParseTypeParameterDeclaration()),this.expect(10),this.match(72)&&(e.this=this.flowParseFunctionTypeParam(!0),e.this.name=null,this.match(11)||this.expect(12));!this.match(11)&&!this.match(21);)e.params.push(this.flowParseFunctionTypeParam(!1)),this.match(11)||this.expect(12);return this.eat(21)&&(e.rest=this.flowParseFunctionTypeParam(!1)),this.expect(11),e.returnType=this.flowParseTypeInitialiser(),this.finishNode(e,"FunctionTypeAnnotation")}flowParseObjectTypeCallProperty(e,t){const r=this.startNode();return e.static=t,e.value=this.flowParseObjectTypeMethodish(r),this.finishNode(e,"ObjectTypeCallProperty")}flowParseObjectType({allowStatic:e,allowExact:t,allowSpread:r,allowProto:n,allowInexact:i}){const a=this.state.inType;this.state.inType=!0;const o=this.startNode();o.callProperties=[],o.properties=[],o.indexers=[],o.internalSlots=[];let u,c,l=!1;for(t&&this.match(6)?(this.expect(6),u=9,c=!0):(this.expect(5),u=8,c=!1),o.exact=c;!this.match(u);){let f=!1,d=null,g=null;const p=this.startNode();if(n&&this.isContextual(109)){const v=this.lookahead();v.type!==14&&v.type!==17&&(this.next(),d=this.state.start,e=!1)}if(e&&this.isContextual(98)){const v=this.lookahead();v.type!==14&&v.type!==17&&(this.next(),f=!0)}const m=this.flowParseVariance();if(this.eat(0))d!=null&&this.unexpected(d),this.eat(0)?(m&&this.unexpected(m.start),o.internalSlots.push(this.flowParseObjectTypeInternalSlot(p,f))):o.indexers.push(this.flowParseObjectTypeIndexer(p,f,m));else if(this.match(10)||this.match(43))d!=null&&this.unexpected(d),m&&this.unexpected(m.start),o.callProperties.push(this.flowParseObjectTypeCallProperty(p,f));else{let v="init";if(this.isContextual(92)||this.isContextual(97)){const b=this.lookahead();TS(b.type)&&(v=this.state.value,this.next())}const S=this.flowParseObjectTypeProperty(p,f,d,m,v,r,i!=null?i:!c);S===null?(l=!0,g=this.state.lastTokStart):o.properties.push(S)}this.flowObjectTypeSemicolon(),g&&!this.match(8)&&!this.match(9)&&this.raise(g,J.UnexpectedExplicitInexactInObject)}this.expect(u),r&&(o.inexact=l);const h=this.finishNode(o,"ObjectTypeAnnotation");return this.state.inType=a,h}flowParseObjectTypeProperty(e,t,r,n,i,a,o){if(this.eat(21))return this.match(12)||this.match(13)||this.match(8)||this.match(9)?(a?o||this.raise(this.state.lastTokStart,J.InexactInsideExact):this.raise(this.state.lastTokStart,J.InexactInsideNonObject),n&&this.raise(n.start,J.InexactVariance),null):(a||this.raise(this.state.lastTokStart,J.UnexpectedSpreadType),r!=null&&this.unexpected(r),n&&this.raise(n.start,J.SpreadVariance),e.argument=this.flowParseType(),this.finishNode(e,"ObjectTypeSpreadProperty"));{e.key=this.flowParseObjectPropertyKey(),e.static=t,e.proto=r!=null,e.kind=i;let u=!1;return this.match(43)||this.match(10)?(e.method=!0,r!=null&&this.unexpected(r),n&&this.unexpected(n.start),e.value=this.flowParseObjectTypeMethodish(this.startNodeAt(e.start,e.loc.start)),(i==="get"||i==="set")&&this.flowCheckGetterSetterParams(e),!a&&e.key.name==="constructor"&&e.value.this&&this.raise(e.value.this.start,J.ThisParamBannedInConstructor)):(i!=="init"&&this.unexpected(),e.method=!1,this.eat(17)&&(u=!0),e.value=this.flowParseTypeInitialiser(),e.variance=n),e.optional=u,this.finishNode(e,"ObjectTypeProperty")}}flowCheckGetterSetterParams(e){const t=e.kind==="get"?0:1,r=e.start,n=e.value.params.length+(e.value.rest?1:0);e.value.this&&this.raise(e.value.this.start,e.kind==="get"?J.GetterMayNotHaveThisParam:J.SetterMayNotHaveThisParam),n!==t&&(e.kind==="get"?this.raise(r,_.BadGetterArity):this.raise(r,_.BadSetterArity)),e.kind==="set"&&e.value.rest&&this.raise(r,_.BadSetterRestParameter)}flowObjectTypeSemicolon(){!this.eat(13)&&!this.eat(12)&&!this.match(8)&&!this.match(9)&&this.unexpected()}flowParseQualifiedTypeIdentifier(e,t,r){e=e||this.state.start,t=t||this.state.startLoc;let n=r||this.flowParseRestrictedIdentifier(!0);for(;this.eat(16);){const i=this.startNodeAt(e,t);i.qualification=n,i.id=this.flowParseRestrictedIdentifier(!0),n=this.finishNode(i,"QualifiedTypeIdentifier")}return n}flowParseGenericType(e,t,r){const n=this.startNodeAt(e,t);return n.typeParameters=null,n.id=this.flowParseQualifiedTypeIdentifier(e,t,r),this.match(43)&&(n.typeParameters=this.flowParseTypeParameterInstantiation()),this.finishNode(n,"GenericTypeAnnotation")}flowParseTypeofType(){const e=this.startNode();return this.expect(81),e.argument=this.flowParsePrimaryType(),this.finishNode(e,"TypeofTypeAnnotation")}flowParseTupleType(){const e=this.startNode();for(e.types=[],this.expect(0);this.state.pos<this.length&&!this.match(3)&&(e.types.push(this.flowParseType()),!this.match(3));)this.expect(12);return this.expect(3),this.finishNode(e,"TupleTypeAnnotation")}flowParseFunctionTypeParam(e){let t=null,r=!1,n=null;const i=this.startNode(),a=this.lookahead(),o=this.state.type===72;return a.type===14||a.type===17?(o&&!e&&this.raise(i.start,J.ThisParamMustBeFirst),t=this.parseIdentifier(o),this.eat(17)&&(r=!0,o&&this.raise(i.start,J.ThisParamMayNotBeOptional)),n=this.flowParseTypeInitialiser()):n=this.flowParseType(),i.name=t,i.optional=r,i.typeAnnotation=n,this.finishNode(i,"FunctionTypeParam")}reinterpretTypeAsFunctionTypeParam(e){const t=this.startNodeAt(e.start,e.loc.start);return t.name=null,t.optional=!1,t.typeAnnotation=e,this.finishNode(t,"FunctionTypeParam")}flowParseFunctionTypeParams(e=[]){let t=null,r=null;for(this.match(72)&&(r=this.flowParseFunctionTypeParam(!0),r.name=null,this.match(11)||this.expect(12));!this.match(11)&&!this.match(21);)e.push(this.flowParseFunctionTypeParam(!1)),this.match(11)||this.expect(12);return this.eat(21)&&(t=this.flowParseFunctionTypeParam(!1)),{params:e,rest:t,_this:r}}flowIdentToTypeAnnotation(e,t,r,n){switch(n.name){case"any":return this.finishNode(r,"AnyTypeAnnotation");case"bool":case"boolean":return this.finishNode(r,"BooleanTypeAnnotation");case"mixed":return this.finishNode(r,"MixedTypeAnnotation");case"empty":return this.finishNode(r,"EmptyTypeAnnotation");case"number":return this.finishNode(r,"NumberTypeAnnotation");case"string":return this.finishNode(r,"StringTypeAnnotation");case"symbol":return this.finishNode(r,"SymbolTypeAnnotation");default:return this.checkNotUnderscore(n.name),this.flowParseGenericType(e,t,n)}}flowParsePrimaryType(){const e=this.state.start,t=this.state.startLoc,r=this.startNode();let n,i,a=!1;const o=this.state.noAnonFunctionType;switch(this.state.type){case 5:return this.flowParseObjectType({allowStatic:!1,allowExact:!1,allowSpread:!0,allowProto:!1,allowInexact:!0});case 6:return this.flowParseObjectType({allowStatic:!1,allowExact:!0,allowSpread:!0,allowProto:!1,allowInexact:!1});case 0:return this.state.noAnonFunctionType=!1,i=this.flowParseTupleType(),this.state.noAnonFunctionType=o,i;case 43:return r.typeParameters=this.flowParseTypeParameterDeclaration(),this.expect(10),n=this.flowParseFunctionTypeParams(),r.params=n.params,r.rest=n.rest,r.this=n._this,this.expect(11),this.expect(19),r.returnType=this.flowParseType(),this.finishNode(r,"FunctionTypeAnnotation");case 10:if(this.next(),!this.match(11)&&!this.match(21))if(we(this.state.type)||this.match(72)){const u=this.lookahead().type;a=u!==17&&u!==14}else a=!0;if(a){if(this.state.noAnonFunctionType=!1,i=this.flowParseType(),this.state.noAnonFunctionType=o,this.state.noAnonFunctionType||!(this.match(12)||this.match(11)&&this.lookahead().type===19))return this.expect(11),i;this.eat(12)}return i?n=this.flowParseFunctionTypeParams([this.reinterpretTypeAsFunctionTypeParam(i)]):n=this.flowParseFunctionTypeParams(),r.params=n.params,r.rest=n.rest,r.this=n._this,this.expect(11),this.expect(19),r.returnType=this.flowParseType(),r.typeParameters=null,this.finishNode(r,"FunctionTypeAnnotation");case 123:return this.parseLiteral(this.state.value,"StringLiteralTypeAnnotation");case 79:case 80:return r.value=this.match(79),this.next(),this.finishNode(r,"BooleanLiteralTypeAnnotation");case 47:if(this.state.value==="-"){if(this.next(),this.match(124))return this.parseLiteralAtNode(-this.state.value,"NumberLiteralTypeAnnotation",r);if(this.match(125))return this.parseLiteralAtNode(-this.state.value,"BigIntLiteralTypeAnnotation",r);throw this.raise(this.state.start,J.UnexpectedSubtractionOperand)}throw this.unexpected();case 124:return this.parseLiteral(this.state.value,"NumberLiteralTypeAnnotation");case 125:return this.parseLiteral(this.state.value,"BigIntLiteralTypeAnnotation");case 82:return this.next(),this.finishNode(r,"VoidTypeAnnotation");case 78:return this.next(),this.finishNode(r,"NullLiteralTypeAnnotation");case 72:return this.next(),this.finishNode(r,"ThisTypeAnnotation");case 49:return this.next(),this.finishNode(r,"ExistsTypeAnnotation");case 81:return this.flowParseTypeofType();default:if(lm(this.state.type)){const u=Rs(this.state.type);return this.next(),super.createIdentifier(r,u)}else if(we(this.state.type))return this.isContextual(119)?this.flowParseInterfaceType():this.flowIdentToTypeAnnotation(e,t,r,this.parseIdentifier())}throw this.unexpected()}flowParsePostfixType(){const e=this.state.start,t=this.state.startLoc;let r=this.flowParsePrimaryType(),n=!1;for(;(this.match(0)||this.match(18))&&!this.canInsertSemicolon();){const i=this.startNodeAt(e,t),a=this.eat(18);n=n||a,this.expect(0),!a&&this.match(3)?(i.elementType=r,this.next(),r=this.finishNode(i,"ArrayTypeAnnotation")):(i.objectType=r,i.indexType=this.flowParseType(),this.expect(3),n?(i.optional=a,r=this.finishNode(i,"OptionalIndexedAccessType")):r=this.finishNode(i,"IndexedAccessType"))}return r}flowParsePrefixType(){const e=this.startNode();return this.eat(17)?(e.typeAnnotation=this.flowParsePrefixType(),this.finishNode(e,"NullableTypeAnnotation")):this.flowParsePostfixType()}flowParseAnonFunctionWithoutParens(){const e=this.flowParsePrefixType();if(!this.state.noAnonFunctionType&&this.eat(19)){const t=this.startNodeAt(e.start,e.loc.start);return t.params=[this.reinterpretTypeAsFunctionTypeParam(e)],t.rest=null,t.this=null,t.returnType=this.flowParseType(),t.typeParameters=null,this.finishNode(t,"FunctionTypeAnnotation")}return e}flowParseIntersectionType(){const e=this.startNode();this.eat(41);const t=this.flowParseAnonFunctionWithoutParens();for(e.types=[t];this.eat(41);)e.types.push(this.flowParseAnonFunctionWithoutParens());return e.types.length===1?t:this.finishNode(e,"IntersectionTypeAnnotation")}flowParseUnionType(){const e=this.startNode();this.eat(39);const t=this.flowParseIntersectionType();for(e.types=[t];this.eat(39);)e.types.push(this.flowParseIntersectionType());return e.types.length===1?t:this.finishNode(e,"UnionTypeAnnotation")}flowParseType(){const e=this.state.inType;this.state.inType=!0;const t=this.flowParseUnionType();return this.state.inType=e,t}flowParseTypeOrImplicitInstantiation(){if(this.state.type===122&&this.state.value==="_"){const e=this.state.start,t=this.state.startLoc,r=this.parseIdentifier();return this.flowParseGenericType(e,t,r)}else return this.flowParseType()}flowParseTypeAnnotation(){const e=this.startNode();return e.typeAnnotation=this.flowParseTypeInitialiser(),this.finishNode(e,"TypeAnnotation")}flowParseTypeAnnotatableIdentifier(e){const t=e?this.parseIdentifier():this.flowParseRestrictedIdentifier();return this.match(14)&&(t.typeAnnotation=this.flowParseTypeAnnotation(),this.resetEndLocation(t)),t}typeCastToParameter(e){return e.expression.typeAnnotation=e.typeAnnotation,this.resetEndLocation(e.expression,e.typeAnnotation.end,e.typeAnnotation.loc.end),e.expression}flowParseVariance(){let e=null;return this.match(47)&&(e=this.startNode(),this.state.value==="+"?e.kind="plus":e.kind="minus",this.next(),this.finishNode(e,"Variance")),e}parseFunctionBody(e,t,r=!1){return t?this.forwardNoArrowParamsConversionAt(e,()=>super.parseFunctionBody(e,!0,r)):super.parseFunctionBody(e,!1,r)}parseFunctionBodyAndFinish(e,t,r=!1){if(this.match(14)){const n=this.startNode();[n.typeAnnotation,e.predicate]=this.flowParseTypeAndPredicateInitialiser(),e.returnType=n.typeAnnotation?this.finishNode(n,"TypeAnnotation"):null}super.parseFunctionBodyAndFinish(e,t,r)}parseStatement(e,t){if(this.state.strict&&this.isContextual(119)){const n=this.lookahead();if(Qr(n.type)){const i=this.startNode();return this.next(),this.flowParseInterface(i)}}else if(this.shouldParseEnums()&&this.isContextual(116)){const n=this.startNode();return this.next(),this.flowParseEnumDeclaration(n)}const r=super.parseStatement(e,t);return this.flowPragma===void 0&&!this.isValidDirective(r)&&(this.flowPragma=null),r}parseExpressionStatement(e,t){if(t.type==="Identifier"){if(t.name==="declare"){if(this.match(74)||we(this.state.type)||this.match(62)||this.match(68)||this.match(76))return this.flowParseDeclare(e)}else if(we(this.state.type)){if(t.name==="interface")return this.flowParseInterface(e);if(t.name==="type")return this.flowParseTypeAlias(e);if(t.name==="opaque")return this.flowParseOpaqueType(e,!1)}}return super.parseExpressionStatement(e,t)}shouldParseExportDeclaration(){const{type:e}=this.state;return $y(e)||this.shouldParseEnums()&&e===116?!this.state.containsEsc:super.shouldParseExportDeclaration()}isExportDefaultSpecifier(){const{type:e}=this.state;return $y(e)||this.shouldParseEnums()&&e===116?this.state.containsEsc:super.isExportDefaultSpecifier()}parseExportDefaultExpression(){if(this.shouldParseEnums()&&this.isContextual(116)){const e=this.startNode();return this.next(),this.flowParseEnumDeclaration(e)}return super.parseExportDefaultExpression()}parseConditional(e,t,r,n){if(!this.match(17))return e;if(this.state.maybeInArrowParameters){const f=this.lookaheadCharCode();if(f===44||f===61||f===58||f===41)return this.setOptionalParametersError(n),e}this.expect(17);const i=this.state.clone(),a=this.state.noArrowAt,o=this.startNodeAt(t,r);let{consequent:u,failed:c}=this.tryParseConditionalConsequent(),[l,h]=this.getArrowLikeExpressions(u);if(c||h.length>0){const f=[...a];if(h.length>0){this.state=i,this.state.noArrowAt=f;for(let d=0;d<h.length;d++)f.push(h[d].start);({consequent:u,failed:c}=this.tryParseConditionalConsequent()),[l,h]=this.getArrowLikeExpressions(u)}c&&l.length>1&&this.raise(i.start,J.AmbiguousConditionalArrow),c&&l.length===1&&(this.state=i,f.push(l[0].start),this.state.noArrowAt=f,{consequent:u,failed:c}=this.tryParseConditionalConsequent())}return this.getArrowLikeExpressions(u,!0),this.state.noArrowAt=a,this.expect(14),o.test=e,o.consequent=u,o.alternate=this.forwardNoArrowParamsConversionAt(o,()=>this.parseMaybeAssign(void 0,void 0)),this.finishNode(o,"ConditionalExpression")}tryParseConditionalConsequent(){this.state.noArrowParamsConversionAt.push(this.state.start);const e=this.parseMaybeAssignAllowIn(),t=!this.match(14);return this.state.noArrowParamsConversionAt.pop(),{consequent:e,failed:t}}getArrowLikeExpressions(e,t){const r=[e],n=[];for(;r.length!==0;){const i=r.pop();i.type==="ArrowFunctionExpression"?(i.typeParameters||!i.returnType?this.finishArrowValidation(i):n.push(i),r.push(i.body)):i.type==="ConditionalExpression"&&(r.push(i.consequent),r.push(i.alternate))}return t?(n.forEach(i=>this.finishArrowValidation(i)),[n,[]]):sM(n,i=>i.params.every(a=>this.isAssignable(a,!0)))}finishArrowValidation(e){var t;this.toAssignableList(e.params,(t=e.extra)==null?void 0:t.trailingComma,!1),this.scope.enter($r|dm),super.checkParams(e,!1,!0),this.scope.exit()}forwardNoArrowParamsConversionAt(e,t){let r;return this.state.noArrowParamsConversionAt.indexOf(e.start)!==-1?(this.state.noArrowParamsConversionAt.push(this.state.start),r=t(),this.state.noArrowParamsConversionAt.pop()):r=t(),r}parseParenItem(e,t,r){if(e=super.parseParenItem(e,t,r),this.eat(17)&&(e.optional=!0,this.resetEndLocation(e)),this.match(14)){const n=this.startNodeAt(t,r);return n.expression=e,n.typeAnnotation=this.flowParseTypeAnnotation(),this.finishNode(n,"TypeCastExpression")}return e}assertModuleNodeAllowed(e){e.type==="ImportDeclaration"&&(e.importKind==="type"||e.importKind==="typeof")||e.type==="ExportNamedDeclaration"&&e.exportKind==="type"||e.type==="ExportAllDeclaration"&&e.exportKind==="type"||super.assertModuleNodeAllowed(e)}parseExport(e){const t=super.parseExport(e);return(t.type==="ExportNamedDeclaration"||t.type==="ExportAllDeclaration")&&(t.exportKind=t.exportKind||"value"),t}parseExportDeclaration(e){if(this.isContextual(120)){e.exportKind="type";const t=this.startNode();return this.next(),this.match(5)?(e.specifiers=this.parseExportSpecifiers(!0),this.parseExportFrom(e),null):this.flowParseTypeAlias(t)}else if(this.isContextual(121)){e.exportKind="type";const t=this.startNode();return this.next(),this.flowParseOpaqueType(t,!1)}else if(this.isContextual(119)){e.exportKind="type";const t=this.startNode();return this.next(),this.flowParseInterface(t)}else if(this.shouldParseEnums()&&this.isContextual(116)){e.exportKind="value";const t=this.startNode();return this.next(),this.flowParseEnumDeclaration(t)}else return super.parseExportDeclaration(e)}eatExportStar(e){return super.eatExportStar(...arguments)?!0:this.isContextual(120)&&this.lookahead().type===49?(e.exportKind="type",this.next(),this.next(),!0):!1}maybeParseExportNamespaceSpecifier(e){const t=this.state.start,r=super.maybeParseExportNamespaceSpecifier(e);return r&&e.exportKind==="type"&&this.unexpected(t),r}parseClassId(e,t,r){super.parseClassId(e,t,r),this.match(43)&&(e.typeParameters=this.flowParseTypeParameterDeclaration())}parseClassMember(e,t,r){const n=this.state.start;if(this.isContextual(115)){if(this.parseClassMemberFromModifier(e,t))return;t.declare=!0}super.parseClassMember(e,t,r),t.declare&&(t.type!=="ClassProperty"&&t.type!=="ClassPrivateProperty"&&t.type!=="PropertyDefinition"?this.raise(n,J.DeclareClassElement):t.value&&this.raise(t.value.start,J.DeclareClassFieldInitializer))}isIterator(e){return e==="iterator"||e==="asyncIterator"}readIterator(){const e=super.readWord1(),t="@@"+e;(!this.isIterator(e)||!this.state.inType)&&this.raise(this.state.pos,_.InvalidIdentifier,t),this.finishToken(122,t)}getTokenFromCode(e){const t=this.input.charCodeAt(this.state.pos+1);return e===123&&t===124?this.finishOp(6,2):this.state.inType&&(e===62||e===60)?this.finishOp(e===62?44:43,1):this.state.inType&&e===63?t===46?this.finishOp(18,2):this.finishOp(17,1):IR(e,t)?(this.state.pos+=2,this.readIterator()):super.getTokenFromCode(e)}isAssignable(e,t){return e.type==="TypeCastExpression"?this.isAssignable(e.expression,t):super.isAssignable(e,t)}toAssignable(e,t=!1){return e.type==="TypeCastExpression"?super.toAssignable(this.typeCastToParameter(e),t):super.toAssignable(e,t)}toAssignableList(e,t,r){for(let n=0;n<e.length;n++){const i=e[n];(i==null?void 0:i.type)==="TypeCastExpression"&&(e[n]=this.typeCastToParameter(i))}return super.toAssignableList(e,t,r)}toReferencedList(e,t){for(let n=0;n<e.length;n++){var r;const i=e[n];i&&i.type==="TypeCastExpression"&&!((r=i.extra)!=null&&r.parenthesized)&&(e.length>1||!t)&&this.raise(i.typeAnnotation.start,J.TypeCastInPattern)}return e}parseArrayLike(e,t,r,n){const i=super.parseArrayLike(e,t,r,n);return t&&!this.state.maybeInArrowParameters&&this.toReferencedList(i.elements),i}checkLVal(e,...t){if(e.type!=="TypeCastExpression")return super.checkLVal(e,...t)}parseClassProperty(e){return this.match(14)&&(e.typeAnnotation=this.flowParseTypeAnnotation()),super.parseClassProperty(e)}parseClassPrivateProperty(e){return this.match(14)&&(e.typeAnnotation=this.flowParseTypeAnnotation()),super.parseClassPrivateProperty(e)}isClassMethod(){return this.match(43)||super.isClassMethod()}isClassProperty(){return this.match(14)||super.isClassProperty()}isNonstaticConstructor(e){return!this.match(14)&&super.isNonstaticConstructor(e)}pushClassMethod(e,t,r,n,i,a){if(t.variance&&this.unexpected(t.variance.start),delete t.variance,this.match(43)&&(t.typeParameters=this.flowParseTypeParameterDeclaration()),super.pushClassMethod(e,t,r,n,i,a),t.params&&i){const o=t.params;o.length>0&&this.isThisParam(o[0])&&this.raise(t.start,J.ThisParamBannedInConstructor)}else if(t.type==="MethodDefinition"&&i&&t.value.params){const o=t.value.params;o.length>0&&this.isThisParam(o[0])&&this.raise(t.start,J.ThisParamBannedInConstructor)}}pushClassPrivateMethod(e,t,r,n){t.variance&&this.unexpected(t.variance.start),delete t.variance,this.match(43)&&(t.typeParameters=this.flowParseTypeParameterDeclaration()),super.pushClassPrivateMethod(e,t,r,n)}parseClassSuper(e){if(super.parseClassSuper(e),e.superClass&&this.match(43)&&(e.superTypeParameters=this.flowParseTypeParameterInstantiation()),this.isContextual(104)){this.next();const t=e.implements=[];do{const r=this.startNode();r.id=this.flowParseRestrictedIdentifier(!0),this.match(43)?r.typeParameters=this.flowParseTypeParameterInstantiation():r.typeParameters=null,t.push(this.finishNode(r,"ClassImplements"))}while(this.eat(12))}}checkGetterSetterParams(e){super.checkGetterSetterParams(e);const t=this.getObjectOrClassMethodParams(e);if(t.length>0){const r=t[0];this.isThisParam(r)&&e.kind==="get"?this.raise(r.start,J.GetterMayNotHaveThisParam):this.isThisParam(r)&&this.raise(r.start,J.SetterMayNotHaveThisParam)}}parsePropertyNamePrefixOperator(e){e.variance=this.flowParseVariance()}parseObjPropValue(e,t,r,n,i,a,o,u){e.variance&&this.unexpected(e.variance.start),delete e.variance;let c;this.match(43)&&!o&&(c=this.flowParseTypeParameterDeclaration(),this.match(10)||this.unexpected()),super.parseObjPropValue(e,t,r,n,i,a,o,u),c&&((e.value||e).typeParameters=c)}parseAssignableListItemTypes(e){return this.eat(17)&&(e.type!=="Identifier"&&this.raise(e.start,J.PatternIsOptional),this.isThisParam(e)&&this.raise(e.start,J.ThisParamMayNotBeOptional),e.optional=!0),this.match(14)?e.typeAnnotation=this.flowParseTypeAnnotation():this.isThisParam(e)&&this.raise(e.start,J.ThisParamAnnotationRequired),this.match(27)&&this.isThisParam(e)&&this.raise(e.start,J.ThisParamNoDefault),this.resetEndLocation(e),e}parseMaybeDefault(e,t,r){const n=super.parseMaybeDefault(e,t,r);return n.type==="AssignmentPattern"&&n.typeAnnotation&&n.right.start<n.typeAnnotation.start&&this.raise(n.typeAnnotation.start,J.TypeBeforeInitializer),n}shouldParseDefaultImport(e){return kh(e)?Wy(this.state.type):super.shouldParseDefaultImport(e)}parseImportSpecifierLocal(e,t,r,n){t.local=kh(e)?this.flowParseRestrictedIdentifier(!0,!0):this.parseIdentifier(),this.checkLVal(t.local,n,Yt),e.specifiers.push(this.finishNode(t,r))}maybeParseDefaultImportSpecifier(e){e.importKind="value";let t=null;if(this.match(81)?t="typeof":this.isContextual(120)&&(t="type"),t){const r=this.lookahead(),{type:n}=r;t==="type"&&n===49&&this.unexpected(r.start),(Wy(n)||n===5||n===49)&&(this.next(),e.importKind=t)}return super.maybeParseDefaultImportSpecifier(e)}parseImportSpecifier(e,t,r,n){const i=e.imported;let a=null;i.type==="Identifier"&&(i.name==="type"?a="type":i.name==="typeof"&&(a="typeof"));let o=!1;if(this.isContextual(87)&&!this.isLookaheadContextual("as")){const c=this.parseIdentifier(!0);a!==null&&!Qr(this.state.type)?(e.imported=c,e.importKind=a,e.local=Yr(c)):(e.imported=i,e.importKind=null,e.local=this.parseIdentifier())}else{if(a!==null&&Qr(this.state.type))e.imported=this.parseIdentifier(!0),e.importKind=a;else{if(t)throw this.raise(e.start,_.ImportBindingIsString,i.value);e.imported=i,e.importKind=null}this.eatContextual(87)?e.local=this.parseIdentifier():(o=!0,e.local=Yr(e.imported))}const u=kh(e);return r&&u&&this.raise(e.start,J.ImportTypeShorthandOnlyInPureImport),(r||u)&&this.checkReservedType(e.local.name,e.local.start,!0),o&&!r&&!u&&this.checkReservedWord(e.local.name,e.start,!0,!0),this.checkLVal(e.local,"import specifier",Yt),this.finishNode(e,"ImportSpecifier")}parseBindingAtom(){switch(this.state.type){case 72:return this.parseIdentifier(!0);default:return super.parseBindingAtom()}}parseFunctionParams(e,t){const r=e.kind;r!=="get"&&r!=="set"&&this.match(43)&&(e.typeParameters=this.flowParseTypeParameterDeclaration()),super.parseFunctionParams(e,t)}parseVarId(e,t){super.parseVarId(e,t),this.match(14)&&(e.id.typeAnnotation=this.flowParseTypeAnnotation(),this.resetEndLocation(e.id))}parseAsyncArrowFromCallExpression(e,t){if(this.match(14)){const r=this.state.noAnonFunctionType;this.state.noAnonFunctionType=!0,e.returnType=this.flowParseTypeAnnotation(),this.state.noAnonFunctionType=r}return super.parseAsyncArrowFromCallExpression(e,t)}shouldParseAsyncArrow(){return this.match(14)||super.shouldParseAsyncArrow()}parseMaybeAssign(e,t){var r;let n=null,i;if(this.hasPlugin("jsx")&&(this.match(132)||this.match(43))){if(n=this.state.clone(),i=this.tryParse(()=>super.parseMaybeAssign(e,t),n),!i.error)return i.node;const{context:u}=this.state,c=u[u.length-1];c===Pe.j_oTag?u.length-=2:c===Pe.j_expr&&(u.length-=1)}if((r=i)!=null&&r.error||this.match(43)){var a,o;n=n||this.state.clone();let u;const c=this.tryParse(h=>{var f;u=this.flowParseTypeParameterDeclaration();const d=this.forwardNoArrowParamsConversionAt(u,()=>{const p=super.parseMaybeAssign(e,t);return this.resetStartLocationFromNode(p,u),p});(f=d.extra)!=null&&f.parenthesized&&h();const g=this.maybeUnwrapTypeCastExpression(d);return g.type!=="ArrowFunctionExpression"&&h(),g.typeParameters=u,this.resetStartLocationFromNode(g,u),d},n);let l=null;if(c.node&&this.maybeUnwrapTypeCastExpression(c.node).type==="ArrowFunctionExpression"){if(!c.error&&!c.aborted)return c.node.async&&this.raise(u.start,J.UnexpectedTypeParameterBeforeAsyncArrowFunction),c.node;l=c.node}if((a=i)!=null&&a.node)return this.state=i.failState,i.node;if(l)return this.state=c.failState,l;throw(o=i)!=null&&o.thrown?i.error:c.thrown?c.error:this.raise(u.start,J.UnexpectedTokenAfterTypeParameter)}return super.parseMaybeAssign(e,t)}parseArrow(e){if(this.match(14)){const t=this.tryParse(()=>{const r=this.state.noAnonFunctionType;this.state.noAnonFunctionType=!0;const n=this.startNode();return[n.typeAnnotation,e.predicate]=this.flowParseTypeAndPredicateInitialiser(),this.state.noAnonFunctionType=r,this.canInsertSemicolon()&&this.unexpected(),this.match(19)||this.unexpected(),n});if(t.thrown)return null;t.error&&(this.state=t.failState),e.returnType=t.node.typeAnnotation?this.finishNode(t.node,"TypeAnnotation"):null}return super.parseArrow(e)}shouldParseArrow(e){return this.match(14)||super.shouldParseArrow(e)}setArrowFunctionParameters(e,t){this.state.noArrowParamsConversionAt.indexOf(e.start)!==-1?e.params=t:super.setArrowFunctionParameters(e,t)}checkParams(e,t,r){if(!(r&&this.state.noArrowParamsConversionAt.indexOf(e.start)!==-1)){for(let n=0;n<e.params.length;n++)this.isThisParam(e.params[n])&&n>0&&this.raise(e.params[n].start,J.ThisParamMustBeFirst);return super.checkParams(...arguments)}}parseParenAndDistinguishExpression(e){return super.parseParenAndDistinguishExpression(e&&this.state.noArrowAt.indexOf(this.state.start)===-1)}parseSubscripts(e,t,r,n){if(e.type==="Identifier"&&e.name==="async"&&this.state.noArrowAt.indexOf(t)!==-1){this.next();const i=this.startNodeAt(t,r);i.callee=e,i.arguments=this.parseCallExpressionArguments(11,!1),e=this.finishNode(i,"CallExpression")}else if(e.type==="Identifier"&&e.name==="async"&&this.match(43)){const i=this.state.clone(),a=this.tryParse(u=>this.parseAsyncArrowWithTypeParameters(t,r)||u(),i);if(!a.error&&!a.aborted)return a.node;const o=this.tryParse(()=>super.parseSubscripts(e,t,r,n),i);if(o.node&&!o.error)return o.node;if(a.node)return this.state=a.failState,a.node;if(o.node)return this.state=o.failState,o.node;throw a.error||o.error}return super.parseSubscripts(e,t,r,n)}parseSubscript(e,t,r,n,i){if(this.match(18)&&this.isLookaheadToken_lt()){if(i.optionalChainMember=!0,n)return i.stop=!0,e;this.next();const a=this.startNodeAt(t,r);return a.callee=e,a.typeArguments=this.flowParseTypeParameterInstantiation(),this.expect(10),a.arguments=this.parseCallExpressionArguments(11,!1),a.optional=!0,this.finishCallExpression(a,!0)}else if(!n&&this.shouldParseTypes()&&this.match(43)){const a=this.startNodeAt(t,r);a.callee=e;const o=this.tryParse(()=>(a.typeArguments=this.flowParseTypeParameterInstantiationCallOrNew(),this.expect(10),a.arguments=this.parseCallExpressionArguments(11,!1),i.optionalChainMember&&(a.optional=!1),this.finishCallExpression(a,i.optionalChainMember)));if(o.node)return o.error&&(this.state=o.failState),o.node}return super.parseSubscript(e,t,r,n,i)}parseNewArguments(e){let t=null;this.shouldParseTypes()&&this.match(43)&&(t=this.tryParse(()=>this.flowParseTypeParameterInstantiationCallOrNew()).node),e.typeArguments=t,super.parseNewArguments(e)}parseAsyncArrowWithTypeParameters(e,t){const r=this.startNodeAt(e,t);if(this.parseFunctionParams(r),!!this.parseArrow(r))return this.parseArrowExpression(r,void 0,!0)}readToken_mult_modulo(e){const t=this.input.charCodeAt(this.state.pos+1);if(e===42&&t===47&&this.state.hasFlowComment){this.state.hasFlowComment=!1,this.state.pos+=2,this.nextToken();return}super.readToken_mult_modulo(e)}readToken_pipe_amp(e){const t=this.input.charCodeAt(this.state.pos+1);if(e===124&&t===125){this.finishOp(9,2);return}super.readToken_pipe_amp(e)}parseTopLevel(e,t){const r=super.parseTopLevel(e,t);return this.state.hasFlowComment&&this.raise(this.state.pos,J.UnterminatedFlowComment),r}skipBlockComment(){if(this.hasPlugin("flowComments")&&this.skipFlowComment()){this.state.hasFlowComment&&this.unexpected(null,J.NestedFlowComment),this.hasFlowCommentCompletion(),this.state.pos+=this.skipFlowComment(),this.state.hasFlowComment=!0;return}if(this.state.hasFlowComment){const e=this.input.indexOf("*-/",this.state.pos+=2);if(e===-1)throw this.raise(this.state.pos-2,_.UnterminatedComment);this.state.pos=e+3;return}return super.skipBlockComment()}skipFlowComment(){const{pos:e}=this.state;let t=2;for(;[32,9].includes(this.input.charCodeAt(e+t));)t++;const r=this.input.charCodeAt(t+e),n=this.input.charCodeAt(t+e+1);return r===58&&n===58?t+2:this.input.slice(t+e,t+e+12)==="flow-include"?t+12:r===58&&n!==58?t:!1}hasFlowCommentCompletion(){if(this.input.indexOf("*/",this.state.pos)===-1)throw this.raise(this.state.pos,_.UnterminatedComment)}flowEnumErrorBooleanMemberNotInitialized(e,{enumName:t,memberName:r}){this.raise(e,J.EnumBooleanMemberNotInitialized,r,t)}flowEnumErrorInvalidMemberName(e,{enumName:t,memberName:r}){const n=r[0].toUpperCase()+r.slice(1);this.raise(e,J.EnumInvalidMemberName,r,n,t)}flowEnumErrorDuplicateMemberName(e,{enumName:t,memberName:r}){this.raise(e,J.EnumDuplicateMemberName,r,t)}flowEnumErrorInconsistentMemberValues(e,{enumName:t}){this.raise(e,J.EnumInconsistentMemberValues,t)}flowEnumErrorInvalidExplicitType(e,{enumName:t,suppliedType:r}){return this.raise(e,r===null?J.EnumInvalidExplicitTypeUnknownSupplied:J.EnumInvalidExplicitType,t,r)}flowEnumErrorInvalidMemberInitializer(e,{enumName:t,explicitType:r,memberName:n}){let i=null;switch(r){case"boolean":case"number":case"string":i=J.EnumInvalidMemberInitializerPrimaryType;break;case"symbol":i=J.EnumInvalidMemberInitializerSymbolType;break;default:i=J.EnumInvalidMemberInitializerUnknownType}return this.raise(e,i,t,n,r)}flowEnumErrorNumberMemberNotInitialized(e,{enumName:t,memberName:r}){this.raise(e,J.EnumNumberMemberNotInitialized,t,r)}flowEnumErrorStringMemberInconsistentlyInitailized(e,{enumName:t}){this.raise(e,J.EnumStringMemberInconsistentlyInitailized,t)}flowEnumMemberInit(){const e=this.state.start,t=()=>this.match(12)||this.match(8);switch(this.state.type){case 124:{const r=this.parseNumericLiteral(this.state.value);return t()?{type:"number",pos:r.start,value:r}:{type:"invalid",pos:e}}case 123:{const r=this.parseStringLiteral(this.state.value);return t()?{type:"string",pos:r.start,value:r}:{type:"invalid",pos:e}}case 79:case 80:{const r=this.parseBooleanLiteral(this.match(79));return t()?{type:"boolean",pos:r.start,value:r}:{type:"invalid",pos:e}}default:return{type:"invalid",pos:e}}}flowEnumMemberRaw(){const e=this.state.start,t=this.parseIdentifier(!0),r=this.eat(27)?this.flowEnumMemberInit():{type:"none",pos:e};return{id:t,init:r}}flowEnumCheckExplicitTypeMismatch(e,t,r){const{explicitType:n}=t;n!==null&&n!==r&&this.flowEnumErrorInvalidMemberInitializer(e,t)}flowEnumMembers({enumName:e,explicitType:t}){const r=new Set,n={booleanMembers:[],numberMembers:[],stringMembers:[],defaultedMembers:[]};let i=!1;for(;!this.match(8);){if(this.eat(21)){i=!0;break}const a=this.startNode(),{id:o,init:u}=this.flowEnumMemberRaw(),c=o.name;if(c==="")continue;/^[a-z]/.test(c)&&this.flowEnumErrorInvalidMemberName(o.start,{enumName:e,memberName:c}),r.has(c)&&this.flowEnumErrorDuplicateMemberName(o.start,{enumName:e,memberName:c}),r.add(c);const l={enumName:e,explicitType:t,memberName:c};switch(a.id=o,u.type){case"boolean":{this.flowEnumCheckExplicitTypeMismatch(u.pos,l,"boolean"),a.init=u.value,n.booleanMembers.push(this.finishNode(a,"EnumBooleanMember"));break}case"number":{this.flowEnumCheckExplicitTypeMismatch(u.pos,l,"number"),a.init=u.value,n.numberMembers.push(this.finishNode(a,"EnumNumberMember"));break}case"string":{this.flowEnumCheckExplicitTypeMismatch(u.pos,l,"string"),a.init=u.value,n.stringMembers.push(this.finishNode(a,"EnumStringMember"));break}case"invalid":throw this.flowEnumErrorInvalidMemberInitializer(u.pos,l);case"none":switch(t){case"boolean":this.flowEnumErrorBooleanMemberNotInitialized(u.pos,l);break;case"number":this.flowEnumErrorNumberMemberNotInitialized(u.pos,l);break;default:n.defaultedMembers.push(this.finishNode(a,"EnumDefaultedMember"))}}this.match(8)||this.expect(12)}return{members:n,hasUnknownMembers:i}}flowEnumStringMembers(e,t,{enumName:r}){if(e.length===0)return t;if(t.length===0)return e;if(t.length>e.length){for(const n of e)this.flowEnumErrorStringMemberInconsistentlyInitailized(n.start,{enumName:r});return t}else{for(const n of t)this.flowEnumErrorStringMemberInconsistentlyInitailized(n.start,{enumName:r});return e}}flowEnumParseExplicitType({enumName:e}){if(this.eatContextual(95)){if(!we(this.state.type))throw this.flowEnumErrorInvalidExplicitType(this.state.start,{enumName:e,suppliedType:null});const{value:t}=this.state;return this.next(),t!=="boolean"&&t!=="number"&&t!=="string"&&t!=="symbol"&&this.flowEnumErrorInvalidExplicitType(this.state.start,{enumName:e,suppliedType:t}),t}return null}flowEnumBody(e,{enumName:t,nameLoc:r}){const n=this.flowEnumParseExplicitType({enumName:t});this.expect(5);const{members:i,hasUnknownMembers:a}=this.flowEnumMembers({enumName:t,explicitType:n});switch(e.hasUnknownMembers=a,n){case"boolean":return e.explicitType=!0,e.members=i.booleanMembers,this.expect(8),this.finishNode(e,"EnumBooleanBody");case"number":return e.explicitType=!0,e.members=i.numberMembers,this.expect(8),this.finishNode(e,"EnumNumberBody");case"string":return e.explicitType=!0,e.members=this.flowEnumStringMembers(i.stringMembers,i.defaultedMembers,{enumName:t}),this.expect(8),this.finishNode(e,"EnumStringBody");case"symbol":return e.members=i.defaultedMembers,this.expect(8),this.finishNode(e,"EnumSymbolBody");default:{const o=()=>(e.members=[],this.expect(8),this.finishNode(e,"EnumStringBody"));e.explicitType=!1;const u=i.booleanMembers.length,c=i.numberMembers.length,l=i.stringMembers.length,h=i.defaultedMembers.length;if(!u&&!c&&!l&&!h)return o();if(!u&&!c)return e.members=this.flowEnumStringMembers(i.stringMembers,i.defaultedMembers,{enumName:t}),this.expect(8),this.finishNode(e,"EnumStringBody");if(!c&&!l&&u>=h){for(const f of i.defaultedMembers)this.flowEnumErrorBooleanMemberNotInitialized(f.start,{enumName:t,memberName:f.id.name});return e.members=i.booleanMembers,this.expect(8),this.finishNode(e,"EnumBooleanBody")}else if(!u&&!l&&c>=h){for(const f of i.defaultedMembers)this.flowEnumErrorNumberMemberNotInitialized(f.start,{enumName:t,memberName:f.id.name});return e.members=i.numberMembers,this.expect(8),this.finishNode(e,"EnumNumberBody")}else return this.flowEnumErrorInconsistentMemberValues(r,{enumName:t}),o()}}}flowParseEnumDeclaration(e){const t=this.parseIdentifier();return e.id=t,e.body=this.flowEnumBody(this.startNode(),{enumName:t.name,nameLoc:t.start}),this.finishNode(e,"EnumDeclaration")}isLookaheadToken_lt(){const e=this.nextTokenStart();if(this.input.charCodeAt(e)===60){const t=this.input.charCodeAt(e+1);return t!==60&&t!==61}return!1}maybeUnwrapTypeCastExpression(e){return e.type==="TypeCastExpression"?e.expression:e}};const aM={quot:'"',amp:"&",apos:"'",lt:"<",gt:">",nbsp:"\xA0",iexcl:"\xA1",cent:"\xA2",pound:"\xA3",curren:"\xA4",yen:"\xA5",brvbar:"\xA6",sect:"\xA7",uml:"\xA8",copy:"\xA9",ordf:"\xAA",laquo:"\xAB",not:"\xAC",shy:"\xAD",reg:"\xAE",macr:"\xAF",deg:"\xB0",plusmn:"\xB1",sup2:"\xB2",sup3:"\xB3",acute:"\xB4",micro:"\xB5",para:"\xB6",middot:"\xB7",cedil:"\xB8",sup1:"\xB9",ordm:"\xBA",raquo:"\xBB",frac14:"\xBC",frac12:"\xBD",frac34:"\xBE",iquest:"\xBF",Agrave:"\xC0",Aacute:"\xC1",Acirc:"\xC2",Atilde:"\xC3",Auml:"\xC4",Aring:"\xC5",AElig:"\xC6",Ccedil:"\xC7",Egrave:"\xC8",Eacute:"\xC9",Ecirc:"\xCA",Euml:"\xCB",Igrave:"\xCC",Iacute:"\xCD",Icirc:"\xCE",Iuml:"\xCF",ETH:"\xD0",Ntilde:"\xD1",Ograve:"\xD2",Oacute:"\xD3",Ocirc:"\xD4",Otilde:"\xD5",Ouml:"\xD6",times:"\xD7",Oslash:"\xD8",Ugrave:"\xD9",Uacute:"\xDA",Ucirc:"\xDB",Uuml:"\xDC",Yacute:"\xDD",THORN:"\xDE",szlig:"\xDF",agrave:"\xE0",aacute:"\xE1",acirc:"\xE2",atilde:"\xE3",auml:"\xE4",aring:"\xE5",aelig:"\xE6",ccedil:"\xE7",egrave:"\xE8",eacute:"\xE9",ecirc:"\xEA",euml:"\xEB",igrave:"\xEC",iacute:"\xED",icirc:"\xEE",iuml:"\xEF",eth:"\xF0",ntilde:"\xF1",ograve:"\xF2",oacute:"\xF3",ocirc:"\xF4",otilde:"\xF5",ouml:"\xF6",divide:"\xF7",oslash:"\xF8",ugrave:"\xF9",uacute:"\xFA",ucirc:"\xFB",uuml:"\xFC",yacute:"\xFD",thorn:"\xFE",yuml:"\xFF",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",fnof:"\u0192",circ:"\u02C6",tilde:"\u02DC",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039A",Lambda:"\u039B",Mu:"\u039C",Nu:"\u039D",Xi:"\u039E",Omicron:"\u039F",Pi:"\u03A0",Rho:"\u03A1",Sigma:"\u03A3",Tau:"\u03A4",Upsilon:"\u03A5",Phi:"\u03A6",Chi:"\u03A7",Psi:"\u03A8",Omega:"\u03A9",alpha:"\u03B1",beta:"\u03B2",gamma:"\u03B3",delta:"\u03B4",epsilon:"\u03B5",zeta:"\u03B6",eta:"\u03B7",theta:"\u03B8",iota:"\u03B9",kappa:"\u03BA",lambda:"\u03BB",mu:"\u03BC",nu:"\u03BD",xi:"\u03BE",omicron:"\u03BF",pi:"\u03C0",rho:"\u03C1",sigmaf:"\u03C2",sigma:"\u03C3",tau:"\u03C4",upsilon:"\u03C5",phi:"\u03C6",chi:"\u03C7",psi:"\u03C8",omega:"\u03C9",thetasym:"\u03D1",upsih:"\u03D2",piv:"\u03D6",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200C",zwj:"\u200D",lrm:"\u200E",rlm:"\u200F",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201A",ldquo:"\u201C",rdquo:"\u201D",bdquo:"\u201E",dagger:"\u2020",Dagger:"\u2021",bull:"\u2022",hellip:"\u2026",permil:"\u2030",prime:"\u2032",Prime:"\u2033",lsaquo:"\u2039",rsaquo:"\u203A",oline:"\u203E",frasl:"\u2044",euro:"\u20AC",image:"\u2111",weierp:"\u2118",real:"\u211C",trade:"\u2122",alefsym:"\u2135",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21B5",lArr:"\u21D0",uArr:"\u21D1",rArr:"\u21D2",dArr:"\u21D3",hArr:"\u21D4",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220B",prod:"\u220F",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221A",prop:"\u221D",infin:"\u221E",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222A",int:"\u222B",there4:"\u2234",sim:"\u223C",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22A5",sdot:"\u22C5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230A",rfloor:"\u230B",lang:"\u2329",rang:"\u232A",loz:"\u25CA",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666"},oM=/^[\da-fA-F]+$/,uM=/^\d+$/,Hs=Xi({AttributeIsEmpty:"JSX attributes must only be assigned a non-empty expression.",MissingClosingTagElement:"Expected corresponding JSX closing tag for <%0>.",MissingClosingTagFragment:"Expected corresponding JSX closing tag for <>.",UnexpectedSequenceExpression:"Sequence expressions cannot be directly nested inside JSX. Did you mean to wrap it in parentheses (...)?",UnsupportedJsxValue:"JSX value should be either an expression or a quoted JSX text.",UnterminatedJsxContent:"Unterminated JSX contents.",UnwrappedAdjacentJSXElements:"Adjacent JSX elements must be wrapped in an enclosing tag. Did you want a JSX fragment <>...</>?"},Hr.SyntaxError,"jsx");Pe.j_oTag=new Io("<tag");Pe.j_cTag=new Io("</tag");Pe.j_expr=new Io("<tag>...</tag>",!0);function gs(s){return s?s.type==="JSXOpeningFragment"||s.type==="JSXClosingFragment":!1}function ei(s){if(s.type==="JSXIdentifier")return s.name;if(s.type==="JSXNamespacedName")return s.namespace.name+":"+s.name.name;if(s.type==="JSXMemberExpression")return ei(s.object)+"."+ei(s.property);throw new Error("Node had unexpected type: "+s.type)}var cM=s=>class extends s{jsxReadToken(){let e="",t=this.state.pos;for(;;){if(this.state.pos>=this.length)throw this.raise(this.state.start,Hs.UnterminatedJsxContent);const r=this.input.charCodeAt(this.state.pos);switch(r){case 60:case 123:return this.state.pos===this.state.start?r===60&&this.state.canStartJSXElement?(++this.state.pos,this.finishToken(132)):super.getTokenFromCode(r):(e+=this.input.slice(t,this.state.pos),this.finishToken(131,e));case 38:e+=this.input.slice(t,this.state.pos),e+=this.jsxReadEntity(),t=this.state.pos;break;case 62:case 125:default:tn(r)?(e+=this.input.slice(t,this.state.pos),e+=this.jsxReadNewLine(!0),t=this.state.pos):++this.state.pos}}}jsxReadNewLine(e){const t=this.input.charCodeAt(this.state.pos);let r;return++this.state.pos,t===13&&this.input.charCodeAt(this.state.pos)===10?(++this.state.pos,r=e?`
`:`\r
`):r=String.fromCharCode(t),++this.state.curLine,this.state.lineStart=this.state.pos,r}jsxReadString(e){let t="",r=++this.state.pos;for(;;){if(this.state.pos>=this.length)throw this.raise(this.state.start,_.UnterminatedString);const n=this.input.charCodeAt(this.state.pos);if(n===e)break;n===38?(t+=this.input.slice(r,this.state.pos),t+=this.jsxReadEntity(),r=this.state.pos):tn(n)?(t+=this.input.slice(r,this.state.pos),t+=this.jsxReadNewLine(!1),r=this.state.pos):++this.state.pos}return t+=this.input.slice(r,this.state.pos++),this.finishToken(123,t)}jsxReadEntity(){let e="",t=0,r,n=this.input[this.state.pos];const i=++this.state.pos;for(;this.state.pos<this.length&&t++<10;){if(n=this.input[this.state.pos++],n===";"){e[0]==="#"?e[1]==="x"?(e=e.substr(2),oM.test(e)&&(r=String.fromCodePoint(parseInt(e,16)))):(e=e.substr(1),uM.test(e)&&(r=String.fromCodePoint(parseInt(e,10)))):r=aM[e];break}e+=n}return r||(this.state.pos=i,"&")}jsxReadWord(){let e;const t=this.state.pos;do e=this.input.charCodeAt(++this.state.pos);while(ci(e)||e===45);return this.finishToken(130,this.input.slice(t,this.state.pos))}jsxParseIdentifier(){const e=this.startNode();return this.match(130)?e.name=this.state.value:lm(this.state.type)?e.name=Rs(this.state.type):this.unexpected(),this.next(),this.finishNode(e,"JSXIdentifier")}jsxParseNamespacedName(){const e=this.state.start,t=this.state.startLoc,r=this.jsxParseIdentifier();if(!this.eat(14))return r;const n=this.startNodeAt(e,t);return n.namespace=r,n.name=this.jsxParseIdentifier(),this.finishNode(n,"JSXNamespacedName")}jsxParseElementName(){const e=this.state.start,t=this.state.startLoc;let r=this.jsxParseNamespacedName();if(r.type==="JSXNamespacedName")return r;for(;this.eat(16);){const n=this.startNodeAt(e,t);n.object=r,n.property=this.jsxParseIdentifier(),r=this.finishNode(n,"JSXMemberExpression")}return r}jsxParseAttributeValue(){let e;switch(this.state.type){case 5:return e=this.startNode(),this.next(),e=this.jsxParseExpressionContainer(e),e.expression.type==="JSXEmptyExpression"&&this.raise(e.start,Hs.AttributeIsEmpty),e;case 132:case 123:return this.parseExprAtom();default:throw this.raise(this.state.start,Hs.UnsupportedJsxValue)}}jsxParseEmptyExpression(){const e=this.startNodeAt(this.state.lastTokEnd,this.state.lastTokEndLoc);return this.finishNodeAt(e,"JSXEmptyExpression",this.state.start,this.state.startLoc)}jsxParseSpreadChild(e){return this.next(),e.expression=this.parseExpression(),this.expect(8),this.finishNode(e,"JSXSpreadChild")}jsxParseExpressionContainer(e){if(this.match(8))e.expression=this.jsxParseEmptyExpression();else{const t=this.parseExpression();e.expression=t}return this.expect(8),this.finishNode(e,"JSXExpressionContainer")}jsxParseAttribute(){const e=this.startNode();return this.eat(5)?(this.expect(21),e.argument=this.parseMaybeAssignAllowIn(),this.expect(8),this.finishNode(e,"JSXSpreadAttribute")):(e.name=this.jsxParseNamespacedName(),e.value=this.eat(27)?this.jsxParseAttributeValue():null,this.finishNode(e,"JSXAttribute"))}jsxParseOpeningElementAt(e,t){const r=this.startNodeAt(e,t);return this.match(133)?(this.expect(133),this.finishNode(r,"JSXOpeningFragment")):(r.name=this.jsxParseElementName(),this.jsxParseOpeningElementAfterName(r))}jsxParseOpeningElementAfterName(e){const t=[];for(;!this.match(50)&&!this.match(133);)t.push(this.jsxParseAttribute());return e.attributes=t,e.selfClosing=this.eat(50),this.expect(133),this.finishNode(e,"JSXOpeningElement")}jsxParseClosingElementAt(e,t){const r=this.startNodeAt(e,t);return this.match(133)?(this.expect(133),this.finishNode(r,"JSXClosingFragment")):(r.name=this.jsxParseElementName(),this.expect(133),this.finishNode(r,"JSXClosingElement"))}jsxParseElementAt(e,t){const r=this.startNodeAt(e,t),n=[],i=this.jsxParseOpeningElementAt(e,t);let a=null;if(!i.selfClosing){e:for(;;)switch(this.state.type){case 132:if(e=this.state.start,t=this.state.startLoc,this.next(),this.eat(50)){a=this.jsxParseClosingElementAt(e,t);break e}n.push(this.jsxParseElementAt(e,t));break;case 131:n.push(this.parseExprAtom());break;case 5:{const o=this.startNode();this.next(),this.match(21)?n.push(this.jsxParseSpreadChild(o)):n.push(this.jsxParseExpressionContainer(o));break}default:throw this.unexpected()}gs(i)&&!gs(a)?this.raise(a.start,Hs.MissingClosingTagFragment):!gs(i)&&gs(a)?this.raise(a.start,Hs.MissingClosingTagElement,ei(i.name)):!gs(i)&&!gs(a)&&ei(a.name)!==ei(i.name)&&this.raise(a.start,Hs.MissingClosingTagElement,ei(i.name))}if(gs(i)?(r.openingFragment=i,r.closingFragment=a):(r.openingElement=i,r.closingElement=a),r.children=n,this.match(43))throw this.raise(this.state.start,Hs.UnwrappedAdjacentJSXElements);return gs(i)?this.finishNode(r,"JSXFragment"):this.finishNode(r,"JSXElement")}jsxParseElement(){const e=this.state.start,t=this.state.startLoc;return this.next(),this.jsxParseElementAt(e,t)}parseExprAtom(e){return this.match(131)?this.parseLiteral(this.state.value,"JSXText"):this.match(132)?this.jsxParseElement():this.match(43)&&this.input.charCodeAt(this.state.pos)!==33?(this.replaceToken(132),this.jsxParseElement()):super.parseExprAtom(e)}getTokenFromCode(e){const t=this.curContext();if(t===Pe.j_expr)return this.jsxReadToken();if(t===Pe.j_oTag||t===Pe.j_cTag){if(bs(e))return this.jsxReadWord();if(e===62)return++this.state.pos,this.finishToken(133);if((e===34||e===39)&&t===Pe.j_oTag)return this.jsxReadString(e)}return e===60&&this.state.canStartJSXElement&&this.input.charCodeAt(this.state.pos+1)!==33?(++this.state.pos,this.finishToken(132)):super.getTokenFromCode(e)}updateContext(e){super.updateContext(e);const{context:t,type:r}=this.state;if(r===50&&e===132)t.splice(-2,2,Pe.j_cTag),this.state.canStartJSXElement=!1;else if(r===132)t.push(Pe.j_expr,Pe.j_oTag);else if(r===133){const n=t.pop();n===Pe.j_oTag&&e===50||n===Pe.j_cTag?(t.pop(),this.state.canStartJSXElement=t[t.length-1]===Pe.j_expr):this.state.canStartJSXElement=!0}else this.state.canStartJSXElement=oR(r)}};class lM extends ym{constructor(...e){super(...e),this.types=new Set,this.enums=new Set,this.constEnums=new Set,this.classes=new Set,this.exportOnlyBindings=new Set}}class hM extends vm{createScope(e){return new lM(e)}declareName(e,t,r){const n=this.currentScope();if(t&pm){this.maybeExportDefined(n,e),n.exportOnlyBindings.add(e);return}super.declareName(...arguments),t&Oi&&(t&es||(this.checkRedeclarationInScope(n,e,t,r),this.maybeExportDefined(n,e)),n.types.add(e)),t&Rf&&n.enums.add(e),t&Mf&&n.constEnums.add(e),t&Uc&&n.classes.add(e)}isRedeclaredInScope(e,t,r){if(e.enums.has(t)){if(r&Rf){const n=!!(r&Mf),i=e.constEnums.has(t);return n!==i}return!0}return r&Uc&&e.classes.has(t)?e.lexical.has(t)?!!(r&es):!1:r&Oi&&e.types.has(t)?!0:super.isRedeclaredInScope(...arguments)}checkLocalExport(e){const t=this.scopeStack[0],{name:r}=e;!t.types.has(r)&&!t.exportOnlyBindings.has(r)&&super.checkLocalExport(e)}}function fM(s){if(s==null)throw new Error(`Unexpected ${s} value.`);return s}function Ky(s){if(!s)throw new Error("Assert fail")}const ee=Xi({AbstractMethodHasImplementation:"Method '%0' cannot have an implementation because it is marked abstract.",AbstractPropertyHasInitializer:"Property '%0' cannot have an initializer because it is marked abstract.",AccesorCannotDeclareThisParameter:"'get' and 'set' accessors cannot declare 'this' parameters.",AccesorCannotHaveTypeParameters:"An accessor cannot have type parameters.",ClassMethodHasDeclare:"Class methods cannot have the 'declare' modifier.",ClassMethodHasReadonly:"Class methods cannot have the 'readonly' modifier.",ConstructorHasTypeParameters:"Type parameters cannot appear on a constructor declaration.",DeclareAccessor:"'declare' is not allowed in %0ters.",DeclareClassFieldHasInitializer:"Initializers are not allowed in ambient contexts.",DeclareFunctionHasImplementation:"An implementation cannot be declared in ambient contexts.",DuplicateAccessibilityModifier:"Accessibility modifier already seen.",DuplicateModifier:"Duplicate modifier: '%0'.",EmptyHeritageClauseType:"'%0' list cannot be empty.",EmptyTypeArguments:"Type argument list cannot be empty.",EmptyTypeParameters:"Type parameter list cannot be empty.",ExpectedAmbientAfterExportDeclare:"'export declare' must be followed by an ambient declaration.",ImportAliasHasImportType:"An import alias can not use 'import type'.",IncompatibleModifiers:"'%0' modifier cannot be used with '%1' modifier.",IndexSignatureHasAbstract:"Index signatures cannot have the 'abstract' modifier.",IndexSignatureHasAccessibility:"Index signatures cannot have an accessibility modifier ('%0').",IndexSignatureHasDeclare:"Index signatures cannot have the 'declare' modifier.",IndexSignatureHasOverride:"'override' modifier cannot appear on an index signature.",IndexSignatureHasStatic:"Index signatures cannot have the 'static' modifier.",InvalidModifierOnTypeMember:"'%0' modifier cannot appear on a type member.",InvalidModifiersOrder:"'%0' modifier must precede '%1' modifier.",InvalidTupleMemberLabel:"Tuple members must be labeled with a simple identifier.",MissingInterfaceName:"'interface' declarations must be followed by an identifier.",MixedLabeledAndUnlabeledElements:"Tuple members must all have names or all not have names.",NonAbstractClassHasAbstractMethod:"Abstract methods can only appear within an abstract class.",NonClassMethodPropertyHasAbstractModifer:"'abstract' modifier can only appear on a class, method, or property declaration.",OptionalTypeBeforeRequired:"A required element cannot follow an optional element.",OverrideNotInSubClass:"This member cannot have an 'override' modifier because its containing class does not extend another class.",PatternIsOptional:"A binding pattern parameter cannot be optional in an implementation signature.",PrivateElementHasAbstract:"Private elements cannot have the 'abstract' modifier.",PrivateElementHasAccessibility:"Private elements cannot have an accessibility modifier ('%0').",ReadonlyForMethodSignature:"'readonly' modifier can only appear on a property declaration or index signature.",ReservedArrowTypeParam:"This syntax is reserved in files with the .mts or .cts extension. Add a trailing comma, as in `<T,>() => ...`.",ReservedTypeAssertion:"This syntax is reserved in files with the .mts or .cts extension. Use an `as` expression instead.",SetAccesorCannotHaveOptionalParameter:"A 'set' accessor cannot have an optional parameter.",SetAccesorCannotHaveRestParameter:"A 'set' accessor cannot have rest parameter.",SetAccesorCannotHaveReturnType:"A 'set' accessor cannot have a return type annotation.",StaticBlockCannotHaveModifier:"Static class blocks cannot have any modifier.",TypeAnnotationAfterAssign:"Type annotations must come before default assignments, e.g. instead of `age = 25: number` use `age: number = 25`.",TypeImportCannotSpecifyDefaultAndNamed:"A type-only import can specify a default import or named bindings, but not both.",TypeModifierIsUsedInTypeExports:"The 'type' modifier cannot be used on a named export when 'export type' is used on its export statement.",TypeModifierIsUsedInTypeImports:"The 'type' modifier cannot be used on a named import when 'import type' is used on its import statement.",UnexpectedParameterModifier:"A parameter property is only allowed in a constructor implementation.",UnexpectedReadonly:"'readonly' type modifier is only permitted on array and tuple literal types.",UnexpectedTypeAnnotation:"Did not expect a type annotation here.",UnexpectedTypeCastInParameter:"Unexpected type cast in parameter position.",UnsupportedImportTypeArgument:"Argument in a type import must be a string literal.",UnsupportedParameterPropertyKind:"A parameter property may not be declared using a binding pattern.",UnsupportedSignatureParameterKind:"Name in a signature must be an Identifier, ObjectPattern or ArrayPattern, instead got %0."},Hr.SyntaxError,"typescript");function dM(s){switch(s){case"any":return"TSAnyKeyword";case"boolean":return"TSBooleanKeyword";case"bigint":return"TSBigIntKeyword";case"never":return"TSNeverKeyword";case"number":return"TSNumberKeyword";case"object":return"TSObjectKeyword";case"string":return"TSStringKeyword";case"symbol":return"TSSymbolKeyword";case"undefined":return"TSUndefinedKeyword";case"unknown":return"TSUnknownKeyword";default:return}}function Hy(s){return s==="private"||s==="public"||s==="protected"}var pM=s=>class extends s{getScopeHandler(){return hM}tsIsIdentifier(){return we(this.state.type)}tsTokenCanFollowModifier(){return(this.match(0)||this.match(5)||this.match(49)||this.match(21)||this.match(128)||this.isLiteralPropertyName())&&!this.hasPrecedingLineBreak()}tsNextTokenCanFollowModifier(){return this.next(),this.tsTokenCanFollowModifier()}tsParseModifier(e,t){if(!we(this.state.type))return;const r=this.state.value;if(e.indexOf(r)!==-1){if(t&&this.tsIsStartOfStaticBlocks())return;if(this.tsTryParse(this.tsNextTokenCanFollowModifier.bind(this)))return r}}tsParseModifiers(e,t,r,n,i){const a=(u,c,l,h)=>{c===l&&e[h]&&this.raise(u,ee.InvalidModifiersOrder,l,h)},o=(u,c,l,h)=>{(e[l]&&c===h||e[h]&&c===l)&&this.raise(u,ee.IncompatibleModifiers,l,h)};for(;;){const u=this.state.start,c=this.tsParseModifier(t.concat(r!=null?r:[]),i);if(!c)break;Hy(c)?e.accessibility?this.raise(u,ee.DuplicateAccessibilityModifier):(a(u,c,c,"override"),a(u,c,c,"static"),a(u,c,c,"readonly"),e.accessibility=c):(Object.hasOwnProperty.call(e,c)?this.raise(u,ee.DuplicateModifier,c):(a(u,c,"static","readonly"),a(u,c,"static","override"),a(u,c,"override","readonly"),a(u,c,"abstract","override"),o(u,c,"declare","override"),o(u,c,"static","abstract")),e[c]=!0),r!=null&&r.includes(c)&&this.raise(u,n,c)}}tsIsListTerminator(e){switch(e){case"EnumMembers":case"TypeMembers":return this.match(8);case"HeritageClauseElement":return this.match(5);case"TupleElementTypes":return this.match(3);case"TypeParametersOrArguments":return this.match(44)}throw new Error("Unreachable")}tsParseList(e,t){const r=[];for(;!this.tsIsListTerminator(e);)r.push(t());return r}tsParseDelimitedList(e,t,r){return fM(this.tsParseDelimitedListWorker(e,t,!0,r))}tsParseDelimitedListWorker(e,t,r,n){const i=[];let a=-1;for(;!this.tsIsListTerminator(e);){a=-1;const o=t();if(o==null)return;if(i.push(o),this.eat(12)){a=this.state.lastTokStart;continue}if(this.tsIsListTerminator(e))break;r&&this.expect(12);return}return n&&(n.value=a),i}tsParseBracketedList(e,t,r,n,i){n||(r?this.expect(0):this.expect(43));const a=this.tsParseDelimitedList(e,t,i);return r?this.expect(3):this.expect(44),a}tsParseImportType(){const e=this.startNode();return this.expect(77),this.expect(10),this.match(123)||this.raise(this.state.start,ee.UnsupportedImportTypeArgument),e.argument=this.parseExprAtom(),this.expect(11),this.eat(16)&&(e.qualifier=this.tsParseEntityName(!0)),this.match(43)&&(e.typeParameters=this.tsParseTypeArguments()),this.finishNode(e,"TSImportType")}tsParseEntityName(e){let t=this.parseIdentifier();for(;this.eat(16);){const r=this.startNodeAtNode(t);r.left=t,r.right=this.parseIdentifier(e),t=this.finishNode(r,"TSQualifiedName")}return t}tsParseTypeReference(){const e=this.startNode();return e.typeName=this.tsParseEntityName(!1),!this.hasPrecedingLineBreak()&&this.match(43)&&(e.typeParameters=this.tsParseTypeArguments()),this.finishNode(e,"TSTypeReference")}tsParseThisTypePredicate(e){this.next();const t=this.startNodeAtNode(e);return t.parameterName=e,t.typeAnnotation=this.tsParseTypeAnnotation(!1),t.asserts=!1,this.finishNode(t,"TSTypePredicate")}tsParseThisTypeNode(){const e=this.startNode();return this.next(),this.finishNode(e,"TSThisType")}tsParseTypeQuery(){const e=this.startNode();return this.expect(81),this.match(77)?e.exprName=this.tsParseImportType():e.exprName=this.tsParseEntityName(!0),this.finishNode(e,"TSTypeQuery")}tsParseTypeParameter(){const e=this.startNode();return e.name=this.tsParseTypeParameterName(),e.constraint=this.tsEatThenParseType(75),e.default=this.tsEatThenParseType(27),this.finishNode(e,"TSTypeParameter")}tsTryParseTypeParameters(){if(this.match(43))return this.tsParseTypeParameters()}tsParseTypeParameters(){const e=this.startNode();this.match(43)||this.match(132)?this.next():this.unexpected();const t={value:-1};return e.params=this.tsParseBracketedList("TypeParametersOrArguments",this.tsParseTypeParameter.bind(this),!1,!0,t),e.params.length===0&&this.raise(e.start,ee.EmptyTypeParameters),t.value!==-1&&this.addExtra(e,"trailingComma",t.value),this.finishNode(e,"TSTypeParameterDeclaration")}tsTryNextParseConstantContext(){return this.lookahead().type===69?(this.next(),this.tsParseTypeReference()):null}tsFillSignature(e,t){const r=e===19;t.typeParameters=this.tsTryParseTypeParameters(),this.expect(10),t.parameters=this.tsParseBindingListForSignature(),r?t.typeAnnotation=this.tsParseTypeOrTypePredicateAnnotation(e):this.match(e)&&(t.typeAnnotation=this.tsParseTypeOrTypePredicateAnnotation(e))}tsParseBindingListForSignature(){return this.parseBindingList(11,41).map(e=>(e.type!=="Identifier"&&e.type!=="RestElement"&&e.type!=="ObjectPattern"&&e.type!=="ArrayPattern"&&this.raise(e.start,ee.UnsupportedSignatureParameterKind,e.type),e))}tsParseTypeMemberSemicolon(){!this.eat(12)&&!this.isLineTerminator()&&this.expect(13)}tsParseSignatureMember(e,t){return this.tsFillSignature(14,t),this.tsParseTypeMemberSemicolon(),this.finishNode(t,e)}tsIsUnambiguouslyIndexSignature(){return this.next(),we(this.state.type)?(this.next(),this.match(14)):!1}tsTryParseIndexSignature(e){if(!(this.match(0)&&this.tsLookAhead(this.tsIsUnambiguouslyIndexSignature.bind(this))))return;this.expect(0);const t=this.parseIdentifier();t.typeAnnotation=this.tsParseTypeAnnotation(),this.resetEndLocation(t),this.expect(3),e.parameters=[t];const r=this.tsTryParseTypeAnnotation();return r&&(e.typeAnnotation=r),this.tsParseTypeMemberSemicolon(),this.finishNode(e,"TSIndexSignature")}tsParsePropertyOrMethodSignature(e,t){this.eat(17)&&(e.optional=!0);const r=e;if(this.match(10)||this.match(43)){t&&this.raise(e.start,ee.ReadonlyForMethodSignature);const n=r;if(n.kind&&this.match(43)&&this.raise(this.state.pos,ee.AccesorCannotHaveTypeParameters),this.tsFillSignature(14,n),this.tsParseTypeMemberSemicolon(),n.kind==="get")n.parameters.length>0&&(this.raise(this.state.pos,_.BadGetterArity),this.isThisParam(n.parameters[0])&&this.raise(this.state.pos,ee.AccesorCannotDeclareThisParameter));else if(n.kind==="set"){if(n.parameters.length!==1)this.raise(this.state.pos,_.BadSetterArity);else{const i=n.parameters[0];this.isThisParam(i)&&this.raise(this.state.pos,ee.AccesorCannotDeclareThisParameter),i.type==="Identifier"&&i.optional&&this.raise(this.state.pos,ee.SetAccesorCannotHaveOptionalParameter),i.type==="RestElement"&&this.raise(this.state.pos,ee.SetAccesorCannotHaveRestParameter)}n.typeAnnotation&&this.raise(n.typeAnnotation.start,ee.SetAccesorCannotHaveReturnType)}else n.kind="method";return this.finishNode(n,"TSMethodSignature")}else{const n=r;t&&(n.readonly=!0);const i=this.tsTryParseTypeAnnotation();return i&&(n.typeAnnotation=i),this.tsParseTypeMemberSemicolon(),this.finishNode(n,"TSPropertySignature")}}tsParseTypeMember(){const e=this.startNode();if(this.match(10)||this.match(43))return this.tsParseSignatureMember("TSCallSignatureDeclaration",e);if(this.match(71)){const r=this.startNode();return this.next(),this.match(10)||this.match(43)?this.tsParseSignatureMember("TSConstructSignatureDeclaration",e):(e.key=this.createIdentifier(r,"new"),this.tsParsePropertyOrMethodSignature(e,!1))}this.tsParseModifiers(e,["readonly"],["declare","abstract","private","protected","public","static","override"],ee.InvalidModifierOnTypeMember);const t=this.tsTryParseIndexSignature(e);return t||(this.parsePropertyName(e),!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.tsTokenCanFollowModifier()&&(e.kind=e.key.name,this.parsePropertyName(e)),this.tsParsePropertyOrMethodSignature(e,!!e.readonly))}tsParseTypeLiteral(){const e=this.startNode();return e.members=this.tsParseObjectTypeMembers(),this.finishNode(e,"TSTypeLiteral")}tsParseObjectTypeMembers(){this.expect(5);const e=this.tsParseList("TypeMembers",this.tsParseTypeMember.bind(this));return this.expect(8),e}tsIsStartOfMappedType(){return this.next(),this.eat(47)?this.isContextual(112):(this.isContextual(112)&&this.next(),!this.match(0)||(this.next(),!this.tsIsIdentifier())?!1:(this.next(),this.match(52)))}tsParseMappedTypeParameter(){const e=this.startNode();return e.name=this.tsParseTypeParameterName(),e.constraint=this.tsExpectThenParseType(52),this.finishNode(e,"TSTypeParameter")}tsParseMappedType(){const e=this.startNode();return this.expect(5),this.match(47)?(e.readonly=this.state.value,this.next(),this.expectContextual(112)):this.eatContextual(112)&&(e.readonly=!0),this.expect(0),e.typeParameter=this.tsParseMappedTypeParameter(),e.nameType=this.eatContextual(87)?this.tsParseType():null,this.expect(3),this.match(47)?(e.optional=this.state.value,this.next(),this.expect(17)):this.eat(17)&&(e.optional=!0),e.typeAnnotation=this.tsTryParseType(),this.semicolon(),this.expect(8),this.finishNode(e,"TSMappedType")}tsParseTupleType(){const e=this.startNode();e.elementTypes=this.tsParseBracketedList("TupleElementTypes",this.tsParseTupleElementType.bind(this),!0,!1);let t=!1,r=null;return e.elementTypes.forEach(n=>{var i;let{type:a}=n;t&&a!=="TSRestType"&&a!=="TSOptionalType"&&!(a==="TSNamedTupleMember"&&n.optional)&&this.raise(n.start,ee.OptionalTypeBeforeRequired),t=t||a==="TSNamedTupleMember"&&n.optional||a==="TSOptionalType",a==="TSRestType"&&(n=n.typeAnnotation,a=n.type);const o=a==="TSNamedTupleMember";r=(i=r)!=null?i:o,r!==o&&this.raise(n.start,ee.MixedLabeledAndUnlabeledElements)}),this.finishNode(e,"TSTupleType")}tsParseTupleElementType(){const{start:e,startLoc:t}=this.state,r=this.eat(21);let n=this.tsParseType();const i=this.eat(17);if(this.eat(14)){const o=this.startNodeAtNode(n);o.optional=i,n.type==="TSTypeReference"&&!n.typeParameters&&n.typeName.type==="Identifier"?o.label=n.typeName:(this.raise(n.start,ee.InvalidTupleMemberLabel),o.label=n),o.elementType=this.tsParseType(),n=this.finishNode(o,"TSNamedTupleMember")}else if(i){const o=this.startNodeAtNode(n);o.typeAnnotation=n,n=this.finishNode(o,"TSOptionalType")}if(r){const o=this.startNodeAt(e,t);o.typeAnnotation=n,n=this.finishNode(o,"TSRestType")}return n}tsParseParenthesizedType(){const e=this.startNode();return this.expect(10),e.typeAnnotation=this.tsParseType(),this.expect(11),this.finishNode(e,"TSParenthesizedType")}tsParseFunctionOrConstructorType(e,t){const r=this.startNode();return e==="TSConstructorType"&&(r.abstract=!!t,t&&this.next(),this.next()),this.tsFillSignature(19,r),this.finishNode(r,e)}tsParseLiteralTypeNode(){const e=this.startNode();return e.literal=(()=>{switch(this.state.type){case 124:case 125:case 123:case 79:case 80:return this.parseExprAtom();default:throw this.unexpected()}})(),this.finishNode(e,"TSLiteralType")}tsParseTemplateLiteralType(){const e=this.startNode();return e.literal=this.parseTemplate(!1),this.finishNode(e,"TSLiteralType")}parseTemplateSubstitution(){return this.state.inType?this.tsParseType():super.parseTemplateSubstitution()}tsParseThisTypeOrThisTypePredicate(){const e=this.tsParseThisTypeNode();return this.isContextual(107)&&!this.hasPrecedingLineBreak()?this.tsParseThisTypePredicate(e):e}tsParseNonArrayType(){switch(this.state.type){case 123:case 124:case 125:case 79:case 80:return this.tsParseLiteralTypeNode();case 47:if(this.state.value==="-"){const e=this.startNode(),t=this.lookahead();if(t.type!==124&&t.type!==125)throw this.unexpected();return e.literal=this.parseMaybeUnary(),this.finishNode(e,"TSLiteralType")}break;case 72:return this.tsParseThisTypeOrThisTypePredicate();case 81:return this.tsParseTypeQuery();case 77:return this.tsParseImportType();case 5:return this.tsLookAhead(this.tsIsStartOfMappedType.bind(this))?this.tsParseMappedType():this.tsParseTypeLiteral();case 0:return this.tsParseTupleType();case 10:return this.tsParseParenthesizedType();case 22:return this.tsParseTemplateLiteralType();default:{const{type:e}=this.state;if(we(e)||e===82||e===78){const t=e===82?"TSVoidKeyword":e===78?"TSNullKeyword":dM(this.state.value);if(t!==void 0&&this.lookaheadCharCode()!==46){const r=this.startNode();return this.next(),this.finishNode(r,t)}return this.tsParseTypeReference()}}}throw this.unexpected()}tsParseArrayTypeOrHigher(){let e=this.tsParseNonArrayType();for(;!this.hasPrecedingLineBreak()&&this.eat(0);)if(this.match(3)){const t=this.startNodeAtNode(e);t.elementType=e,this.expect(3),e=this.finishNode(t,"TSArrayType")}else{const t=this.startNodeAtNode(e);t.objectType=e,t.indexType=this.tsParseType(),this.expect(3),e=this.finishNode(t,"TSIndexedAccessType")}return e}tsParseTypeOperator(){const e=this.startNode(),t=this.state.value;return this.next(),e.operator=t,e.typeAnnotation=this.tsParseTypeOperatorOrHigher(),t==="readonly"&&this.tsCheckTypeAnnotationForReadOnly(e),this.finishNode(e,"TSTypeOperator")}tsCheckTypeAnnotationForReadOnly(e){switch(e.typeAnnotation.type){case"TSTupleType":case"TSArrayType":return;default:this.raise(e.start,ee.UnexpectedReadonly)}}tsParseInferType(){const e=this.startNode();this.expectContextual(106);const t=this.startNode();return t.name=this.tsParseTypeParameterName(),e.typeParameter=this.finishNode(t,"TSTypeParameter"),this.finishNode(e,"TSInferType")}tsParseTypeOperatorOrHigher(){return dR(this.state.type)&&!this.state.containsEsc?this.tsParseTypeOperator():this.isContextual(106)?this.tsParseInferType():this.tsParseArrayTypeOrHigher()}tsParseUnionOrIntersectionType(e,t,r){const n=this.startNode(),i=this.eat(r),a=[];do a.push(t());while(this.eat(r));return a.length===1&&!i?a[0]:(n.types=a,this.finishNode(n,e))}tsParseIntersectionTypeOrHigher(){return this.tsParseUnionOrIntersectionType("TSIntersectionType",this.tsParseTypeOperatorOrHigher.bind(this),41)}tsParseUnionTypeOrHigher(){return this.tsParseUnionOrIntersectionType("TSUnionType",this.tsParseIntersectionTypeOrHigher.bind(this),39)}tsIsStartOfFunctionType(){return this.match(43)?!0:this.match(10)&&this.tsLookAhead(this.tsIsUnambiguouslyStartOfFunctionType.bind(this))}tsSkipParameterStart(){if(we(this.state.type)||this.match(72))return this.next(),!0;if(this.match(5)){let e=1;for(this.next();e>0;)this.match(5)?++e:this.match(8)&&--e,this.next();return!0}if(this.match(0)){let e=1;for(this.next();e>0;)this.match(0)?++e:this.match(3)&&--e,this.next();return!0}return!1}tsIsUnambiguouslyStartOfFunctionType(){return this.next(),!!(this.match(11)||this.match(21)||this.tsSkipParameterStart()&&(this.match(14)||this.match(12)||this.match(17)||this.match(27)||this.match(11)&&(this.next(),this.match(19))))}tsParseTypeOrTypePredicateAnnotation(e){return this.tsInType(()=>{const t=this.startNode();this.expect(e);const r=this.startNode(),n=!!this.tsTryParse(this.tsParseTypePredicateAsserts.bind(this));if(n&&this.match(72)){let o=this.tsParseThisTypeOrThisTypePredicate();return o.type==="TSThisType"?(r.parameterName=o,r.asserts=!0,r.typeAnnotation=null,o=this.finishNode(r,"TSTypePredicate")):(this.resetStartLocationFromNode(o,r),o.asserts=!0),t.typeAnnotation=o,this.finishNode(t,"TSTypeAnnotation")}const i=this.tsIsIdentifier()&&this.tsTryParse(this.tsParseTypePredicatePrefix.bind(this));if(!i)return n?(r.parameterName=this.parseIdentifier(),r.asserts=n,r.typeAnnotation=null,t.typeAnnotation=this.finishNode(r,"TSTypePredicate"),this.finishNode(t,"TSTypeAnnotation")):this.tsParseTypeAnnotation(!1,t);const a=this.tsParseTypeAnnotation(!1);return r.parameterName=i,r.typeAnnotation=a,r.asserts=n,t.typeAnnotation=this.finishNode(r,"TSTypePredicate"),this.finishNode(t,"TSTypeAnnotation")})}tsTryParseTypeOrTypePredicateAnnotation(){return this.match(14)?this.tsParseTypeOrTypePredicateAnnotation(14):void 0}tsTryParseTypeAnnotation(){return this.match(14)?this.tsParseTypeAnnotation():void 0}tsTryParseType(){return this.tsEatThenParseType(14)}tsParseTypePredicatePrefix(){const e=this.parseIdentifier();if(this.isContextual(107)&&!this.hasPrecedingLineBreak())return this.next(),e}tsParseTypePredicateAsserts(){if(this.state.type!==100)return!1;const e=this.state.containsEsc;return this.next(),!we(this.state.type)&&!this.match(72)?!1:(e&&this.raise(this.state.lastTokStart,_.InvalidEscapedReservedWord,"asserts"),!0)}tsParseTypeAnnotation(e=!0,t=this.startNode()){return this.tsInType(()=>{e&&this.expect(14),t.typeAnnotation=this.tsParseType()}),this.finishNode(t,"TSTypeAnnotation")}tsParseType(){Ky(this.state.inType);const e=this.tsParseNonConditionalType();if(this.hasPrecedingLineBreak()||!this.eat(75))return e;const t=this.startNodeAtNode(e);return t.checkType=e,t.extendsType=this.tsParseNonConditionalType(),this.expect(17),t.trueType=this.tsParseType(),this.expect(14),t.falseType=this.tsParseType(),this.finishNode(t,"TSConditionalType")}isAbstractConstructorSignature(){return this.isContextual(114)&&this.lookahead().type===71}tsParseNonConditionalType(){return this.tsIsStartOfFunctionType()?this.tsParseFunctionOrConstructorType("TSFunctionType"):this.match(71)?this.tsParseFunctionOrConstructorType("TSConstructorType"):this.isAbstractConstructorSignature()?this.tsParseFunctionOrConstructorType("TSConstructorType",!0):this.tsParseUnionTypeOrHigher()}tsParseTypeAssertion(){this.getPluginOption("typescript","disallowAmbiguousJSXLike")&&this.raise(this.state.start,ee.ReservedTypeAssertion);const e=this.startNode(),t=this.tsTryNextParseConstantContext();return e.typeAnnotation=t||this.tsNextThenParseType(),this.expect(44),e.expression=this.parseMaybeUnary(),this.finishNode(e,"TSTypeAssertion")}tsParseHeritageClause(e){const t=this.state.start,r=this.tsParseDelimitedList("HeritageClauseElement",this.tsParseExpressionWithTypeArguments.bind(this));return r.length||this.raise(t,ee.EmptyHeritageClauseType,e),r}tsParseExpressionWithTypeArguments(){const e=this.startNode();return e.expression=this.tsParseEntityName(!1),this.match(43)&&(e.typeParameters=this.tsParseTypeArguments()),this.finishNode(e,"TSExpressionWithTypeArguments")}tsParseInterfaceDeclaration(e){we(this.state.type)?(e.id=this.parseIdentifier(),this.checkLVal(e.id,"typescript interface declaration",AR)):(e.id=null,this.raise(this.state.start,ee.MissingInterfaceName)),e.typeParameters=this.tsTryParseTypeParameters(),this.eat(75)&&(e.extends=this.tsParseHeritageClause("extends"));const t=this.startNode();return t.body=this.tsInType(this.tsParseObjectTypeMembers.bind(this)),e.body=this.finishNode(t,"TSInterfaceBody"),this.finishNode(e,"TSInterfaceDeclaration")}tsParseTypeAliasDeclaration(e){return e.id=this.parseIdentifier(),this.checkLVal(e.id,"typescript type alias",PR),e.typeParameters=this.tsTryParseTypeParameters(),e.typeAnnotation=this.tsInType(()=>{if(this.expect(27),this.isContextual(105)&&this.lookahead().type!==16){const t=this.startNode();return this.next(),this.finishNode(t,"TSIntrinsicKeyword")}return this.tsParseType()}),this.semicolon(),this.finishNode(e,"TSTypeAliasDeclaration")}tsInNoContext(e){const t=this.state.context;this.state.context=[t[0]];try{return e()}finally{this.state.context=t}}tsInType(e){const t=this.state.inType;this.state.inType=!0;try{return e()}finally{this.state.inType=t}}tsEatThenParseType(e){return this.match(e)?this.tsNextThenParseType():void 0}tsExpectThenParseType(e){return this.tsDoThenParseType(()=>this.expect(e))}tsNextThenParseType(){return this.tsDoThenParseType(()=>this.next())}tsDoThenParseType(e){return this.tsInType(()=>(e(),this.tsParseType()))}tsParseEnumMember(){const e=this.startNode();return e.id=this.match(123)?this.parseExprAtom():this.parseIdentifier(!0),this.eat(27)&&(e.initializer=this.parseMaybeAssignAllowIn()),this.finishNode(e,"TSEnumMember")}tsParseEnumDeclaration(e,t){return t&&(e.const=!0),e.id=this.parseIdentifier(),this.checkLVal(e.id,"typescript enum declaration",t?kR:RS),this.expect(5),e.members=this.tsParseDelimitedList("EnumMembers",this.tsParseEnumMember.bind(this)),this.expect(8),this.finishNode(e,"TSEnumDeclaration")}tsParseModuleBlock(){const e=this.startNode();return this.scope.enter(Zn),this.expect(5),this.parseBlockOrModuleBlockBody(e.body=[],void 0,!0,8),this.scope.exit(),this.finishNode(e,"TSModuleBlock")}tsParseModuleOrNamespaceDeclaration(e,t=!1){if(e.id=this.parseIdentifier(),t||this.checkLVal(e.id,"module or namespace declaration",NR),this.eat(16)){const r=this.startNode();this.tsParseModuleOrNamespaceDeclaration(r,!0),e.body=r}else this.scope.enter(Qu),this.prodParam.enter(hi),e.body=this.tsParseModuleBlock(),this.prodParam.exit(),this.scope.exit();return this.finishNode(e,"TSModuleDeclaration")}tsParseAmbientExternalModuleDeclaration(e){return this.isContextual(103)?(e.global=!0,e.id=this.parseIdentifier()):this.match(123)?e.id=this.parseExprAtom():this.unexpected(),this.match(5)?(this.scope.enter(Qu),this.prodParam.enter(hi),e.body=this.tsParseModuleBlock(),this.prodParam.exit(),this.scope.exit()):this.semicolon(),this.finishNode(e,"TSModuleDeclaration")}tsParseImportEqualsDeclaration(e,t){e.isExport=t||!1,e.id=this.parseIdentifier(),this.checkLVal(e.id,"import equals declaration",Yt),this.expect(27);const r=this.tsParseModuleReference();return e.importKind==="type"&&r.type!=="TSExternalModuleReference"&&this.raise(r.start,ee.ImportAliasHasImportType),e.moduleReference=r,this.semicolon(),this.finishNode(e,"TSImportEqualsDeclaration")}tsIsExternalModuleReference(){return this.isContextual(110)&&this.lookaheadCharCode()===40}tsParseModuleReference(){return this.tsIsExternalModuleReference()?this.tsParseExternalModuleReference():this.tsParseEntityName(!1)}tsParseExternalModuleReference(){const e=this.startNode();if(this.expectContextual(110),this.expect(10),!this.match(123))throw this.unexpected();return e.expression=this.parseExprAtom(),this.expect(11),this.finishNode(e,"TSExternalModuleReference")}tsLookAhead(e){const t=this.state.clone(),r=e();return this.state=t,r}tsTryParseAndCatch(e){const t=this.tryParse(r=>e()||r());if(!(t.aborted||!t.node))return t.error&&(this.state=t.failState),t.node}tsTryParse(e){const t=this.state.clone(),r=e();if(r!==void 0&&r!==!1)return r;this.state=t}tsTryParseDeclare(e){if(this.isLineTerminator())return;let t=this.state.type,r;return this.isContextual(93)&&(t=68,r="let"),this.tsInAmbientContext(()=>{switch(t){case 62:return e.declare=!0,this.parseFunctionStatement(e,!1,!0);case 74:return e.declare=!0,this.parseClass(e,!0,!1);case 69:if(this.match(69)&&this.isLookaheadContextual("enum"))return this.expect(69),this.expectContextual(116),this.tsParseEnumDeclaration(e,!0);case 68:return r=r||this.state.value,this.parseVarStatement(e,r);case 103:return this.tsParseAmbientExternalModuleDeclaration(e);default:if(we(t))return this.tsParseDeclaration(e,this.state.value,!0)}})}tsTryParseExportDeclaration(){return this.tsParseDeclaration(this.startNode(),this.state.value,!0)}tsParseExpressionStatement(e,t){switch(t.name){case"declare":{const r=this.tsTryParseDeclare(e);if(r)return r.declare=!0,r;break}case"global":if(this.match(5)){this.scope.enter(Qu),this.prodParam.enter(hi);const r=e;return r.global=!0,r.id=t,r.body=this.tsParseModuleBlock(),this.scope.exit(),this.prodParam.exit(),this.finishNode(r,"TSModuleDeclaration")}break;default:return this.tsParseDeclaration(e,t.name,!1)}}tsParseDeclaration(e,t,r){switch(t){case"abstract":if(this.tsCheckLineTerminator(r)&&(this.match(74)||we(this.state.type)))return this.tsParseAbstractDeclaration(e);break;case"enum":if(r||we(this.state.type))return r&&this.next(),this.tsParseEnumDeclaration(e,!1);break;case"interface":if(this.tsCheckLineTerminator(r)&&we(this.state.type))return this.tsParseInterfaceDeclaration(e);break;case"module":if(this.tsCheckLineTerminator(r)){if(this.match(123))return this.tsParseAmbientExternalModuleDeclaration(e);if(we(this.state.type))return this.tsParseModuleOrNamespaceDeclaration(e)}break;case"namespace":if(this.tsCheckLineTerminator(r)&&we(this.state.type))return this.tsParseModuleOrNamespaceDeclaration(e);break;case"type":if(this.tsCheckLineTerminator(r)&&we(this.state.type))return this.tsParseTypeAliasDeclaration(e);break}}tsCheckLineTerminator(e){return e?this.hasFollowingLineBreak()?!1:(this.next(),!0):!this.isLineTerminator()}tsTryParseGenericAsyncArrowFunction(e,t){if(!this.match(43))return;const r=this.state.maybeInArrowParameters;this.state.maybeInArrowParameters=!0;const n=this.tsTryParseAndCatch(()=>{const i=this.startNodeAt(e,t);return i.typeParameters=this.tsParseTypeParameters(),super.parseFunctionParams(i),i.returnType=this.tsTryParseTypeOrTypePredicateAnnotation(),this.expect(19),i});if(this.state.maybeInArrowParameters=r,!!n)return this.parseArrowExpression(n,null,!0)}tsParseTypeArguments(){const e=this.startNode();return e.params=this.tsInType(()=>this.tsInNoContext(()=>(this.expect(43),this.tsParseDelimitedList("TypeParametersOrArguments",this.tsParseType.bind(this))))),e.params.length===0&&this.raise(e.start,ee.EmptyTypeArguments),this.expect(44),this.finishNode(e,"TSTypeParameterInstantiation")}tsIsDeclarationStart(){return pR(this.state.type)}isExportDefaultSpecifier(){return this.tsIsDeclarationStart()?!1:super.isExportDefaultSpecifier()}parseAssignableListItem(e,t){const r=this.state.start,n=this.state.startLoc;let i,a=!1,o=!1;if(e!==void 0){const l={};this.tsParseModifiers(l,["public","private","protected","override","readonly"]),i=l.accessibility,o=l.override,a=l.readonly,e===!1&&(i||a||o)&&this.raise(r,ee.UnexpectedParameterModifier)}const u=this.parseMaybeDefault();this.parseAssignableListItemTypes(u);const c=this.parseMaybeDefault(u.start,u.loc.start,u);if(i||a||o){const l=this.startNodeAt(r,n);return t.length&&(l.decorators=t),i&&(l.accessibility=i),a&&(l.readonly=a),o&&(l.override=o),c.type!=="Identifier"&&c.type!=="AssignmentPattern"&&this.raise(l.start,ee.UnsupportedParameterPropertyKind),l.parameter=c,this.finishNode(l,"TSParameterProperty")}return t.length&&(u.decorators=t),c}parseFunctionBodyAndFinish(e,t,r=!1){this.match(14)&&(e.returnType=this.tsParseTypeOrTypePredicateAnnotation(14));const n=t==="FunctionDeclaration"?"TSDeclareFunction":t==="ClassMethod"||t==="ClassPrivateMethod"?"TSDeclareMethod":void 0;if(n&&!this.match(5)&&this.isLineTerminator()){this.finishNode(e,n);return}if(n==="TSDeclareFunction"&&this.state.isAmbientContext&&(this.raise(e.start,ee.DeclareFunctionHasImplementation),e.declare)){super.parseFunctionBodyAndFinish(e,n,r);return}super.parseFunctionBodyAndFinish(e,t,r)}registerFunctionStatementId(e){!e.body&&e.id?this.checkLVal(e.id,"function name",jy):super.registerFunctionStatementId(...arguments)}tsCheckForInvalidTypeCasts(e){e.forEach(t=>{(t==null?void 0:t.type)==="TSTypeCastExpression"&&this.raise(t.typeAnnotation.start,ee.UnexpectedTypeAnnotation)})}toReferencedList(e,t){return this.tsCheckForInvalidTypeCasts(e),e}parseArrayLike(...e){const t=super.parseArrayLike(...e);return t.type==="ArrayExpression"&&this.tsCheckForInvalidTypeCasts(t.elements),t}parseSubscript(e,t,r,n,i){if(!this.hasPrecedingLineBreak()&&this.match(33)){this.state.canStartJSXElement=!1,this.next();const o=this.startNodeAt(t,r);return o.expression=e,this.finishNode(o,"TSNonNullExpression")}let a=!1;if(this.match(18)&&this.lookaheadCharCode()===60){if(n)return i.stop=!0,e;i.optionalChainMember=a=!0,this.next()}if(this.match(43)){let o;const u=this.tsTryParseAndCatch(()=>{if(!n&&this.atPossibleAsyncArrow(e)){const h=this.tsTryParseGenericAsyncArrowFunction(t,r);if(h)return h}const c=this.startNodeAt(t,r);c.callee=e;const l=this.tsParseTypeArguments();if(l){if(a&&!this.match(10)&&(o=this.state.pos,this.unexpected()),!n&&this.eat(10))return c.arguments=this.parseCallExpressionArguments(11,!1),this.tsCheckForInvalidTypeCasts(c.arguments),c.typeParameters=l,i.optionalChainMember&&(c.optional=a),this.finishCallExpression(c,i.optionalChainMember);if(this.match(22)){const h=this.parseTaggedTemplateExpression(e,t,r,i);return h.typeParameters=l,h}}this.unexpected()});if(o&&this.unexpected(o,10),u)return u}return super.parseSubscript(e,t,r,n,i)}parseNewArguments(e){if(this.match(43)){const t=this.tsTryParseAndCatch(()=>{const r=this.tsParseTypeArguments();return this.match(10)||this.unexpected(),r});t&&(e.typeParameters=t)}super.parseNewArguments(e)}parseExprOp(e,t,r,n){if(Ku(52)>n&&!this.hasPrecedingLineBreak()&&this.isContextual(87)){const i=this.startNodeAt(t,r);i.expression=e;const a=this.tsTryNextParseConstantContext();return a?i.typeAnnotation=a:i.typeAnnotation=this.tsNextThenParseType(),this.finishNode(i,"TSAsExpression"),this.reScan_lt_gt(),this.parseExprOp(i,t,r,n)}return super.parseExprOp(e,t,r,n)}checkReservedWord(e,t,r,n){}checkDuplicateExports(){}parseImport(e){if(e.importKind="value",we(this.state.type)||this.match(49)||this.match(5)){let r=this.lookahead();if(this.isContextual(120)&&r.type!==12&&r.type!==91&&r.type!==27&&(e.importKind="type",this.next(),r=this.lookahead()),we(this.state.type)&&r.type===27)return this.tsParseImportEqualsDeclaration(e)}const t=super.parseImport(e);return t.importKind==="type"&&t.specifiers.length>1&&t.specifiers[0].type==="ImportDefaultSpecifier"&&this.raise(t.start,ee.TypeImportCannotSpecifyDefaultAndNamed),t}parseExport(e){if(this.match(77))return this.next(),this.isContextual(120)&&this.lookaheadCharCode()!==61?(e.importKind="type",this.next()):e.importKind="value",this.tsParseImportEqualsDeclaration(e,!0);if(this.eat(27)){const t=e;return t.expression=this.parseExpression(),this.semicolon(),this.finishNode(t,"TSExportAssignment")}else if(this.eatContextual(87)){const t=e;return this.expectContextual(118),t.id=this.parseIdentifier(),this.semicolon(),this.finishNode(t,"TSNamespaceExportDeclaration")}else return this.isContextual(120)&&this.lookahead().type===5?(this.next(),e.exportKind="type"):e.exportKind="value",super.parseExport(e)}isAbstractClass(){return this.isContextual(114)&&this.lookahead().type===74}parseExportDefaultExpression(){if(this.isAbstractClass()){const e=this.startNode();return this.next(),e.abstract=!0,this.parseClass(e,!0,!0),e}if(this.match(119)){const e=this.startNode();this.next();const t=this.tsParseInterfaceDeclaration(e);if(t)return t}return super.parseExportDefaultExpression()}parseStatementContent(e,t){if(this.state.type===69&&this.lookahead().type===116){const n=this.startNode();return this.next(),this.expectContextual(116),this.tsParseEnumDeclaration(n,!0)}return super.parseStatementContent(e,t)}parseAccessModifier(){return this.tsParseModifier(["public","protected","private"])}tsHasSomeModifiers(e,t){return t.some(r=>Hy(r)?e.accessibility===r:!!e[r])}tsIsStartOfStaticBlocks(){return this.isContextual(98)&&this.lookaheadCharCode()===123}parseClassMember(e,t,r){const n=["declare","private","public","protected","override","abstract","readonly","static"];this.tsParseModifiers(t,n,void 0,void 0,!0);const i=()=>{this.tsIsStartOfStaticBlocks()?(this.next(),this.next(),this.tsHasSomeModifiers(t,n)&&this.raise(this.state.pos,ee.StaticBlockCannotHaveModifier),this.parseClassStaticBlock(e,t)):this.parseClassMemberWithIsStatic(e,t,r,!!t.static)};t.declare?this.tsInAmbientContext(i):i()}parseClassMemberWithIsStatic(e,t,r,n){const i=this.tsTryParseIndexSignature(t);if(i){e.body.push(i),t.abstract&&this.raise(t.start,ee.IndexSignatureHasAbstract),t.accessibility&&this.raise(t.start,ee.IndexSignatureHasAccessibility,t.accessibility),t.declare&&this.raise(t.start,ee.IndexSignatureHasDeclare),t.override&&this.raise(t.start,ee.IndexSignatureHasOverride);return}!this.state.inAbstractClass&&t.abstract&&this.raise(t.start,ee.NonAbstractClassHasAbstractMethod),t.override&&(r.hadSuperClass||this.raise(t.start,ee.OverrideNotInSubClass)),super.parseClassMemberWithIsStatic(e,t,r,n)}parsePostMemberNameModifiers(e){this.eat(17)&&(e.optional=!0),e.readonly&&this.match(10)&&this.raise(e.start,ee.ClassMethodHasReadonly),e.declare&&this.match(10)&&this.raise(e.start,ee.ClassMethodHasDeclare)}parseExpressionStatement(e,t){return(t.type==="Identifier"?this.tsParseExpressionStatement(e,t):void 0)||super.parseExpressionStatement(e,t)}shouldParseExportDeclaration(){return this.tsIsDeclarationStart()?!0:super.shouldParseExportDeclaration()}parseConditional(e,t,r,n){if(!this.state.maybeInArrowParameters||!this.match(17))return super.parseConditional(e,t,r,n);const i=this.tryParse(()=>super.parseConditional(e,t,r));return i.node?(i.error&&(this.state=i.failState),i.node):(i.error&&super.setOptionalParametersError(n,i.error),e)}parseParenItem(e,t,r){if(e=super.parseParenItem(e,t,r),this.eat(17)&&(e.optional=!0,this.resetEndLocation(e)),this.match(14)){const n=this.startNodeAt(t,r);return n.expression=e,n.typeAnnotation=this.tsParseTypeAnnotation(),this.finishNode(n,"TSTypeCastExpression")}return e}parseExportDeclaration(e){const t=this.state.start,r=this.state.startLoc,n=this.eatContextual(115);if(n&&(this.isContextual(115)||!this.shouldParseExportDeclaration()))throw this.raise(this.state.start,ee.ExpectedAmbientAfterExportDeclare);let i;return we(this.state.type)&&(i=this.tsTryParseExportDeclaration()),i||(i=super.parseExportDeclaration(e)),i&&(i.type==="TSInterfaceDeclaration"||i.type==="TSTypeAliasDeclaration"||n)&&(e.exportKind="type"),i&&n&&(this.resetStartLocation(i,t,r),i.declare=!0),i}parseClassId(e,t,r){if((!t||r)&&this.isContextual(104))return;super.parseClassId(e,t,r,e.declare?jy:OS);const n=this.tsTryParseTypeParameters();n&&(e.typeParameters=n)}parseClassPropertyAnnotation(e){!e.optional&&this.eat(33)&&(e.definite=!0);const t=this.tsTryParseTypeAnnotation();t&&(e.typeAnnotation=t)}parseClassProperty(e){if(this.parseClassPropertyAnnotation(e),this.state.isAmbientContext&&this.match(27)&&this.raise(this.state.start,ee.DeclareClassFieldHasInitializer),e.abstract&&this.match(27)){const{key:t}=e;this.raise(this.state.start,ee.AbstractPropertyHasInitializer,t.type==="Identifier"&&!e.computed?t.name:`[${this.input.slice(t.start,t.end)}]`)}return super.parseClassProperty(e)}parseClassPrivateProperty(e){return e.abstract&&this.raise(e.start,ee.PrivateElementHasAbstract),e.accessibility&&this.raise(e.start,ee.PrivateElementHasAccessibility,e.accessibility),this.parseClassPropertyAnnotation(e),super.parseClassPrivateProperty(e)}pushClassMethod(e,t,r,n,i,a){const o=this.tsTryParseTypeParameters();o&&i&&this.raise(o.start,ee.ConstructorHasTypeParameters),t.declare&&(t.kind==="get"||t.kind==="set")&&this.raise(t.start,ee.DeclareAccessor,t.kind),o&&(t.typeParameters=o),super.pushClassMethod(e,t,r,n,i,a)}pushClassPrivateMethod(e,t,r,n){const i=this.tsTryParseTypeParameters();i&&(t.typeParameters=i),super.pushClassPrivateMethod(e,t,r,n)}declareClassPrivateMethodInScope(e,t){e.type!=="TSDeclareMethod"&&(e.type==="MethodDefinition"&&!e.value.body||super.declareClassPrivateMethodInScope(e,t))}parseClassSuper(e){super.parseClassSuper(e),e.superClass&&this.match(43)&&(e.superTypeParameters=this.tsParseTypeArguments()),this.eatContextual(104)&&(e.implements=this.tsParseHeritageClause("implements"))}parseObjPropValue(e,...t){const r=this.tsTryParseTypeParameters();r&&(e.typeParameters=r),super.parseObjPropValue(e,...t)}parseFunctionParams(e,t){const r=this.tsTryParseTypeParameters();r&&(e.typeParameters=r),super.parseFunctionParams(e,t)}parseVarId(e,t){super.parseVarId(e,t),e.id.type==="Identifier"&&this.eat(33)&&(e.definite=!0);const r=this.tsTryParseTypeAnnotation();r&&(e.id.typeAnnotation=r,this.resetEndLocation(e.id))}parseAsyncArrowFromCallExpression(e,t){return this.match(14)&&(e.returnType=this.tsParseTypeAnnotation()),super.parseAsyncArrowFromCallExpression(e,t)}parseMaybeAssign(...e){var t,r,n,i,a,o,u;let c,l,h;if(this.hasPlugin("jsx")&&(this.match(132)||this.match(43))){if(c=this.state.clone(),l=this.tryParse(()=>super.parseMaybeAssign(...e),c),!l.error)return l.node;const{context:g}=this.state;g[g.length-1]===Pe.j_oTag?g.length-=2:g[g.length-1]===Pe.j_expr&&(g.length-=1)}if(!((t=l)!=null&&t.error)&&!this.match(43))return super.parseMaybeAssign(...e);let f;c=c||this.state.clone();const d=this.tryParse(g=>{var p,m;f=this.tsParseTypeParameters();const v=super.parseMaybeAssign(...e);return(v.type!=="ArrowFunctionExpression"||(p=v.extra)!=null&&p.parenthesized)&&g(),((m=f)==null?void 0:m.params.length)!==0&&this.resetStartLocationFromNode(v,f),v.typeParameters=f,v},c);if(!d.error&&!d.aborted)return f&&this.reportReservedArrowTypeParam(f),d.node;if(!l&&(Ky(!this.hasPlugin("jsx")),h=this.tryParse(()=>super.parseMaybeAssign(...e),c),!h.error))return h.node;if((r=l)!=null&&r.node)return this.state=l.failState,l.node;if(d.node)return this.state=d.failState,f&&this.reportReservedArrowTypeParam(f),d.node;if((n=h)!=null&&n.node)return this.state=h.failState,h.node;throw(i=l)!=null&&i.thrown?l.error:d.thrown?d.error:(a=h)!=null&&a.thrown?h.error:((o=l)==null?void 0:o.error)||d.error||((u=h)==null?void 0:u.error)}reportReservedArrowTypeParam(e){var t;e.params.length===1&&!((t=e.extra)!=null&&t.trailingComma)&&this.getPluginOption("typescript","disallowAmbiguousJSXLike")&&this.raise(e.start,ee.ReservedArrowTypeParam)}parseMaybeUnary(e){return!this.hasPlugin("jsx")&&this.match(43)?this.tsParseTypeAssertion():super.parseMaybeUnary(e)}parseArrow(e){if(this.match(14)){const t=this.tryParse(r=>{const n=this.tsParseTypeOrTypePredicateAnnotation(14);return(this.canInsertSemicolon()||!this.match(19))&&r(),n});if(t.aborted)return;t.thrown||(t.error&&(this.state=t.failState),e.returnType=t.node)}return super.parseArrow(e)}parseAssignableListItemTypes(e){this.eat(17)&&(e.type!=="Identifier"&&!this.state.isAmbientContext&&!this.state.inType&&this.raise(e.start,ee.PatternIsOptional),e.optional=!0);const t=this.tsTryParseTypeAnnotation();return t&&(e.typeAnnotation=t),this.resetEndLocation(e),e}isAssignable(e,t){switch(e.type){case"TSTypeCastExpression":return this.isAssignable(e.expression,t);case"TSParameterProperty":return!0;default:return super.isAssignable(e,t)}}toAssignable(e,t=!1){switch(e.type){case"TSTypeCastExpression":return super.toAssignable(this.typeCastToParameter(e),t);case"TSParameterProperty":return super.toAssignable(e,t);case"ParenthesizedExpression":return this.toAssignableParenthesizedExpression(e,t);case"TSAsExpression":case"TSNonNullExpression":case"TSTypeAssertion":return e.expression=this.toAssignable(e.expression,t),e;default:return super.toAssignable(e,t)}}toAssignableParenthesizedExpression(e,t){switch(e.expression.type){case"TSAsExpression":case"TSNonNullExpression":case"TSTypeAssertion":case"ParenthesizedExpression":return e.expression=this.toAssignable(e.expression,t),e;default:return super.toAssignable(e,t)}}checkLVal(e,t,...r){var n;switch(e.type){case"TSTypeCastExpression":return;case"TSParameterProperty":this.checkLVal(e.parameter,"parameter property",...r);return;case"TSAsExpression":case"TSTypeAssertion":if(!r[0]&&t!=="parenthesized expression"&&!((n=e.extra)!=null&&n.parenthesized)){this.raise(e.start,_.InvalidLhs,t);break}this.checkLVal(e.expression,"parenthesized expression",...r);return;case"TSNonNullExpression":this.checkLVal(e.expression,t,...r);return;default:super.checkLVal(e,t,...r);return}}parseBindingAtom(){switch(this.state.type){case 72:return this.parseIdentifier(!0);default:return super.parseBindingAtom()}}parseMaybeDecoratorArguments(e){if(this.match(43)){const t=this.tsParseTypeArguments();if(this.match(10)){const r=super.parseMaybeDecoratorArguments(e);return r.typeParameters=t,r}this.unexpected(this.state.start,10)}return super.parseMaybeDecoratorArguments(e)}checkCommaAfterRest(e){this.state.isAmbientContext&&this.match(12)&&this.lookaheadCharCode()===e?this.next():super.checkCommaAfterRest(e)}isClassMethod(){return this.match(43)||super.isClassMethod()}isClassProperty(){return this.match(33)||this.match(14)||super.isClassProperty()}parseMaybeDefault(...e){const t=super.parseMaybeDefault(...e);return t.type==="AssignmentPattern"&&t.typeAnnotation&&t.right.start<t.typeAnnotation.start&&this.raise(t.typeAnnotation.start,ee.TypeAnnotationAfterAssign),t}getTokenFromCode(e){if(this.state.inType){if(e===62)return this.finishOp(44,1);if(e===60)return this.finishOp(43,1)}return super.getTokenFromCode(e)}reScan_lt_gt(){const{type:e}=this.state;e===43?(this.state.pos-=1,this.readToken_lt()):e===44&&(this.state.pos-=1,this.readToken_gt())}toAssignableList(e){for(let t=0;t<e.length;t++){const r=e[t];if(!!r)switch(r.type){case"TSTypeCastExpression":e[t]=this.typeCastToParameter(r);break;case"TSAsExpression":case"TSTypeAssertion":this.state.maybeInArrowParameters?this.raise(r.start,ee.UnexpectedTypeCastInParameter):e[t]=this.typeCastToParameter(r);break}}return super.toAssignableList(...arguments)}typeCastToParameter(e){return e.expression.typeAnnotation=e.typeAnnotation,this.resetEndLocation(e.expression,e.typeAnnotation.end,e.typeAnnotation.loc.end),e.expression}shouldParseArrow(e){return this.match(14)?e.every(t=>this.isAssignable(t,!0)):super.shouldParseArrow(e)}shouldParseAsyncArrow(){return this.match(14)||super.shouldParseAsyncArrow()}canHaveLeadingDecorator(){return super.canHaveLeadingDecorator()||this.isAbstractClass()}jsxParseOpeningElementAfterName(e){if(this.match(43)){const t=this.tsTryParseAndCatch(()=>this.tsParseTypeArguments());t&&(e.typeParameters=t)}return super.jsxParseOpeningElementAfterName(e)}getGetterSetterExpectedParamCount(e){const t=super.getGetterSetterExpectedParamCount(e),n=this.getObjectOrClassMethodParams(e)[0];return n&&this.isThisParam(n)?t+1:t}parseCatchClauseParam(){const e=super.parseCatchClauseParam(),t=this.tsTryParseTypeAnnotation();return t&&(e.typeAnnotation=t,this.resetEndLocation(e)),e}tsInAmbientContext(e){const t=this.state.isAmbientContext;this.state.isAmbientContext=!0;try{return e()}finally{this.state.isAmbientContext=t}}parseClass(e,...t){const r=this.state.inAbstractClass;this.state.inAbstractClass=!!e.abstract;try{return super.parseClass(e,...t)}finally{this.state.inAbstractClass=r}}tsParseAbstractDeclaration(e){if(this.match(74))return e.abstract=!0,this.parseClass(e,!0,!1);if(this.isContextual(119)){if(!this.hasFollowingLineBreak())return e.abstract=!0,this.raise(e.start,ee.NonClassMethodPropertyHasAbstractModifer),this.next(),this.tsParseInterfaceDeclaration(e)}else this.unexpected(null,74)}parseMethod(...e){const t=super.parseMethod(...e);if(t.abstract&&(this.hasPlugin("estree")?!!t.value.body:!!t.body)){const{key:n}=t;this.raise(t.start,ee.AbstractMethodHasImplementation,n.type==="Identifier"&&!t.computed?n.name:`[${this.input.slice(n.start,n.end)}]`)}return t}tsParseTypeParameterName(){return this.parseIdentifier().name}shouldParseAsAmbientContext(){return!!this.getPluginOption("typescript","dts")}parse(){return this.shouldParseAsAmbientContext()&&(this.state.isAmbientContext=!0),super.parse()}getExpression(){return this.shouldParseAsAmbientContext()&&(this.state.isAmbientContext=!0),super.getExpression()}parseExportSpecifier(e,t,r,n){return!t&&n?(this.parseTypeOnlyImportExportSpecifier(e,!1,r),this.finishNode(e,"ExportSpecifier")):(e.exportKind="value",super.parseExportSpecifier(e,t,r,n))}parseImportSpecifier(e,t,r,n){return!t&&n?(this.parseTypeOnlyImportExportSpecifier(e,!0,r),this.finishNode(e,"ImportSpecifier")):(e.importKind="value",super.parseImportSpecifier(e,t,r,n))}parseTypeOnlyImportExportSpecifier(e,t,r){const n=t?"imported":"local",i=t?"local":"exported";let a=e[n],o,u=!1,c=!0;const l=a.start;if(this.isContextual(87)){const f=this.parseIdentifier();if(this.isContextual(87)){const d=this.parseIdentifier();Qr(this.state.type)?(u=!0,a=f,o=this.parseIdentifier(),c=!1):(o=d,c=!1)}else Qr(this.state.type)?(c=!1,o=this.parseIdentifier()):(u=!0,a=f)}else Qr(this.state.type)&&(u=!0,a=this.parseIdentifier());u&&r&&this.raise(l,t?ee.TypeModifierIsUsedInTypeImports:ee.TypeModifierIsUsedInTypeExports),e[n]=a,e[i]=o;const h=t?"importKind":"exportKind";e[h]=u?"type":"value",c&&this.eatContextual(87)&&(e[i]=t?this.parseIdentifier():this.parseModuleExportName()),e[i]||(e[i]=Yr(e[n])),t&&this.checkLVal(e[i],"import specifier",Yt)}};const mM=Xi({ClassNameIsRequired:"A class name is required."},Hr.SyntaxError);var gM=s=>class extends s{parsePlaceholder(e){if(this.match(134)){const t=this.startNode();return this.next(),this.assertNoSpace("Unexpected space in placeholder."),t.name=super.parseIdentifier(!0),this.assertNoSpace("Unexpected space in placeholder."),this.expect(134),this.finishPlaceholder(t,e)}}finishPlaceholder(e,t){const r=!!(e.expectedNode&&e.type==="Placeholder");return e.expectedNode=t,r?e:this.finishNode(e,"Placeholder")}getTokenFromCode(e){return e===37&&this.input.charCodeAt(this.state.pos+1)===37?this.finishOp(134,2):super.getTokenFromCode(...arguments)}parseExprAtom(){return this.parsePlaceholder("Expression")||super.parseExprAtom(...arguments)}parseIdentifier(){return this.parsePlaceholder("Identifier")||super.parseIdentifier(...arguments)}checkReservedWord(e){e!==void 0&&super.checkReservedWord(...arguments)}parseBindingAtom(){return this.parsePlaceholder("Pattern")||super.parseBindingAtom(...arguments)}checkLVal(e){e.type!=="Placeholder"&&super.checkLVal(...arguments)}toAssignable(e){return e&&e.type==="Placeholder"&&e.expectedNode==="Expression"?(e.expectedNode="Pattern",e):super.toAssignable(...arguments)}isLet(e){return super.isLet(e)?!0:!this.isContextual(93)||e?!1:this.lookahead().type===134}verifyBreakContinue(e){e.label&&e.label.type==="Placeholder"||super.verifyBreakContinue(...arguments)}parseExpressionStatement(e,t){if(t.type!=="Placeholder"||t.extra&&t.extra.parenthesized)return super.parseExpressionStatement(...arguments);if(this.match(14)){const r=e;return r.label=this.finishPlaceholder(t,"Identifier"),this.next(),r.body=this.parseStatement("label"),this.finishNode(r,"LabeledStatement")}return this.semicolon(),e.name=t.name,this.finishPlaceholder(e,"Statement")}parseBlock(){return this.parsePlaceholder("BlockStatement")||super.parseBlock(...arguments)}parseFunctionId(){return this.parsePlaceholder("Identifier")||super.parseFunctionId(...arguments)}parseClass(e,t,r){const n=t?"ClassDeclaration":"ClassExpression";this.next(),this.takeDecorators(e);const i=this.state.strict,a=this.parsePlaceholder("Identifier");if(a)if(this.match(75)||this.match(134)||this.match(5))e.id=a;else{if(r||!t)return e.id=null,e.body=this.finishPlaceholder(a,"ClassBody"),this.finishNode(e,n);this.unexpected(null,mM.ClassNameIsRequired)}else this.parseClassId(e,t,r);return this.parseClassSuper(e),e.body=this.parsePlaceholder("ClassBody")||this.parseClassBody(!!e.superClass,i),this.finishNode(e,n)}parseExport(e){const t=this.parsePlaceholder("Identifier");if(!t)return super.parseExport(...arguments);if(!this.isContextual(91)&&!this.match(12))return e.specifiers=[],e.source=null,e.declaration=this.finishPlaceholder(t,"Declaration"),this.finishNode(e,"ExportNamedDeclaration");this.expectPlugin("exportDefaultFrom");const r=this.startNode();return r.exported=t,e.specifiers=[this.finishNode(r,"ExportDefaultSpecifier")],super.parseExport(e)}isExportDefaultSpecifier(){if(this.match(59)){const e=this.nextTokenStart();if(this.isUnparsedContextual(e,"from")&&this.input.startsWith(Rs(134),this.nextTokenStartSince(e+4)))return!0}return super.isExportDefaultSpecifier()}maybeParseExportDefaultSpecifier(e){return e.specifiers&&e.specifiers.length>0?!0:super.maybeParseExportDefaultSpecifier(...arguments)}checkExport(e){const{specifiers:t}=e;t!=null&&t.length&&(e.specifiers=t.filter(r=>r.exported.type==="Placeholder")),super.checkExport(e),e.specifiers=t}parseImport(e){const t=this.parsePlaceholder("Identifier");if(!t)return super.parseImport(...arguments);if(e.specifiers=[],!this.isContextual(91)&&!this.match(12))return e.source=this.finishPlaceholder(t,"StringLiteral"),this.semicolon(),this.finishNode(e,"ImportDeclaration");const r=this.startNodeAtNode(t);return r.local=t,this.finishNode(r,"ImportDefaultSpecifier"),e.specifiers.push(r),this.eat(12)&&(this.maybeParseStarImportSpecifier(e)||this.parseNamedImportSpecifiers(e)),this.expectContextual(91),e.source=this.parseImportSource(),this.semicolon(),this.finishNode(e,"ImportDeclaration")}parseImportSource(){return this.parsePlaceholder("StringLiteral")||super.parseImportSource(...arguments)}},yM=s=>class extends s{parseV8Intrinsic(){if(this.match(48)){const e=this.state.start,t=this.startNode();if(this.next(),we(this.state.type)){const r=this.parseIdentifierName(this.state.start),n=this.createIdentifier(t,r);if(n.type="V8IntrinsicIdentifier",this.match(10))return n}this.unexpected(e)}}parseExprAtom(){return this.parseV8Intrinsic()||super.parseExprAtom(...arguments)}};function bt(s,e){return s.some(t=>Array.isArray(t)?t[0]===e:t===e)}function zn(s,e,t){const r=s.find(n=>Array.isArray(n)?n[0]===e:n===e);return r&&Array.isArray(r)?r[1][t]:null}const Qy=["minimal","fsharp","hack","smart"],Yy=["^","%","#"],Jy=["hash","bar"];function vM(s){if(bt(s,"decorators")){if(bt(s,"decorators-legacy"))throw new Error("Cannot use the decorators and decorators-legacy plugin together");const e=zn(s,"decorators","decoratorsBeforeExport");if(e==null)throw new Error("The 'decorators' plugin requires a 'decoratorsBeforeExport' option, whose value must be a boolean. If you are migrating from Babylon/Babel 6 or want to use the old decorators proposal, you should use the 'decorators-legacy' plugin instead of 'decorators'.");if(typeof e!="boolean")throw new Error("'decoratorsBeforeExport' must be a boolean.")}if(bt(s,"flow")&&bt(s,"typescript"))throw new Error("Cannot combine flow and typescript plugins.");if(bt(s,"placeholders")&&bt(s,"v8intrinsic"))throw new Error("Cannot combine placeholders and v8intrinsic plugins.");if(bt(s,"pipelineOperator")){const e=zn(s,"pipelineOperator","proposal");if(!Qy.includes(e)){const r=Qy.map(n=>`"${n}"`).join(", ");throw new Error(`"pipelineOperator" requires "proposal" option whose value must be one of: ${r}.`)}const t=bt(s,"recordAndTuple")&&zn(s,"recordAndTuple","syntaxType")==="hash";if(e==="hack"){if(bt(s,"placeholders"))throw new Error("Cannot combine placeholders plugin and Hack-style pipes.");if(bt(s,"v8intrinsic"))throw new Error("Cannot combine v8intrinsic plugin and Hack-style pipes.");const r=zn(s,"pipelineOperator","topicToken");if(!Yy.includes(r)){const n=Yy.map(i=>`"${i}"`).join(", ");throw new Error(`"pipelineOperator" in "proposal": "hack" mode also requires a "topicToken" option whose value must be one of: ${n}.`)}if(r==="#"&&t)throw new Error('Plugin conflict between `["pipelineOperator", { proposal: "hack", topicToken: "#" }]` and `["recordAndtuple", { syntaxType: "hash"}]`.')}else if(e==="smart"&&t)throw new Error('Plugin conflict between `["pipelineOperator", { proposal: "smart" }]` and `["recordAndtuple", { syntaxType: "hash"}]`.')}if(bt(s,"moduleAttributes")){if(bt(s,"importAssertions"))throw new Error("Cannot combine importAssertions and moduleAttributes plugins.");if(zn(s,"moduleAttributes","version")!=="may-2020")throw new Error("The 'moduleAttributes' plugin requires a 'version' option, representing the last proposal update. Currently, the only supported value is 'may-2020'.")}if(bt(s,"recordAndTuple")&&!Jy.includes(zn(s,"recordAndTuple","syntaxType")))throw new Error("'recordAndTuple' requires 'syntaxType' option whose value should be one of: "+Jy.map(e=>`'${e}'`).join(", "));if(bt(s,"asyncDoExpressions")&&!bt(s,"doExpressions")){const e=new Error("'asyncDoExpressions' requires 'doExpressions', please add 'doExpressions' to parser plugins.");throw e.missingPlugins="doExpressions",e}}const qS={estree:sR,jsx:cM,flow:iM,typescript:pM,v8intrinsic:yM,placeholders:gM},wM=Object.keys(qS),Xy={sourceType:"script",sourceFilename:void 0,startColumn:0,startLine:1,allowAwaitOutsideFunction:!1,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowSuperOutsideMethod:!1,allowUndeclaredExports:!1,plugins:[],strictMode:null,ranges:!1,tokens:!1,createParenthesizedExpressions:!1,errorRecovery:!1,attachComment:!0};function TM(s){const e={};for(const t of Object.keys(Xy))e[t]=s&&s[t]!=null?s[t]:Xy[t];return e}const Uf=s=>s.type==="ParenthesizedExpression"?Uf(s.expression):s;class bM extends ZR{toAssignable(e,t=!1){var r,n;let i;switch((e.type==="ParenthesizedExpression"||(r=e.extra)!=null&&r.parenthesized)&&(i=Uf(e),t?i.type==="Identifier"?this.expressionScope.recordParenthesizedIdentifierError(e.start,_.InvalidParenthesizedAssignment):i.type!=="MemberExpression"&&this.raise(e.start,_.InvalidParenthesizedAssignment):this.raise(e.start,_.InvalidParenthesizedAssignment)),e.type){case"Identifier":case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern";for(let o=0,u=e.properties.length,c=u-1;o<u;o++){var a;const l=e.properties[o],h=o===c;this.toAssignableObjectExpressionProp(l,h,t),h&&l.type==="RestElement"&&(a=e.extra)!=null&&a.trailingComma&&this.raiseRestNotLast(e.extra.trailingComma)}break;case"ObjectProperty":this.toAssignable(e.value,t);break;case"SpreadElement":{this.checkToRestConversion(e),e.type="RestElement";const o=e.argument;this.toAssignable(o,t);break}case"ArrayExpression":e.type="ArrayPattern",this.toAssignableList(e.elements,(n=e.extra)==null?void 0:n.trailingComma,t);break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,_.MissingEqInAssignment),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(i,t);break}return e}toAssignableObjectExpressionProp(e,t,r){if(e.type==="ObjectMethod"){const n=e.kind==="get"||e.kind==="set"?_.PatternHasAccessor:_.PatternHasMethod;this.raise(e.key.start,n)}else e.type==="SpreadElement"&&!t?this.raiseRestNotLast(e.start):this.toAssignable(e,r)}toAssignableList(e,t,r){let n=e.length;if(n){const i=e[n-1];if((i==null?void 0:i.type)==="RestElement")--n;else if((i==null?void 0:i.type)==="SpreadElement"){i.type="RestElement";let a=i.argument;this.toAssignable(a,r),a=Uf(a),a.type!=="Identifier"&&a.type!=="MemberExpression"&&a.type!=="ArrayPattern"&&a.type!=="ObjectPattern"&&this.unexpected(a.start),t&&this.raiseTrailingCommaAfterRest(t),--n}}for(let i=0;i<n;i++){const a=e[i];a&&(this.toAssignable(a,r),a.type==="RestElement"&&this.raiseRestNotLast(a.start))}return e}isAssignable(e,t){switch(e.type){case"Identifier":case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":return!0;case"ObjectExpression":{const r=e.properties.length-1;return e.properties.every((n,i)=>n.type!=="ObjectMethod"&&(i===r||n.type!=="SpreadElement")&&this.isAssignable(n))}case"ObjectProperty":return this.isAssignable(e.value);case"SpreadElement":return this.isAssignable(e.argument);case"ArrayExpression":return e.elements.every(r=>r===null||this.isAssignable(r));case"AssignmentExpression":return e.operator==="=";case"ParenthesizedExpression":return this.isAssignable(e.expression);case"MemberExpression":case"OptionalMemberExpression":return!t;default:return!1}}toReferencedList(e,t){return e}toReferencedListDeep(e,t){this.toReferencedList(e,t);for(const r of e)(r==null?void 0:r.type)==="ArrayExpression"&&this.toReferencedListDeep(r.elements)}parseSpread(e,t){const r=this.startNode();return this.next(),r.argument=this.parseMaybeAssignAllowIn(e,void 0,t),this.finishNode(r,"SpreadElement")}parseRestBinding(){const e=this.startNode();return this.next(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")}parseBindingAtom(){switch(this.state.type){case 0:{const e=this.startNode();return this.next(),e.elements=this.parseBindingList(3,93,!0),this.finishNode(e,"ArrayPattern")}case 5:return this.parseObjectLike(8,!0)}return this.parseIdentifier()}parseBindingList(e,t,r,n){const i=[];let a=!0;for(;!this.eat(e);)if(a?a=!1:this.expect(12),r&&this.match(12))i.push(null);else{if(this.eat(e))break;if(this.match(21)){i.push(this.parseAssignableListItemTypes(this.parseRestBinding())),this.checkCommaAfterRest(t),this.expect(e);break}else{const o=[];for(this.match(24)&&this.hasPlugin("decorators")&&this.raise(this.state.start,_.UnsupportedParameterDecorator);this.match(24);)o.push(this.parseDecorator());i.push(this.parseAssignableListItem(n,o))}}return i}parseBindingRestProperty(e){return this.next(),e.argument=this.parseIdentifier(),this.checkCommaAfterRest(125),this.finishNode(e,"RestElement")}parseBindingProperty(){const e=this.startNode(),{type:t,start:r,startLoc:n}=this.state;return t===21?this.parseBindingRestProperty(e):(this.parsePropertyName(e),e.method=!1,this.parseObjPropValue(e,r,n,!1,!1,!0,!1),e)}parseAssignableListItem(e,t){const r=this.parseMaybeDefault();this.parseAssignableListItemTypes(r);const n=this.parseMaybeDefault(r.start,r.loc.start,r);return t.length&&(r.decorators=t),n}parseAssignableListItemTypes(e){return e}parseMaybeDefault(e,t,r){var n,i,a;if(t=(n=t)!=null?n:this.state.startLoc,e=(i=e)!=null?i:this.state.start,r=(a=r)!=null?a:this.parseBindingAtom(),!this.eat(27))return r;const o=this.startNodeAt(e,t);return o.left=r,o.right=this.parseMaybeAssignAllowIn(),this.finishNode(o,"AssignmentPattern")}checkLVal(e,t,r=ga,n,i,a=!1){switch(e.type){case"Identifier":{const{name:o}=e;this.state.strict&&(a?xS(o,this.inModule):_S(o))&&this.raise(e.start,r===ga?_.StrictEvalArguments:_.StrictEvalArgumentsBinding,o),n&&(n.has(o)?this.raise(e.start,_.ParamDupe):n.add(o)),i&&o==="let"&&this.raise(e.start,_.LetInLexicalBinding),r&ga||this.scope.declareName(o,r,e.start);break}case"MemberExpression":r!==ga&&this.raise(e.start,_.InvalidPropertyBindingPattern);break;case"ObjectPattern":for(let o of e.properties){if(this.isObjectProperty(o))o=o.value;else if(this.isObjectMethod(o))continue;this.checkLVal(o,"object destructuring pattern",r,n,i)}break;case"ArrayPattern":for(const o of e.elements)o&&this.checkLVal(o,"array destructuring pattern",r,n,i);break;case"AssignmentPattern":this.checkLVal(e.left,"assignment pattern",r,n);break;case"RestElement":this.checkLVal(e.argument,"rest element",r,n);break;case"ParenthesizedExpression":this.checkLVal(e.expression,"parenthesized expression",r,n);break;default:this.raise(e.start,r===ga?_.InvalidLhs:_.InvalidLhsBinding,t)}}checkToRestConversion(e){e.argument.type!=="Identifier"&&e.argument.type!=="MemberExpression"&&this.raise(e.argument.start,_.InvalidRestAssignmentPattern)}checkCommaAfterRest(e){this.match(12)&&(this.lookaheadCharCode()===e?this.raiseTrailingCommaAfterRest(this.state.start):this.raiseRestNotLast(this.state.start))}raiseRestNotLast(e){throw this.raise(e,_.ElementAfterRest)}raiseTrailingCommaAfterRest(e){this.raise(e,_.RestTrailingComma)}}const Zy=new Map([["ArrowFunctionExpression","arrow function"],["AssignmentExpression","assignment"],["ConditionalExpression","conditional"],["YieldExpression","yield"]]);class SM extends bM{checkProto(e,t,r,n){if(e.type==="SpreadElement"||this.isObjectMethod(e)||e.computed||e.shorthand)return;const i=e.key;if((i.type==="Identifier"?i.name:i.value)==="__proto__"){if(t){this.raise(i.start,_.RecordNoProto);return}r.used&&(n?n.doubleProto===-1&&(n.doubleProto=i.start):this.raise(i.start,_.DuplicateProto)),r.used=!0}}shouldExitDescending(e,t){return e.type==="ArrowFunctionExpression"&&e.start===t}getExpression(){this.enterInitialScopes(),this.nextToken();const e=this.parseExpression();return this.match(129)||this.unexpected(),this.finalizeRemainingComments(),e.comments=this.state.comments,e.errors=this.state.errors,this.options.tokens&&(e.tokens=this.tokens),e}parseExpression(e,t){return e?this.disallowInAnd(()=>this.parseExpressionBase(t)):this.allowInAnd(()=>this.parseExpressionBase(t))}parseExpressionBase(e){const t=this.state.start,r=this.state.startLoc,n=this.parseMaybeAssign(e);if(this.match(12)){const i=this.startNodeAt(t,r);for(i.expressions=[n];this.eat(12);)i.expressions.push(this.parseMaybeAssign(e));return this.toReferencedList(i.expressions),this.finishNode(i,"SequenceExpression")}return n}parseMaybeAssignDisallowIn(e,t){return this.disallowInAnd(()=>this.parseMaybeAssign(e,t))}parseMaybeAssignAllowIn(e,t){return this.allowInAnd(()=>this.parseMaybeAssign(e,t))}setOptionalParametersError(e,t){var r;e.optionalParameters=(r=t==null?void 0:t.pos)!=null?r:this.state.start}parseMaybeAssign(e,t){const r=this.state.start,n=this.state.startLoc;if(this.isContextual(99)&&this.prodParam.hasYield){let u=this.parseYield();return t&&(u=t.call(this,u,r,n)),u}let i;e?i=!1:(e=new Xu,i=!0);const{type:a}=this.state;(a===10||we(a))&&(this.state.potentialArrowAt=this.state.start);let o=this.parseMaybeConditional(e);if(t&&(o=t.call(this,o,r,n)),uR(this.state.type)){const u=this.startNodeAt(r,n),c=this.state.value;return u.operator=c,this.match(27)?(u.left=this.toAssignable(o,!0),e.doubleProto>=r&&(e.doubleProto=-1),e.shorthandAssign>=r&&(e.shorthandAssign=-1)):u.left=o,this.checkLVal(o,"assignment expression"),this.next(),u.right=this.parseMaybeAssign(),this.finishNode(u,"AssignmentExpression")}else i&&this.checkExpressionErrors(e,!0);return o}parseMaybeConditional(e){const t=this.state.start,r=this.state.startLoc,n=this.state.potentialArrowAt,i=this.parseExprOps(e);return this.shouldExitDescending(i,n)?i:this.parseConditional(i,t,r,e)}parseConditional(e,t,r,n){if(this.eat(17)){const i=this.startNodeAt(t,r);return i.test=e,i.consequent=this.parseMaybeAssignAllowIn(),this.expect(14),i.alternate=this.parseMaybeAssign(),this.finishNode(i,"ConditionalExpression")}return e}parseMaybeUnaryOrPrivate(e){return this.match(128)?this.parsePrivateName():this.parseMaybeUnary(e)}parseExprOps(e){const t=this.state.start,r=this.state.startLoc,n=this.state.potentialArrowAt,i=this.parseMaybeUnaryOrPrivate(e);return this.shouldExitDescending(i,n)?i:this.parseExprOp(i,t,r,-1)}parseExprOp(e,t,r,n){if(this.isPrivateName(e)){const a=this.getPrivateNameSV(e),{start:o}=e;(n>=Ku(52)||!this.prodParam.hasIn||!this.match(52))&&this.raise(o,_.PrivateInExpectedIn,a),this.classScope.usePrivateName(a,o)}const i=this.state.type;if(lR(i)&&(this.prodParam.hasIn||!this.match(52))){let a=Ku(i);if(a>n){if(i===35){if(this.expectPlugin("pipelineOperator"),this.state.inFSharpPipelineDirectBody)return e;this.checkPipelineAtInfixOperator(e,t)}const o=this.startNodeAt(t,r);o.left=e,o.operator=this.state.value;const u=i===37||i===38,c=i===36;if(c&&(a=Ku(38)),this.next(),i===35&&this.getPluginOption("pipelineOperator","proposal")==="minimal"&&this.state.type===90&&this.prodParam.hasAwait)throw this.raise(this.state.start,_.UnexpectedAwaitAfterPipelineBody);o.right=this.parseExprOpRightExpr(i,a),this.finishNode(o,u||c?"LogicalExpression":"BinaryExpression");const l=this.state.type;if(c&&(l===37||l===38)||u&&l===36)throw this.raise(this.state.start,_.MixingCoalesceWithLogical);return this.parseExprOp(o,t,r,n)}}return e}parseExprOpRightExpr(e,t){const r=this.state.start,n=this.state.startLoc;switch(e){case 35:switch(this.getPluginOption("pipelineOperator","proposal")){case"hack":return this.withTopicBindingContext(()=>this.parseHackPipeBody());case"smart":return this.withTopicBindingContext(()=>{if(this.prodParam.hasYield&&this.isContextual(99))throw this.raise(this.state.start,_.PipeBodyIsTighter,this.state.value);return this.parseSmartPipelineBodyInStyle(this.parseExprOpBaseRightExpr(e,t),r,n)});case"fsharp":return this.withSoloAwaitPermittingContext(()=>this.parseFSharpPipelineBody(t))}default:return this.parseExprOpBaseRightExpr(e,t)}}parseExprOpBaseRightExpr(e,t){const r=this.state.start,n=this.state.startLoc;return this.parseExprOp(this.parseMaybeUnaryOrPrivate(),r,n,mR(e)?t-1:t)}parseHackPipeBody(){var e;const{start:t}=this.state,r=this.parseMaybeAssign();return Zy.has(r.type)&&!((e=r.extra)!=null&&e.parenthesized)&&this.raise(t,_.PipeUnparenthesizedBody,Zy.get(r.type)),this.topicReferenceWasUsedInCurrentContext()||this.raise(t,_.PipeTopicUnused),r}checkExponentialAfterUnary(e){this.match(51)&&this.raise(e.argument.start,_.UnexpectedTokenUnaryExponentiation)}parseMaybeUnary(e,t){const r=this.state.start,n=this.state.startLoc,i=this.isContextual(90);if(i&&this.isAwaitAllowed()){this.next();const c=this.parseAwait(r,n);return t||this.checkExponentialAfterUnary(c),c}const a=this.match(32),o=this.startNode();if(fR(this.state.type)){o.operator=this.state.value,o.prefix=!0,this.match(66)&&this.expectPlugin("throwExpressions");const c=this.match(83);if(this.next(),o.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(e,!0),this.state.strict&&c){const l=o.argument;l.type==="Identifier"?this.raise(o.start,_.StrictDelete):this.hasPropertyAsPrivateName(l)&&this.raise(o.start,_.DeletePrivateField)}if(!a)return t||this.checkExponentialAfterUnary(o),this.finishNode(o,"UnaryExpression")}const u=this.parseUpdate(o,a,e);if(i){const{type:c}=this.state;if((this.hasPlugin("v8intrinsic")?qy(c):qy(c)&&!this.match(48))&&!this.isAmbiguousAwait())return this.raiseOverwrite(r,_.AwaitNotInAsyncContext),this.parseAwait(r,n)}return u}parseUpdate(e,t,r){if(t)return this.checkLVal(e.argument,"prefix operation"),this.finishNode(e,"UpdateExpression");const n=this.state.start,i=this.state.startLoc;let a=this.parseExprSubscripts(r);if(this.checkExpressionErrors(r,!1))return a;for(;hR(this.state.type)&&!this.canInsertSemicolon();){const o=this.startNodeAt(n,i);o.operator=this.state.value,o.prefix=!1,o.argument=a,this.checkLVal(a,"postfix operation"),this.next(),a=this.finishNode(o,"UpdateExpression")}return a}parseExprSubscripts(e){const t=this.state.start,r=this.state.startLoc,n=this.state.potentialArrowAt,i=this.parseExprAtom(e);return this.shouldExitDescending(i,n)?i:this.parseSubscripts(i,t,r)}parseSubscripts(e,t,r,n){const i={optionalChainMember:!1,maybeAsyncArrow:this.atPossibleAsyncArrow(e),stop:!1};do e=this.parseSubscript(e,t,r,n,i),i.maybeAsyncArrow=!1;while(!i.stop);return e}parseSubscript(e,t,r,n,i){if(!n&&this.eat(15))return this.parseBind(e,t,r,n,i);if(this.match(22))return this.parseTaggedTemplateExpression(e,t,r,i);let a=!1;if(this.match(18)){if(n&&this.lookaheadCharCode()===40)return i.stop=!0,e;i.optionalChainMember=a=!0,this.next()}if(!n&&this.match(10))return this.parseCoverCallAndAsyncArrowHead(e,t,r,i,a);{const o=this.eat(0);return o||a||this.eat(16)?this.parseMember(e,t,r,i,o,a):(i.stop=!0,e)}}parseMember(e,t,r,n,i,a){const o=this.startNodeAt(t,r);o.object=e,o.computed=i;const u=!i&&this.match(128)&&this.state.value,c=i?this.parseExpression():u?this.parsePrivateName():this.parseIdentifier(!0);return u!==!1&&(o.object.type==="Super"&&this.raise(t,_.SuperPrivateField),this.classScope.usePrivateName(u,c.start)),o.property=c,i&&this.expect(3),n.optionalChainMember?(o.optional=a,this.finishNode(o,"OptionalMemberExpression")):this.finishNode(o,"MemberExpression")}parseBind(e,t,r,n,i){const a=this.startNodeAt(t,r);return a.object=e,a.callee=this.parseNoCallExpr(),i.stop=!0,this.parseSubscripts(this.finishNode(a,"BindExpression"),t,r,n)}parseCoverCallAndAsyncArrowHead(e,t,r,n,i){const a=this.state.maybeInArrowParameters;let o=null;this.state.maybeInArrowParameters=!0,this.next();let u=this.startNodeAt(t,r);return u.callee=e,n.maybeAsyncArrow&&(this.expressionScope.enter(HR()),o=new Xu),n.optionalChainMember&&(u.optional=i),i?u.arguments=this.parseCallExpressionArguments(11):u.arguments=this.parseCallExpressionArguments(11,e.type==="Import",e.type!=="Super",u,o),this.finishCallExpression(u,n.optionalChainMember),n.maybeAsyncArrow&&this.shouldParseAsyncArrow()&&!i?(n.stop=!0,this.expressionScope.validateAsPattern(),this.expressionScope.exit(),u=this.parseAsyncArrowFromCallExpression(this.startNodeAt(t,r),u)):(n.maybeAsyncArrow&&(this.checkExpressionErrors(o,!0),this.expressionScope.exit()),this.toReferencedArguments(u)),this.state.maybeInArrowParameters=a,u}toReferencedArguments(e,t){this.toReferencedListDeep(e.arguments,t)}parseTaggedTemplateExpression(e,t,r,n){const i=this.startNodeAt(t,r);return i.tag=e,i.quasi=this.parseTemplate(!0),n.optionalChainMember&&this.raise(t,_.OptionalChainingNoTemplate),this.finishNode(i,"TaggedTemplateExpression")}atPossibleAsyncArrow(e){return e.type==="Identifier"&&e.name==="async"&&this.state.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&e.start===this.state.potentialArrowAt}finishCallExpression(e,t){if(e.callee.type==="Import")if(e.arguments.length===2&&(this.hasPlugin("moduleAttributes")||this.expectPlugin("importAssertions")),e.arguments.length===0||e.arguments.length>2)this.raise(e.start,_.ImportCallArity,this.hasPlugin("importAssertions")||this.hasPlugin("moduleAttributes")?"one or two arguments":"one argument");else for(const r of e.arguments)r.type==="SpreadElement"&&this.raise(r.start,_.ImportCallSpreadArgument);return this.finishNode(e,t?"OptionalCallExpression":"CallExpression")}parseCallExpressionArguments(e,t,r,n,i){const a=[];let o=!0;const u=this.state.inFSharpPipelineDirectBody;for(this.state.inFSharpPipelineDirectBody=!1;!this.eat(e);){if(o)o=!1;else if(this.expect(12),this.match(e)){t&&!this.hasPlugin("importAssertions")&&!this.hasPlugin("moduleAttributes")&&this.raise(this.state.lastTokStart,_.ImportCallArgumentTrailingComma),n&&this.addExtra(n,"trailingComma",this.state.lastTokStart),this.next();break}a.push(this.parseExprListItem(!1,i,r))}return this.state.inFSharpPipelineDirectBody=u,a}shouldParseAsyncArrow(){return this.match(19)&&!this.canInsertSemicolon()}parseAsyncArrowFromCallExpression(e,t){var r;return this.resetPreviousNodeTrailingComments(t),this.expect(19),this.parseArrowExpression(e,t.arguments,!0,(r=t.extra)==null?void 0:r.trailingComma),t.innerComments&&Eo(e,t.innerComments),t.callee.trailingComments&&Eo(e,t.callee.trailingComments),e}parseNoCallExpr(){const e=this.state.start,t=this.state.startLoc;return this.parseSubscripts(this.parseExprAtom(),e,t,!0)}parseExprAtom(e){let t;const{type:r}=this.state;switch(r){case 73:return this.parseSuper();case 77:return t=this.startNode(),this.next(),this.match(16)?this.parseImportMetaProperty(t):(this.match(10)||this.raise(this.state.lastTokStart,_.UnsupportedImport),this.finishNode(t,"Import"));case 72:return t=this.startNode(),this.next(),this.finishNode(t,"ThisExpression");case 84:return this.parseDo(this.startNode(),!1);case 50:case 29:return this.readRegexp(),this.parseRegExpLiteral(this.state.value);case 124:return this.parseNumericLiteral(this.state.value);case 125:return this.parseBigIntLiteral(this.state.value);case 126:return this.parseDecimalLiteral(this.state.value);case 123:return this.parseStringLiteral(this.state.value);case 78:return this.parseNullLiteral();case 79:return this.parseBooleanLiteral(!0);case 80:return this.parseBooleanLiteral(!1);case 10:{const n=this.state.potentialArrowAt===this.state.start;return this.parseParenAndDistinguishExpression(n)}case 2:case 1:return this.parseArrayLike(this.state.type===2?4:3,!1,!0);case 0:return this.parseArrayLike(3,!0,!1,e);case 6:case 7:return this.parseObjectLike(this.state.type===6?9:8,!1,!0);case 5:return this.parseObjectLike(8,!1,!1,e);case 62:return this.parseFunctionOrFunctionSent();case 24:this.parseDecorators();case 74:return t=this.startNode(),this.takeDecorators(t),this.parseClass(t,!1);case 71:return this.parseNewOrNewTarget();case 22:return this.parseTemplate(!1);case 15:{t=this.startNode(),this.next(),t.object=null;const n=t.callee=this.parseNoCallExpr();if(n.type==="MemberExpression")return this.finishNode(t,"BindExpression");throw this.raise(n.start,_.UnsupportedBind)}case 128:return this.raise(this.state.start,_.PrivateInExpectedIn,this.state.value),this.parsePrivateName();case 31:return this.parseTopicReferenceThenEqualsSign(48,"%");case 30:return this.parseTopicReferenceThenEqualsSign(40,"^");case 40:case 48:case 25:{const n=this.getPluginOption("pipelineOperator","proposal");if(n)return this.parseTopicReference(n);throw this.unexpected()}case 43:{const n=this.input.codePointAt(this.nextTokenStart());if(bs(n)||n===62){this.expectOnePlugin(["jsx","flow","typescript"]);break}else throw this.unexpected()}default:if(we(r)){if(this.isContextual(117)&&this.lookaheadCharCode()===123&&!this.hasFollowingLineBreak())return this.parseModuleExpression();const n=this.state.potentialArrowAt===this.state.start,i=this.state.containsEsc,a=this.parseIdentifier();if(!i&&a.name==="async"&&!this.canInsertSemicolon()){const{type:o}=this.state;if(o===62)return this.resetPreviousNodeTrailingComments(a),this.next(),this.parseFunction(this.startNodeAtNode(a),void 0,!0);if(we(o))return this.lookaheadCharCode()===61?this.parseAsyncArrowUnaryFunction(this.startNodeAtNode(a)):a;if(o===84)return this.resetPreviousNodeTrailingComments(a),this.parseDo(this.startNodeAtNode(a),!0)}return n&&this.match(19)&&!this.canInsertSemicolon()?(this.next(),this.parseArrowExpression(this.startNodeAtNode(a),[a],!1)):a}else throw this.unexpected()}}parseTopicReferenceThenEqualsSign(e,t){const r=this.getPluginOption("pipelineOperator","proposal");if(r)return this.state.type=e,this.state.value=t,this.state.pos--,this.state.end--,this.state.endLoc.column--,this.parseTopicReference(r);throw this.unexpected()}parseTopicReference(e){const t=this.startNode(),r=this.state.start,n=this.state.type;return this.next(),this.finishTopicReference(t,r,e,n)}finishTopicReference(e,t,r,n){if(this.testTopicReferenceConfiguration(r,t,n)){let i;return r==="smart"?i="PipelinePrimaryTopicReference":i="TopicReference",this.topicReferenceIsAllowedInCurrentContext()||(r==="smart"?this.raise(t,_.PrimaryTopicNotAllowed):this.raise(t,_.PipeTopicUnbound)),this.registerTopicReference(),this.finishNode(e,i)}else throw this.raise(t,_.PipeTopicUnconfiguredToken,Rs(n))}testTopicReferenceConfiguration(e,t,r){switch(e){case"hack":{const n=this.getPluginOption("pipelineOperator","topicToken");return Rs(r)===n}case"smart":return r===25;default:throw this.raise(t,_.PipeTopicRequiresHackPipes)}}parseAsyncArrowUnaryFunction(e){this.prodParam.enter(Ju(!0,this.prodParam.hasYield));const t=[this.parseIdentifier()];return this.prodParam.exit(),this.hasPrecedingLineBreak()&&this.raise(this.state.pos,_.LineTerminatorBeforeArrow),this.expect(19),this.parseArrowExpression(e,t,!0),e}parseDo(e,t){this.expectPlugin("doExpressions"),t&&this.expectPlugin("asyncDoExpressions"),e.async=t,this.next();const r=this.state.labels;return this.state.labels=[],t?(this.prodParam.enter(Ql),e.body=this.parseBlock(),this.prodParam.exit()):e.body=this.parseBlock(),this.state.labels=r,this.finishNode(e,"DoExpression")}parseSuper(){const e=this.startNode();return this.next(),this.match(10)&&!this.scope.allowDirectSuper&&!this.options.allowSuperOutsideMethod?this.raise(e.start,_.SuperNotAllowed):!this.scope.allowSuper&&!this.options.allowSuperOutsideMethod&&this.raise(e.start,_.UnexpectedSuper),!this.match(10)&&!this.match(0)&&!this.match(16)&&this.raise(e.start,_.UnsupportedSuper),this.finishNode(e,"Super")}parsePrivateName(){const e=this.startNode(),t=this.startNodeAt(this.state.start+1,new So(this.state.curLine,this.state.start+1-this.state.lineStart)),r=this.state.value;return this.next(),e.id=this.createIdentifier(t,r),this.finishNode(e,"PrivateName")}parseFunctionOrFunctionSent(){const e=this.startNode();if(this.next(),this.prodParam.hasYield&&this.match(16)){const t=this.createIdentifier(this.startNodeAtNode(e),"function");return this.next(),this.match(96)?this.expectPlugin("functionSent"):this.hasPlugin("functionSent")||this.unexpected(),this.parseMetaProperty(e,t,"sent")}return this.parseFunction(e)}parseMetaProperty(e,t,r){e.meta=t;const n=this.state.containsEsc;return e.property=this.parseIdentifier(!0),(e.property.name!==r||n)&&this.raise(e.property.start,_.UnsupportedMetaProperty,t.name,r),this.finishNode(e,"MetaProperty")}parseImportMetaProperty(e){const t=this.createIdentifier(this.startNodeAtNode(e),"import");return this.next(),this.isContextual(94)&&(this.inModule||this.raise(t.start,vS.ImportMetaOutsideModule),this.sawUnambiguousESM=!0),this.parseMetaProperty(e,t,"meta")}parseLiteralAtNode(e,t,r){return this.addExtra(r,"rawValue",e),this.addExtra(r,"raw",this.input.slice(r.start,this.state.end)),r.value=e,this.next(),this.finishNode(r,t)}parseLiteral(e,t){const r=this.startNode();return this.parseLiteralAtNode(e,t,r)}parseStringLiteral(e){return this.parseLiteral(e,"StringLiteral")}parseNumericLiteral(e){return this.parseLiteral(e,"NumericLiteral")}parseBigIntLiteral(e){return this.parseLiteral(e,"BigIntLiteral")}parseDecimalLiteral(e){return this.parseLiteral(e,"DecimalLiteral")}parseRegExpLiteral(e){const t=this.parseLiteral(e.value,"RegExpLiteral");return t.pattern=e.pattern,t.flags=e.flags,t}parseBooleanLiteral(e){const t=this.startNode();return t.value=e,this.next(),this.finishNode(t,"BooleanLiteral")}parseNullLiteral(){const e=this.startNode();return this.next(),this.finishNode(e,"NullLiteral")}parseParenAndDistinguishExpression(e){const t=this.state.start,r=this.state.startLoc;let n;this.next(),this.expressionScope.enter(KR());const i=this.state.maybeInArrowParameters,a=this.state.inFSharpPipelineDirectBody;this.state.maybeInArrowParameters=!0,this.state.inFSharpPipelineDirectBody=!1;const o=this.state.start,u=this.state.startLoc,c=[],l=new Xu;let h=!0,f,d;for(;!this.match(11);){if(h)h=!1;else if(this.expect(12,l.optionalParameters===-1?null:l.optionalParameters),this.match(11)){d=this.state.start;break}if(this.match(21)){const S=this.state.start,b=this.state.startLoc;f=this.state.start,c.push(this.parseParenItem(this.parseRestBinding(),S,b)),this.checkCommaAfterRest(41);break}else c.push(this.parseMaybeAssignAllowIn(l,this.parseParenItem))}const g=this.state.lastTokEnd,p=this.state.lastTokEndLoc;this.expect(11),this.state.maybeInArrowParameters=i,this.state.inFSharpPipelineDirectBody=a;let m=this.startNodeAt(t,r);if(e&&this.shouldParseArrow(c)&&(m=this.parseArrow(m)))return this.expressionScope.validateAsPattern(),this.expressionScope.exit(),this.parseArrowExpression(m,c,!1),m;if(this.expressionScope.exit(),c.length||this.unexpected(this.state.lastTokStart),d&&this.unexpected(d),f&&this.unexpected(f),this.checkExpressionErrors(l,!0),this.toReferencedListDeep(c,!0),c.length>1?(n=this.startNodeAt(o,u),n.expressions=c,this.finishNode(n,"SequenceExpression"),this.resetEndLocation(n,g,p)):n=c[0],!this.options.createParenthesizedExpressions)return this.addExtra(n,"parenthesized",!0),this.addExtra(n,"parenStart",t),this.takeSurroundingComments(n,t,this.state.lastTokEnd),n;const v=this.startNodeAt(t,r);return v.expression=n,this.finishNode(v,"ParenthesizedExpression"),v}shouldParseArrow(e){return!this.canInsertSemicolon()}parseArrow(e){if(this.eat(19))return e}parseParenItem(e,t,r){return e}parseNewOrNewTarget(){const e=this.startNode();if(this.next(),this.match(16)){const t=this.createIdentifier(this.startNodeAtNode(e),"new");this.next();const r=this.parseMetaProperty(e,t,"target");return!this.scope.inNonArrowFunction&&!this.scope.inClass&&this.raise(r.start,_.UnexpectedNewTarget),r}return this.parseNew(e)}parseNew(e){return e.callee=this.parseNoCallExpr(),e.callee.type==="Import"?this.raise(e.callee.start,_.ImportCallNotNewExpression):this.isOptionalChain(e.callee)?this.raise(this.state.lastTokEnd,_.OptionalChainingNoNew):this.eat(18)&&this.raise(this.state.start,_.OptionalChainingNoNew),this.parseNewArguments(e),this.finishNode(e,"NewExpression")}parseNewArguments(e){if(this.eat(10)){const t=this.parseExprList(11);this.toReferencedList(t),e.arguments=t}else e.arguments=[]}parseTemplateElement(e){const t=this.startNode();return this.state.value===null&&(e||this.raise(this.state.start+1,_.InvalidEscapeSequenceTemplate)),t.value={raw:this.input.slice(this.state.start,this.state.end).replace(/\r\n?/g,`
`),cooked:this.state.value},this.next(),t.tail=this.match(22),this.finishNode(t,"TemplateElement")}parseTemplate(e){const t=this.startNode();this.next(),t.expressions=[];let r=this.parseTemplateElement(e);for(t.quasis=[r];!r.tail;)this.expect(23),t.expressions.push(this.parseTemplateSubstitution()),this.expect(8),t.quasis.push(r=this.parseTemplateElement(e));return this.next(),this.finishNode(t,"TemplateLiteral")}parseTemplateSubstitution(){return this.parseExpression()}parseObjectLike(e,t,r,n){r&&this.expectPlugin("recordAndTuple");const i=this.state.inFSharpPipelineDirectBody;this.state.inFSharpPipelineDirectBody=!1;const a=Object.create(null);let o=!0;const u=this.startNode();for(u.properties=[],this.next();!this.match(e);){if(o)o=!1;else if(this.expect(12),this.match(e)){this.addExtra(u,"trailingComma",this.state.lastTokStart);break}let l;t?l=this.parseBindingProperty():(l=this.parsePropertyDefinition(n),this.checkProto(l,r,a,n)),r&&!this.isObjectProperty(l)&&l.type!=="SpreadElement"&&this.raise(l.start,_.InvalidRecordProperty),l.shorthand&&this.addExtra(l,"shorthand",!0),u.properties.push(l)}this.next(),this.state.inFSharpPipelineDirectBody=i;let c="ObjectExpression";return t?c="ObjectPattern":r&&(c="RecordExpression"),this.finishNode(u,c)}maybeAsyncOrAccessorProp(e){return!e.computed&&e.key.type==="Identifier"&&(this.isLiteralPropertyName()||this.match(0)||this.match(49))}parsePropertyDefinition(e){let t=[];if(this.match(24))for(this.hasPlugin("decorators")&&this.raise(this.state.start,_.UnsupportedPropertyDecorator);this.match(24);)t.push(this.parseDecorator());const r=this.startNode();let n=!1,i=!1,a,o;if(this.match(21))return t.length&&this.unexpected(),this.parseSpread();t.length&&(r.decorators=t,t=[]),r.method=!1,e&&(a=this.state.start,o=this.state.startLoc);let u=this.eat(49);this.parsePropertyNamePrefixOperator(r);const c=this.state.containsEsc,l=this.parsePropertyName(r);if(!u&&!c&&this.maybeAsyncOrAccessorProp(r)){const h=l.name;h==="async"&&!this.hasPrecedingLineBreak()&&(n=!0,this.resetPreviousNodeTrailingComments(l),u=this.eat(49),this.parsePropertyName(r)),(h==="get"||h==="set")&&(i=!0,this.resetPreviousNodeTrailingComments(l),r.kind=h,this.match(49)&&(u=!0,this.raise(this.state.pos,_.AccessorIsGenerator,h),this.next()),this.parsePropertyName(r))}return this.parseObjPropValue(r,a,o,u,n,!1,i,e),r}getGetterSetterExpectedParamCount(e){return e.kind==="get"?0:1}getObjectOrClassMethodParams(e){return e.params}checkGetterSetterParams(e){var t;const r=this.getGetterSetterExpectedParamCount(e),n=this.getObjectOrClassMethodParams(e),i=e.start;n.length!==r&&(e.kind==="get"?this.raise(i,_.BadGetterArity):this.raise(i,_.BadSetterArity)),e.kind==="set"&&((t=n[n.length-1])==null?void 0:t.type)==="RestElement"&&this.raise(i,_.BadSetterRestParameter)}parseObjectMethod(e,t,r,n,i){if(i)return this.parseMethod(e,t,!1,!1,!1,"ObjectMethod"),this.checkGetterSetterParams(e),e;if(r||t||this.match(10))return n&&this.unexpected(),e.kind="method",e.method=!0,this.parseMethod(e,t,r,!1,!1,"ObjectMethod")}parseObjectProperty(e,t,r,n,i){if(e.shorthand=!1,this.eat(14))return e.value=n?this.parseMaybeDefault(this.state.start,this.state.startLoc):this.parseMaybeAssignAllowIn(i),this.finishNode(e,"ObjectProperty");if(!e.computed&&e.key.type==="Identifier")return this.checkReservedWord(e.key.name,e.key.start,!0,!1),n?e.value=this.parseMaybeDefault(t,r,Yr(e.key)):this.match(27)&&i?(i.shorthandAssign===-1&&(i.shorthandAssign=this.state.start),e.value=this.parseMaybeDefault(t,r,Yr(e.key))):e.value=Yr(e.key),e.shorthand=!0,this.finishNode(e,"ObjectProperty")}parseObjPropValue(e,t,r,n,i,a,o,u){const c=this.parseObjectMethod(e,n,i,a,o)||this.parseObjectProperty(e,t,r,a,u);return c||this.unexpected(),c}parsePropertyName(e){if(this.eat(0))e.computed=!0,e.key=this.parseMaybeAssignAllowIn(),this.expect(3);else{const{type:t,value:r}=this.state;let n;if(Qr(t))n=this.parseIdentifier(!0);else switch(t){case 124:n=this.parseNumericLiteral(r);break;case 123:n=this.parseStringLiteral(r);break;case 125:n=this.parseBigIntLiteral(r);break;case 126:n=this.parseDecimalLiteral(r);break;case 128:{const i=this.state.start+1;this.raise(i,_.UnexpectedPrivateField),n=this.parsePrivateName();break}default:throw this.unexpected()}e.key=n,t!==128&&(e.computed=!1)}return e.key}initFunction(e,t){e.id=null,e.generator=!1,e.async=!!t}parseMethod(e,t,r,n,i,a,o=!1){this.initFunction(e,r),e.generator=!!t;const u=n;return this.scope.enter($r|Fc|(o?ln:0)|(i?PS:0)),this.prodParam.enter(Ju(r,e.generator)),this.parseFunctionParams(e,u),this.parseFunctionBodyAndFinish(e,a,!0),this.prodParam.exit(),this.scope.exit(),e}parseArrayLike(e,t,r,n){r&&this.expectPlugin("recordAndTuple");const i=this.state.inFSharpPipelineDirectBody;this.state.inFSharpPipelineDirectBody=!1;const a=this.startNode();return this.next(),a.elements=this.parseExprList(e,!r,n,a),this.state.inFSharpPipelineDirectBody=i,this.finishNode(a,r?"TupleExpression":"ArrayExpression")}parseArrowExpression(e,t,r,n){this.scope.enter($r|dm);let i=Ju(r,!1);!this.match(0)&&this.prodParam.hasIn&&(i|=Kn),this.prodParam.enter(i),this.initFunction(e,r);const a=this.state.maybeInArrowParameters;return t&&(this.state.maybeInArrowParameters=!0,this.setArrowFunctionParameters(e,t,n)),this.state.maybeInArrowParameters=!1,this.parseFunctionBody(e,!0),this.prodParam.exit(),this.scope.exit(),this.state.maybeInArrowParameters=a,this.finishNode(e,"ArrowFunctionExpression")}setArrowFunctionParameters(e,t,r){e.params=this.toAssignableList(t,r,!1)}parseFunctionBodyAndFinish(e,t,r=!1){this.parseFunctionBody(e,!1,r),this.finishNode(e,t)}parseFunctionBody(e,t,r=!1){const n=t&&!this.match(5);if(this.expressionScope.enter(US()),n)e.body=this.parseMaybeAssign(),this.checkParams(e,!1,t,!1);else{const i=this.state.strict,a=this.state.labels;this.state.labels=[],this.prodParam.enter(this.prodParam.currentFlags()|VS),e.body=this.parseBlock(!0,!1,o=>{const u=!this.isSimpleParamList(e.params);if(o&&u){const l=(e.kind==="method"||e.kind==="constructor")&&!!e.key?e.key.end:e.start;this.raise(l,_.IllegalLanguageModeDirective)}const c=!i&&this.state.strict;this.checkParams(e,!this.state.strict&&!t&&!r&&!u,t,c),this.state.strict&&e.id&&this.checkLVal(e.id,"function name",CR,void 0,void 0,c)}),this.prodParam.exit(),this.state.labels=a}this.expressionScope.exit()}isSimpleParamList(e){for(let t=0,r=e.length;t<r;t++)if(e[t].type!=="Identifier")return!1;return!0}checkParams(e,t,r,n=!0){const i=new Set;for(const a of e.params)this.checkLVal(a,"function parameter list",Bc,t?null:i,void 0,n)}parseExprList(e,t,r,n){const i=[];let a=!0;for(;!this.eat(e);){if(a)a=!1;else if(this.expect(12),this.match(e)){n&&this.addExtra(n,"trailingComma",this.state.lastTokStart),this.next();break}i.push(this.parseExprListItem(t,r))}return i}parseExprListItem(e,t,r){let n;if(this.match(12))e||this.raise(this.state.pos,_.UnexpectedToken,","),n=null;else if(this.match(21)){const i=this.state.start,a=this.state.startLoc;n=this.parseParenItem(this.parseSpread(t),i,a)}else if(this.match(17)){this.expectPlugin("partialApplication"),r||this.raise(this.state.start,_.UnexpectedArgumentPlaceholder);const i=this.startNode();this.next(),n=this.finishNode(i,"ArgumentPlaceholder")}else n=this.parseMaybeAssignAllowIn(t,this.parseParenItem);return n}parseIdentifier(e){const t=this.startNode(),r=this.parseIdentifierName(t.start,e);return this.createIdentifier(t,r)}createIdentifier(e,t){return e.name=t,e.loc.identifierName=t,this.finishNode(e,"Identifier")}parseIdentifierName(e,t){let r;const{start:n,type:i}=this.state;if(Qr(i))r=this.state.value;else throw this.unexpected();const a=aR(i);return t?a&&this.replaceToken(122):this.checkReservedWord(r,n,a,!1),this.next(),r}checkReservedWord(e,t,r,n){if(e.length>10||!xR(e))return;if(e==="yield"){if(this.prodParam.hasYield){this.raise(t,_.YieldBindingIdentifier);return}}else if(e==="await")if(this.prodParam.hasAwait){this.raise(t,_.AwaitBindingIdentifier);return}else if(this.scope.inStaticBlock){this.raise(t,_.AwaitBindingIdentifierInStaticBlock);return}else this.expressionScope.recordAsyncArrowParametersError(t,_.AwaitBindingIdentifier);else if(e==="arguments"&&this.scope.inClassAndNotInNonArrowFunction){this.raise(t,_.ArgumentsInClass);return}if(r&&ER(e)){this.raise(t,_.UnexpectedKeyword,e);return}(this.state.strict?n?xS:IS:ES)(e,this.inModule)&&this.raise(t,_.UnexpectedReservedWord,e)}isAwaitAllowed(){return!!(this.prodParam.hasAwait||this.options.allowAwaitOutsideFunction&&!this.scope.inFunction)}parseAwait(e,t){const r=this.startNodeAt(e,t);return this.expressionScope.recordParameterInitializerError(r.start,_.AwaitExpressionFormalParameter),this.eat(49)&&this.raise(r.start,_.ObsoleteAwaitStar),!this.scope.inFunction&&!this.options.allowAwaitOutsideFunction&&(this.isAmbiguousAwait()?this.ambiguousScriptDifferentAst=!0:this.sawUnambiguousESM=!0),this.state.soloAwait||(r.argument=this.parseMaybeUnary(null,!0)),this.finishNode(r,"AwaitExpression")}isAmbiguousAwait(){return this.hasPrecedingLineBreak()||this.match(47)||this.match(10)||this.match(0)||this.match(22)||this.match(127)||this.match(50)||this.hasPlugin("v8intrinsic")&&this.match(48)}parseYield(){const e=this.startNode();this.expressionScope.recordParameterInitializerError(e.start,_.YieldInParameter),this.next();let t=!1,r=null;if(!this.hasPrecedingLineBreak())switch(t=this.eat(49),this.state.type){case 13:case 129:case 8:case 11:case 3:case 9:case 14:case 12:if(!t)break;default:r=this.parseMaybeAssign()}return e.delegate=t,e.argument=r,this.finishNode(e,"YieldExpression")}checkPipelineAtInfixOperator(e,t){this.getPluginOption("pipelineOperator","proposal")==="smart"&&e.type==="SequenceExpression"&&this.raise(t,_.PipelineHeadSequenceExpression)}checkHackPipeBodyEarlyErrors(e){this.topicReferenceWasUsedInCurrentContext()||this.raise(e,_.PipeTopicUnused)}parseSmartPipelineBodyInStyle(e,t,r){const n=this.startNodeAt(t,r);return this.isSimpleReference(e)?(n.callee=e,this.finishNode(n,"PipelineBareFunction")):(this.checkSmartPipeTopicBodyEarlyErrors(t),n.expression=e,this.finishNode(n,"PipelineTopicExpression"))}isSimpleReference(e){switch(e.type){case"MemberExpression":return!e.computed&&this.isSimpleReference(e.object);case"Identifier":return!0;default:return!1}}checkSmartPipeTopicBodyEarlyErrors(e){if(this.match(19))throw this.raise(this.state.start,_.PipelineBodyNoArrow);this.topicReferenceWasUsedInCurrentContext()||this.raise(e,_.PipelineTopicUnused)}withTopicBindingContext(e){const t=this.state.topicContext;this.state.topicContext={maxNumOfResolvableTopics:1,maxTopicIndex:null};try{return e()}finally{this.state.topicContext=t}}withSmartMixTopicForbiddingContext(e){if(this.getPluginOption("pipelineOperator","proposal")==="smart"){const r=this.state.topicContext;this.state.topicContext={maxNumOfResolvableTopics:0,maxTopicIndex:null};try{return e()}finally{this.state.topicContext=r}}else return e()}withSoloAwaitPermittingContext(e){const t=this.state.soloAwait;this.state.soloAwait=!0;try{return e()}finally{this.state.soloAwait=t}}allowInAnd(e){const t=this.prodParam.currentFlags();if(Kn&~t){this.prodParam.enter(t|Kn);try{return e()}finally{this.prodParam.exit()}}return e()}disallowInAnd(e){const t=this.prodParam.currentFlags();if(Kn&t){this.prodParam.enter(t&~Kn);try{return e()}finally{this.prodParam.exit()}}return e()}registerTopicReference(){this.state.topicContext.maxTopicIndex=0}topicReferenceIsAllowedInCurrentContext(){return this.state.topicContext.maxNumOfResolvableTopics>=1}topicReferenceWasUsedInCurrentContext(){return this.state.topicContext.maxTopicIndex!=null&&this.state.topicContext.maxTopicIndex>=0}parseFSharpPipelineBody(e){const t=this.state.start,r=this.state.startLoc;this.state.potentialArrowAt=this.state.start;const n=this.state.inFSharpPipelineDirectBody;this.state.inFSharpPipelineDirectBody=!0;const i=this.parseExprOp(this.parseMaybeUnaryOrPrivate(),t,r,e);return this.state.inFSharpPipelineDirectBody=n,i}parseModuleExpression(){this.expectPlugin("moduleBlocks");const e=this.startNode();this.next(),this.eat(5);const t=this.initializeScopes(!0);this.enterInitialScopes();const r=this.startNode();try{e.body=this.parseProgram(r,8,"module")}finally{t()}return this.eat(8),this.finishNode(e,"ModuleExpression")}parsePropertyNamePrefixOperator(e){}}const Nh={kind:"loop"},EM={kind:"switch"},IM=0,Oh=1,ev=2,tv=4,_M=/[\uD800-\uDFFF]/u,Dh=/in(?:stanceof)?/y;function xM(s){for(let e=0;e<s.length;e++){const t=s[e],{type:r}=t;if(r===128){const{loc:n,start:i,value:a,end:o}=t,u=i+1,c=new So(n.start.line,n.start.column+1);s.splice(e,1,new Ff({type:Hu(25),value:"#",start:i,end:u,startLoc:n.start,endLoc:c}),new Ff({type:Hu(122),value:a,start:u,end:o,startLoc:c,endLoc:n.end})),e++;continue}typeof r=="number"&&(t.type=Hu(r))}return s}class AM extends SM{parseTopLevel(e,t){return e.program=this.parseProgram(t),e.comments=this.state.comments,this.options.tokens&&(e.tokens=xM(this.tokens)),this.finishNode(e,"File")}parseProgram(e,t=129,r=this.options.sourceType){if(e.sourceType=r,e.interpreter=this.parseInterpreterDirective(),this.parseBlockBody(e,!0,!0,t),this.inModule&&!this.options.allowUndeclaredExports&&this.scope.undefinedExports.size>0)for(const[n]of Array.from(this.scope.undefinedExports)){const i=this.scope.undefinedExports.get(n);this.raise(i,_.ModuleExportUndefined,n)}return this.finishNode(e,"Program")}stmtToDirective(e){const t=e;t.type="Directive",t.value=t.expression,delete t.expression;const r=t.value,n=r.value,i=this.input.slice(r.start,r.end),a=r.value=i.slice(1,-1);return this.addExtra(r,"raw",i),this.addExtra(r,"rawValue",a),this.addExtra(r,"expressionValue",n),r.type="DirectiveLiteral",t}parseInterpreterDirective(){if(!this.match(26))return null;const e=this.startNode();return e.value=this.state.value,this.next(),this.finishNode(e,"InterpreterDirective")}isLet(e){return this.isContextual(93)?this.isLetKeyword(e):!1}isLetKeyword(e){const t=this.nextTokenStart(),r=this.codePointAtPos(t);if(r===92||r===91)return!0;if(e)return!1;if(r===123)return!0;if(bs(r)){if(Dh.lastIndex=t,Dh.test(this.input)){const n=this.codePointAtPos(Dh.lastIndex);if(!ci(n)&&n!==92)return!1}return!0}return!1}parseStatement(e,t){return this.match(24)&&this.parseDecorators(!0),this.parseStatementContent(e,t)}parseStatementContent(e,t){let r=this.state.type;const n=this.startNode();let i;switch(this.isLet(e)&&(r=68,i="let"),r){case 54:return this.parseBreakContinueStatement(n,!0);case 57:return this.parseBreakContinueStatement(n,!1);case 58:return this.parseDebuggerStatement(n);case 84:return this.parseDoStatement(n);case 85:return this.parseForStatement(n);case 62:if(this.lookaheadCharCode()===46)break;return e&&(this.state.strict?this.raise(this.state.start,_.StrictFunction):e!=="if"&&e!=="label"&&this.raise(this.state.start,_.SloppyFunction)),this.parseFunctionStatement(n,!1,!e);case 74:return e&&this.unexpected(),this.parseClass(n,!0);case 63:return this.parseIfStatement(n);case 64:return this.parseReturnStatement(n);case 65:return this.parseSwitchStatement(n);case 66:return this.parseThrowStatement(n);case 67:return this.parseTryStatement(n);case 69:case 68:return i=i||this.state.value,e&&i!=="var"&&this.raise(this.state.start,_.UnexpectedLexicalDeclaration),this.parseVarStatement(n,i);case 86:return this.parseWhileStatement(n);case 70:return this.parseWithStatement(n);case 5:return this.parseBlock();case 13:return this.parseEmptyStatement(n);case 77:{const u=this.lookaheadCharCode();if(u===40||u===46)break}case 76:{!this.options.allowImportExportEverywhere&&!t&&this.raise(this.state.start,_.UnexpectedImportExport),this.next();let u;return r===77?(u=this.parseImport(n),u.type==="ImportDeclaration"&&(!u.importKind||u.importKind==="value")&&(this.sawUnambiguousESM=!0)):(u=this.parseExport(n),(u.type==="ExportNamedDeclaration"&&(!u.exportKind||u.exportKind==="value")||u.type==="ExportAllDeclaration"&&(!u.exportKind||u.exportKind==="value")||u.type==="ExportDefaultDeclaration")&&(this.sawUnambiguousESM=!0)),this.assertModuleNodeAllowed(n),u}default:if(this.isAsyncFunction())return e&&this.raise(this.state.start,_.AsyncFunctionInSingleStatementContext),this.next(),this.parseFunctionStatement(n,!0,!e)}const a=this.state.value,o=this.parseExpression();return we(r)&&o.type==="Identifier"&&this.eat(14)?this.parseLabeledStatement(n,a,o,e):this.parseExpressionStatement(n,o)}assertModuleNodeAllowed(e){!this.options.allowImportExportEverywhere&&!this.inModule&&this.raise(e.start,vS.ImportOutsideModule)}takeDecorators(e){const t=this.state.decoratorStack[this.state.decoratorStack.length-1];t.length&&(e.decorators=t,this.resetStartLocationFromNode(e,t[0]),this.state.decoratorStack[this.state.decoratorStack.length-1]=[])}canHaveLeadingDecorator(){return this.match(74)}parseDecorators(e){const t=this.state.decoratorStack[this.state.decoratorStack.length-1];for(;this.match(24);){const r=this.parseDecorator();t.push(r)}if(this.match(76))e||this.unexpected(),this.hasPlugin("decorators")&&!this.getPluginOption("decorators","decoratorsBeforeExport")&&this.raise(this.state.start,_.DecoratorExportClass);else if(!this.canHaveLeadingDecorator())throw this.raise(this.state.start,_.UnexpectedLeadingDecorator)}parseDecorator(){this.expectOnePlugin(["decorators-legacy","decorators"]);const e=this.startNode();if(this.next(),this.hasPlugin("decorators")){this.state.decoratorStack.push([]);const t=this.state.start,r=this.state.startLoc;let n;if(this.eat(10))n=this.parseExpression(),this.expect(11);else for(n=this.parseIdentifier(!1);this.eat(16);){const i=this.startNodeAt(t,r);i.object=n,i.property=this.parseIdentifier(!0),i.computed=!1,n=this.finishNode(i,"MemberExpression")}e.expression=this.parseMaybeDecoratorArguments(n),this.state.decoratorStack.pop()}else e.expression=this.parseExprSubscripts();return this.finishNode(e,"Decorator")}parseMaybeDecoratorArguments(e){if(this.eat(10)){const t=this.startNodeAtNode(e);return t.callee=e,t.arguments=this.parseCallExpressionArguments(11,!1),this.toReferencedList(t.arguments),this.finishNode(t,"CallExpression")}return e}parseBreakContinueStatement(e,t){return this.next(),this.isLineTerminator()?e.label=null:(e.label=this.parseIdentifier(),this.semicolon()),this.verifyBreakContinue(e,t),this.finishNode(e,t?"BreakStatement":"ContinueStatement")}verifyBreakContinue(e,t){let r;for(r=0;r<this.state.labels.length;++r){const n=this.state.labels[r];if((e.label==null||n.name===e.label.name)&&(n.kind!=null&&(t||n.kind==="loop")||e.label&&t))break}r===this.state.labels.length&&this.raise(e.start,_.IllegalBreakContinue,t?"break":"continue")}parseDebuggerStatement(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")}parseHeaderExpression(){this.expect(10);const e=this.parseExpression();return this.expect(11),e}parseDoStatement(e){return this.next(),this.state.labels.push(Nh),e.body=this.withSmartMixTopicForbiddingContext(()=>this.parseStatement("do")),this.state.labels.pop(),this.expect(86),e.test=this.parseHeaderExpression(),this.eat(13),this.finishNode(e,"DoWhileStatement")}parseForStatement(e){this.next(),this.state.labels.push(Nh);let t=-1;if(this.isAwaitAllowed()&&this.eatContextual(90)&&(t=this.state.lastTokStart),this.scope.enter(Zn),this.expect(10),this.match(13))return t>-1&&this.unexpected(t),this.parseFor(e,null);const r=this.isContextual(93),n=r&&this.isLetKeyword();if(this.match(68)||this.match(69)||n){const c=this.startNode(),l=n?"let":this.state.value;return this.next(),this.parseVar(c,!0,l),this.finishNode(c,"VariableDeclaration"),(this.match(52)||this.isContextual(95))&&c.declarations.length===1?this.parseForIn(e,c,t):(t>-1&&this.unexpected(t),this.parseFor(e,c))}const i=this.isContextual(89),a=new Xu,o=this.parseExpression(!0,a),u=this.isContextual(95);if(u&&(r?this.raise(o.start,_.ForOfLet):t===-1&&i&&o.type==="Identifier"&&this.raise(o.start,_.ForOfAsync)),u||this.match(52)){this.toAssignable(o,!0);const c=u?"for-of statement":"for-in statement";return this.checkLVal(o,c),this.parseForIn(e,o,t)}else this.checkExpressionErrors(a,!0);return t>-1&&this.unexpected(t),this.parseFor(e,o)}parseFunctionStatement(e,t,r){return this.next(),this.parseFunction(e,Oh|(r?0:ev),t)}parseIfStatement(e){return this.next(),e.test=this.parseHeaderExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(60)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")}parseReturnStatement(e){return!this.prodParam.hasReturn&&!this.options.allowReturnOutsideFunction&&this.raise(this.state.start,_.IllegalReturn),this.next(),this.isLineTerminator()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")}parseSwitchStatement(e){this.next(),e.discriminant=this.parseHeaderExpression();const t=e.cases=[];this.expect(5),this.state.labels.push(EM),this.scope.enter(Zn);let r;for(let n;!this.match(8);)if(this.match(55)||this.match(59)){const i=this.match(55);r&&this.finishNode(r,"SwitchCase"),t.push(r=this.startNode()),r.consequent=[],this.next(),i?r.test=this.parseExpression():(n&&this.raise(this.state.lastTokStart,_.MultipleDefaultsInSwitch),n=!0,r.test=null),this.expect(14)}else r?r.consequent.push(this.parseStatement(null)):this.unexpected();return this.scope.exit(),r&&this.finishNode(r,"SwitchCase"),this.next(),this.state.labels.pop(),this.finishNode(e,"SwitchStatement")}parseThrowStatement(e){return this.next(),this.hasPrecedingLineBreak()&&this.raise(this.state.lastTokEnd,_.NewlineAfterThrow),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")}parseCatchClauseParam(){const e=this.parseBindingAtom(),t=e.type==="Identifier";return this.scope.enter(t?AS:0),this.checkLVal(e,"catch clause",Yt),e}parseTryStatement(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.match(56)){const t=this.startNode();this.next(),this.match(10)?(this.expect(10),t.param=this.parseCatchClauseParam(),this.expect(11)):(t.param=null,this.scope.enter(Zn)),t.body=this.withSmartMixTopicForbiddingContext(()=>this.parseBlock(!1,!1)),this.scope.exit(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(61)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,_.NoCatchOrFinally),this.finishNode(e,"TryStatement")}parseVarStatement(e,t){return this.next(),this.parseVar(e,!1,t),this.semicolon(),this.finishNode(e,"VariableDeclaration")}parseWhileStatement(e){return this.next(),e.test=this.parseHeaderExpression(),this.state.labels.push(Nh),e.body=this.withSmartMixTopicForbiddingContext(()=>this.parseStatement("while")),this.state.labels.pop(),this.finishNode(e,"WhileStatement")}parseWithStatement(e){return this.state.strict&&this.raise(this.state.start,_.StrictWith),this.next(),e.object=this.parseHeaderExpression(),e.body=this.withSmartMixTopicForbiddingContext(()=>this.parseStatement("with")),this.finishNode(e,"WithStatement")}parseEmptyStatement(e){return this.next(),this.finishNode(e,"EmptyStatement")}parseLabeledStatement(e,t,r,n){for(const a of this.state.labels)a.name===t&&this.raise(r.start,_.LabelRedeclaration,t);const i=cR(this.state.type)?"loop":this.match(65)?"switch":null;for(let a=this.state.labels.length-1;a>=0;a--){const o=this.state.labels[a];if(o.statementStart===e.start)o.statementStart=this.state.start,o.kind=i;else break}return this.state.labels.push({name:t,kind:i,statementStart:this.state.start}),e.body=this.parseStatement(n?n.indexOf("label")===-1?n+"label":n:"label"),this.state.labels.pop(),e.label=r,this.finishNode(e,"LabeledStatement")}parseExpressionStatement(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")}parseBlock(e=!1,t=!0,r){const n=this.startNode();return e&&this.state.strictErrors.clear(),this.expect(5),t&&this.scope.enter(Zn),this.parseBlockBody(n,e,!1,8,r),t&&this.scope.exit(),this.finishNode(n,"BlockStatement")}isValidDirective(e){return e.type==="ExpressionStatement"&&e.expression.type==="StringLiteral"&&!e.expression.extra.parenthesized}parseBlockBody(e,t,r,n,i){const a=e.body=[],o=e.directives=[];this.parseBlockOrModuleBlockBody(a,t?o:void 0,r,n,i)}parseBlockOrModuleBlockBody(e,t,r,n,i){const a=this.state.strict;let o=!1,u=!1;for(;!this.match(n);){const c=this.parseStatement(null,r);if(t&&!u){if(this.isValidDirective(c)){const l=this.stmtToDirective(c);t.push(l),!o&&l.value.value==="use strict"&&(o=!0,this.setStrict(!0));continue}u=!0,this.state.strictErrors.clear()}e.push(c)}i&&i.call(this,o),a||this.setStrict(!1),this.next()}parseFor(e,t){return e.init=t,this.semicolon(!1),e.test=this.match(13)?null:this.parseExpression(),this.semicolon(!1),e.update=this.match(11)?null:this.parseExpression(),this.expect(11),e.body=this.withSmartMixTopicForbiddingContext(()=>this.parseStatement("for")),this.scope.exit(),this.state.labels.pop(),this.finishNode(e,"ForStatement")}parseForIn(e,t,r){const n=this.match(52);return this.next(),n?r>-1&&this.unexpected(r):e.await=r>-1,t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.state.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")?this.raise(t.start,_.ForInOfLoopInitializer,n?"for-in":"for-of"):t.type==="AssignmentPattern"&&this.raise(t.start,_.InvalidLhs,"for-loop"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssignAllowIn(),this.expect(11),e.body=this.withSmartMixTopicForbiddingContext(()=>this.parseStatement("for")),this.scope.exit(),this.state.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")}parseVar(e,t,r){const n=e.declarations=[],i=this.hasPlugin("typescript");for(e.kind=r;;){const a=this.startNode();if(this.parseVarId(a,r),this.eat(27)?a.init=t?this.parseMaybeAssignDisallowIn():this.parseMaybeAssignAllowIn():(r==="const"&&!(this.match(52)||this.isContextual(95))?i||this.raise(this.state.lastTokEnd,_.DeclarationMissingInitializer,"Const declarations"):a.id.type!=="Identifier"&&!(t&&(this.match(52)||this.isContextual(95)))&&this.raise(this.state.lastTokEnd,_.DeclarationMissingInitializer,"Complex binding patterns"),a.init=null),n.push(this.finishNode(a,"VariableDeclarator")),!this.eat(12))break}return e}parseVarId(e,t){e.id=this.parseBindingAtom(),this.checkLVal(e.id,"variable declaration",t==="var"?Bc:Yt,void 0,t!=="var")}parseFunction(e,t=IM,r=!1){const n=t&Oh,i=t&ev,a=!!n&&!(t&tv);this.initFunction(e,r),this.match(49)&&i&&this.raise(this.state.start,_.GeneratorInSingleStatementContext),e.generator=this.eat(49),n&&(e.id=this.parseFunctionId(a));const o=this.state.maybeInArrowParameters;return this.state.maybeInArrowParameters=!1,this.scope.enter($r),this.prodParam.enter(Ju(r,e.generator)),n||(e.id=this.parseFunctionId()),this.parseFunctionParams(e,!1),this.withSmartMixTopicForbiddingContext(()=>{this.parseFunctionBodyAndFinish(e,n?"FunctionDeclaration":"FunctionExpression")}),this.prodParam.exit(),this.scope.exit(),n&&!i&&this.registerFunctionStatementId(e),this.state.maybeInArrowParameters=o,e}parseFunctionId(e){return e||we(this.state.type)?this.parseIdentifier():null}parseFunctionParams(e,t){this.expect(10),this.expressionScope.enter(WR()),e.params=this.parseBindingList(11,41,!1,t),this.expressionScope.exit()}registerFunctionStatementId(e){!e.id||this.scope.declareName(e.id.name,this.state.strict||e.generator||e.async?this.scope.treatFunctionsAsVar?Bc:Yt:DS,e.id.start)}parseClass(e,t,r){this.next(),this.takeDecorators(e);const n=this.state.strict;return this.state.strict=!0,this.parseClassId(e,t,r),this.parseClassSuper(e),e.body=this.parseClassBody(!!e.superClass,n),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")}isClassProperty(){return this.match(27)||this.match(13)||this.match(8)}isClassMethod(){return this.match(10)}isNonstaticConstructor(e){return!e.computed&&!e.static&&(e.key.name==="constructor"||e.key.value==="constructor")}parseClassBody(e,t){this.classScope.enter();const r={hadConstructor:!1,hadSuperClass:e};let n=[];const i=this.startNode();if(i.body=[],this.expect(5),this.withSmartMixTopicForbiddingContext(()=>{for(;!this.match(8);){if(this.eat(13)){if(n.length>0)throw this.raise(this.state.lastTokEnd,_.DecoratorSemicolon);continue}if(this.match(24)){n.push(this.parseDecorator());continue}const a=this.startNode();n.length&&(a.decorators=n,this.resetStartLocationFromNode(a,n[0]),n=[]),this.parseClassMember(i,a,r),a.kind==="constructor"&&a.decorators&&a.decorators.length>0&&this.raise(a.start,_.DecoratorConstructor)}}),this.state.strict=t,this.next(),n.length)throw this.raise(this.state.start,_.TrailingDecorator);return this.classScope.exit(),this.finishNode(i,"ClassBody")}parseClassMemberFromModifier(e,t){const r=this.parseIdentifier(!0);if(this.isClassMethod()){const n=t;return n.kind="method",n.computed=!1,n.key=r,n.static=!1,this.pushClassMethod(e,n,!1,!1,!1,!1),!0}else if(this.isClassProperty()){const n=t;return n.computed=!1,n.key=r,n.static=!1,e.body.push(this.parseClassProperty(n)),!0}return this.resetPreviousNodeTrailingComments(r),!1}parseClassMember(e,t,r){const n=this.isContextual(98);if(n){if(this.parseClassMemberFromModifier(e,t))return;if(this.eat(5)){this.parseClassStaticBlock(e,t);return}}this.parseClassMemberWithIsStatic(e,t,r,n)}parseClassMemberWithIsStatic(e,t,r,n){const i=t,a=t,o=t,u=t,c=i,l=i;if(t.static=n,this.parsePropertyNamePrefixOperator(t),this.eat(49)){c.kind="method";const p=this.match(128);if(this.parseClassElementName(c),p){this.pushClassPrivateMethod(e,a,!0,!1);return}this.isNonstaticConstructor(i)&&this.raise(i.key.start,_.ConstructorIsGenerator),this.pushClassMethod(e,i,!0,!1,!1,!1);return}const h=we(this.state.type)&&!this.state.containsEsc,f=this.match(128),d=this.parseClassElementName(t),g=this.state.start;if(this.parsePostMemberNameModifiers(l),this.isClassMethod()){if(c.kind="method",f){this.pushClassPrivateMethod(e,a,!1,!1);return}const p=this.isNonstaticConstructor(i);let m=!1;p&&(i.kind="constructor",r.hadConstructor&&!this.hasPlugin("typescript")&&this.raise(d.start,_.DuplicateConstructor),p&&this.hasPlugin("typescript")&&t.override&&this.raise(d.start,_.OverrideOnConstructor),r.hadConstructor=!0,m=r.hadSuperClass),this.pushClassMethod(e,i,!1,!1,p,m)}else if(this.isClassProperty())f?this.pushClassPrivateProperty(e,u):this.pushClassProperty(e,o);else if(h&&d.name==="async"&&!this.isLineTerminator()){this.resetPreviousNodeTrailingComments(d);const p=this.eat(49);l.optional&&this.unexpected(g),c.kind="method";const m=this.match(128);this.parseClassElementName(c),this.parsePostMemberNameModifiers(l),m?this.pushClassPrivateMethod(e,a,p,!0):(this.isNonstaticConstructor(i)&&this.raise(i.key.start,_.ConstructorIsAsync),this.pushClassMethod(e,i,p,!0,!1,!1))}else if(h&&(d.name==="get"||d.name==="set")&&!(this.match(49)&&this.isLineTerminator())){this.resetPreviousNodeTrailingComments(d),c.kind=d.name;const p=this.match(128);this.parseClassElementName(i),p?this.pushClassPrivateMethod(e,a,!1,!1):(this.isNonstaticConstructor(i)&&this.raise(i.key.start,_.ConstructorIsAccessor),this.pushClassMethod(e,i,!1,!1,!1,!1)),this.checkGetterSetterParams(i)}else this.isLineTerminator()?f?this.pushClassPrivateProperty(e,u):this.pushClassProperty(e,o):this.unexpected()}parseClassElementName(e){const{type:t,value:r,start:n}=this.state;if((t===122||t===123)&&e.static&&r==="prototype"&&this.raise(n,_.StaticPrototype),t===128){r==="constructor"&&this.raise(n,_.ConstructorClassPrivateField);const i=this.parsePrivateName();return e.key=i,i}return this.parsePropertyName(e)}parseClassStaticBlock(e,t){var r;this.scope.enter(ln|CS|Fc);const n=this.state.labels;this.state.labels=[],this.prodParam.enter(hi);const i=t.body=[];this.parseBlockOrModuleBlockBody(i,void 0,!1,8),this.prodParam.exit(),this.scope.exit(),this.state.labels=n,e.body.push(this.finishNode(t,"StaticBlock")),(r=t.decorators)!=null&&r.length&&this.raise(t.start,_.DecoratorStaticBlock)}pushClassProperty(e,t){!t.computed&&(t.key.name==="constructor"||t.key.value==="constructor")&&this.raise(t.key.start,_.ConstructorClassField),e.body.push(this.parseClassProperty(t))}pushClassPrivateProperty(e,t){const r=this.parseClassPrivateProperty(t);e.body.push(r),this.classScope.declarePrivateName(this.getPrivateNameSV(r.key),Gy,r.key.start)}pushClassMethod(e,t,r,n,i,a){e.body.push(this.parseMethod(t,r,n,i,a,"ClassMethod",!0))}pushClassPrivateMethod(e,t,r,n){const i=this.parseMethod(t,r,n,!1,!1,"ClassPrivateMethod",!0);e.body.push(i);const a=i.kind==="get"?i.static?DR:MR:i.kind==="set"?i.static?RR:LR:Gy;this.declareClassPrivateMethodInScope(i,a)}declareClassPrivateMethodInScope(e,t){this.classScope.declarePrivateName(this.getPrivateNameSV(e.key),t,e.key.start)}parsePostMemberNameModifiers(e){}parseClassPrivateProperty(e){return this.parseInitializer(e),this.semicolon(),this.finishNode(e,"ClassPrivateProperty")}parseClassProperty(e){return this.parseInitializer(e),this.semicolon(),this.finishNode(e,"ClassProperty")}parseInitializer(e){this.scope.enter(ln|Fc),this.expressionScope.enter(US()),this.prodParam.enter(hi),e.value=this.eat(27)?this.parseMaybeAssignAllowIn():null,this.expressionScope.exit(),this.prodParam.exit(),this.scope.exit()}parseClassId(e,t,r,n=OS){we(this.state.type)?(e.id=this.parseIdentifier(),t&&this.checkLVal(e.id,"class name",n)):r||!t?e.id=null:this.unexpected(null,_.MissingClassName)}parseClassSuper(e){e.superClass=this.eat(75)?this.parseExprSubscripts():null}parseExport(e){const t=this.maybeParseExportDefaultSpecifier(e),r=!t||this.eat(12),n=r&&this.eatExportStar(e),i=n&&this.maybeParseExportNamespaceSpecifier(e),a=r&&(!i||this.eat(12)),o=t||n;if(n&&!i)return t&&this.unexpected(),this.parseExportFrom(e,!0),this.finishNode(e,"ExportAllDeclaration");const u=this.maybeParseExportNamedSpecifiers(e);if(t&&r&&!n&&!u||i&&a&&!u)throw this.unexpected(null,5);let c;if(o||u?(c=!1,this.parseExportFrom(e,o)):c=this.maybeParseExportDeclaration(e),o||u||c)return this.checkExport(e,!0,!1,!!e.source),this.finishNode(e,"ExportNamedDeclaration");if(this.eat(59))return e.declaration=this.parseExportDefaultExpression(),this.checkExport(e,!0,!0),this.finishNode(e,"ExportDefaultDeclaration");throw this.unexpected(null,5)}eatExportStar(e){return this.eat(49)}maybeParseExportDefaultSpecifier(e){if(this.isExportDefaultSpecifier()){this.expectPlugin("exportDefaultFrom");const t=this.startNode();return t.exported=this.parseIdentifier(!0),e.specifiers=[this.finishNode(t,"ExportDefaultSpecifier")],!0}return!1}maybeParseExportNamespaceSpecifier(e){if(this.isContextual(87)){e.specifiers||(e.specifiers=[]);const t=this.startNodeAt(this.state.lastTokStart,this.state.lastTokStartLoc);return this.next(),t.exported=this.parseModuleExportName(),e.specifiers.push(this.finishNode(t,"ExportNamespaceSpecifier")),!0}return!1}maybeParseExportNamedSpecifiers(e){if(this.match(5)){e.specifiers||(e.specifiers=[]);const t=e.exportKind==="type";return e.specifiers.push(...this.parseExportSpecifiers(t)),e.source=null,e.declaration=null,this.hasPlugin("importAssertions")&&(e.assertions=[]),!0}return!1}maybeParseExportDeclaration(e){return this.shouldParseExportDeclaration()?(e.specifiers=[],e.source=null,this.hasPlugin("importAssertions")&&(e.assertions=[]),e.declaration=this.parseExportDeclaration(e),!0):!1}isAsyncFunction(){if(!this.isContextual(89))return!1;const e=this.nextTokenStart();return!sm.test(this.input.slice(this.state.pos,e))&&this.isUnparsedContextual(e,"function")}parseExportDefaultExpression(){const e=this.startNode(),t=this.isAsyncFunction();if(this.match(62)||t)return this.next(),t&&this.next(),this.parseFunction(e,Oh|tv,t);if(this.match(74))return this.parseClass(e,!0,!0);if(this.match(24))return this.hasPlugin("decorators")&&this.getPluginOption("decorators","decoratorsBeforeExport")&&this.raise(this.state.start,_.DecoratorBeforeExport),this.parseDecorators(!1),this.parseClass(e,!0,!0);if(this.match(69)||this.match(68)||this.isLet())throw this.raise(this.state.start,_.UnsupportedDefaultExport);{const r=this.parseMaybeAssignAllowIn();return this.semicolon(),r}}parseExportDeclaration(e){return this.parseStatement(null)}isExportDefaultSpecifier(){const{type:e}=this.state;if(we(e)){if(e===89&&!this.state.containsEsc||e===93)return!1;if((e===120||e===119)&&!this.state.containsEsc){const{type:n}=this.lookahead();if(we(n)&&n!==91||n===5)return this.expectOnePlugin(["flow","typescript"]),!1}}else if(!this.match(59))return!1;const t=this.nextTokenStart(),r=this.isUnparsedContextual(t,"from");if(this.input.charCodeAt(t)===44||we(this.state.type)&&r)return!0;if(this.match(59)&&r){const n=this.input.charCodeAt(this.nextTokenStartSince(t+4));return n===34||n===39}return!1}parseExportFrom(e,t){if(this.eatContextual(91)){e.source=this.parseImportSource(),this.checkExport(e);const r=this.maybeParseImportAssertions();r&&(e.assertions=r)}else t&&this.unexpected();this.semicolon()}shouldParseExportDeclaration(){const{type:e}=this.state;if(e===24&&(this.expectOnePlugin(["decorators","decorators-legacy"]),this.hasPlugin("decorators")))if(this.getPluginOption("decorators","decoratorsBeforeExport"))this.unexpected(this.state.start,_.DecoratorBeforeExport);else return!0;return e===68||e===69||e===62||e===74||this.isLet()||this.isAsyncFunction()}checkExport(e,t,r,n){if(t){if(r){if(this.checkDuplicateExports(e,"default"),this.hasPlugin("exportDefaultFrom")){var i;const o=e.declaration;o.type==="Identifier"&&o.name==="from"&&o.end-o.start===4&&!((i=o.extra)!=null&&i.parenthesized)&&this.raise(o.start,_.ExportDefaultFromAsIdentifier)}}else if(e.specifiers&&e.specifiers.length)for(const o of e.specifiers){const{exported:u}=o,c=u.type==="Identifier"?u.name:u.value;if(this.checkDuplicateExports(o,c),!n&&o.local){const{local:l}=o;l.type!=="Identifier"?this.raise(o.start,_.ExportBindingIsString,l.value,c):(this.checkReservedWord(l.name,l.start,!0,!1),this.scope.checkLocalExport(l))}}else if(e.declaration){if(e.declaration.type==="FunctionDeclaration"||e.declaration.type==="ClassDeclaration"){const o=e.declaration.id;if(!o)throw new Error("Assertion failure");this.checkDuplicateExports(e,o.name)}else if(e.declaration.type==="VariableDeclaration")for(const o of e.declaration.declarations)this.checkDeclaration(o.id)}}if(this.state.decoratorStack[this.state.decoratorStack.length-1].length)throw this.raise(e.start,_.UnsupportedDecoratorExport)}checkDeclaration(e){if(e.type==="Identifier")this.checkDuplicateExports(e,e.name);else if(e.type==="ObjectPattern")for(const t of e.properties)this.checkDeclaration(t);else if(e.type==="ArrayPattern")for(const t of e.elements)t&&this.checkDeclaration(t);else e.type==="ObjectProperty"?this.checkDeclaration(e.value):e.type==="RestElement"?this.checkDeclaration(e.argument):e.type==="AssignmentPattern"&&this.checkDeclaration(e.left)}checkDuplicateExports(e,t){this.exportedIdentifiers.has(t)&&this.raise(e.start,t==="default"?_.DuplicateDefaultExport:_.DuplicateExport,t),this.exportedIdentifiers.add(t)}parseExportSpecifiers(e){const t=[];let r=!0;for(this.expect(5);!this.eat(8);){if(r)r=!1;else if(this.expect(12),this.eat(8))break;const n=this.isContextual(120),i=this.match(123),a=this.startNode();a.local=this.parseModuleExportName(),t.push(this.parseExportSpecifier(a,i,e,n))}return t}parseExportSpecifier(e,t,r,n){return this.eatContextual(87)?e.exported=this.parseModuleExportName():t?e.exported=XR(e.local):e.exported||(e.exported=Yr(e.local)),this.finishNode(e,"ExportSpecifier")}parseModuleExportName(){if(this.match(123)){const e=this.parseStringLiteral(this.state.value),t=e.value.match(_M);return t&&this.raise(e.start,_.ModuleExportNameHasLoneSurrogate,t[0].charCodeAt(0).toString(16)),e}return this.parseIdentifier(!0)}parseImport(e){if(e.specifiers=[],!this.match(123)){const n=!this.maybeParseDefaultImportSpecifier(e)||this.eat(12),i=n&&this.maybeParseStarImportSpecifier(e);n&&!i&&this.parseNamedImportSpecifiers(e),this.expectContextual(91)}e.source=this.parseImportSource();const t=this.maybeParseImportAssertions();if(t)e.assertions=t;else{const r=this.maybeParseModuleAttributes();r&&(e.attributes=r)}return this.semicolon(),this.finishNode(e,"ImportDeclaration")}parseImportSource(){return this.match(123)||this.unexpected(),this.parseExprAtom()}shouldParseDefaultImport(e){return we(this.state.type)}parseImportSpecifierLocal(e,t,r,n){t.local=this.parseIdentifier(),this.checkLVal(t.local,n,Yt),e.specifiers.push(this.finishNode(t,r))}parseAssertEntries(){const e=[],t=new Set;do{if(this.match(8))break;const r=this.startNode(),n=this.state.value;if(t.has(n)&&this.raise(this.state.start,_.ModuleAttributesWithDuplicateKeys,n),t.add(n),this.match(123)?r.key=this.parseStringLiteral(n):r.key=this.parseIdentifier(!0),this.expect(14),!this.match(123))throw this.unexpected(this.state.start,_.ModuleAttributeInvalidValue);r.value=this.parseStringLiteral(this.state.value),this.finishNode(r,"ImportAttribute"),e.push(r)}while(this.eat(12));return e}maybeParseModuleAttributes(){if(this.match(70)&&!this.hasPrecedingLineBreak())this.expectPlugin("moduleAttributes"),this.next();else return this.hasPlugin("moduleAttributes")?[]:null;const e=[],t=new Set;do{const r=this.startNode();if(r.key=this.parseIdentifier(!0),r.key.name!=="type"&&this.raise(r.key.start,_.ModuleAttributeDifferentFromType,r.key.name),t.has(r.key.name)&&this.raise(r.key.start,_.ModuleAttributesWithDuplicateKeys,r.key.name),t.add(r.key.name),this.expect(14),!this.match(123))throw this.unexpected(this.state.start,_.ModuleAttributeInvalidValue);r.value=this.parseStringLiteral(this.state.value),this.finishNode(r,"ImportAttribute"),e.push(r)}while(this.eat(12));return e}maybeParseImportAssertions(){if(this.isContextual(88)&&!this.hasPrecedingLineBreak())this.expectPlugin("importAssertions"),this.next();else return this.hasPlugin("importAssertions")?[]:null;this.eat(5);const e=this.parseAssertEntries();return this.eat(8),e}maybeParseDefaultImportSpecifier(e){return this.shouldParseDefaultImport(e)?(this.parseImportSpecifierLocal(e,this.startNode(),"ImportDefaultSpecifier","default import specifier"),!0):!1}maybeParseStarImportSpecifier(e){if(this.match(49)){const t=this.startNode();return this.next(),this.expectContextual(87),this.parseImportSpecifierLocal(e,t,"ImportNamespaceSpecifier","import namespace specifier"),!0}return!1}parseNamedImportSpecifiers(e){let t=!0;for(this.expect(5);!this.eat(8);){if(t)t=!1;else{if(this.eat(14))throw this.raise(this.state.start,_.DestructureNamedImport);if(this.expect(12),this.eat(8))break}const r=this.startNode(),n=this.match(123),i=this.isContextual(120);r.imported=this.parseModuleExportName();const a=this.parseImportSpecifier(r,n,e.importKind==="type"||e.importKind==="typeof",i);e.specifiers.push(a)}}parseImportSpecifier(e,t,r,n){if(this.eatContextual(87))e.local=this.parseIdentifier();else{const{imported:i}=e;if(t)throw this.raise(e.start,_.ImportBindingIsString,i.value);this.checkReservedWord(i.name,e.start,!0,!0),e.local||(e.local=Yr(i))}return this.checkLVal(e.local,"import specifier",Yt),this.finishNode(e,"ImportSpecifier")}isThisParam(e){return e.type==="Identifier"&&e.name==="this"}}class $S extends AM{constructor(e,t){e=TM(e),super(e,t),this.options=e,this.initializeScopes(),this.plugins=PM(this.options.plugins),this.filename=e.sourceFilename}getScopeHandler(){return vm}parse(){this.enterInitialScopes();const e=this.startNode(),t=this.startNode();return this.nextToken(),e.errors=null,this.parseTopLevel(e,t),e.errors=this.state.errors,e}}function PM(s){const e=new Map;for(const t of s){const[r,n]=Array.isArray(t)?t:[t,{}];e.has(r)||e.set(r,n||{})}return e}function CM(s,e){var t;if(((t=e)==null?void 0:t.sourceType)==="unambiguous"){e=Object.assign({},e);try{e.sourceType="module";const r=Aa(e,s),n=r.parse();if(r.sawUnambiguousESM)return n;if(r.ambiguousScriptDifferentAst)try{return e.sourceType="script",Aa(e,s).parse()}catch{}else n.program.sourceType="script";return n}catch(r){try{return e.sourceType="script",Aa(e,s).parse()}catch{}throw r}}else return Aa(e,s).parse()}function kM(s,e){const t=Aa(e,s);return t.options.strictMode&&(t.state.strict=!0),t.getExpression()}function NM(s){const e={};for(const t of Object.keys(s))e[t]=Hu(s[t]);return e}NM(iR);function Aa(s,e){let t=$S;return s!=null&&s.plugins&&(vM(s.plugins),t=OM(s.plugins)),new t(s,e)}const rv={};function OM(s){const e=wM.filter(n=>bt(s,n)),t=e.join("/");let r=rv[t];if(!r){r=$S;for(const n of e)r=qS[n](r);rv[t]=r}return r}var DM=CM,RM=kM;const Mt=s=>s.type===4&&s.isStatic,Pa=(s,e)=>s===e||s===UD(e);function MM(s){if(Pa(s,"Teleport"))return Ba;if(Pa(s,"Suspense"))return Qp;if(Pa(s,"KeepAlive"))return kc;if(Pa(s,"BaseTransition"))return sS}const LM=/^\d|[^\$\w]/,$c=s=>!LM.test(s),FM=(s,e)=>{try{let t=RM(s,{plugins:e.expressionPlugins});return(t.type==="TSAsExpression"||t.type==="TSTypeAssertion")&&(t=t.expression),t.type==="MemberExpression"||t.type==="OptionalMemberExpression"||t.type==="Identifier"}catch{return!1}},jS=FM;function GS(s,e,t){const n={source:s.source.slice(e,e+t),start:jc(s.start,s.source,e),end:s.end};return t!=null&&(n.end=jc(s.start,s.source,e+t)),n}function jc(s,e,t=e.length){return UM(ND({},s),e,t)}function UM(s,e,t=e.length){let r=0,n=-1;for(let i=0;i<t;i++)e.charCodeAt(i)===10&&(r++,n=i);return s.offset+=t,s.line+=r,s.column=n===-1?s.column+t:t-n,s}function $t(s,e,t=!1){for(let r=0;r<s.props.length;r++){const n=s.props[r];if(n.type===7&&(t||n.exp)&&(er(e)?n.name===e:e.test(n.name)))return n}}function Di(s,e,t=!1,r=!1){for(let n=0;n<s.props.length;n++){const i=s.props[n];if(i.type===6){if(t)continue;if(i.name===e&&(i.value||r))return i}else if(i.name==="bind"&&(i.exp||r)&&ti(i.arg,e))return i}}function ti(s,e){return!!(s&&Mt(s)&&s.content===e)}function BM(s){return s.props.some(e=>e.type===7&&e.name==="bind"&&(!e.arg||e.arg.type!==4||!e.arg.isStatic))}function Rh(s){return s.type===5||s.type===2}function zS(s){return s.type===7&&s.name==="slot"}function _o(s){return s.type===1&&s.tagType===3}function Bf(s){return s.type===1&&s.tagType===2}function xo(s,e){return s||e?aS:oS}function Ao(s,e){return s||e?nS:iS}const VM=new Set([bo,cu]);function WS(s,e=[]){if(s&&!er(s)&&s.type===14){const t=s.callee;if(!er(t)&&VM.has(t))return WS(s.arguments[0],e.concat(s))}return[s,e]}function Gc(s,e,t){let r,n=s.type===13?s.props:s.arguments[2],i=[],a;if(n&&!er(n)&&n.type===14){const o=WS(n);n=o[0],i=o[1],a=i[i.length-1]}if(n==null||er(n))r=Xt([e]);else if(n.type===14){const o=n.arguments[0];!er(o)&&o.type===15?o.properties.unshift(e):n.callee===tm?r=Qe(t.helper(Oc),[Xt([e]),n]):n.arguments.unshift(Xt([e])),!r&&(r=n)}else if(n.type===15){let o=!1;if(e.key.type===4){const u=e.key.content;o=n.properties.some(c=>c.key.type===4&&c.key.content===u)}o||n.properties.unshift(e),r=n}else r=Qe(t.helper(Oc),[Xt([e]),n]),a&&a.callee===cu&&(a=i[i.length-2]);s.type===13?a?a.arguments[0]=r:s.props=r:a?a.arguments[0]=r:s.arguments[2]=r}function Vf(s,e){return`_${e}_${s.replace(/[^\w]/g,(t,r)=>t==="-"?"_":s.charCodeAt(r).toString())}`}function Vt(s,e){if(!s||Object.keys(e).length===0)return!1;switch(s.type){case 1:for(let t=0;t<s.props.length;t++){const r=s.props[t];if(r.type===7&&(Vt(r.arg,e)||Vt(r.exp,e)))return!0}return s.children.some(t=>Vt(t,e));case 11:return Vt(s.source,e)?!0:s.children.some(t=>Vt(t,e));case 9:return s.branches.some(t=>Vt(t,e));case 10:return Vt(s.condition,e)?!0:s.children.some(t=>Vt(t,e));case 4:return!s.isStatic&&$c(s.content)&&!!e[s.content];case 8:return s.children.some(t=>rS(t)&&Vt(t,e));case 5:case 12:return Vt(s.content,e);case 2:case 3:return!1;default:return!1}}function qM(s){return s.type===14&&s.callee===rm?s.arguments[1].returns:s}function KS(s,{helper:e,removeHelper:t,inSSR:r}){s.isBlock||(s.isBlock=!0,t(xo(r,s.isComponent)),e(ki),e(Ao(r,s.isComponent)))}function or(s,e){const{constantCache:t}=e;switch(s.type){case 1:if(s.tagType!==0)return 0;const r=t.get(s);if(r!==void 0)return r;const n=s.codegenNode;if(n.type!==13||n.isBlock&&s.tag!=="svg"&&s.tag!=="foreignObject")return 0;if(zM(n))return t.set(s,0),0;{let o=3;const u=jM(s,e);if(u===0)return t.set(s,0),0;u<o&&(o=u);for(let c=0;c<s.children.length;c++){const l=or(s.children[c],e);if(l===0)return t.set(s,0),0;l<o&&(o=l)}if(o>1)for(let c=0;c<s.props.length;c++){const l=s.props[c];if(l.type===7&&l.name==="bind"&&l.exp){const h=or(l.exp,e);if(h===0)return t.set(s,0),0;h<o&&(o=h)}}if(n.isBlock){for(let c=0;c<s.props.length;c++)if(s.props[c].type===7)return t.set(s,0),0;e.removeHelper(ki),e.removeHelper(Ao(e.inSSR,n.isComponent)),n.isBlock=!1,e.helper(xo(e.inSSR,n.isComponent))}return t.set(s,o),o}case 2:case 3:return 3;case 9:case 11:case 10:return 0;case 5:case 12:return or(s.content,e);case 4:return s.constType;case 8:let a=3;for(let o=0;o<s.children.length;o++){const u=s.children[o];if(er(u)||tS(u))continue;const c=or(u,e);if(c===0)return 0;c<a&&(a=c)}return a;default:return 0}}const $M=new Set([Zp,em,bo,cu]);function HS(s,e){if(s.type===14&&!er(s.callee)&&$M.has(s.callee)){const t=s.arguments[0];if(t.type===4)return or(t,e);if(t.type===14)return HS(t,e)}return 0}function jM(s,e){let t=3;const r=GM(s);if(r&&r.type===15){const{properties:n}=r;for(let i=0;i<n.length;i++){const{key:a,value:o}=n[i],u=or(a,e);if(u===0)return u;u<t&&(t=u);let c;if(o.type===4?c=or(o,e):o.type===14?c=HS(o,e):c=0,c===0)return c;c<t&&(t=c)}}return t}function GM(s){const e=s.codegenNode;if(e.type===13)return e.props}function zM(s){const e=s.patchFlag;return e?parseInt(e,10):void 0}function WM(s,e){let t=0;const r=()=>{t--};for(;t<s.children.length;t++){const n=s.children[t];er(n)||(e.parent=s,e.childIndex=t,e.onNodeRemoved=r,Sm(n,e))}}function Sm(s,e){e.currentNode=s;const{nodeTransforms:t}=e,r=[];for(let i=0;i<t.length;i++){const a=t[i](s,e);if(a&&(RD(a)?r.push(...a):r.push(a)),e.currentNode)s=e.currentNode;else return}switch(s.type){case 3:e.ssr||e.helper(Yp);break;case 5:e.ssr||e.helper(Xp);break;case 9:for(let i=0;i<s.branches.length;i++)Sm(s.branches[i],e);break;case 10:case 11:case 1:case 0:WM(s,e);break}e.currentNode=s;let n=r.length;for(;n--;)r[n]()}function QS(s,e){const t=er(s)?r=>r===s:r=>s.test(r);return(r,n)=>{if(r.type===1){const{props:i}=r;if(r.tagType===3&&i.some(zS))return;const a=[];for(let o=0;o<i.length;o++){const u=i[o];if(u.type===7&&t(u.name)){i.splice(o,1),o--;const c=e(r,u,n);c&&a.push(c)}}return a}}}var sv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),KM=function(s){if(0<=s&&s<sv.length)return sv[s];throw new TypeError("Must be between 0 and 63: "+s)},HM=function(s){var e=65,t=90,r=97,n=122,i=48,a=57,o=43,u=47,c=26,l=52;return e<=s&&s<=t?s-e:r<=s&&s<=n?s-r+c:i<=s&&s<=a?s-i+l:s==o?62:s==u?63:-1},YS={encode:KM,decode:HM},Em=5,JS=1<<Em,XS=JS-1,ZS=JS;function QM(s){return s<0?(-s<<1)+1:(s<<1)+0}function YM(s){var e=(s&1)===1,t=s>>1;return e?-t:t}var JM=function(e){var t="",r,n=QM(e);do r=n&XS,n>>>=Em,n>0&&(r|=ZS),t+=YS.encode(r);while(n>0);return t},XM=function(e,t,r){var n=e.length,i=0,a=0,o,u;do{if(t>=n)throw new Error("Expected more digits in base 64 VLQ value.");if(u=YS.decode(e.charCodeAt(t++)),u===-1)throw new Error("Invalid base64 digit: "+e.charAt(t-1));o=!!(u&ZS),u&=XS,i=i+(u<<a),a+=Em}while(o);r.value=YM(i),r.rest=t},ZM={encode:JM,decode:XM};function lu(s){if(s.__esModule)return s;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(s).forEach(function(t){var r=Object.getOwnPropertyDescriptor(s,t);Object.defineProperty(e,t,r.get?r:{enumerable:!0,get:function(){return s[t]}})}),e}function be(s){var e={exports:{}};return s(e,e.exports),e.exports}var W=be(function(s,e){function t(y,T,P){if(T in y)return y[T];if(arguments.length===3)return P;throw new Error('"'+T+'" is a required argument.')}e.getArg=t;var r=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,n=/^data:.+\,.+$/;function i(y){var T=y.match(r);return T?{scheme:T[1],auth:T[2],host:T[3],port:T[4],path:T[5]}:null}e.urlParse=i;function a(y){var T="";return y.scheme&&(T+=y.scheme+":"),T+="//",y.auth&&(T+=y.auth+"@"),y.host&&(T+=y.host),y.port&&(T+=":"+y.port),y.path&&(T+=y.path),T}e.urlGenerate=a;function o(y){var T=y,P=i(y);if(P){if(!P.path)return y;T=P.path}for(var E=e.isAbsolute(T),w=T.split(/\/+/),x,C=0,A=w.length-1;A>=0;A--)x=w[A],x==="."?w.splice(A,1):x===".."?C++:C>0&&(x===""?(w.splice(A+1,C),C=0):(w.splice(A,2),C--));return T=w.join("/"),T===""&&(T=E?"/":"."),P?(P.path=T,a(P)):T}e.normalize=o;function u(y,T){y===""&&(y="."),T===""&&(T=".");var P=i(T),E=i(y);if(E&&(y=E.path||"/"),P&&!P.scheme)return E&&(P.scheme=E.scheme),a(P);if(P||T.match(n))return T;if(E&&!E.host&&!E.path)return E.host=T,a(E);var w=T.charAt(0)==="/"?T:o(y.replace(/\/+$/,"")+"/"+T);return E?(E.path=w,a(E)):w}e.join=u,e.isAbsolute=function(y){return y.charAt(0)==="/"||r.test(y)};function c(y,T){y===""&&(y="."),y=y.replace(/\/$/,"");for(var P=0;T.indexOf(y+"/")!==0;){var E=y.lastIndexOf("/");if(E<0||(y=y.slice(0,E),y.match(/^([^\/]+:\/)?\/*$/)))return T;++P}return Array(P+1).join("../")+T.substr(y.length+1)}e.relative=c;var l=function(){var y=Object.create(null);return!("__proto__"in y)}();function h(y){return y}function f(y){return g(y)?"$"+y:y}e.toSetString=l?h:f;function d(y){return g(y)?y.slice(1):y}e.fromSetString=l?h:d;function g(y){if(!y)return!1;var T=y.length;if(T<9||y.charCodeAt(T-1)!==95||y.charCodeAt(T-2)!==95||y.charCodeAt(T-3)!==111||y.charCodeAt(T-4)!==116||y.charCodeAt(T-5)!==111||y.charCodeAt(T-6)!==114||y.charCodeAt(T-7)!==112||y.charCodeAt(T-8)!==95||y.charCodeAt(T-9)!==95)return!1;for(var P=T-10;P>=0;P--)if(y.charCodeAt(P)!==36)return!1;return!0}function p(y,T,P){var E=v(y.source,T.source);return E!==0||(E=y.originalLine-T.originalLine,E!==0)||(E=y.originalColumn-T.originalColumn,E!==0||P)||(E=y.generatedColumn-T.generatedColumn,E!==0)||(E=y.generatedLine-T.generatedLine,E!==0)?E:v(y.name,T.name)}e.compareByOriginalPositions=p;function m(y,T,P){var E=y.generatedLine-T.generatedLine;return E!==0||(E=y.generatedColumn-T.generatedColumn,E!==0||P)||(E=v(y.source,T.source),E!==0)||(E=y.originalLine-T.originalLine,E!==0)||(E=y.originalColumn-T.originalColumn,E!==0)?E:v(y.name,T.name)}e.compareByGeneratedPositionsDeflated=m;function v(y,T){return y===T?0:y===null?1:T===null?-1:y>T?1:-1}function S(y,T){var P=y.generatedLine-T.generatedLine;return P!==0||(P=y.generatedColumn-T.generatedColumn,P!==0)||(P=v(y.source,T.source),P!==0)||(P=y.originalLine-T.originalLine,P!==0)||(P=y.originalColumn-T.originalColumn,P!==0)?P:v(y.name,T.name)}e.compareByGeneratedPositionsInflated=S;function b(y){return JSON.parse(y.replace(/^\)]}'[^\n]*\n/,""))}e.parseSourceMapInput=b;function I(y,T,P){if(T=T||"",y&&(y[y.length-1]!=="/"&&T[0]!=="/"&&(y+="/"),T=y+T),P){var E=i(P);if(!E)throw new Error("sourceMapURL could not be parsed");if(E.path){var w=E.path.lastIndexOf("/");w>=0&&(E.path=E.path.substring(0,w+1))}T=u(a(E),T)}return o(T)}e.computeSourceURL=I}),Im=Object.prototype.hasOwnProperty,yn=typeof Map!="undefined";function ts(){this._array=[],this._set=yn?new Map:Object.create(null)}ts.fromArray=function(e,t){for(var r=new ts,n=0,i=e.length;n<i;n++)r.add(e[n],t);return r};ts.prototype.size=function(){return yn?this._set.size:Object.getOwnPropertyNames(this._set).length};ts.prototype.add=function(e,t){var r=yn?e:W.toSetString(e),n=yn?this.has(e):Im.call(this._set,r),i=this._array.length;(!n||t)&&this._array.push(e),n||(yn?this._set.set(e,i):this._set[r]=i)};ts.prototype.has=function(e){if(yn)return this._set.has(e);var t=W.toSetString(e);return Im.call(this._set,t)};ts.prototype.indexOf=function(e){if(yn){var t=this._set.get(e);if(t>=0)return t}else{var r=W.toSetString(e);if(Im.call(this._set,r))return this._set[r]}throw new Error('"'+e+'" is not in the set.')};ts.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)};ts.prototype.toArray=function(){return this._array.slice()};var eL=ts,tL={ArraySet:eL},_m=be(function(s,e){e.GREATEST_LOWER_BOUND=1,e.LEAST_UPPER_BOUND=2;function t(r,n,i,a,o,u){var c=Math.floor((n-r)/2)+r,l=o(i,a[c],!0);return l===0?c:l>0?n-c>1?t(c,n,i,a,o,u):u==e.LEAST_UPPER_BOUND?n<a.length?n:-1:c:c-r>1?t(r,c,i,a,o,u):u==e.LEAST_UPPER_BOUND?c:r<0?-1:r}e.search=function(n,i,a,o){if(i.length===0)return-1;var u=t(-1,i.length,n,i,a,o||e.GREATEST_LOWER_BOUND);if(u<0)return-1;for(;u-1>=0&&a(i[u],i[u-1],!0)===0;)--u;return u}});function Mh(s,e,t){var r=s[e];s[e]=s[t],s[t]=r}function rL(s,e){return Math.round(s+Math.random()*(e-s))}function qf(s,e,t,r){if(t<r){var n=rL(t,r),i=t-1;Mh(s,n,r);for(var a=s[r],o=t;o<r;o++)e(s[o],a)<=0&&(i+=1,Mh(s,i,o));Mh(s,i+1,o);var u=i+1;qf(s,e,t,u-1),qf(s,e,u+1,r)}}var sL=function(s,e){qf(s,e,0,s.length-1)},nL={quickSort:sL},Ri=tL.ArraySet,Po=nL.quickSort;function Le(s,e){var t=s;return typeof s=="string"&&(t=W.parseSourceMapInput(s)),t.sections!=null?new Lr(t,e):new _t(t,e)}Le.fromSourceMap=function(s,e){return _t.fromSourceMap(s,e)};Le.prototype._version=3;Le.prototype.__generatedMappings=null;Object.defineProperty(Le.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}});Le.prototype.__originalMappings=null;Object.defineProperty(Le.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}});Le.prototype._charIsMappingSeparator=function(e,t){var r=e.charAt(t);return r===";"||r===","};Le.prototype._parseMappings=function(e,t){throw new Error("Subclasses must implement _parseMappings")};Le.GENERATED_ORDER=1;Le.ORIGINAL_ORDER=2;Le.GREATEST_LOWER_BOUND=1;Le.LEAST_UPPER_BOUND=2;Le.prototype.eachMapping=function(e,t,r){var n=t||null,i=r||Le.GENERATED_ORDER,a;switch(i){case Le.GENERATED_ORDER:a=this._generatedMappings;break;case Le.ORIGINAL_ORDER:a=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var o=this.sourceRoot;a.map(function(u){var c=u.source===null?null:this._sources.at(u.source);return c=W.computeSourceURL(o,c,this._sourceMapURL),{source:c,generatedLine:u.generatedLine,generatedColumn:u.generatedColumn,originalLine:u.originalLine,originalColumn:u.originalColumn,name:u.name===null?null:this._names.at(u.name)}},this).forEach(e,n)};Le.prototype.allGeneratedPositionsFor=function(e){var t=W.getArg(e,"line"),r={source:W.getArg(e,"source"),originalLine:t,originalColumn:W.getArg(e,"column",0)};if(r.source=this._findSourceIndex(r.source),r.source<0)return[];var n=[],i=this._findMapping(r,this._originalMappings,"originalLine","originalColumn",W.compareByOriginalPositions,_m.LEAST_UPPER_BOUND);if(i>=0){var a=this._originalMappings[i];if(e.column===void 0)for(var o=a.originalLine;a&&a.originalLine===o;)n.push({line:W.getArg(a,"generatedLine",null),column:W.getArg(a,"generatedColumn",null),lastColumn:W.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++i];else for(var u=a.originalColumn;a&&a.originalLine===t&&a.originalColumn==u;)n.push({line:W.getArg(a,"generatedLine",null),column:W.getArg(a,"generatedColumn",null),lastColumn:W.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++i]}return n};function _t(s,e){var t=s;typeof s=="string"&&(t=W.parseSourceMapInput(s));var r=W.getArg(t,"version"),n=W.getArg(t,"sources"),i=W.getArg(t,"names",[]),a=W.getArg(t,"sourceRoot",null),o=W.getArg(t,"sourcesContent",null),u=W.getArg(t,"mappings"),c=W.getArg(t,"file",null);if(r!=this._version)throw new Error("Unsupported version: "+r);a&&(a=W.normalize(a)),n=n.map(String).map(W.normalize).map(function(l){return a&&W.isAbsolute(a)&&W.isAbsolute(l)?W.relative(a,l):l}),this._names=Ri.fromArray(i.map(String),!0),this._sources=Ri.fromArray(n,!0),this._absoluteSources=this._sources.toArray().map(function(l){return W.computeSourceURL(a,l,e)}),this.sourceRoot=a,this.sourcesContent=o,this._mappings=u,this._sourceMapURL=e,this.file=c}_t.prototype=Object.create(Le.prototype);_t.prototype.consumer=Le;_t.prototype._findSourceIndex=function(s){var e=s;if(this.sourceRoot!=null&&(e=W.relative(this.sourceRoot,e)),this._sources.has(e))return this._sources.indexOf(e);var t;for(t=0;t<this._absoluteSources.length;++t)if(this._absoluteSources[t]==s)return t;return-1};_t.fromSourceMap=function(e,t){var r=Object.create(_t.prototype),n=r._names=Ri.fromArray(e._names.toArray(),!0),i=r._sources=Ri.fromArray(e._sources.toArray(),!0);r.sourceRoot=e._sourceRoot,r.sourcesContent=e._generateSourcesContent(r._sources.toArray(),r.sourceRoot),r.file=e._file,r._sourceMapURL=t,r._absoluteSources=r._sources.toArray().map(function(d){return W.computeSourceURL(r.sourceRoot,d,t)});for(var a=e._mappings.toArray().slice(),o=r.__generatedMappings=[],u=r.__originalMappings=[],c=0,l=a.length;c<l;c++){var h=a[c],f=new eE;f.generatedLine=h.generatedLine,f.generatedColumn=h.generatedColumn,h.source&&(f.source=i.indexOf(h.source),f.originalLine=h.originalLine,f.originalColumn=h.originalColumn,h.name&&(f.name=n.indexOf(h.name)),u.push(f)),o.push(f)}return Po(r.__originalMappings,W.compareByOriginalPositions),r};_t.prototype._version=3;Object.defineProperty(_t.prototype,"sources",{get:function(){return this._absoluteSources.slice()}});function eE(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}_t.prototype._parseMappings=function(e,t){for(var r=1,n=0,i=0,a=0,o=0,u=0,c=e.length,l=0,h={},f={},d=[],g=[],p,m,v,S,b;l<c;)if(e.charAt(l)===";")r++,l++,n=0;else if(e.charAt(l)===",")l++;else{for(p=new eE,p.generatedLine=r,S=l;S<c&&!this._charIsMappingSeparator(e,S);S++);if(m=e.slice(l,S),v=h[m],v)l+=m.length;else{for(v=[];l<S;)ZM.decode(e,l,f),b=f.value,l=f.rest,v.push(b);if(v.length===2)throw new Error("Found a source, but no line and column");if(v.length===3)throw new Error("Found a source and line, but no column");h[m]=v}p.generatedColumn=n+v[0],n=p.generatedColumn,v.length>1&&(p.source=o+v[1],o+=v[1],p.originalLine=i+v[2],i=p.originalLine,p.originalLine+=1,p.originalColumn=a+v[3],a=p.originalColumn,v.length>4&&(p.name=u+v[4],u+=v[4])),g.push(p),typeof p.originalLine=="number"&&d.push(p)}Po(g,W.compareByGeneratedPositionsDeflated),this.__generatedMappings=g,Po(d,W.compareByOriginalPositions),this.__originalMappings=d};_t.prototype._findMapping=function(e,t,r,n,i,a){if(e[r]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[r]);if(e[n]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[n]);return _m.search(e,t,i,a)};_t.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var t=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var r=this._generatedMappings[e+1];if(t.generatedLine===r.generatedLine){t.lastGeneratedColumn=r.generatedColumn-1;continue}}t.lastGeneratedColumn=1/0}};_t.prototype.originalPositionFor=function(e){var t={generatedLine:W.getArg(e,"line"),generatedColumn:W.getArg(e,"column")},r=this._findMapping(t,this._generatedMappings,"generatedLine","generatedColumn",W.compareByGeneratedPositionsDeflated,W.getArg(e,"bias",Le.GREATEST_LOWER_BOUND));if(r>=0){var n=this._generatedMappings[r];if(n.generatedLine===t.generatedLine){var i=W.getArg(n,"source",null);i!==null&&(i=this._sources.at(i),i=W.computeSourceURL(this.sourceRoot,i,this._sourceMapURL));var a=W.getArg(n,"name",null);return a!==null&&(a=this._names.at(a)),{source:i,line:W.getArg(n,"originalLine",null),column:W.getArg(n,"originalColumn",null),name:a}}}return{source:null,line:null,column:null,name:null}};_t.prototype.hasContentsOfAllSources=function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return e==null}):!1};_t.prototype.sourceContentFor=function(e,t){if(!this.sourcesContent)return null;var r=this._findSourceIndex(e);if(r>=0)return this.sourcesContent[r];var n=e;this.sourceRoot!=null&&(n=W.relative(this.sourceRoot,n));var i;if(this.sourceRoot!=null&&(i=W.urlParse(this.sourceRoot))){var a=n.replace(/^file:\/\//,"");if(i.scheme=="file"&&this._sources.has(a))return this.sourcesContent[this._sources.indexOf(a)];if((!i.path||i.path=="/")&&this._sources.has("/"+n))return this.sourcesContent[this._sources.indexOf("/"+n)]}if(t)return null;throw new Error('"'+n+'" is not in the SourceMap.')};_t.prototype.generatedPositionFor=function(e){var t=W.getArg(e,"source");if(t=this._findSourceIndex(t),t<0)return{line:null,column:null,lastColumn:null};var r={source:t,originalLine:W.getArg(e,"line"),originalColumn:W.getArg(e,"column")},n=this._findMapping(r,this._originalMappings,"originalLine","originalColumn",W.compareByOriginalPositions,W.getArg(e,"bias",Le.GREATEST_LOWER_BOUND));if(n>=0){var i=this._originalMappings[n];if(i.source===r.source)return{line:W.getArg(i,"generatedLine",null),column:W.getArg(i,"generatedColumn",null),lastColumn:W.getArg(i,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}};function Lr(s,e){var t=s;typeof s=="string"&&(t=W.parseSourceMapInput(s));var r=W.getArg(t,"version"),n=W.getArg(t,"sections");if(r!=this._version)throw new Error("Unsupported version: "+r);this._sources=new Ri,this._names=new Ri;var i={line:-1,column:0};this._sections=n.map(function(a){if(a.url)throw new Error("Support for url field in sections not implemented.");var o=W.getArg(a,"offset"),u=W.getArg(o,"line"),c=W.getArg(o,"column");if(u<i.line||u===i.line&&c<i.column)throw new Error("Section offsets must be ordered and non-overlapping.");return i=o,{generatedOffset:{generatedLine:u+1,generatedColumn:c+1},consumer:new Le(W.getArg(a,"map"),e)}})}Lr.prototype=Object.create(Le.prototype);Lr.prototype.constructor=Le;Lr.prototype._version=3;Object.defineProperty(Lr.prototype,"sources",{get:function(){for(var s=[],e=0;e<this._sections.length;e++)for(var t=0;t<this._sections[e].consumer.sources.length;t++)s.push(this._sections[e].consumer.sources[t]);return s}});Lr.prototype.originalPositionFor=function(e){var t={generatedLine:W.getArg(e,"line"),generatedColumn:W.getArg(e,"column")},r=_m.search(t,this._sections,function(i,a){var o=i.generatedLine-a.generatedOffset.generatedLine;return o||i.generatedColumn-a.generatedOffset.generatedColumn}),n=this._sections[r];return n?n.consumer.originalPositionFor({line:t.generatedLine-(n.generatedOffset.generatedLine-1),column:t.generatedColumn-(n.generatedOffset.generatedLine===t.generatedLine?n.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}};Lr.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})};Lr.prototype.sourceContentFor=function(e,t){for(var r=0;r<this._sections.length;r++){var n=this._sections[r],i=n.consumer.sourceContentFor(e,!0);if(i)return i}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')};Lr.prototype.generatedPositionFor=function(e){for(var t=0;t<this._sections.length;t++){var r=this._sections[t];if(r.consumer._findSourceIndex(W.getArg(e,"source"))!==-1){var n=r.consumer.generatedPositionFor(e);if(n){var i={line:n.line+(r.generatedOffset.generatedLine-1),column:n.column+(r.generatedOffset.generatedLine===n.line?r.generatedOffset.generatedColumn-1:0)};return i}}}return{line:null,column:null}};Lr.prototype._parseMappings=function(e,t){this.__generatedMappings=[],this.__originalMappings=[];for(var r=0;r<this._sections.length;r++)for(var n=this._sections[r],i=n.consumer._generatedMappings,a=0;a<i.length;a++){var o=i[a],u=n.consumer._sources.at(o.source);u=W.computeSourceURL(n.consumer.sourceRoot,u,this._sourceMapURL),this._sources.add(u),u=this._sources.indexOf(u);var c=null;o.name&&(c=n.consumer._names.at(o.name),this._names.add(c),c=this._names.indexOf(c));var l={source:u,generatedLine:o.generatedLine+(n.generatedOffset.generatedLine-1),generatedColumn:o.generatedColumn+(n.generatedOffset.generatedLine===o.generatedLine?n.generatedOffset.generatedColumn-1:0),originalLine:o.originalLine,originalColumn:o.originalColumn,name:c};this.__generatedMappings.push(l),typeof l.originalLine=="number"&&this.__originalMappings.push(l)}Po(this.__generatedMappings,W.compareByGeneratedPositionsDeflated),Po(this.__originalMappings,W.compareByOriginalPositions)};class iL{constructor(){this.should_skip=!1,this.should_remove=!1,this.replacement=null,this.context={skip:()=>this.should_skip=!0,remove:()=>this.should_remove=!0,replace:e=>this.replacement=e}}replace(e,t,r,n){e&&(r!==null?e[t][r]=n:e[t]=n)}remove(e,t,r){e&&(r!==null?e[t].splice(r,1):delete e[t])}}class aL extends iL{constructor(e,t){super(),this.enter=e,this.leave=t}visit(e,t,r,n){if(e){if(this.enter){const i=this.should_skip,a=this.should_remove,o=this.replacement;this.should_skip=!1,this.should_remove=!1,this.replacement=null,this.enter.call(this.context,e,t,r,n),this.replacement&&(e=this.replacement,this.replace(t,r,n,e)),this.should_remove&&this.remove(t,r,n);const u=this.should_skip,c=this.should_remove;if(this.should_skip=i,this.should_remove=a,this.replacement=o,u)return e;if(c)return null}for(const i in e){const a=e[i];if(typeof a=="object")if(Array.isArray(a))for(let o=0;o<a.length;o+=1)a[o]!==null&&typeof a[o].type=="string"&&(this.visit(a[o],e,i,o)||o--);else a!==null&&typeof a.type=="string"&&this.visit(a,e,i,null)}if(this.leave){const i=this.replacement,a=this.should_remove;this.replacement=null,this.should_remove=!1,this.leave.call(this.context,e,t,r,n),this.replacement&&(e=this.replacement,this.replace(t,r,n,e)),this.should_remove&&this.remove(t,r,n);const o=this.should_remove;if(this.replacement=i,this.should_remove=a,o)return null}}return e}}function oL(s,{enter:e,leave:t}){return new aL(e,t).visit(s,null)}function uL(s,e,t=!1,r=[],n=Object.create(null)){const i=s.type==="Program"&&s.body[0].type==="ExpressionStatement"&&s.body[0].expression;oL(s,{enter(a,o){if(o&&r.push(o),o&&o.type.startsWith("TS")&&o.type!=="TSAsExpression"&&o.type!=="TSNonNullExpression"&&o.type!=="TSTypeAssertion")return this.skip();if(a.type==="Identifier"){const u=!!n[a.name],c=cL(a,o,r);(t||c&&!u)&&e(a,o,r,c,u)}else a.type==="ObjectProperty"&&o.type==="ObjectPattern"?a.inPattern=!0:fL(a)?lL(a,u=>nv(a,u,n)):a.type==="BlockStatement"&&hL(a,u=>nv(a,u,n))},leave(a,o){if(o&&r.pop(),a!==i&&a.scopeIds)for(const u of a.scopeIds)n[u]--,n[u]===0&&delete n[u]}})}function cL(s,e,t){if(!e)return!0;if(s.name==="arguments")return!1;if(pL(s,e))return!0;switch(e.type){case"AssignmentExpression":case"AssignmentPattern":return!0;case"ObjectPattern":case"ArrayPattern":return tE(e,t)}return!1}function tE(s,e){if(s&&(s.type==="ObjectProperty"||s.type==="ArrayPattern")){let t=e.length;for(;t--;){const r=e[t];if(r.type==="AssignmentExpression")return!0;if(r.type!=="ObjectProperty"&&!r.type.endsWith("Pattern"))break}}return!1}function lL(s,e){for(const t of s.params)for(const r of rn(t))e(r)}function hL(s,e){for(const t of s.body)if(t.type==="VariableDeclaration"){if(t.declare)continue;for(const r of t.declarations)for(const n of rn(r.id))e(n)}else if(t.type==="FunctionDeclaration"||t.type==="ClassDeclaration"){if(t.declare||!t.id)continue;e(t.id)}}function rn(s,e=[]){switch(s.type){case"Identifier":e.push(s);break;case"MemberExpression":let t=s;for(;t.type==="MemberExpression";)t=t.object;e.push(t);break;case"ObjectPattern":for(const r of s.properties)r.type==="RestElement"?rn(r.argument,e):rn(r.value,e);break;case"ArrayPattern":s.elements.forEach(r=>{r&&rn(r,e)});break;case"RestElement":rn(s.argument,e);break;case"AssignmentPattern":rn(s.left,e);break}return e}function nv(s,e,t){const{name:r}=e;s.scopeIds&&s.scopeIds.has(r)||(r in t?t[r]++:t[r]=1,(s.scopeIds||(s.scopeIds=new Set)).add(r))}const fL=s=>/Function(?:Expression|Declaration)$|Method$/.test(s.type),rE=s=>s&&(s.type==="ObjectProperty"||s.type==="ObjectMethod")&&!s.computed,dL=(s,e)=>rE(e)&&e.key===s;function pL(s,e,t){switch(e.type){case"MemberExpression":case"OptionalMemberExpression":return e.property===s?!!e.computed:e.object===s;case"JSXMemberExpression":return e.object===s;case"VariableDeclarator":return e.init===s;case"ArrowFunctionExpression":return e.body===s;case"PrivateName":return!1;case"ClassMethod":case"ClassPrivateMethod":case"ObjectMethod":return e.key===s?!!e.computed:!1;case"ObjectProperty":return e.key===s?!!e.computed:!t||t.type!=="ObjectPattern";case"ClassProperty":return e.key===s?!!e.computed:!0;case"ClassPrivateProperty":return e.key!==s;case"ClassDeclaration":case"ClassExpression":return e.superClass===s;case"AssignmentExpression":return e.right===s;case"AssignmentPattern":return e.right===s;case"LabeledStatement":return!1;case"CatchClause":return!1;case"RestElement":return!1;case"BreakStatement":case"ContinueStatement":return!1;case"FunctionDeclaration":case"FunctionExpression":return!1;case"ExportNamespaceSpecifier":case"ExportDefaultSpecifier":return!1;case"ExportSpecifier":return t!=null&&t.source?!1:e.local===s;case"ImportDefaultSpecifier":case"ImportNamespaceSpecifier":case"ImportSpecifier":return!1;case"ImportAttribute":return!1;case"JSXAttribute":return!1;case"ObjectPattern":case"ArrayPattern":return!1;case"MetaProperty":return!1;case"ObjectTypeProperty":return e.key!==s;case"TSEnumMember":return e.id!==s;case"TSPropertySignature":return e.key===s?!!e.computed:!0}return!0}const mL=us("true,false,null,this"),gL=(s,e)=>{if(s.type===5)s.content=Zt(s.content,e);else if(s.type===1)for(let t=0;t<s.props.length;t++){const r=s.props[t];if(r.type===7&&r.name!=="for"){const n=r.exp,i=r.arg;n&&n.type===4&&!(r.name==="on"&&i)&&(r.exp=Zt(n,e,r.name==="slot")),i&&i.type===4&&!i.isStatic&&(r.arg=Zt(i,e))}}};function Zt(s,e,t=!1,r=!1,n=Object.create(e.identifiers)){if(!e.prefixIdentifiers||!s.content.trim())return s;const{inline:i,bindingMetadata:a}=e,o=(v,S,b)=>{const I=DD(a,v)&&a[v];if(i){const y=S&&S.type==="AssignmentExpression"&&S.left===b,T=S&&S.type==="UpdateExpression"&&S.argument===b,P=S&&tE(S,d);if(I==="setup-const"||I==="setup-reactive-const"||n[v])return v;if(I==="setup-ref")return`${v}.value`;if(I==="setup-maybe-ref")return y||T||P?`${v}.value`:`${e.helperString(Dc)}(${v})`;if(I==="setup-let")if(y){const{right:E,operator:w}=S,x=u.slice(E.start-1,E.end-1),C=sE(Zt(oe(x,!1),e,!1,!1,g));return`${e.helperString(Rc)}(${v})${e.isTS?` //@ts-ignore
`:""} ? ${v}.value ${w} ${C} : ${v}`}else if(T){b.start=S.start,b.end=S.end;const{prefix:E,operator:w}=S,x=E?w:"",C=E?"":w;return`${e.helperString(Rc)}(${v})${e.isTS?` //@ts-ignore
`:""} ? ${x}${v}.value${C} : ${x}${v}${C}`}else return P?v:`${e.helperString(Dc)}(${v})`;else{if(I==="props")return By(v);if(I==="props-aliased")return By(a.__propsAliases[v])}}else{if(I&&I.startsWith("setup"))return`$setup.${v}`;if(I==="props-aliased")return`$props['${a.__propsAliases[v]}']`;if(I)return`$${I}.${v}`}return`_ctx.${v}`},u=s.content,c=u.indexOf("(")>-1||u.indexOf(".")>0;if($c(u)){const v=e.identifiers[u],S=Zb(u),b=mL(u);return!t&&!v&&!S&&!b?(a[s.content]==="setup-const"&&(s.constType=1),s.content=o(u)):v||(b?s.constType=3:s.constType=2),s}let l;const h=r?` ${u} `:`(${u})${t?"=>{}":""}`;try{l=DM(h,{plugins:e.expressionPlugins}).program}catch(v){return e.onError(Ue(44,s.loc,void 0,v.message)),s}const f=[],d=[],g=Object.create(e.identifiers);uL(l,(v,S,b,I,y)=>{if(dL(v,S))return;const T=I&&yL(v);T&&!y?(rE(S)&&S.shorthand&&(v.prefix=`${v.name}: `),v.name=o(v.name,S,v),f.push(v)):(!(T&&y)&&!c&&(v.isConstant=!0),f.push(v))},!0,d,g);const p=[];f.sort((v,S)=>v.start-S.start),f.forEach((v,S)=>{const b=v.start-1,I=v.end-1,y=f[S-1],T=u.slice(y?y.end-1:0,b);(T.length||v.prefix)&&p.push(T+(v.prefix||""));const P=u.slice(b,I);p.push(oe(v.name,!1,{source:P,start:jc(s.loc.start,P,b),end:jc(s.loc.start,P,I)},v.isConstant?3:0)),S===f.length-1&&I<u.length&&p.push(u.slice(I))});let m;return p.length?m=Ot(p,s.loc):(m=s,m.constType=c?0:3),m.identifiers=Object.keys(g),m}function yL(s){return!(Zb(s.name)||s.name==="require")}function sE(s){return er(s)?s:s.type===4?s.content:s.children.map(sE).join("")}const vL=QS(/^(if|else|else-if)$/,(s,e,t)=>wL(s,e,t,(r,n,i)=>{const a=t.parent.children;let o=a.indexOf(r),u=0;for(;o-->=0;){const c=a[o];c&&c.type===9&&(u+=c.branches.length)}return()=>{if(i)r.codegenNode=av(n,u,t);else{const c=bL(r.codegenNode);c.alternate=av(n,u+r.branches.length-1,t)}}}));function wL(s,e,t,r){if(e.name!=="else"&&(!e.exp||!e.exp.content.trim())){const n=e.exp?e.exp.loc:s.loc;t.onError(Ue(28,e.loc)),e.exp=oe("true",!1,n)}if(t.prefixIdentifiers&&e.exp&&(e.exp=Zt(e.exp,t)),e.name==="if"){const n=iv(s,e),i={type:9,loc:s.loc,branches:[n]};if(t.replaceNode(i),r)return r(i,n,!0)}else{const n=t.parent.children,i=[];let a=n.indexOf(s);for(;a-->=-1;){const o=n[a];if(o&&o.type===3){t.removeNode(o),i.unshift(o);continue}if(o&&o.type===2&&!o.content.trim().length){t.removeNode(o);continue}if(o&&o.type===9){e.name==="else-if"&&o.branches[o.branches.length-1].condition===void 0&&t.onError(Ue(30,s.loc)),t.removeNode();const u=iv(s,e);i.length&&!(t.parent&&t.parent.type===1&&Pa(t.parent.tag,"transition"))&&(u.children=[...i,...u.children]);{const l=u.userKey;l&&o.branches.forEach(({userKey:h})=>{TL(h,l)&&t.onError(Ue(29,u.userKey.loc))})}o.branches.push(u);const c=r&&r(o,u,!1);Sm(u,t),c&&c(),t.currentNode=null}else t.onError(Ue(30,s.loc));break}}}function iv(s,e){const t=s.tagType===3;return{type:10,loc:s.loc,condition:e.name==="else"?void 0:e.exp,children:t&&!$t(s,"for")?s.children:[s],userKey:Di(s,"key"),isTemplateIf:t}}function av(s,e,t){return s.condition?Of(s.condition,ov(s,e,t),Qe(t.helper(Yp),['"v-if"',"true"])):ov(s,e,t)}function ov(s,e,t){const{helper:r}=t,n=Be("key",oe(`${e}`,!1,hr,2)),{children:i}=s,a=i[0];if(i.length!==1||a.type!==1)if(i.length===1&&a.type===11){const u=a.codegenNode;return Gc(u,n,t),u}else{let u=64,c=_s[64];return!s.isTemplateIf&&i.filter(l=>l.type!==3).length===1&&(u|=2048,c+=`, ${_s[2048]}`),Mc(t,r(Cc),Xt([n]),i,u+` /* ${c} */`,void 0,void 0,!0,!1,!1,s.loc)}else{const u=a.codegenNode,c=qM(u);return c.type===13&&KS(c,t),Gc(c,n,t),u}}function TL(s,e){if(!s||s.type!==e.type)return!1;if(s.type===6){if(s.value.content!==e.value.content)return!1}else{const t=s.exp,r=e.exp;if(t.type!==r.type||t.type!==4||t.isStatic!==r.isStatic||t.content!==r.content)return!1}return!0}function bL(s){for(;;)if(s.type===19)if(s.alternate.type===19)s=s.alternate;else return s;else s.type===20&&(s=s.value)}const SL=QS("for",(s,e,t)=>{const{helper:r,removeHelper:n}=t;return EL(s,e,t,i=>{const a=Qe(r(Jp),[i.source]),o=_o(s),u=$t(s,"memo"),c=Di(s,"key"),l=c&&(c.type===6?oe(c.value.content,!0):c.exp),h=c?Be("key",l):null;o&&(u&&(u.exp=Zt(u.exp,t)),h&&c.type!==6&&(h.value=Zt(h.value,t)));const f=i.source.type===4&&i.source.constType>0,d=f?64:c?128:256;return i.codegenNode=Mc(t,r(Cc),void 0,a,d+` /* ${_s[d]} */`,void 0,void 0,!0,!f,!1,s.loc),()=>{let g;const{children:p}=i;o&&s.children.some(S=>{if(S.type===1){const b=Di(S,"key");if(b)return t.onError(Ue(33,b.loc)),!0}});const m=p.length!==1||p[0].type!==1,v=Bf(s)?s:o&&s.children.length===1&&Bf(s.children[0])?s.children[0]:null;if(v?(g=v.codegenNode,o&&h&&Gc(g,h,t)):m?g=Mc(t,r(Cc),h?Xt([h]):void 0,s.children,64+` /* ${_s[64]} */`,void 0,void 0,!0,void 0,!1):(g=p[0].codegenNode,o&&h&&Gc(g,h,t),g.isBlock!==!f&&(g.isBlock?(n(ki),n(Ao(t.inSSR,g.isComponent))):n(xo(t.inSSR,g.isComponent))),g.isBlock=!f,g.isBlock?(r(ki),r(Ao(t.inSSR,g.isComponent))):r(xo(t.inSSR,g.isComponent))),u){const S=Ni($f(i.parseResult,[oe("_cached")]));S.body=HD([Ot(["const _memo = (",u.exp,")"]),Ot(["if (_cached",...l?[" && _cached.key === ",l]:[],` && ${t.helperString(mS)}(_cached, _memo)) return _cached`]),Ot(["const _item = ",g]),oe("_item.memo = _memo"),oe("return _item")]),a.arguments.push(S,oe("_cache"),oe(String(t.cached++)))}else a.arguments.push(Ni($f(i.parseResult),g,!0))}})});function EL(s,e,t,r){if(!e.exp){t.onError(Ue(31,e.loc));return}const n=xm(e.exp,t);if(!n){t.onError(Ue(32,e.loc));return}const{addIdentifiers:i,removeIdentifiers:a,scopes:o}=t,{source:u,value:c,key:l,index:h}=n,f={type:11,loc:e.loc,source:u,valueAlias:c,keyAlias:l,objectIndexAlias:h,parseResult:n,children:_o(s)?s.children:[s]};t.replaceNode(f),o.vFor++,t.prefixIdentifiers&&(c&&i(c),l&&i(l),h&&i(h));const d=r&&r(f);return()=>{o.vFor--,t.prefixIdentifiers&&(c&&a(c),l&&a(l),h&&a(h)),d&&d()}}const IL=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,uv=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,_L=/^\(|\)$/g;function xm(s,e){const t=s.loc,r=s.content,n=r.match(IL);if(!n)return;const[,i,a]=n,o={source:_u(t,a.trim(),r.indexOf(a,i.length)),value:void 0,key:void 0,index:void 0};e.prefixIdentifiers&&(o.source=Zt(o.source,e));let u=i.trim().replace(_L,"").trim();const c=i.indexOf(u),l=u.match(uv);if(l){u=u.replace(uv,"").trim();const h=l[1].trim();let f;if(h&&(f=r.indexOf(h,c+u.length),o.key=_u(t,h,f),e.prefixIdentifiers&&(o.key=Zt(o.key,e,!0))),l[2]){const d=l[2].trim();d&&(o.index=_u(t,d,r.indexOf(d,o.key?f+h.length:c+u.length)),e.prefixIdentifiers&&(o.index=Zt(o.index,e,!0)))}}return u&&(o.value=_u(t,u,c),e.prefixIdentifiers&&(o.value=Zt(o.value,e,!0))),o}function _u(s,e,t){return oe(e,!1,GS(s,t,e.length))}function $f({value:s,key:e,index:t},r=[]){return xL([s,e,t,...r])}function xL(s){let e=s.length;for(;e--&&!s[e];);return s.slice(0,e+1).map((t,r)=>t||oe("_".repeat(r+1),!1))}const cv=oe("undefined",!1),AL=(s,e)=>{if(s.type===1&&(s.tagType===1||s.tagType===3)){const t=$t(s,"slot");if(t){const r=t.exp;return e.prefixIdentifiers&&r&&e.addIdentifiers(r),e.scopes.vSlot++,()=>{e.prefixIdentifiers&&r&&e.removeIdentifiers(r),e.scopes.vSlot--}}}},PL=(s,e)=>{let t;if(_o(s)&&s.props.some(zS)&&(t=$t(s,"for"))){const r=t.parseResult=xm(t.exp,e);if(r){const{value:n,key:i,index:a}=r,{addIdentifiers:o,removeIdentifiers:u}=e;return n&&o(n),i&&o(i),a&&o(a),()=>{n&&u(n),i&&u(i),a&&u(a)}}}},CL=(s,e,t)=>Ni(s,e,!1,!0,e.length?e[0].loc:t);function kL(s,e,t=CL){e.helper(pS);const{children:r,loc:n}=s,i=[],a=[];let o=e.scopes.vSlot>0||e.scopes.vFor>0;!e.ssr&&e.prefixIdentifiers&&(o=Vt(s,e.identifiers));const u=$t(s,"slot",!0);if(u){const{arg:m,exp:v}=u;m&&!Mt(m)&&(o=!0),i.push(Be(m||oe("default",!0),t(v,r,n)))}let c=!1,l=!1;const h=[],f=new Set;let d=0;for(let m=0;m<r.length;m++){const v=r[m];let S;if(!_o(v)||!(S=$t(v,"slot",!0))){v.type!==3&&h.push(v);continue}if(u){e.onError(Ue(37,S.loc));break}c=!0;const{children:b,loc:I}=v,{arg:y=oe("default",!0),exp:T,loc:P}=S;let E;Mt(y)?E=y?y.content:"default":o=!0;const w=t(T,b,I);let x,C,A;if(x=$t(v,"if"))o=!0,a.push(Of(x.exp,xu(y,w,d++),cv));else if(C=$t(v,/^else(-if)?$/,!0)){let H=m,Y;for(;H--&&(Y=r[H],Y.type===3););if(Y&&_o(Y)&&$t(Y,"if")){r.splice(m,1),m--;let fe=a[a.length-1];for(;fe.alternate.type===19;)fe=fe.alternate;fe.alternate=C.exp?Of(C.exp,xu(y,w,d++),cv):xu(y,w,d++)}else e.onError(Ue(30,C.loc))}else if(A=$t(v,"for")){o=!0;const H=A.parseResult||xm(A.exp,e);H?a.push(Qe(e.helper(Jp),[H.source,Ni($f(H),xu(y,w),!0)])):e.onError(Ue(32,A.loc))}else{if(E){if(f.has(E)){e.onError(Ue(38,P));continue}f.add(E),E==="default"&&(l=!0)}i.push(Be(y,w))}}if(!u){const m=(v,S)=>{const b=t(v,S,n);return Be("default",b)};c?h.length&&h.some(v=>nE(v))&&(l?e.onError(Ue(39,h[0].loc)):i.push(m(void 0,h))):i.push(m(void 0,r))}const g=o?2:Zu(s.children)?3:1;let p=Xt(i.concat(Be("_",oe(g+` /* ${_D[g]} */`,!1))),n);return a.length&&(p=Qe(e.helper(fS),[p,Kl(a)])),{slots:p,hasDynamicSlots:o}}function xu(s,e,t){const r=[Be("name",s),Be("fn",e)];return t!=null&&r.push(Be("key",oe(String(t),!0))),Xt(r)}function Zu(s){for(let e=0;e<s.length;e++){const t=s[e];switch(t.type){case 1:if(t.tagType===2||Zu(t.children))return!0;break;case 9:if(Zu(t.branches))return!0;break;case 10:case 11:if(Zu(t.children))return!0;break}}return!1}function nE(s){return s.type!==2&&s.type!==12?!0:s.type===2?!!s.content.trim():nE(s.content)}const iE=new WeakMap,NL=(s,e)=>function(){if(s=e.currentNode,!(s.type===1&&(s.tagType===0||s.tagType===1)))return;const{tag:r,props:n}=s,i=s.tagType===1;let a=i?OL(s,e):`"${r}"`;const o=rS(a)&&a.callee===Nc;let u,c,l,h=0,f,d,g,p=o||a===Ba||a===Qp||!i&&(r==="svg"||r==="foreignObject");if(n.length>0){const m=aE(s,e,void 0,i,o);u=m.props,h=m.patchFlag,d=m.dynamicPropNames;const v=m.directives;g=v&&v.length?Kl(v.map(S=>RL(S,e))):void 0,m.shouldUseBlock&&(p=!0)}if(s.children.length>0)if(a===kc&&(p=!0,h|=1024,s.children.length>1&&e.onError(Ue(45,{start:s.children[0].loc.start,end:s.children[s.children.length-1].loc.end,source:""}))),i&&a!==Ba&&a!==kc){const{slots:v,hasDynamicSlots:S}=kL(s,e);c=v,S&&(h|=1024)}else if(s.children.length===1&&a!==Ba){const v=s.children[0],S=v.type,b=S===5||S===8;b&&or(v,e)===0&&(h|=1),b||S===2?c=v:c=s.children}else c=s.children;if(h!==0){if(h<0)l=h+` /* ${_s[h]} */`;else{const m=Object.keys(_s).map(Number).filter(v=>v>0&&h&v).map(v=>_s[v]).join(", ");l=h+` /* ${m} */`}d&&d.length&&(f=ML(d))}s.codegenNode=Mc(e,a,u,c,l,f,g,!!p,!1,i,s.loc)};function OL(s,e,t=!1){let{tag:r}=s;const n=Gf(r),i=Di(s,"is");if(i)if(n){const u=i.type===6?i.value&&oe(i.value.content,!0):i.exp;if(u)return Qe(e.helper(Nc),[u])}else i.type===6&&i.value.content.startsWith("vue:")&&(r=i.value.content.slice(4));const a=!n&&$t(s,"is");if(a&&a.exp)return Qe(e.helper(Nc),[a.exp]);const o=MM(r)||e.isBuiltInComponent(r);if(o)return t||e.helper(o),o;{const u=jf(r,e);if(u)return u;const c=r.indexOf(".");if(c>0){const l=jf(r.slice(0,c),e);if(l)return l+r.slice(c)}}return e.selfName&&Wl(Ci(r))===e.selfName?(e.helper(Cf),e.components.add(r+"__self"),Vf(r,"component")):(e.helper(Cf),e.components.add(r),Vf(r,"component"))}function jf(s,e){const t=e.bindingMetadata;if(!t||t.__isScriptSetup===!1)return;const r=Ci(s),n=Wl(r),i=u=>{if(t[s]===u)return s;if(t[r]===u)return r;if(t[n]===u)return n},a=i("setup-const")||i("setup-reactive-const");if(a)return e.inline?a:`$setup[${JSON.stringify(a)}]`;const o=i("setup-let")||i("setup-ref")||i("setup-maybe-ref");if(o)return e.inline?`${e.helperString(Dc)}(${o})`:`$setup[${JSON.stringify(o)}]`}function aE(s,e,t=s.props,r,n,i=!1){const{tag:a,loc:o,children:u}=s;let c=[];const l=[],h=[],f=u.length>0;let d=!1,g=0,p=!1,m=!1,v=!1,S=!1,b=!1,I=!1;const y=[],T=w=>{c.length&&(l.push(Xt(lv(c),o)),c=[]),w&&l.push(w)},P=({key:w,value:x})=>{if(Mt(w)){const C=w.content,A=eS(C);if(A&&(!r||n)&&C.toLowerCase()!=="onclick"&&C!=="onUpdate:modelValue"&&!Uy(C)&&(S=!0),A&&Uy(C)&&(I=!0),x.type===20||(x.type===4||x.type===8)&&or(x,e)>0)return;C==="ref"?p=!0:C==="class"?m=!0:C==="style"?v=!0:C!=="key"&&!y.includes(C)&&y.push(C),r&&(C==="class"||C==="style")&&!y.includes(C)&&y.push(C)}else b=!0};for(let w=0;w<t.length;w++){const x=t[w];if(x.type===6){const{loc:C,name:A,value:H}=x;let Y=!0;if(A==="ref"&&(p=!0,e.scopes.vFor>0&&c.push(Be(oe("ref_for",!0),oe("true"))),H&&e.inline&&e.bindingMetadata[H.content]&&(Y=!1,c.push(Be(oe("ref_key",!0),oe(H.content,!0,H.loc))))),A==="is"&&(Gf(a)||H&&H.content.startsWith("vue:")||!1))continue;c.push(Be(oe(A,!0,GS(C,0,A.length)),oe(H?H.content:"",Y,H?H.loc:C)))}else{const{name:C,arg:A,exp:H,loc:Y}=x,fe=C==="bind",me=C==="on";if(C==="slot"){r||e.onError(Ue(40,Y));continue}if(C==="once"||C==="memo"||C==="is"||fe&&ti(A,"is")&&(Gf(a)||!1)||me&&i)continue;if((fe&&ti(A,"key")||me&&f&&ti(A,"vue:before-update"))&&(d=!0),fe&&ti(A,"ref")&&e.scopes.vFor>0&&c.push(Be(oe("ref_for",!0),oe("true"))),!A&&(fe||me)){b=!0,H?fe?(T(),l.push(H)):T({type:14,loc:Y,callee:e.helper(tm),arguments:r?[H]:[H,"true"]}):e.onError(Ue(fe?34:35,Y));continue}const se=e.directiveTransforms[C];if(se){const{props:Ze,needRuntime:Ht}=se(x,s,e);!i&&Ze.forEach(P),me&&A&&!Mt(A)?T(Xt(Ze,o)):c.push(...Ze),Ht&&(h.push(x),tS(Ht)&&iE.set(x,Ht))}else MD(C)||(h.push(x),f&&(d=!0))}}let E;if(l.length?(T(),l.length>1?E=Qe(e.helper(Oc),l,o):E=l[0]):c.length&&(E=Xt(lv(c),o)),b?g|=16:(m&&!r&&(g|=2),v&&!r&&(g|=4),y.length&&(g|=8),S&&(g|=32)),!d&&(g===0||g===32)&&(p||I||h.length>0)&&(g|=512),!e.inSSR&&E)switch(E.type){case 15:let w=-1,x=-1,C=!1;for(let Y=0;Y<E.properties.length;Y++){const fe=E.properties[Y].key;Mt(fe)?fe.content==="class"?w=Y:fe.content==="style"&&(x=Y):fe.isHandlerKey||(C=!0)}const A=E.properties[w],H=E.properties[x];C?E=Qe(e.helper(bo),[E]):(A&&!Mt(A.value)&&(A.value=Qe(e.helper(Zp),[A.value])),H&&(v||H.value.type===4&&H.value.content.trim()[0]==="["||H.value.type===17)&&(H.value=Qe(e.helper(em),[H.value])));break;case 14:break;default:E=Qe(e.helper(bo),[Qe(e.helper(cu),[E])]);break}return{props:E,directives:h,patchFlag:g,dynamicPropNames:y,shouldUseBlock:d}}function lv(s){const e=new Map,t=[];for(let r=0;r<s.length;r++){const n=s[r];if(n.key.type===8||!n.key.isStatic){t.push(n);continue}const i=n.key.content,a=e.get(i);a?(i==="style"||i==="class"||eS(i))&&DL(a,n):(e.set(i,n),t.push(n))}return t}function DL(s,e){s.value.type===17?s.value.elements.push(e.value):s.value=Kl([s.value,e.value],s.loc)}function RL(s,e){const t=[],r=iE.get(s);if(r)t.push(e.helperString(r));else{const i=jf("v-"+s.name,e);i?t.push(i):(e.helper(cS),e.directives.add(s.name),t.push(Vf(s.name,"directive")))}const{loc:n}=s;if(s.exp&&t.push(s.exp),s.arg&&(s.exp||t.push("void 0"),t.push(s.arg)),Object.keys(s.modifiers).length){s.arg||(s.exp||t.push("void 0"),t.push("void 0"));const i=oe("true",!1,n);t.push(Xt(s.modifiers.map(a=>Be(a,i)),n))}return Kl(t,s.loc)}function ML(s){let e="[";for(let t=0,r=s.length;t<r;t++)e+=JSON.stringify(s[t]),t<r-1&&(e+=", ");return e+"]"}function Gf(s){return s==="component"||s==="Component"}const LL=(s,e)=>{if(Bf(s)){const{children:t,loc:r}=s,{slotName:n,slotProps:i}=FL(s,e),a=[e.prefixIdentifiers?"_ctx.$slots":"$slots",n,"{}","undefined","true"];let o=2;i&&(a[2]=i,o=3),t.length&&(a[3]=Ni([],t,!1,!1,r),o=4),e.scopeId&&!e.slotted&&(o=5),a.splice(o),s.codegenNode=Qe(e.helper(hS),a,r)}};function FL(s,e){let t='"default"',r;const n=[];for(let i=0;i<s.props.length;i++){const a=s.props[i];a.type===6?a.value&&(a.name==="name"?t=JSON.stringify(a.value.content):(a.name=Ci(a.name),n.push(a))):a.name==="bind"&&ti(a.arg,"name")?a.exp&&(t=a.exp):(a.name==="bind"&&a.arg&&Mt(a.arg)&&(a.arg.content=Ci(a.arg.content)),n.push(a))}if(n.length>0){const{props:i,directives:a}=aE(s,e,n,!1,!1);r=i,a.length&&e.onError(Ue(36,a[0].loc))}return{slotName:t,slotProps:r}}const UL=/^\s*([\w$_]+|(async\s*)?\([^)]*?\))\s*=>|^\s*(async\s+)?function(?:\s+[\w$]+)?\s*\(/,oE=(s,e,t,r)=>{const{loc:n,modifiers:i,arg:a}=s;!s.exp&&!i.length&&t.onError(Ue(35,n));let o;if(a.type===4)if(a.isStatic){let h=a.content;h.startsWith("vue:")&&(h=`vnode-${h.slice(4)}`);const f=e.tagType===1||h.startsWith("vnode")||!/[A-Z]/.test(h)?BD(Ci(h)):`on:${h}`;o=oe(f,!0,a.loc)}else o=Ot([`${t.helperString(Nf)}(`,a,")"]);else o=a,o.children.unshift(`${t.helperString(Nf)}(`),o.children.push(")");let u=s.exp;u&&!u.content.trim()&&(u=void 0);let c=t.cacheHandlers&&!u&&!t.inVOnce;if(u){const h=jS(u.content,t),f=!(h||UL.test(u.content)),d=u.content.includes(";");t.prefixIdentifiers&&(f&&t.addIdentifiers("$event"),u=s.exp=Zt(u,t,!1,d),f&&t.removeIdentifiers("$event"),c=t.cacheHandlers&&!t.inVOnce&&!(u.type===4&&u.constType>0)&&!(h&&e.tagType===1)&&!Vt(u,t.identifiers),c&&h&&(u.type===4?u.content=`${u.content} && ${u.content}(...args)`:u.children=[...u.children," && ",...u.children,"(...args)"])),(f||c&&h)&&(u=Ot([`${f?t.isTS?"($event: any)":"$event":`${t.isTS?`
//@ts-ignore
`:""}(...args)`} => ${d?"{":"("}`,u,d?"}":")"]))}let l={props:[Be(o,u||oe("() => {}",!1,n))]};return r&&(l=r(l)),c&&(l.props[0].value=t.cache(l.props[0].value)),l.props.forEach(h=>h.key.isHandlerKey=!0),l},BL=(s,e,t)=>{const{exp:r,modifiers:n,loc:i}=s,a=s.arg;return a.type!==4?(a.children.unshift("("),a.children.push(') || ""')):a.isStatic||(a.content=`${a.content} || ""`),n.includes("camel")&&(a.type===4?a.isStatic?a.content=Ci(a.content):a.content=`${t.helperString(kf)}(${a.content})`:(a.children.unshift(`${t.helperString(kf)}(`),a.children.push(")"))),t.inSSR||(n.includes("prop")&&hv(a,"."),n.includes("attr")&&hv(a,"^")),!r||r.type===4&&!r.content.trim()?(t.onError(Ue(34,i)),{props:[Be(a,oe("",!0,i))]}):{props:[Be(a,r)]}},hv=(s,e)=>{s.type===4?s.isStatic?s.content=e+s.content:s.content=`\`${e}\${${s.content}}\``:(s.children.unshift(`'${e}' + (`),s.children.push(")"))},VL=(s,e)=>{if(s.type===0||s.type===1||s.type===11||s.type===10)return()=>{const t=s.children;let r,n=!1;for(let i=0;i<t.length;i++){const a=t[i];if(Rh(a)){n=!0;for(let o=i+1;o<t.length;o++){const u=t[o];if(Rh(u))r||(r=t[i]=Ot([a],a.loc)),r.children.push(" + ",u),t.splice(o,1),o--;else{r=void 0;break}}}}if(!(!n||t.length===1&&(s.type===0||s.type===1&&s.tagType===0&&!s.props.find(i=>i.type===7&&!e.directiveTransforms[i.name])&&!0)))for(let i=0;i<t.length;i++){const a=t[i];if(Rh(a)||a.type===8){const o=[];(a.type!==2||a.content!==" ")&&o.push(a),!e.ssr&&or(a,e)===0&&o.push(1+` /* ${_s[1]} */`),t[i]={type:12,content:a,loc:a.loc,codegenNode:Qe(e.helper(uS),o)}}}}},fv=new WeakSet,qL=(s,e)=>{if(s.type===1&&$t(s,"once",!0))return fv.has(s)||e.inVOnce?void 0:(fv.add(s),e.inVOnce=!0,e.helper(dS),()=>{e.inVOnce=!1;const t=e.currentNode;t.codegenNode&&(t.codegenNode=e.cache(t.codegenNode,!0))})},uE=(s,e,t)=>{const{exp:r,arg:n}=s;if(!r)return t.onError(Ue(41,s.loc)),Au();const i=r.loc.source,a=r.type===4?r.content:i,o=t.bindingMetadata[i],u=t.inline&&o&&o!=="setup-const";if(!a.trim()||!jS(a,t)&&!u)return t.onError(Ue(42,r.loc)),Au();if(t.prefixIdentifiers&&$c(a)&&t.identifiers[a])return t.onError(Ue(43,r.loc)),Au();const c=n||oe("modelValue",!0),l=n?Mt(n)?`onUpdate:${n.content}`:Ot(['"onUpdate:" + ',n]):"onUpdate:modelValue";let h;const f=t.isTS?"($event: any)":"$event";if(u)if(o==="setup-ref")h=Ot([`${f} => ((`,oe(i,!1,r.loc),").value = $event)"]);else{const g=o==="setup-let"?`${i} = $event`:"null";h=Ot([`${f} => (${t.helperString(Rc)}(${i}) ? (`,oe(i,!1,r.loc),`).value = $event : ${g})`])}else h=Ot([`${f} => ((`,r,") = $event)"]);const d=[Be(c,s.exp),Be(l,h)];if(t.prefixIdentifiers&&!t.inVOnce&&t.cacheHandlers&&!Vt(r,t.identifiers)&&(d[1].value=t.cache(d[1].value)),s.modifiers.length&&e.tagType===1){const g=s.modifiers.map(m=>($c(m)?m:JSON.stringify(m))+": true").join(", "),p=n?Mt(n)?`${n.content}Modifiers`:Ot([n,' + "Modifiers"']):"modelModifiers";d.push(Be(p,oe(`{ ${g} }`,!1,s.loc,2)))}return Au(d)};function Au(s=[]){return{props:s}}const dv=new WeakSet,$L=(s,e)=>{if(s.type===1){const t=$t(s,"memo");return!t||dv.has(s)?void 0:(dv.add(s),()=>{const r=s.codegenNode||e.currentNode.codegenNode;r&&r.type===13&&(s.tagType!==1&&KS(r,e),s.codegenNode=Qe(e.helper(rm),[t.exp,Ni(void 0,r),"_cache",String(e.cached++)]))})}};function jL(s){return[[qL,vL,$L,SL,...s?[PL,gL]:[],LL,NL,AL,VL],{on:oE,bind:BL,model:uE}]}const GL=()=>({props:[]}),cE=Symbol("vModelRadio"),lE=Symbol("vModelCheckbox"),hE=Symbol("vModelText"),fE=Symbol("vModelSelect"),zf=Symbol("vModelDynamic"),dE=Symbol("vOnModifiersGuard"),pE=Symbol("vOnKeysGuard"),mE=Symbol("vShow"),gE=Symbol("Transition"),zL=Symbol("TransitionGroup");gS({[cE]:"vModelRadio",[lE]:"vModelCheckbox",[hE]:"vModelText",[fE]:"vModelSelect",[zf]:"vModelDynamic",[dE]:"withModifiers",[pE]:"withKeys",[mE]:"vShow",[gE]:"Transition",[zL]:"TransitionGroup"});const WL=s=>{s.type===1&&s.props.forEach((e,t)=>{e.type===6&&e.name==="style"&&e.value&&(s.props[t]={type:7,name:"bind",arg:oe("style",!0,e.loc),exp:KL(e.value.content,e.loc),modifiers:[],loc:e.loc})})},KL=(s,e)=>{const t=CD(s);return oe(JSON.stringify(t),!1,e,3)};function _r(s,e){return Ue(s,e,HL)}const HL={[50]:"v-html is missing expression.",[51]:"v-html will override element children.",[52]:"v-text is missing expression.",[53]:"v-text will override element children.",[54]:"v-model can only be used on <input>, <textarea> and <select> elements.",[55]:"v-model argument is not supported on plain elements.",[56]:"v-model cannot be used on file inputs since they are read-only. Use a v-on:change listener instead.",[57]:"Unnecessary value binding used alongside v-model. It will interfere with v-model's behavior.",[58]:"v-show is missing expression.",[59]:"<Transition> expects exactly one child element or component.",[60]:"Tags with side effect (<script> and <style>) are ignored in client component templates."},QL=(s,e,t)=>{const{exp:r,loc:n}=s;return r||t.onError(_r(50,n)),e.children.length&&(t.onError(_r(51,n)),e.children.length=0),{props:[Be(oe("innerHTML",!0,n),r||oe("",!0))]}},YL=(s,e,t)=>{const{exp:r,loc:n}=s;return r||t.onError(_r(52,n)),e.children.length&&(t.onError(_r(53,n)),e.children.length=0),{props:[Be(oe("textContent",!0),r?or(r,t)>0?r:Qe(t.helperString(Xp),[r],n):oe("",!0))]}},JL=(s,e,t)=>{const r=uE(s,e,t);if(!r.props.length||e.tagType===1)return r;s.arg&&t.onError(_r(55,s.arg.loc));function n(){const o=Di(e,"value");o&&t.onError(_r(57,o.loc))}const{tag:i}=e,a=t.isCustomElement(i);if(i==="input"||i==="textarea"||i==="select"||a){let o=hE,u=!1;if(i==="input"||a){const c=Di(e,"type");if(c){if(c.type===7)o=zf;else if(c.value)switch(c.value.content){case"radio":o=cE;break;case"checkbox":o=lE;break;case"file":u=!0,t.onError(_r(56,s.loc));break;default:n();break}}else BM(e)?o=zf:n()}else i==="select"?o=fE:n();u||(r.needRuntime=t.helper(o))}else t.onError(_r(54,s.loc));return r.props=r.props.filter(o=>!(o.key.type===4&&o.key.content==="modelValue")),r},XL=us("passive,once,capture"),ZL=us("stop,prevent,self,ctrl,shift,alt,meta,exact,middle"),e2=us("left,right"),yE=us("onkeyup,onkeydown,onkeypress",!0),t2=(s,e,t,r)=>{const n=[],i=[],a=[];for(let o=0;o<e.length;o++){const u=e[o];XL(u)?a.push(u):e2(u)?Mt(s)?yE(s.content)?n.push(u):i.push(u):(n.push(u),i.push(u)):ZL(u)?i.push(u):n.push(u)}return{keyModifiers:n,nonKeyModifiers:i,eventOptionModifiers:a}},pv=(s,e)=>Mt(s)&&s.content.toLowerCase()==="onclick"?oe(e,!0):s.type!==4?Ot(["(",s,`) === "onClick" ? "${e}" : (`,s,")"]):s,r2=(s,e,t)=>oE(s,e,t,r=>{const{modifiers:n}=s;if(!n.length)return r;let{key:i,value:a}=r.props[0];const{keyModifiers:o,nonKeyModifiers:u,eventOptionModifiers:c}=t2(i,n,t,s.loc);if(u.includes("right")&&(i=pv(i,"onContextmenu")),u.includes("middle")&&(i=pv(i,"onMouseup")),u.length&&(a=Qe(t.helper(dE),[a,JSON.stringify(u)])),o.length&&(!Mt(i)||yE(i.content))&&(a=Qe(t.helper(pE),[a,JSON.stringify(o)])),c.length){const l=c.map(Wl).join("");i=Mt(i)?oe(`${i.content}${l}`,!0):Ot(["(",i,`) + "${l}"`])}return{props:[Be(i,a)]}}),s2=(s,e,t)=>{const{exp:r,loc:n}=s;return r||t.onError(_r(58,n)),{props:[],needRuntime:t.helper(mE)}},n2=(s,e)=>{if(s.type===1&&s.tagType===1&&e.isBuiltInComponent(s.tag)===gE)return()=>{if(!s.children.length)return;vE(s)&&e.onError(_r(59,{start:s.children[0].loc.start,end:s.children[s.children.length-1].loc.end,source:""}));const r=s.children[0];if(r.type===1)for(const n of r.props)n.type===7&&n.name==="show"&&s.props.push({type:6,name:"persisted",value:void 0,loc:s.loc})}};function vE(s){const e=s.children=s.children.filter(r=>r.type!==3&&!(r.type===2&&!r.content.trim())),t=e[0];return e.length!==1||t.type===11||t.type===9&&t.branches.some(vE)}const i2=[WL,n2],a2={cloak:GL,html:QL,text:YL,model:JL,on:r2,show:s2};var Ms=typeof Ms!="undefined"?Ms:typeof self!="undefined"?self:typeof window!="undefined"?window:{},br=[],Qt=[],o2=typeof Uint8Array!="undefined"?Uint8Array:Array,Am=!1;function wE(){Am=!0;for(var s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,t=s.length;e<t;++e)br[e]=s[e],Qt[s.charCodeAt(e)]=e;Qt["-".charCodeAt(0)]=62,Qt["_".charCodeAt(0)]=63}function u2(s){Am||wE();var e,t,r,n,i,a,o=s.length;if(o%4>0)throw new Error("Invalid string. Length must be a multiple of 4");i=s[o-2]==="="?2:s[o-1]==="="?1:0,a=new o2(o*3/4-i),r=i>0?o-4:o;var u=0;for(e=0,t=0;e<r;e+=4,t+=3)n=Qt[s.charCodeAt(e)]<<18|Qt[s.charCodeAt(e+1)]<<12|Qt[s.charCodeAt(e+2)]<<6|Qt[s.charCodeAt(e+3)],a[u++]=n>>16&255,a[u++]=n>>8&255,a[u++]=n&255;return i===2?(n=Qt[s.charCodeAt(e)]<<2|Qt[s.charCodeAt(e+1)]>>4,a[u++]=n&255):i===1&&(n=Qt[s.charCodeAt(e)]<<10|Qt[s.charCodeAt(e+1)]<<4|Qt[s.charCodeAt(e+2)]>>2,a[u++]=n>>8&255,a[u++]=n&255),a}function c2(s){return br[s>>18&63]+br[s>>12&63]+br[s>>6&63]+br[s&63]}function l2(s,e,t){for(var r,n=[],i=e;i<t;i+=3)r=(s[i]<<16)+(s[i+1]<<8)+s[i+2],n.push(c2(r));return n.join("")}function mv(s){Am||wE();for(var e,t=s.length,r=t%3,n="",i=[],a=16383,o=0,u=t-r;o<u;o+=a)i.push(l2(s,o,o+a>u?u:o+a));return r===1?(e=s[t-1],n+=br[e>>2],n+=br[e<<4&63],n+="=="):r===2&&(e=(s[t-2]<<8)+s[t-1],n+=br[e>>10],n+=br[e>>4&63],n+=br[e<<2&63],n+="="),i.push(n),i.join("")}function Yl(s,e,t,r,n){var i,a,o=n*8-r-1,u=(1<<o)-1,c=u>>1,l=-7,h=t?n-1:0,f=t?-1:1,d=s[e+h];for(h+=f,i=d&(1<<-l)-1,d>>=-l,l+=o;l>0;i=i*256+s[e+h],h+=f,l-=8);for(a=i&(1<<-l)-1,i>>=-l,l+=r;l>0;a=a*256+s[e+h],h+=f,l-=8);if(i===0)i=1-c;else{if(i===u)return a?NaN:(d?-1:1)*(1/0);a=a+Math.pow(2,r),i=i-c}return(d?-1:1)*a*Math.pow(2,i-r)}function TE(s,e,t,r,n,i){var a,o,u,c=i*8-n-1,l=(1<<c)-1,h=l>>1,f=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:i-1,g=r?1:-1,p=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),a+h>=1?e+=f/u:e+=f*Math.pow(2,1-h),e*u>=2&&(a++,u/=2),a+h>=l?(o=0,a=l):a+h>=1?(o=(e*u-1)*Math.pow(2,n),a=a+h):(o=e*Math.pow(2,h-1)*Math.pow(2,n),a=0));n>=8;s[t+d]=o&255,d+=g,o/=256,n-=8);for(a=a<<n|o,c+=n;c>0;s[t+d]=a&255,d+=g,a/=256,c-=8);s[t+d-g]|=p*128}var h2={}.toString,bE=Array.isArray||function(s){return h2.call(s)=="[object Array]"};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */var f2=50;R.TYPED_ARRAY_SUPPORT=Ms.TYPED_ARRAY_SUPPORT!==void 0?Ms.TYPED_ARRAY_SUPPORT:!0;function Wf(){return R.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function jr(s,e){if(Wf()<e)throw new RangeError("Invalid typed array length");return R.TYPED_ARRAY_SUPPORT?(s=new Uint8Array(e),s.__proto__=R.prototype):(s===null&&(s=new R(e)),s.length=e),s}function R(s,e,t){if(!R.TYPED_ARRAY_SUPPORT&&!(this instanceof R))return new R(s,e,t);if(typeof s=="number"){if(typeof e=="string")throw new Error("If encoding is specified then the first argument must be a string");return Pm(this,s)}return SE(this,s,e,t)}R.poolSize=8192;R._augment=function(s){return s.__proto__=R.prototype,s};function SE(s,e,t,r){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer!="undefined"&&e instanceof ArrayBuffer?m2(s,e,t,r):typeof e=="string"?p2(s,e,t):g2(s,e)}R.from=function(s,e,t){return SE(null,s,e,t)};R.TYPED_ARRAY_SUPPORT&&(R.prototype.__proto__=Uint8Array.prototype,R.__proto__=Uint8Array);function EE(s){if(typeof s!="number")throw new TypeError('"size" argument must be a number');if(s<0)throw new RangeError('"size" argument must not be negative')}function d2(s,e,t,r){return EE(e),e<=0?jr(s,e):t!==void 0?typeof r=="string"?jr(s,e).fill(t,r):jr(s,e).fill(t):jr(s,e)}R.alloc=function(s,e,t){return d2(null,s,e,t)};function Pm(s,e){if(EE(e),s=jr(s,e<0?0:Cm(e)|0),!R.TYPED_ARRAY_SUPPORT)for(var t=0;t<e;++t)s[t]=0;return s}R.allocUnsafe=function(s){return Pm(null,s)};R.allocUnsafeSlow=function(s){return Pm(null,s)};function p2(s,e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!R.isEncoding(t))throw new TypeError('"encoding" must be a valid string encoding');var r=IE(e,t)|0;s=jr(s,r);var n=s.write(e,t);return n!==r&&(s=s.slice(0,n)),s}function Kf(s,e){var t=e.length<0?0:Cm(e.length)|0;s=jr(s,t);for(var r=0;r<t;r+=1)s[r]=e[r]&255;return s}function m2(s,e,t,r){if(e.byteLength,t<0||e.byteLength<t)throw new RangeError("'offset' is out of bounds");if(e.byteLength<t+(r||0))throw new RangeError("'length' is out of bounds");return t===void 0&&r===void 0?e=new Uint8Array(e):r===void 0?e=new Uint8Array(e,t):e=new Uint8Array(e,t,r),R.TYPED_ARRAY_SUPPORT?(s=e,s.__proto__=R.prototype):s=Kf(s,e),s}function g2(s,e){if(Rr(e)){var t=Cm(e.length)|0;return s=jr(s,t),s.length===0||e.copy(s,0,0,t),s}if(e){if(typeof ArrayBuffer!="undefined"&&e.buffer instanceof ArrayBuffer||"length"in e)return typeof e.length!="number"||M2(e.length)?jr(s,0):Kf(s,e);if(e.type==="Buffer"&&bE(e.data))return Kf(s,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function Cm(s){if(s>=Wf())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Wf().toString(16)+" bytes");return s|0}R.isBuffer=L2;function Rr(s){return!!(s!=null&&s._isBuffer)}R.compare=function(e,t){if(!Rr(e)||!Rr(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,a=Math.min(r,n);i<a;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0};R.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};R.concat=function(e,t){if(!bE(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return R.alloc(0);var r;if(t===void 0)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=R.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var a=e[r];if(!Rr(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,i),i+=a.length}return n};function IE(s,e){if(Rr(s))return s.length;if(typeof ArrayBuffer!="undefined"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(s)||s instanceof ArrayBuffer))return s.byteLength;typeof s!="string"&&(s=""+s);var t=s.length;if(t===0)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":case void 0:return zc(s).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return NE(s).length;default:if(r)return zc(s).length;e=(""+e).toLowerCase(),r=!0}}R.byteLength=IE;function y2(s,e,t){var r=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(s||(s="utf8");;)switch(s){case"hex":return A2(this,e,t);case"utf8":case"utf-8":return AE(this,e,t);case"ascii":return _2(this,e,t);case"latin1":case"binary":return x2(this,e,t);case"base64":return E2(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P2(this,e,t);default:if(r)throw new TypeError("Unknown encoding: "+s);s=(s+"").toLowerCase(),r=!0}}R.prototype._isBuffer=!0;function hn(s,e,t){var r=s[e];s[e]=s[t],s[t]=r}R.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)hn(this,t,t+1);return this};R.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)hn(this,t,t+3),hn(this,t+1,t+2);return this};R.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)hn(this,t,t+7),hn(this,t+1,t+6),hn(this,t+2,t+5),hn(this,t+3,t+4);return this};R.prototype.toString=function(){var e=this.length|0;return e===0?"":arguments.length===0?AE(this,0,e):y2.apply(this,arguments)};R.prototype.equals=function(e){if(!Rr(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:R.compare(this,e)===0};R.prototype.inspect=function(){var e="",t=f2;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"};R.prototype.compare=function(e,t,r,n,i){if(!Rr(e))throw new TypeError("Argument must be a Buffer");if(t===void 0&&(t=0),r===void 0&&(r=e?e.length:0),n===void 0&&(n=0),i===void 0&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;for(var a=i-n,o=r-t,u=Math.min(a,o),c=this.slice(n,i),l=e.slice(t,r),h=0;h<u;++h)if(c[h]!==l[h]){a=c[h],o=l[h];break}return a<o?-1:o<a?1:0};function _E(s,e,t,r,n){if(s.length===0)return-1;if(typeof t=="string"?(r=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,isNaN(t)&&(t=n?0:s.length-1),t<0&&(t=s.length+t),t>=s.length){if(n)return-1;t=s.length-1}else if(t<0)if(n)t=0;else return-1;if(typeof e=="string"&&(e=R.from(e,r)),Rr(e))return e.length===0?-1:gv(s,e,t,r,n);if(typeof e=="number")return e=e&255,R.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?n?Uint8Array.prototype.indexOf.call(s,e,t):Uint8Array.prototype.lastIndexOf.call(s,e,t):gv(s,[e],t,r,n);throw new TypeError("val must be string, number or Buffer")}function gv(s,e,t,r,n){var i=1,a=s.length,o=e.length;if(r!==void 0&&(r=String(r).toLowerCase(),r==="ucs2"||r==="ucs-2"||r==="utf16le"||r==="utf-16le")){if(s.length<2||e.length<2)return-1;i=2,a/=2,o/=2,t/=2}function u(d,g){return i===1?d[g]:d.readUInt16BE(g*i)}var c;if(n){var l=-1;for(c=t;c<a;c++)if(u(s,c)===u(e,l===-1?0:c-l)){if(l===-1&&(l=c),c-l+1===o)return l*i}else l!==-1&&(c-=c-l),l=-1}else for(t+o>a&&(t=a-o),c=t;c>=0;c--){for(var h=!0,f=0;f<o;f++)if(u(s,c+f)!==u(e,f)){h=!1;break}if(h)return c}return-1}R.prototype.includes=function(e,t,r){return this.indexOf(e,t,r)!==-1};R.prototype.indexOf=function(e,t,r){return _E(this,e,t,r,!0)};R.prototype.lastIndexOf=function(e,t,r){return _E(this,e,t,r,!1)};function v2(s,e,t,r){t=Number(t)||0;var n=s.length-t;r?(r=Number(r),r>n&&(r=n)):r=n;var i=e.length;if(i%2!==0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var a=0;a<r;++a){var o=parseInt(e.substr(a*2,2),16);if(isNaN(o))return a;s[t+a]=o}return a}function w2(s,e,t,r){return Zl(zc(e,s.length-t),s,t,r)}function xE(s,e,t,r){return Zl(D2(e),s,t,r)}function T2(s,e,t,r){return xE(s,e,t,r)}function b2(s,e,t,r){return Zl(NE(e),s,t,r)}function S2(s,e,t,r){return Zl(R2(e,s.length-t),s,t,r)}R.prototype.write=function(e,t,r,n){if(t===void 0)n="utf8",r=this.length,t=0;else if(r===void 0&&typeof t=="string")n=t,r=this.length,t=0;else if(isFinite(t))t=t|0,isFinite(r)?(r=r|0,n===void 0&&(n="utf8")):(n=r,r=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var i=this.length-t;if((r===void 0||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var a=!1;;)switch(n){case"hex":return v2(this,e,t,r);case"utf8":case"utf-8":return w2(this,e,t,r);case"ascii":return xE(this,e,t,r);case"latin1":case"binary":return T2(this,e,t,r);case"base64":return b2(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S2(this,e,t,r);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}};R.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function E2(s,e,t){return e===0&&t===s.length?mv(s):mv(s.slice(e,t))}function AE(s,e,t){t=Math.min(s.length,t);for(var r=[],n=e;n<t;){var i=s[n],a=null,o=i>239?4:i>223?3:i>191?2:1;if(n+o<=t){var u,c,l,h;switch(o){case 1:i<128&&(a=i);break;case 2:u=s[n+1],(u&192)===128&&(h=(i&31)<<6|u&63,h>127&&(a=h));break;case 3:u=s[n+1],c=s[n+2],(u&192)===128&&(c&192)===128&&(h=(i&15)<<12|(u&63)<<6|c&63,h>2047&&(h<55296||h>57343)&&(a=h));break;case 4:u=s[n+1],c=s[n+2],l=s[n+3],(u&192)===128&&(c&192)===128&&(l&192)===128&&(h=(i&15)<<18|(u&63)<<12|(c&63)<<6|l&63,h>65535&&h<1114112&&(a=h))}}a===null?(a=65533,o=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|a&1023),r.push(a),n+=o}return I2(r)}var yv=4096;function I2(s){var e=s.length;if(e<=yv)return String.fromCharCode.apply(String,s);for(var t="",r=0;r<e;)t+=String.fromCharCode.apply(String,s.slice(r,r+=yv));return t}function _2(s,e,t){var r="";t=Math.min(s.length,t);for(var n=e;n<t;++n)r+=String.fromCharCode(s[n]&127);return r}function x2(s,e,t){var r="";t=Math.min(s.length,t);for(var n=e;n<t;++n)r+=String.fromCharCode(s[n]);return r}function A2(s,e,t){var r=s.length;(!e||e<0)&&(e=0),(!t||t<0||t>r)&&(t=r);for(var n="",i=e;i<t;++i)n+=O2(s[i]);return n}function P2(s,e,t){for(var r=s.slice(e,t),n="",i=0;i<r.length;i+=2)n+=String.fromCharCode(r[i]+r[i+1]*256);return n}R.prototype.slice=function(e,t){var r=this.length;e=~~e,t=t===void 0?r:~~t,e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),t<e&&(t=e);var n;if(R.TYPED_ARRAY_SUPPORT)n=this.subarray(e,t),n.__proto__=R.prototype;else{var i=t-e;n=new R(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+e]}return n};function ht(s,e,t){if(s%1!==0||s<0)throw new RangeError("offset is not uint");if(s+e>t)throw new RangeError("Trying to access beyond buffer length")}R.prototype.readUIntLE=function(e,t,r){e=e|0,t=t|0,r||ht(e,t,this.length);for(var n=this[e],i=1,a=0;++a<t&&(i*=256);)n+=this[e+a]*i;return n};R.prototype.readUIntBE=function(e,t,r){e=e|0,t=t|0,r||ht(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n};R.prototype.readUInt8=function(e,t){return t||ht(e,1,this.length),this[e]};R.prototype.readUInt16LE=function(e,t){return t||ht(e,2,this.length),this[e]|this[e+1]<<8};R.prototype.readUInt16BE=function(e,t){return t||ht(e,2,this.length),this[e]<<8|this[e+1]};R.prototype.readUInt32LE=function(e,t){return t||ht(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};R.prototype.readUInt32BE=function(e,t){return t||ht(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};R.prototype.readIntLE=function(e,t,r){e=e|0,t=t|0,r||ht(e,t,this.length);for(var n=this[e],i=1,a=0;++a<t&&(i*=256);)n+=this[e+a]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n};R.prototype.readIntBE=function(e,t,r){e=e|0,t=t|0,r||ht(e,t,this.length);for(var n=t,i=1,a=this[e+--n];n>0&&(i*=256);)a+=this[e+--n]*i;return i*=128,a>=i&&(a-=Math.pow(2,8*t)),a};R.prototype.readInt8=function(e,t){return t||ht(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};R.prototype.readInt16LE=function(e,t){t||ht(e,2,this.length);var r=this[e]|this[e+1]<<8;return r&32768?r|4294901760:r};R.prototype.readInt16BE=function(e,t){t||ht(e,2,this.length);var r=this[e+1]|this[e]<<8;return r&32768?r|4294901760:r};R.prototype.readInt32LE=function(e,t){return t||ht(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};R.prototype.readInt32BE=function(e,t){return t||ht(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};R.prototype.readFloatLE=function(e,t){return t||ht(e,4,this.length),Yl(this,e,!0,23,4)};R.prototype.readFloatBE=function(e,t){return t||ht(e,4,this.length),Yl(this,e,!1,23,4)};R.prototype.readDoubleLE=function(e,t){return t||ht(e,8,this.length),Yl(this,e,!0,52,8)};R.prototype.readDoubleBE=function(e,t){return t||ht(e,8,this.length),Yl(this,e,!1,52,8)};function Ft(s,e,t,r,n,i){if(!Rr(s))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<i)throw new RangeError('"value" argument is out of bounds');if(t+r>s.length)throw new RangeError("Index out of range")}R.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t=t|0,r=r|0,!n){var i=Math.pow(2,8*r)-1;Ft(this,e,t,r,i,0)}var a=1,o=0;for(this[t]=e&255;++o<r&&(a*=256);)this[t+o]=e/a&255;return t+r};R.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t=t|0,r=r|0,!n){var i=Math.pow(2,8*r)-1;Ft(this,e,t,r,i,0)}var a=r-1,o=1;for(this[t+a]=e&255;--a>=0&&(o*=256);)this[t+a]=e/o&255;return t+r};R.prototype.writeUInt8=function(e,t,r){return e=+e,t=t|0,r||Ft(this,e,t,1,255,0),R.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=e&255,t+1};function Jl(s,e,t,r){e<0&&(e=65535+e+1);for(var n=0,i=Math.min(s.length-t,2);n<i;++n)s[t+n]=(e&255<<8*(r?n:1-n))>>>(r?n:1-n)*8}R.prototype.writeUInt16LE=function(e,t,r){return e=+e,t=t|0,r||Ft(this,e,t,2,65535,0),R.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):Jl(this,e,t,!0),t+2};R.prototype.writeUInt16BE=function(e,t,r){return e=+e,t=t|0,r||Ft(this,e,t,2,65535,0),R.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):Jl(this,e,t,!1),t+2};function Xl(s,e,t,r){e<0&&(e=4294967295+e+1);for(var n=0,i=Math.min(s.length-t,4);n<i;++n)s[t+n]=e>>>(r?n:3-n)*8&255}R.prototype.writeUInt32LE=function(e,t,r){return e=+e,t=t|0,r||Ft(this,e,t,4,4294967295,0),R.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255):Xl(this,e,t,!0),t+4};R.prototype.writeUInt32BE=function(e,t,r){return e=+e,t=t|0,r||Ft(this,e,t,4,4294967295,0),R.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):Xl(this,e,t,!1),t+4};R.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t=t|0,!n){var i=Math.pow(2,8*r-1);Ft(this,e,t,r,i-1,-i)}var a=0,o=1,u=0;for(this[t]=e&255;++a<r&&(o*=256);)e<0&&u===0&&this[t+a-1]!==0&&(u=1),this[t+a]=(e/o>>0)-u&255;return t+r};R.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t=t|0,!n){var i=Math.pow(2,8*r-1);Ft(this,e,t,r,i-1,-i)}var a=r-1,o=1,u=0;for(this[t+a]=e&255;--a>=0&&(o*=256);)e<0&&u===0&&this[t+a+1]!==0&&(u=1),this[t+a]=(e/o>>0)-u&255;return t+r};R.prototype.writeInt8=function(e,t,r){return e=+e,t=t|0,r||Ft(this,e,t,1,127,-128),R.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=e&255,t+1};R.prototype.writeInt16LE=function(e,t,r){return e=+e,t=t|0,r||Ft(this,e,t,2,32767,-32768),R.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):Jl(this,e,t,!0),t+2};R.prototype.writeInt16BE=function(e,t,r){return e=+e,t=t|0,r||Ft(this,e,t,2,32767,-32768),R.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):Jl(this,e,t,!1),t+2};R.prototype.writeInt32LE=function(e,t,r){return e=+e,t=t|0,r||Ft(this,e,t,4,2147483647,-2147483648),R.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):Xl(this,e,t,!0),t+4};R.prototype.writeInt32BE=function(e,t,r){return e=+e,t=t|0,r||Ft(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),R.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):Xl(this,e,t,!1),t+4};function PE(s,e,t,r,n,i){if(t+r>s.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function CE(s,e,t,r,n){return n||PE(s,e,t,4),TE(s,e,t,r,23,4),t+4}R.prototype.writeFloatLE=function(e,t,r){return CE(this,e,t,!0,r)};R.prototype.writeFloatBE=function(e,t,r){return CE(this,e,t,!1,r)};function kE(s,e,t,r,n){return n||PE(s,e,t,8),TE(s,e,t,r,52,8),t+8}R.prototype.writeDoubleLE=function(e,t,r){return kE(this,e,t,!0,r)};R.prototype.writeDoubleBE=function(e,t,r){return kE(this,e,t,!1,r)};R.prototype.copy=function(e,t,r,n){if(r||(r=0),!n&&n!==0&&(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i=n-r,a;if(this===e&&r<t&&t<n)for(a=i-1;a>=0;--a)e[a+t]=this[a+r];else if(i<1e3||!R.TYPED_ARRAY_SUPPORT)for(a=0;a<i;++a)e[a+t]=this[a+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+i),t);return i};R.prototype.fill=function(e,t,r,n){if(typeof e=="string"){if(typeof t=="string"?(n=t,t=0,r=this.length):typeof r=="string"&&(n=r,r=this.length),e.length===1){var i=e.charCodeAt(0);i<256&&(e=i)}if(n!==void 0&&typeof n!="string")throw new TypeError("encoding must be a string");if(typeof n=="string"&&!R.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else typeof e=="number"&&(e=e&255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;t=t>>>0,r=r===void 0?this.length:r>>>0,e||(e=0);var a;if(typeof e=="number")for(a=t;a<r;++a)this[a]=e;else{var o=Rr(e)?e:zc(new R(e,n).toString()),u=o.length;for(a=0;a<r-t;++a)this[a+t]=o[a%u]}return this};var C2=/[^+\/0-9A-Za-z-_]/g;function k2(s){if(s=N2(s).replace(C2,""),s.length<2)return"";for(;s.length%4!==0;)s=s+"=";return s}function N2(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function O2(s){return s<16?"0"+s.toString(16):s.toString(16)}function zc(s,e){e=e||1/0;for(var t,r=s.length,n=null,i=[],a=0;a<r;++a){if(t=s.charCodeAt(a),t>55295&&t<57344){if(!n){if(t>56319){(e-=3)>-1&&i.push(239,191,189);continue}else if(a+1===r){(e-=3)>-1&&i.push(239,191,189);continue}n=t;continue}if(t<56320){(e-=3)>-1&&i.push(239,191,189),n=t;continue}t=(n-55296<<10|t-56320)+65536}else n&&(e-=3)>-1&&i.push(239,191,189);if(n=null,t<128){if((e-=1)<0)break;i.push(t)}else if(t<2048){if((e-=2)<0)break;i.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;i.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;i.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return i}function D2(s){for(var e=[],t=0;t<s.length;++t)e.push(s.charCodeAt(t)&255);return e}function R2(s,e){for(var t,r,n,i=[],a=0;a<s.length&&!((e-=2)<0);++a)t=s.charCodeAt(a),r=t>>8,n=t%256,i.push(n),i.push(r);return i}function NE(s){return u2(k2(s))}function Zl(s,e,t,r){for(var n=0;n<r&&!(n+t>=e.length||n>=s.length);++n)e[n+t]=s[n];return n}function M2(s){return s!==s}function L2(s){return s!=null&&(!!s._isBuffer||OE(s)||F2(s))}function OE(s){return!!s.constructor&&typeof s.constructor.isBuffer=="function"&&s.constructor.isBuffer(s)}function F2(s){return typeof s.readFloatLE=="function"&&typeof s.slice=="function"&&OE(s.slice(0,0))}function DE(s,e){for(var t=0,r=s.length-1;r>=0;r--){var n=s[r];n==="."?s.splice(r,1):n===".."?(s.splice(r,1),t++):t&&(s.splice(r,1),t--)}if(e)for(;t--;t)s.unshift("..");return s}var U2=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,km=function(s){return U2.exec(s).slice(1)};function Wc(){for(var s="",e=!1,t=arguments.length-1;t>=-1&&!e;t--){var r=t>=0?arguments[t]:"/";if(typeof r!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!r)continue;s=r+"/"+s,e=r.charAt(0)==="/"}return s=DE(Dm(s.split("/"),function(n){return!!n}),!e).join("/"),(e?"/":"")+s||"."}function Nm(s){var e=Om(s),t=V2(s,-1)==="/";return s=DE(Dm(s.split("/"),function(r){return!!r}),!e).join("/"),!s&&!e&&(s="."),s&&t&&(s+="/"),(e?"/":"")+s}function Om(s){return s.charAt(0)==="/"}function RE(){var s=Array.prototype.slice.call(arguments,0);return Nm(Dm(s,function(e,t){if(typeof e!="string")throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))}function ME(s,e){s=Wc(s).substr(1),e=Wc(e).substr(1);function t(c){for(var l=0;l<c.length&&c[l]==="";l++);for(var h=c.length-1;h>=0&&c[h]==="";h--);return l>h?[]:c.slice(l,h-l+1)}for(var r=t(s.split("/")),n=t(e.split("/")),i=Math.min(r.length,n.length),a=i,o=0;o<i;o++)if(r[o]!==n[o]){a=o;break}for(var u=[],o=a;o<r.length;o++)u.push("..");return u=u.concat(n.slice(a)),u.join("/")}var LE="/",FE=":";function UE(s){var e=km(s),t=e[0],r=e[1];return!t&&!r?".":(r&&(r=r.substr(0,r.length-1)),t+r)}function BE(s,e){var t=km(s)[2];return e&&t.substr(-1*e.length)===e&&(t=t.substr(0,t.length-e.length)),t}function VE(s){return km(s)[3]}var B2={extname:VE,basename:BE,dirname:UE,sep:LE,delimiter:FE,relative:ME,join:RE,isAbsolute:Om,normalize:Nm,resolve:Wc};function Dm(s,e){if(s.filter)return s.filter(e);for(var t=[],r=0;r<s.length;r++)e(s[r],r,s)&&t.push(s[r]);return t}var V2="ab".substr(-1)==="b"?function(s,e,t){return s.substr(e,t)}:function(s,e,t){return e<0&&(e=s.length+e),s.substr(e,t)},q2=Object.freeze({__proto__:null,resolve:Wc,normalize:Nm,isAbsolute:Om,join:RE,relative:ME,sep:LE,delimiter:FE,dirname:UE,basename:BE,extname:VE,default:B2});/*! https://mths.be/punycode v1.4.1 by @mathias */var Lh=2147483647,$a=36,qE=1,Hf=26,$2=38,j2=700,G2=72,z2=128,W2="-",K2=/[^\x20-\x7E]/,H2=/[\x2E\u3002\uFF0E\uFF61]/g,Q2={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Fh=$a-qE,ri=Math.floor,Uh=String.fromCharCode;function vv(s){throw new RangeError(Q2[s])}function Y2(s,e){for(var t=s.length,r=[];t--;)r[t]=e(s[t]);return r}function J2(s,e){var t=s.split("@"),r="";t.length>1&&(r=t[0]+"@",s=t[1]),s=s.replace(H2,".");var n=s.split("."),i=Y2(n,e).join(".");return r+i}function X2(s){for(var e=[],t=0,r=s.length,n,i;t<r;)n=s.charCodeAt(t++),n>=55296&&n<=56319&&t<r?(i=s.charCodeAt(t++),(i&64512)==56320?e.push(((n&1023)<<10)+(i&1023)+65536):(e.push(n),t--)):e.push(n);return e}function wv(s,e){return s+22+75*(s<26)-((e!=0)<<5)}function Z2(s,e,t){var r=0;for(s=t?ri(s/j2):s>>1,s+=ri(s/e);s>Fh*Hf>>1;r+=$a)s=ri(s/Fh);return ri(r+(Fh+1)*s/(s+$2))}function eF(s){var e,t,r,n,i,a,o,u,c,l,h,f=[],d,g,p,m;for(s=X2(s),d=s.length,e=z2,t=0,i=G2,a=0;a<d;++a)h=s[a],h<128&&f.push(Uh(h));for(r=n=f.length,n&&f.push(W2);r<d;){for(o=Lh,a=0;a<d;++a)h=s[a],h>=e&&h<o&&(o=h);for(g=r+1,o-e>ri((Lh-t)/g)&&vv("overflow"),t+=(o-e)*g,e=o,a=0;a<d;++a)if(h=s[a],h<e&&++t>Lh&&vv("overflow"),h==e){for(u=t,c=$a;l=c<=i?qE:c>=i+Hf?Hf:c-i,!(u<l);c+=$a)m=u-l,p=$a-l,f.push(Uh(wv(l+m%p,0))),u=ri(m/p);f.push(Uh(wv(u,0))),i=Z2(t,g,r==n),t=0,++r}++t,++e}return f.join("")}function tF(s){return J2(s,function(e){return K2.test(e)?"xn--"+eF(e):e})}function $E(){throw new Error("setTimeout has not been defined")}function jE(){throw new Error("clearTimeout has not been defined")}var ys=$E,vs=jE;typeof Ms.setTimeout=="function"&&(ys=setTimeout);typeof Ms.clearTimeout=="function"&&(vs=clearTimeout);function GE(s){if(ys===setTimeout)return setTimeout(s,0);if((ys===$E||!ys)&&setTimeout)return ys=setTimeout,setTimeout(s,0);try{return ys(s,0)}catch{try{return ys.call(null,s,0)}catch{return ys.call(this,s,0)}}}function rF(s){if(vs===clearTimeout)return clearTimeout(s);if((vs===jE||!vs)&&clearTimeout)return vs=clearTimeout,clearTimeout(s);try{return vs(s)}catch{try{return vs.call(null,s)}catch{return vs.call(this,s)}}}var Gr=[],fi=!1,fn,ec=-1;function sF(){!fi||!fn||(fi=!1,fn.length?Gr=fn.concat(Gr):ec=-1,Gr.length&&zE())}function zE(){if(!fi){var s=GE(sF);fi=!0;for(var e=Gr.length;e;){for(fn=Gr,Gr=[];++ec<e;)fn&&fn[ec].run();ec=-1,e=Gr.length}fn=null,fi=!1,rF(s)}}function nF(s){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];Gr.push(new WE(s,e)),Gr.length===1&&!fi&&GE(zE)}function WE(s,e){this.fun=s,this.array=e}WE.prototype.run=function(){this.fun.apply(null,this.array)};var iF="browser",aF="browser",oF=!0,uF={},cF=[],lF="",hF={},fF={},dF={};function Bn(){}var pF=Bn,mF=Bn,gF=Bn,yF=Bn,vF=Bn,wF=Bn,TF=Bn;function bF(s){throw new Error("process.binding is not supported")}function SF(){return"/"}function EF(s){throw new Error("process.chdir is not supported")}function IF(){return 0}var Hn=Ms.performance||{},_F=Hn.now||Hn.mozNow||Hn.msNow||Hn.oNow||Hn.webkitNow||function(){return new Date().getTime()};function xF(s){var e=_F.call(Hn)*.001,t=Math.floor(e),r=Math.floor(e%1*1e9);return s&&(t=t-s[0],r=r-s[1],r<0&&(t--,r+=1e9)),[t,r]}var AF=new Date;function PF(){var s=new Date,e=s-AF;return e/1e3}var di={nextTick:nF,title:iF,browser:oF,env:uF,argv:cF,version:lF,versions:hF,on:pF,addListener:mF,once:gF,off:yF,removeListener:vF,removeAllListeners:wF,emit:TF,binding:bF,cwd:SF,chdir:EF,umask:IF,hrtime:xF,platform:aF,release:fF,config:dF,uptime:PF},Qf;typeof Object.create=="function"?Qf=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:Qf=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e};var KE=Qf,CF=/%[sdj%]/g;function eh(s){if(!Gs(s)){for(var e=[],t=0;t<arguments.length;t++)e.push(Cr(arguments[t]));return e.join(" ")}for(var t=1,r=arguments,n=r.length,i=String(s).replace(CF,function(o){if(o==="%%")return"%";if(t>=n)return o;switch(o){case"%s":return String(r[t++]);case"%d":return Number(r[t++]);case"%j":try{return JSON.stringify(r[t++])}catch{return"[Circular]"}default:return o}}),a=r[t];t<n;a=r[++t])zr(a)||!cs(a)?i+=" "+a:i+=" "+Cr(a);return i}function Rm(s,e){if(xr(Ms.process))return function(){return Rm(s,e).apply(this,arguments)};if(di.noDeprecation===!0)return s;var t=!1;function r(){if(!t){if(di.throwDeprecation)throw new Error(e);di.traceDeprecation?console.trace(e):console.error(e),t=!0}return s.apply(this,arguments)}return r}var Pu={},Bh;function HE(s){if(xr(Bh)&&(Bh=di.env.NODE_DEBUG||""),s=s.toUpperCase(),!Pu[s])if(new RegExp("\\b"+s+"\\b","i").test(Bh)){var e=0;Pu[s]=function(){var t=eh.apply(null,arguments);console.error("%s %d: %s",s,e,t)}}else Pu[s]=function(){};return Pu[s]}function Cr(s,e){var t={seen:[],stylize:NF};return arguments.length>=3&&(t.depth=arguments[2]),arguments.length>=4&&(t.colors=arguments[3]),th(e)?t.showHidden=e:e&&Bm(t,e),xr(t.showHidden)&&(t.showHidden=!1),xr(t.depth)&&(t.depth=2),xr(t.colors)&&(t.colors=!1),xr(t.customInspect)&&(t.customInspect=!0),t.colors&&(t.stylize=kF),Kc(t,s,t.depth)}Cr.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};Cr.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function kF(s,e){var t=Cr.styles[e];return t?"\x1B["+Cr.colors[t][0]+"m"+s+"\x1B["+Cr.colors[t][1]+"m":s}function NF(s,e){return s}function OF(s){var e={};return s.forEach(function(t,r){e[t]=!0}),e}function Kc(s,e,t){if(s.customInspect&&e&&za(e.inspect)&&e.inspect!==Cr&&!(e.constructor&&e.constructor.prototype===e)){var r=e.inspect(t,s);return Gs(r)||(r=Kc(s,r,t)),r}var n=DF(s,e);if(n)return n;var i=Object.keys(e),a=OF(i);if(s.showHidden&&(i=Object.getOwnPropertyNames(e)),Ga(e)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return Vh(e);if(i.length===0){if(za(e)){var o=e.name?": "+e.name:"";return s.stylize("[Function"+o+"]","special")}if(ja(e))return s.stylize(RegExp.prototype.toString.call(e),"regexp");if(Hc(e))return s.stylize(Date.prototype.toString.call(e),"date");if(Ga(e))return Vh(e)}var u="",c=!1,l=["{","}"];if(Mm(e)&&(c=!0,l=["[","]"]),za(e)){var h=e.name?": "+e.name:"";u=" [Function"+h+"]"}if(ja(e)&&(u=" "+RegExp.prototype.toString.call(e)),Hc(e)&&(u=" "+Date.prototype.toUTCString.call(e)),Ga(e)&&(u=" "+Vh(e)),i.length===0&&(!c||e.length==0))return l[0]+u+l[1];if(t<0)return ja(e)?s.stylize(RegExp.prototype.toString.call(e),"regexp"):s.stylize("[Object]","special");s.seen.push(e);var f;return c?f=RF(s,e,t,a,i):f=i.map(function(d){return Yf(s,e,t,a,d,c)}),s.seen.pop(),MF(f,u,l)}function DF(s,e){if(xr(e))return s.stylize("undefined","undefined");if(Gs(e)){var t="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return s.stylize(t,"string")}if(Fm(e))return s.stylize(""+e,"number");if(th(e))return s.stylize(""+e,"boolean");if(zr(e))return s.stylize("null","null")}function Vh(s){return"["+Error.prototype.toString.call(s)+"]"}function RF(s,e,t,r,n){for(var i=[],a=0,o=e.length;a<o;++a)ZE(e,String(a))?i.push(Yf(s,e,t,r,String(a),!0)):i.push("");return n.forEach(function(u){u.match(/^\d+$/)||i.push(Yf(s,e,t,r,u,!0))}),i}function Yf(s,e,t,r,n,i){var a,o,u;if(u=Object.getOwnPropertyDescriptor(e,n)||{value:e[n]},u.get?u.set?o=s.stylize("[Getter/Setter]","special"):o=s.stylize("[Getter]","special"):u.set&&(o=s.stylize("[Setter]","special")),ZE(r,n)||(a="["+n+"]"),o||(s.seen.indexOf(u.value)<0?(zr(t)?o=Kc(s,u.value,null):o=Kc(s,u.value,t-1),o.indexOf(`
`)>-1&&(i?o=o.split(`
`).map(function(c){return"  "+c}).join(`
`).substr(2):o=`
`+o.split(`
`).map(function(c){return"   "+c}).join(`
`))):o=s.stylize("[Circular]","special")),xr(a)){if(i&&n.match(/^\d+$/))return o;a=JSON.stringify(""+n),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=s.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=s.stylize(a,"string"))}return a+": "+o}function MF(s,e,t){var r=s.reduce(function(n,i){return i.indexOf(`
`)>=0,n+i.replace(/\u001b\[\d\d?m/g,"").length+1},0);return r>60?t[0]+(e===""?"":e+`
 `)+" "+s.join(`,
  `)+" "+t[1]:t[0]+e+" "+s.join(", ")+" "+t[1]}function Mm(s){return Array.isArray(s)}function th(s){return typeof s=="boolean"}function zr(s){return s===null}function Lm(s){return s==null}function Fm(s){return typeof s=="number"}function Gs(s){return typeof s=="string"}function QE(s){return typeof s=="symbol"}function xr(s){return s===void 0}function ja(s){return cs(s)&&Um(s)==="[object RegExp]"}function cs(s){return typeof s=="object"&&s!==null}function Hc(s){return cs(s)&&Um(s)==="[object Date]"}function Ga(s){return cs(s)&&(Um(s)==="[object Error]"||s instanceof Error)}function za(s){return typeof s=="function"}function YE(s){return s===null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||typeof s=="symbol"||typeof s=="undefined"}function JE(s){return R.isBuffer(s)}function Um(s){return Object.prototype.toString.call(s)}function qh(s){return s<10?"0"+s.toString(10):s.toString(10)}var LF=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function FF(){var s=new Date,e=[qh(s.getHours()),qh(s.getMinutes()),qh(s.getSeconds())].join(":");return[s.getDate(),LF[s.getMonth()],e].join(" ")}function XE(){console.log("%s - %s",FF(),eh.apply(null,arguments))}function Bm(s,e){if(!e||!cs(e))return s;for(var t=Object.keys(e),r=t.length;r--;)s[t[r]]=e[t[r]];return s}function ZE(s,e){return Object.prototype.hasOwnProperty.call(s,e)}var UF={inherits:KE,_extend:Bm,log:XE,isBuffer:JE,isPrimitive:YE,isFunction:za,isError:Ga,isDate:Hc,isObject:cs,isRegExp:ja,isUndefined:xr,isSymbol:QE,isString:Gs,isNumber:Fm,isNullOrUndefined:Lm,isNull:zr,isBoolean:th,isArray:Mm,inspect:Cr,deprecate:Rm,format:eh,debuglog:HE},BF=Object.freeze({__proto__:null,format:eh,deprecate:Rm,debuglog:HE,inspect:Cr,isArray:Mm,isBoolean:th,isNull:zr,isNullOrUndefined:Lm,isNumber:Fm,isString:Gs,isSymbol:QE,isUndefined:xr,isRegExp:ja,isObject:cs,isDate:Hc,isError:Ga,isFunction:za,isPrimitive:YE,isBuffer:JE,log:XE,inherits:KE,_extend:Bm,default:UF});function VF(s,e){return Object.prototype.hasOwnProperty.call(s,e)}var eI=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function ya(s){switch(typeof s){case"string":return s;case"boolean":return s?"true":"false";case"number":return isFinite(s)?s:"";default:return""}}function qF(s,e,t,r){return e=e||"&",t=t||"=",s===null&&(s=void 0),typeof s=="object"?Tv($F(s),function(n){var i=encodeURIComponent(ya(n))+t;return eI(s[n])?Tv(s[n],function(a){return i+encodeURIComponent(ya(a))}).join(e):i+encodeURIComponent(ya(s[n]))}).join(e):r?encodeURIComponent(ya(r))+t+encodeURIComponent(ya(s)):""}function Tv(s,e){if(s.map)return s.map(e);for(var t=[],r=0;r<s.length;r++)t.push(e(s[r],r));return t}var $F=Object.keys||function(s){var e=[];for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&e.push(t);return e};function bv(s,e,t,r){e=e||"&",t=t||"=";var n={};if(typeof s!="string"||s.length===0)return n;var i=/\+/g;s=s.split(e);var a=1e3;r&&typeof r.maxKeys=="number"&&(a=r.maxKeys);var o=s.length;a>0&&o>a&&(o=a);for(var u=0;u<o;++u){var c=s[u].replace(i,"%20"),l=c.indexOf(t),h,f,d,g;l>=0?(h=c.substr(0,l),f=c.substr(l+1)):(h=c,f=""),d=decodeURIComponent(h),g=decodeURIComponent(f),VF(n,d)?eI(n[d])?n[d].push(g):n[d]=[n[d],g]:n[d]=g}return n}var jF={parse:hu,resolve:sI,resolveObject:nI,format:rI,Url:cr};function cr(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var GF=/^([a-z0-9.+-]+:)/i,zF=/:[0-9]*$/,WF=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,KF=["<",">",'"',"`"," ","\r",`
`,"	"],HF=["{","}","|","\\","^","`"].concat(KF),Jf=["'"].concat(HF),Sv=["%","/","?",";","#"].concat(Jf),Ev=["/","?","#"],QF=255,Iv=/^[+a-z0-9A-Z_-]{0,63}$/,YF=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,JF={javascript:!0,"javascript:":!0},Xf={javascript:!0,"javascript:":!0},pi={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function hu(s,e,t){if(s&&cs(s)&&s instanceof cr)return s;var r=new cr;return r.parse(s,e,t),r}cr.prototype.parse=function(s,e,t){return tI(this,s,e,t)};function tI(s,e,t,r){if(!Gs(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e.indexOf("?"),i=n!==-1&&n<e.indexOf("#")?"?":"#",a=e.split(i),o=/\\/g;a[0]=a[0].replace(o,"/"),e=a.join(i);var u=e;if(u=u.trim(),!r&&e.split("#").length===1){var c=WF.exec(u);if(c)return s.path=u,s.href=u,s.pathname=c[1],c[2]?(s.search=c[2],t?s.query=bv(s.search.substr(1)):s.query=s.search.substr(1)):t&&(s.search="",s.query={}),s}var l=GF.exec(u);if(l){l=l[0];var h=l.toLowerCase();s.protocol=h,u=u.substr(l.length)}if(r||l||u.match(/^\/\/[^@\/]+@[^@\/]+/)){var f=u.substr(0,2)==="//";f&&!(l&&Xf[l])&&(u=u.substr(2),s.slashes=!0)}var d,g,p,m;if(!Xf[l]&&(f||l&&!pi[l])){var v=-1;for(d=0;d<Ev.length;d++)g=u.indexOf(Ev[d]),g!==-1&&(v===-1||g<v)&&(v=g);var S,b;for(v===-1?b=u.lastIndexOf("@"):b=u.lastIndexOf("@",v),b!==-1&&(S=u.slice(0,b),u=u.slice(b+1),s.auth=decodeURIComponent(S)),v=-1,d=0;d<Sv.length;d++)g=u.indexOf(Sv[d]),g!==-1&&(v===-1||g<v)&&(v=g);v===-1&&(v=u.length),s.host=u.slice(0,v),u=u.slice(v),iI(s),s.hostname=s.hostname||"";var I=s.hostname[0]==="["&&s.hostname[s.hostname.length-1]==="]";if(!I){var y=s.hostname.split(/\./);for(d=0,p=y.length;d<p;d++){var T=y[d];if(!!T&&!T.match(Iv)){for(var P="",E=0,w=T.length;E<w;E++)T.charCodeAt(E)>127?P+="x":P+=T[E];if(!P.match(Iv)){var x=y.slice(0,d),C=y.slice(d+1),A=T.match(YF);A&&(x.push(A[1]),C.unshift(A[2])),C.length&&(u="/"+C.join(".")+u),s.hostname=x.join(".");break}}}}s.hostname.length>QF?s.hostname="":s.hostname=s.hostname.toLowerCase(),I||(s.hostname=tF(s.hostname)),m=s.port?":"+s.port:"";var H=s.hostname||"";s.host=H+m,s.href+=s.host,I&&(s.hostname=s.hostname.substr(1,s.hostname.length-2),u[0]!=="/"&&(u="/"+u))}if(!JF[h])for(d=0,p=Jf.length;d<p;d++){var Y=Jf[d];if(u.indexOf(Y)!==-1){var fe=encodeURIComponent(Y);fe===Y&&(fe=escape(Y)),u=u.split(Y).join(fe)}}var me=u.indexOf("#");me!==-1&&(s.hash=u.substr(me),u=u.slice(0,me));var se=u.indexOf("?");if(se!==-1?(s.search=u.substr(se),s.query=u.substr(se+1),t&&(s.query=bv(s.query)),u=u.slice(0,se)):t&&(s.search="",s.query={}),u&&(s.pathname=u),pi[h]&&s.hostname&&!s.pathname&&(s.pathname="/"),s.pathname||s.search){m=s.pathname||"";var Ze=s.search||"";s.path=m+Ze}return s.href=Vm(s),s}function rI(s){return Gs(s)&&(s=tI({},s)),Vm(s)}function Vm(s){var e=s.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=s.protocol||"",r=s.pathname||"",n=s.hash||"",i=!1,a="";s.host?i=e+s.host:s.hostname&&(i=e+(s.hostname.indexOf(":")===-1?s.hostname:"["+this.hostname+"]"),s.port&&(i+=":"+s.port)),s.query&&cs(s.query)&&Object.keys(s.query).length&&(a=qF(s.query));var o=s.search||a&&"?"+a||"";return t&&t.substr(-1)!==":"&&(t+=":"),s.slashes||(!t||pi[t])&&i!==!1?(i="//"+(i||""),r&&r.charAt(0)!=="/"&&(r="/"+r)):i||(i=""),n&&n.charAt(0)!=="#"&&(n="#"+n),o&&o.charAt(0)!=="?"&&(o="?"+o),r=r.replace(/[?#]/g,function(u){return encodeURIComponent(u)}),o=o.replace("#","%23"),t+i+r+o+n}cr.prototype.format=function(){return Vm(this)};function sI(s,e){return hu(s,!1,!0).resolve(e)}cr.prototype.resolve=function(s){return this.resolveObject(hu(s,!1,!0)).format()};function nI(s,e){return s?hu(s,!1,!0).resolveObject(e):e}cr.prototype.resolveObject=function(s){if(Gs(s)){var e=new cr;e.parse(s,!1,!0),s=e}for(var t=new cr,r=Object.keys(this),n=0;n<r.length;n++){var i=r[n];t[i]=this[i]}if(t.hash=s.hash,s.href==="")return t.href=t.format(),t;if(s.slashes&&!s.protocol){for(var a=Object.keys(s),o=0;o<a.length;o++){var u=a[o];u!=="protocol"&&(t[u]=s[u])}return pi[t.protocol]&&t.hostname&&!t.pathname&&(t.path=t.pathname="/"),t.href=t.format(),t}var c;if(s.protocol&&s.protocol!==t.protocol){if(!pi[s.protocol]){for(var l=Object.keys(s),h=0;h<l.length;h++){var f=l[h];t[f]=s[f]}return t.href=t.format(),t}if(t.protocol=s.protocol,!s.host&&!Xf[s.protocol]){for(c=(s.pathname||"").split("/");c.length&&!(s.host=c.shift()););s.host||(s.host=""),s.hostname||(s.hostname=""),c[0]!==""&&c.unshift(""),c.length<2&&c.unshift(""),t.pathname=c.join("/")}else t.pathname=s.pathname;if(t.search=s.search,t.query=s.query,t.host=s.host||"",t.auth=s.auth,t.hostname=s.hostname||s.host,t.port=s.port,t.pathname||t.search){var d=t.pathname||"",g=t.search||"";t.path=d+g}return t.slashes=t.slashes||s.slashes,t.href=t.format(),t}var p=t.pathname&&t.pathname.charAt(0)==="/",m=s.host||s.pathname&&s.pathname.charAt(0)==="/",v=m||p||t.host&&s.pathname,S=v,b=t.pathname&&t.pathname.split("/")||[],I=t.protocol&&!pi[t.protocol];c=s.pathname&&s.pathname.split("/")||[],I&&(t.hostname="",t.port=null,t.host&&(b[0]===""?b[0]=t.host:b.unshift(t.host)),t.host="",s.protocol&&(s.hostname=null,s.port=null,s.host&&(c[0]===""?c[0]=s.host:c.unshift(s.host)),s.host=null),v=v&&(c[0]===""||b[0]===""));var y;if(m)t.host=s.host||s.host===""?s.host:t.host,t.hostname=s.hostname||s.hostname===""?s.hostname:t.hostname,t.search=s.search,t.query=s.query,b=c;else if(c.length)b||(b=[]),b.pop(),b=b.concat(c),t.search=s.search,t.query=s.query;else if(!Lm(s.search))return I&&(t.hostname=t.host=b.shift(),y=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1,y&&(t.auth=y.shift(),t.host=t.hostname=y.shift())),t.search=s.search,t.query=s.query,(!zr(t.pathname)||!zr(t.search))&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=t.format(),t;if(!b.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var T=b.slice(-1)[0],P=(t.host||s.host||b.length>1)&&(T==="."||T==="..")||T==="",E=0,w=b.length;w>=0;w--)T=b[w],T==="."?b.splice(w,1):T===".."?(b.splice(w,1),E++):E&&(b.splice(w,1),E--);if(!v&&!S)for(;E--;E)b.unshift("..");v&&b[0]!==""&&(!b[0]||b[0].charAt(0)!=="/")&&b.unshift(""),P&&b.join("/").substr(-1)!=="/"&&b.push("");var x=b[0]===""||b[0]&&b[0].charAt(0)==="/";return I&&(t.hostname=t.host=x?"":b.length?b.shift():"",y=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1,y&&(t.auth=y.shift(),t.host=t.hostname=y.shift())),v=v||t.host&&b.length,v&&!x&&b.unshift(""),b.length?t.pathname=b.join("/"):(t.pathname=null,t.path=null),(!zr(t.pathname)||!zr(t.search))&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=s.auth||t.auth,t.slashes=t.slashes||s.slashes,t.href=t.format(),t};cr.prototype.parseHost=function(){return iI(this)};function iI(s){var e=s.host,t=zF.exec(e);t&&(t=t[0],t!==":"&&(s.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(s.hostname=e)}var XF=Object.freeze({__proto__:null,parse:hu,resolve:sI,resolveObject:nI,format:rI,default:jF,Url:cr});const ZF=Symbol("ssrInterpolate"),eU=Symbol("ssrRenderVNode"),tU=Symbol("ssrRenderComponent"),rU=Symbol("ssrRenderSlot"),sU=Symbol("ssrRenderSlotInner"),nU=Symbol("ssrRenderClass"),iU=Symbol("ssrRenderStyle"),aU=Symbol("ssrRenderAttrs"),oU=Symbol("ssrRenderAttr"),uU=Symbol("ssrRenderDynamicAttr"),cU=Symbol("ssrRenderList"),lU=Symbol("ssrIncludeBooleanAttr"),hU=Symbol("ssrLooseEqual"),fU=Symbol("ssrLooseContain"),dU=Symbol("ssrRenderDynamicModel"),pU=Symbol("ssrGetDynamicModelProps"),mU=Symbol("ssrRenderTeleport"),gU=Symbol("ssrRenderSuspense"),yU=Symbol("ssrGetDirectiveProps"),vU={[ZF]:"ssrInterpolate",[eU]:"ssrRenderVNode",[tU]:"ssrRenderComponent",[rU]:"ssrRenderSlot",[sU]:"ssrRenderSlotInner",[nU]:"ssrRenderClass",[iU]:"ssrRenderStyle",[aU]:"ssrRenderAttrs",[oU]:"ssrRenderAttr",[uU]:"ssrRenderDynamicAttr",[cU]:"ssrRenderList",[lU]:"ssrIncludeBooleanAttr",[hU]:"ssrLooseEqual",[fU]:"ssrLooseContain",[dU]:"ssrRenderDynamicModel",[pU]:"ssrGetDynamicModelProps",[mU]:"ssrRenderTeleport",[gU]:"ssrRenderSuspense",[yU]:"ssrGetDirectiveProps"};gS(vU);const[wU,TU]=jL(!0);[...wU,...i2];Object.assign(Object.assign({},TU),a2);var bU={},SU=Object.freeze({__proto__:null,default:bU}),EU=lu(SU),qm=lu(q2),IU=lu(BF);us("once,memo,if,for,else,else-if,slot,text,html,on,bind,model,show,cloak,is");function aI(){return!1}function oI(){throw new Error("tty.ReadStream is not implemented")}function uI(){throw new Error("tty.ReadStream is not implemented")}var _U={isatty:aI,ReadStream:oI,WriteStream:uI},xU=Object.freeze({__proto__:null,isatty:aI,ReadStream:oI,WriteStream:uI,default:_U}),AU=lu(xU);let PU=!("NO_COLOR"in{}||di.argv.includes("--no-color"))&&("FORCE_COLOR"in{}||di.argv.includes("--color")||!1||AU.isatty(1)&&{}.TERM!=="dumb"||"CI"in{}),De=(s,e,t=s)=>r=>{let n=""+r,i=n.indexOf(e,s.length);return~i?s+cI(n,e,t,i)+e:s+n+e},cI=(s,e,t,r)=>{let n=s.substring(0,r)+t,i=s.substring(r+e.length),a=i.indexOf(e);return~a?n+cI(i,e,t,a):n+i},lI=(s=PU)=>({isColorSupported:s,reset:s?e=>`\x1B[0m${e}\x1B[0m`:String,bold:s?De("\x1B[1m","\x1B[22m","\x1B[22m\x1B[1m"):String,dim:s?De("\x1B[2m","\x1B[22m","\x1B[22m\x1B[2m"):String,italic:s?De("\x1B[3m","\x1B[23m"):String,underline:s?De("\x1B[4m","\x1B[24m"):String,inverse:s?De("\x1B[7m","\x1B[27m"):String,hidden:s?De("\x1B[8m","\x1B[28m"):String,strikethrough:s?De("\x1B[9m","\x1B[29m"):String,black:s?De("\x1B[30m","\x1B[39m"):String,red:s?De("\x1B[31m","\x1B[39m"):String,green:s?De("\x1B[32m","\x1B[39m"):String,yellow:s?De("\x1B[33m","\x1B[39m"):String,blue:s?De("\x1B[34m","\x1B[39m"):String,magenta:s?De("\x1B[35m","\x1B[39m"):String,cyan:s?De("\x1B[36m","\x1B[39m"):String,white:s?De("\x1B[37m","\x1B[39m"):String,gray:s?De("\x1B[90m","\x1B[39m"):String,bgBlack:s?De("\x1B[40m","\x1B[49m"):String,bgRed:s?De("\x1B[41m","\x1B[49m"):String,bgGreen:s?De("\x1B[42m","\x1B[49m"):String,bgYellow:s?De("\x1B[43m","\x1B[49m"):String,bgBlue:s?De("\x1B[44m","\x1B[49m"):String,bgMagenta:s?De("\x1B[45m","\x1B[49m"):String,bgCyan:s?De("\x1B[46m","\x1B[49m"):String,bgWhite:s?De("\x1B[47m","\x1B[49m"):String});var tt=lI(),CU=lI;tt.createColors=CU;const $h="'".charCodeAt(0),_v='"'.charCodeAt(0),Cu="\\".charCodeAt(0),xv="/".charCodeAt(0),ku=`
`.charCodeAt(0),va=" ".charCodeAt(0),Nu="\f".charCodeAt(0),Ou="	".charCodeAt(0),Du="\r".charCodeAt(0),kU="[".charCodeAt(0),NU="]".charCodeAt(0),OU="(".charCodeAt(0),DU=")".charCodeAt(0),RU="{".charCodeAt(0),MU="}".charCodeAt(0),LU=";".charCodeAt(0),FU="*".charCodeAt(0),UU=":".charCodeAt(0),BU="@".charCodeAt(0),Ru=/[\t\n\f\r "#'()/;[\\\]{}]/g,Mu=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,VU=/.[\n"'(/\\]/,Av=/[\da-f]/i;var hI=function(e,t={}){let r=e.css.valueOf(),n=t.ignoreErrors,i,a,o,u,c,l,h,f,d,g,p=r.length,m=0,v=[],S=[];function b(){return m}function I(E){throw e.error("Unclosed "+E,m)}function y(){return S.length===0&&m>=p}function T(E){if(S.length)return S.pop();if(m>=p)return;let w=E?E.ignoreUnclosed:!1;switch(i=r.charCodeAt(m),i){case ku:case va:case Ou:case Du:case Nu:{a=m;do a+=1,i=r.charCodeAt(a);while(i===va||i===ku||i===Ou||i===Du||i===Nu);g=["space",r.slice(m,a)],m=a-1;break}case kU:case NU:case RU:case MU:case UU:case LU:case DU:{let x=String.fromCharCode(i);g=[x,x,m];break}case OU:{if(f=v.length?v.pop()[1]:"",d=r.charCodeAt(m+1),f==="url"&&d!==$h&&d!==_v&&d!==va&&d!==ku&&d!==Ou&&d!==Nu&&d!==Du){a=m;do{if(l=!1,a=r.indexOf(")",a+1),a===-1)if(n||w){a=m;break}else I("bracket");for(h=a;r.charCodeAt(h-1)===Cu;)h-=1,l=!l}while(l);g=["brackets",r.slice(m,a+1),m,a],m=a}else a=r.indexOf(")",m+1),u=r.slice(m,a+1),a===-1||VU.test(u)?g=["(","(",m]:(g=["brackets",u,m,a],m=a);break}case $h:case _v:{o=i===$h?"'":'"',a=m;do{if(l=!1,a=r.indexOf(o,a+1),a===-1)if(n||w){a=m+1;break}else I("string");for(h=a;r.charCodeAt(h-1)===Cu;)h-=1,l=!l}while(l);g=["string",r.slice(m,a+1),m,a],m=a;break}case BU:{Ru.lastIndex=m+1,Ru.test(r),Ru.lastIndex===0?a=r.length-1:a=Ru.lastIndex-2,g=["at-word",r.slice(m,a+1),m,a],m=a;break}case Cu:{for(a=m,c=!0;r.charCodeAt(a+1)===Cu;)a+=1,c=!c;if(i=r.charCodeAt(a+1),c&&i!==xv&&i!==va&&i!==ku&&i!==Ou&&i!==Du&&i!==Nu&&(a+=1,Av.test(r.charAt(a)))){for(;Av.test(r.charAt(a+1));)a+=1;r.charCodeAt(a+1)===va&&(a+=1)}g=["word",r.slice(m,a+1),m,a],m=a;break}default:{i===xv&&r.charCodeAt(m+1)===FU?(a=r.indexOf("*/",m+2)+1,a===0&&(n||w?a=r.length:I("comment")),g=["comment",r.slice(m,a+1),m,a],m=a):(Mu.lastIndex=m+1,Mu.test(r),Mu.lastIndex===0?a=r.length-1:a=Mu.lastIndex-2,g=["word",r.slice(m,a+1),m,a],v.push(g),m=a);break}}return m++,g}function P(E){S.push(E)}return{back:P,nextToken:T,endOfFile:y,position:b}};let fI;function qU(s){fI=s}const $U={brackets:tt.cyan,"at-word":tt.cyan,comment:tt.gray,string:tt.green,class:tt.yellow,hash:tt.magenta,call:tt.cyan,"(":tt.cyan,")":tt.cyan,"{":tt.yellow,"}":tt.yellow,"[":tt.yellow,"]":tt.yellow,":":tt.yellow,";":tt.yellow};function jU([s,e],t){if(s==="word"){if(e[0]===".")return"class";if(e[0]==="#")return"hash"}if(!t.endOfFile()){let r=t.nextToken();if(t.back(r),r[0]==="brackets"||r[0]==="(")return"call"}return s}function dI(s){let e=hI(new fI(s),{ignoreErrors:!0}),t="";for(;!e.endOfFile();){let r=e.nextToken(),n=$U[jU(r,e)];n?t+=r[1].split(/\r?\n/).map(i=>n(i)).join(`
`):t+=r[1]}return t}dI.registerInput=qU;var Wa=dI;class Co extends Error{constructor(e,t,r,n,i,a){super(e),this.name="CssSyntaxError",this.reason=e,i&&(this.file=i),n&&(this.source=n),a&&(this.plugin=a),typeof t!="undefined"&&typeof r!="undefined"&&(typeof t=="number"?(this.line=t,this.column=r):(this.line=t.line,this.column=t.column,this.endLine=r.line,this.endColumn=r.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,Co)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",typeof this.line!="undefined"&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(e){if(!this.source)return"";let t=this.source;e==null&&(e=tt.isColorSupported),Wa&&e&&(t=Wa(t));let r=t.split(/\r?\n/),n=Math.max(this.line-3,0),i=Math.min(this.line+2,r.length),a=String(i).length,o,u;if(e){let{bold:c,red:l,gray:h}=tt.createColors(!0);o=f=>c(l(f)),u=f=>h(f)}else o=u=c=>c;return r.slice(n,i).map((c,l)=>{let h=n+1+l,f=" "+(" "+h).slice(-a)+" | ";if(h===this.line){let d=u(f.replace(/\d/g," "))+c.slice(0,this.column-1).replace(/[^\t]/g," ");return o(">")+u(f)+c+`
 `+d+o("^")}return" "+u(f)+c}).join(`
`)}toString(){let e=this.showSourceCode();return e&&(e=`

`+e+`
`),this.name+": "+this.message+e}}var Qc=Co;Co.default=Co;var GU=Symbol("isClean"),zU=Symbol("my"),$m={isClean:GU,my:zU};const Pv={colon:": ",indent:"    ",beforeDecl:`
`,beforeRule:`
`,beforeOpen:" ",beforeClose:`
`,beforeComment:`
`,after:`
`,emptyBody:"",commentLeft:" ",commentRight:" ",semicolon:!1};function WU(s){return s[0].toUpperCase()+s.slice(1)}class Zf{constructor(e){this.builder=e}stringify(e,t){if(!this[e.type])throw new Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,t)}document(e){this.body(e)}root(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}comment(e){let t=this.raw(e,"left","commentLeft"),r=this.raw(e,"right","commentRight");this.builder("/*"+t+e.text+r+"*/",e)}decl(e,t){let r=this.raw(e,"between","colon"),n=e.prop+r+this.rawValue(e,"value");e.important&&(n+=e.raws.important||" !important"),t&&(n+=";"),this.builder(n,e)}rule(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}atrule(e,t){let r="@"+e.name,n=e.params?this.rawValue(e,"params"):"";if(typeof e.raws.afterName!="undefined"?r+=e.raws.afterName:n&&(r+=" "),e.nodes)this.block(e,r+n);else{let i=(e.raws.between||"")+(t?";":"");this.builder(r+n+i,e)}}body(e){let t=e.nodes.length-1;for(;t>0&&e.nodes[t].type==="comment";)t-=1;let r=this.raw(e,"semicolon");for(let n=0;n<e.nodes.length;n++){let i=e.nodes[n],a=this.raw(i,"before");a&&this.builder(a),this.stringify(i,t!==n||r)}}block(e,t){let r=this.raw(e,"between","beforeOpen");this.builder(t+r+"{",e,"start");let n;e.nodes&&e.nodes.length?(this.body(e),n=this.raw(e,"after")):n=this.raw(e,"after","emptyBody"),n&&this.builder(n),this.builder("}",e,"end")}raw(e,t,r){let n;if(r||(r=t),t&&(n=e.raws[t],typeof n!="undefined"))return n;let i=e.parent;if(r==="before"&&(!i||i.type==="root"&&i.first===e||i&&i.type==="document"))return"";if(!i)return Pv[r];let a=e.root();if(a.rawCache||(a.rawCache={}),typeof a.rawCache[r]!="undefined")return a.rawCache[r];if(r==="before"||r==="after")return this.beforeAfter(e,r);{let o="raw"+WU(r);this[o]?n=this[o](a,e):a.walk(u=>{if(n=u.raws[t],typeof n!="undefined")return!1})}return typeof n=="undefined"&&(n=Pv[r]),a.rawCache[r]=n,n}rawSemicolon(e){let t;return e.walk(r=>{if(r.nodes&&r.nodes.length&&r.last.type==="decl"&&(t=r.raws.semicolon,typeof t!="undefined"))return!1}),t}rawEmptyBody(e){let t;return e.walk(r=>{if(r.nodes&&r.nodes.length===0&&(t=r.raws.after,typeof t!="undefined"))return!1}),t}rawIndent(e){if(e.raws.indent)return e.raws.indent;let t;return e.walk(r=>{let n=r.parent;if(n&&n!==e&&n.parent&&n.parent===e&&typeof r.raws.before!="undefined"){let i=r.raws.before.split(`
`);return t=i[i.length-1],t=t.replace(/\S/g,""),!1}}),t}rawBeforeComment(e,t){let r;return e.walkComments(n=>{if(typeof n.raws.before!="undefined")return r=n.raws.before,r.includes(`
`)&&(r=r.replace(/[^\n]+$/,"")),!1}),typeof r=="undefined"?r=this.raw(t,null,"beforeDecl"):r&&(r=r.replace(/\S/g,"")),r}rawBeforeDecl(e,t){let r;return e.walkDecls(n=>{if(typeof n.raws.before!="undefined")return r=n.raws.before,r.includes(`
`)&&(r=r.replace(/[^\n]+$/,"")),!1}),typeof r=="undefined"?r=this.raw(t,null,"beforeRule"):r&&(r=r.replace(/\S/g,"")),r}rawBeforeRule(e){let t;return e.walk(r=>{if(r.nodes&&(r.parent!==e||e.first!==r)&&typeof r.raws.before!="undefined")return t=r.raws.before,t.includes(`
`)&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawBeforeClose(e){let t;return e.walk(r=>{if(r.nodes&&r.nodes.length>0&&typeof r.raws.after!="undefined")return t=r.raws.after,t.includes(`
`)&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawBeforeOpen(e){let t;return e.walk(r=>{if(r.type!=="decl"&&(t=r.raws.between,typeof t!="undefined"))return!1}),t}rawColon(e){let t;return e.walkDecls(r=>{if(typeof r.raws.between!="undefined")return t=r.raws.between.replace(/[^\s:]/g,""),!1}),t}beforeAfter(e,t){let r;e.type==="decl"?r=this.raw(e,null,"beforeDecl"):e.type==="comment"?r=this.raw(e,null,"beforeComment"):t==="before"?r=this.raw(e,null,"beforeRule"):r=this.raw(e,null,"beforeClose");let n=e.parent,i=0;for(;n&&n.type!=="root";)i+=1,n=n.parent;if(r.includes(`
`)){let a=this.raw(e,null,"indent");if(a.length)for(let o=0;o<i;o++)r+=a}return r}rawValue(e,t){let r=e[t],n=e.raws[t];return n&&n.value===r?n.raw:r}}var pI=Zf;Zf.default=Zf;function ed(s,e){new pI(e).stringify(s)}var rh=ed;ed.default=ed;let{isClean:Lu,my:KU}=$m;function td(s,e){let t=new s.constructor;for(let r in s){if(!Object.prototype.hasOwnProperty.call(s,r)||r==="proxyCache")continue;let n=s[r],i=typeof n;r==="parent"&&i==="object"?e&&(t[r]=e):r==="source"?t[r]=n:Array.isArray(n)?t[r]=n.map(a=>td(a,t)):(i==="object"&&n!==null&&(n=td(n)),t[r]=n)}return t}class rd{constructor(e={}){this.raws={},this[Lu]=!1,this[KU]=!0;for(let t in e)if(t==="nodes"){this.nodes=[];for(let r of e[t])typeof r.clone=="function"?this.append(r.clone()):this.append(r)}else this[t]=e[t]}error(e,t={}){if(this.source){let{start:r,end:n}=this.rangeBy(t);return this.source.input.error(e,{line:r.line,column:r.column},{line:n.line,column:n.column},t)}return new Qc(e)}warn(e,t,r){let n={node:this};for(let i in r)n[i]=r[i];return e.warn(t,n)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}toString(e=rh){e.stringify&&(e=e.stringify);let t="";return e(this,r=>{t+=r}),t}assign(e={}){for(let t in e)this[t]=e[t];return this}clone(e={}){let t=td(this);for(let r in e)t[r]=e[r];return t}cloneBefore(e={}){let t=this.clone(e);return this.parent.insertBefore(this,t),t}cloneAfter(e={}){let t=this.clone(e);return this.parent.insertAfter(this,t),t}replaceWith(...e){if(this.parent){let t=this,r=!1;for(let n of e)n===this?r=!0:r?(this.parent.insertAfter(t,n),t=n):this.parent.insertBefore(t,n);r||this.remove()}return this}next(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e+1]}prev(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e-1]}before(e){return this.parent.insertBefore(this,e),this}after(e){return this.parent.insertAfter(this,e),this}root(){let e=this;for(;e.parent&&e.parent.type!=="document";)e=e.parent;return e}raw(e,t){return new pI().raw(this,e,t)}cleanRaws(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}toJSON(e,t){let r={},n=t==null;t=t||new Map;let i=0;for(let a in this){if(!Object.prototype.hasOwnProperty.call(this,a)||a==="parent"||a==="proxyCache")continue;let o=this[a];if(Array.isArray(o))r[a]=o.map(u=>typeof u=="object"&&u.toJSON?u.toJSON(null,t):u);else if(typeof o=="object"&&o.toJSON)r[a]=o.toJSON(null,t);else if(a==="source"){let u=t.get(o.input);u==null&&(u=i,t.set(o.input,i),i++),r[a]={inputId:u,start:o.start,end:o.end}}else r[a]=o}return n&&(r.inputs=[...t.keys()].map(a=>a.toJSON())),r}positionInside(e){let t=this.toString(),r=this.source.start.column,n=this.source.start.line;for(let i=0;i<e;i++)t[i]===`
`?(r=1,n+=1):r+=1;return{line:n,column:r}}positionBy(e){let t=this.source.start;if(e.index)t=this.positionInside(e.index);else if(e.word){let r=this.toString().indexOf(e.word);r!==-1&&(t=this.positionInside(r))}return t}rangeBy(e){let t={line:this.source.start.line,column:this.source.start.column},r=this.source.end?{line:this.source.end.line,column:this.source.end.column+1}:{line:t.line,column:t.column+1};if(e.word){let n=this.toString().indexOf(e.word);n!==-1&&(t=this.positionInside(n),r=this.positionInside(n+e.word.length))}else e.start?t={line:e.start.line,column:e.start.column}:e.index&&(t=this.positionInside(e.index)),e.end?r={line:e.end.line,column:e.end.column}:e.endIndex?r=this.positionInside(e.endIndex):e.index&&(r=this.positionInside(e.index+1));return(r.line<t.line||r.line===t.line&&r.column<=t.column)&&(r={line:t.line,column:t.column+1}),{start:t,end:r}}getProxyProcessor(){return{set(e,t,r){return e[t]===r||(e[t]=r,(t==="prop"||t==="value"||t==="name"||t==="params"||t==="important"||t==="text")&&e.markDirty()),!0},get(e,t){return t==="proxyOf"?e:t==="root"?()=>e.root().toProxy():e[t]}}}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}addToError(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){let t=this.source;e.stack=e.stack.replace(/\n\s{4}at /,`$&${t.input.from}:${t.start.line}:${t.start.column}$&`)}return e}markDirty(){if(this[Lu]){this[Lu]=!1;let e=this;for(;e=e.parent;)e[Lu]=!1}}get proxyOf(){return this}}var sh=rd;rd.default=rd;class sd extends sh{constructor(e){e&&typeof e.value!="undefined"&&typeof e.value!="string"&&(e={...e,value:String(e.value)}),super(e),this.type="decl"}get variable(){return this.prop.startsWith("--")||this.prop[0]==="$"}}var Zi=sd;sd.default=sd;var Cv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),HU=function(s){if(0<=s&&s<Cv.length)return Cv[s];throw new TypeError("Must be between 0 and 63: "+s)},QU=function(s){var e=65,t=90,r=97,n=122,i=48,a=57,o=43,u=47,c=26,l=52;return e<=s&&s<=t?s-e:r<=s&&s<=n?s-r+c:i<=s&&s<=a?s-i+l:s==o?62:s==u?63:-1},mI={encode:HU,decode:QU},jm=5,gI=1<<jm,yI=gI-1,vI=gI;function YU(s){return s<0?(-s<<1)+1:(s<<1)+0}function JU(s){var e=(s&1)===1,t=s>>1;return e?-t:t}var XU=function(e){var t="",r,n=YU(e);do r=n&yI,n>>>=jm,n>0&&(r|=vI),t+=mI.encode(r);while(n>0);return t},ZU=function(e,t,r){var n=e.length,i=0,a=0,o,u;do{if(t>=n)throw new Error("Expected more digits in base 64 VLQ value.");if(u=mI.decode(e.charCodeAt(t++)),u===-1)throw new Error("Invalid base64 digit: "+e.charAt(t-1));o=!!(u&vI),u&=yI,i=i+(u<<a),a+=jm}while(o);r.value=JU(i),r.rest=t},Qn={encode:XU,decode:ZU},F=be(function(s,e){function t(w,x,C){if(x in w)return w[x];if(arguments.length===3)return C;throw new Error('"'+x+'" is a required argument.')}e.getArg=t;var r=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,n=/^data:.+\,.+$/;function i(w){var x=w.match(r);return x?{scheme:x[1],auth:x[2],host:x[3],port:x[4],path:x[5]}:null}e.urlParse=i;function a(w){var x="";return w.scheme&&(x+=w.scheme+":"),x+="//",w.auth&&(x+=w.auth+"@"),w.host&&(x+=w.host),w.port&&(x+=":"+w.port),w.path&&(x+=w.path),x}e.urlGenerate=a;var o=32;function u(w){var x=[];return function(C){for(var A=0;A<x.length;A++)if(x[A].input===C){var H=x[0];return x[0]=x[A],x[A]=H,x[0].result}var Y=w(C);return x.unshift({input:C,result:Y}),x.length>o&&x.pop(),Y}}var c=u(function(x){var C=x,A=i(x);if(A){if(!A.path)return x;C=A.path}for(var H=e.isAbsolute(C),Y=[],fe=0,me=0;;)if(fe=me,me=C.indexOf("/",fe),me===-1){Y.push(C.slice(fe));break}else for(Y.push(C.slice(fe,me));me<C.length&&C[me]==="/";)me++;for(var se,Ze=0,me=Y.length-1;me>=0;me--)se=Y[me],se==="."?Y.splice(me,1):se===".."?Ze++:Ze>0&&(se===""?(Y.splice(me+1,Ze),Ze=0):(Y.splice(me,2),Ze--));return C=Y.join("/"),C===""&&(C=H?"/":"."),A?(A.path=C,a(A)):C});e.normalize=c;function l(w,x){w===""&&(w="."),x===""&&(x=".");var C=i(x),A=i(w);if(A&&(w=A.path||"/"),C&&!C.scheme)return A&&(C.scheme=A.scheme),a(C);if(C||x.match(n))return x;if(A&&!A.host&&!A.path)return A.host=x,a(A);var H=x.charAt(0)==="/"?x:c(w.replace(/\/+$/,"")+"/"+x);return A?(A.path=H,a(A)):H}e.join=l,e.isAbsolute=function(w){return w.charAt(0)==="/"||r.test(w)};function h(w,x){w===""&&(w="."),w=w.replace(/\/$/,"");for(var C=0;x.indexOf(w+"/")!==0;){var A=w.lastIndexOf("/");if(A<0||(w=w.slice(0,A),w.match(/^([^\/]+:\/)?\/*$/)))return x;++C}return Array(C+1).join("../")+x.substr(w.length+1)}e.relative=h;var f=function(){var w=Object.create(null);return!("__proto__"in w)}();function d(w){return w}function g(w){return m(w)?"$"+w:w}e.toSetString=f?d:g;function p(w){return m(w)?w.slice(1):w}e.fromSetString=f?d:p;function m(w){if(!w)return!1;var x=w.length;if(x<9||w.charCodeAt(x-1)!==95||w.charCodeAt(x-2)!==95||w.charCodeAt(x-3)!==111||w.charCodeAt(x-4)!==116||w.charCodeAt(x-5)!==111||w.charCodeAt(x-6)!==114||w.charCodeAt(x-7)!==112||w.charCodeAt(x-8)!==95||w.charCodeAt(x-9)!==95)return!1;for(var C=x-10;C>=0;C--)if(w.charCodeAt(C)!==36)return!1;return!0}function v(w,x,C){var A=y(w.source,x.source);return A!==0||(A=w.originalLine-x.originalLine,A!==0)||(A=w.originalColumn-x.originalColumn,A!==0||C)||(A=w.generatedColumn-x.generatedColumn,A!==0)||(A=w.generatedLine-x.generatedLine,A!==0)?A:y(w.name,x.name)}e.compareByOriginalPositions=v;function S(w,x,C){var A;return A=w.originalLine-x.originalLine,A!==0||(A=w.originalColumn-x.originalColumn,A!==0||C)||(A=w.generatedColumn-x.generatedColumn,A!==0)||(A=w.generatedLine-x.generatedLine,A!==0)?A:y(w.name,x.name)}e.compareByOriginalPositionsNoSource=S;function b(w,x,C){var A=w.generatedLine-x.generatedLine;return A!==0||(A=w.generatedColumn-x.generatedColumn,A!==0||C)||(A=y(w.source,x.source),A!==0)||(A=w.originalLine-x.originalLine,A!==0)||(A=w.originalColumn-x.originalColumn,A!==0)?A:y(w.name,x.name)}e.compareByGeneratedPositionsDeflated=b;function I(w,x,C){var A=w.generatedColumn-x.generatedColumn;return A!==0||C||(A=y(w.source,x.source),A!==0)||(A=w.originalLine-x.originalLine,A!==0)||(A=w.originalColumn-x.originalColumn,A!==0)?A:y(w.name,x.name)}e.compareByGeneratedPositionsDeflatedNoLine=I;function y(w,x){return w===x?0:w===null?1:x===null?-1:w>x?1:-1}function T(w,x){var C=w.generatedLine-x.generatedLine;return C!==0||(C=w.generatedColumn-x.generatedColumn,C!==0)||(C=y(w.source,x.source),C!==0)||(C=w.originalLine-x.originalLine,C!==0)||(C=w.originalColumn-x.originalColumn,C!==0)?C:y(w.name,x.name)}e.compareByGeneratedPositionsInflated=T;function P(w){return JSON.parse(w.replace(/^\)]}'[^\n]*\n/,""))}e.parseSourceMapInput=P;function E(w,x,C){if(x=x||"",w&&(w[w.length-1]!=="/"&&x[0]!=="/"&&(w+="/"),x=w+x),C){var A=i(C);if(!A)throw new Error("sourceMapURL could not be parsed");if(A.path){var H=A.path.lastIndexOf("/");H>=0&&(A.path=A.path.substring(0,H+1))}x=l(a(A),x)}return c(x)}e.computeSourceURL=E}),Gm=Object.prototype.hasOwnProperty,vn=typeof Map!="undefined";function rs(){this._array=[],this._set=vn?new Map:Object.create(null)}rs.fromArray=function(e,t){for(var r=new rs,n=0,i=e.length;n<i;n++)r.add(e[n],t);return r};rs.prototype.size=function(){return vn?this._set.size:Object.getOwnPropertyNames(this._set).length};rs.prototype.add=function(e,t){var r=vn?e:F.toSetString(e),n=vn?this.has(e):Gm.call(this._set,r),i=this._array.length;(!n||t)&&this._array.push(e),n||(vn?this._set.set(e,i):this._set[r]=i)};rs.prototype.has=function(e){if(vn)return this._set.has(e);var t=F.toSetString(e);return Gm.call(this._set,t)};rs.prototype.indexOf=function(e){if(vn){var t=this._set.get(e);if(t>=0)return t}else{var r=F.toSetString(e);if(Gm.call(this._set,r))return this._set[r]}throw new Error('"'+e+'" is not in the set.')};rs.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)};rs.prototype.toArray=function(){return this._array.slice()};var eB=rs,wI={ArraySet:eB};function tB(s,e){var t=s.generatedLine,r=e.generatedLine,n=s.generatedColumn,i=e.generatedColumn;return r>t||r==t&&i>=n||F.compareByGeneratedPositionsInflated(s,e)<=0}function nh(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}nh.prototype.unsortedForEach=function(e,t){this._array.forEach(e,t)};nh.prototype.add=function(e){tB(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))};nh.prototype.toArray=function(){return this._sorted||(this._array.sort(F.compareByGeneratedPositionsInflated),this._sorted=!0),this._array};var rB=nh,sB={MappingList:rB},Yc=wI.ArraySet,nB=sB.MappingList;function rr(s){s||(s={}),this._file=F.getArg(s,"file",null),this._sourceRoot=F.getArg(s,"sourceRoot",null),this._skipValidation=F.getArg(s,"skipValidation",!1),this._sources=new Yc,this._names=new Yc,this._mappings=new nB,this._sourcesContents=null}rr.prototype._version=3;rr.fromSourceMap=function(e){var t=e.sourceRoot,r=new rr({file:e.file,sourceRoot:t});return e.eachMapping(function(n){var i={generated:{line:n.generatedLine,column:n.generatedColumn}};n.source!=null&&(i.source=n.source,t!=null&&(i.source=F.relative(t,i.source)),i.original={line:n.originalLine,column:n.originalColumn},n.name!=null&&(i.name=n.name)),r.addMapping(i)}),e.sources.forEach(function(n){var i=n;t!==null&&(i=F.relative(t,n)),r._sources.has(i)||r._sources.add(i);var a=e.sourceContentFor(n);a!=null&&r.setSourceContent(n,a)}),r};rr.prototype.addMapping=function(e){var t=F.getArg(e,"generated"),r=F.getArg(e,"original",null),n=F.getArg(e,"source",null),i=F.getArg(e,"name",null);this._skipValidation||this._validateMapping(t,r,n,i),n!=null&&(n=String(n),this._sources.has(n)||this._sources.add(n)),i!=null&&(i=String(i),this._names.has(i)||this._names.add(i)),this._mappings.add({generatedLine:t.line,generatedColumn:t.column,originalLine:r!=null&&r.line,originalColumn:r!=null&&r.column,source:n,name:i})};rr.prototype.setSourceContent=function(e,t){var r=e;this._sourceRoot!=null&&(r=F.relative(this._sourceRoot,r)),t!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[F.toSetString(r)]=t):this._sourcesContents&&(delete this._sourcesContents[F.toSetString(r)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))};rr.prototype.applySourceMap=function(e,t,r){var n=t;if(t==null){if(e.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);n=e.file}var i=this._sourceRoot;i!=null&&(n=F.relative(i,n));var a=new Yc,o=new Yc;this._mappings.unsortedForEach(function(u){if(u.source===n&&u.originalLine!=null){var c=e.originalPositionFor({line:u.originalLine,column:u.originalColumn});c.source!=null&&(u.source=c.source,r!=null&&(u.source=F.join(r,u.source)),i!=null&&(u.source=F.relative(i,u.source)),u.originalLine=c.line,u.originalColumn=c.column,c.name!=null&&(u.name=c.name))}var l=u.source;l!=null&&!a.has(l)&&a.add(l);var h=u.name;h!=null&&!o.has(h)&&o.add(h)},this),this._sources=a,this._names=o,e.sources.forEach(function(u){var c=e.sourceContentFor(u);c!=null&&(r!=null&&(u=F.join(r,u)),i!=null&&(u=F.relative(i,u)),this.setSourceContent(u,c))},this)};rr.prototype._validateMapping=function(e,t,r,n){if(t&&typeof t.line!="number"&&typeof t.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!t&&!r&&!n)){if(e&&"line"in e&&"column"in e&&t&&"line"in t&&"column"in t&&e.line>0&&e.column>=0&&t.line>0&&t.column>=0&&r)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:r,original:t,name:n}))}};rr.prototype._serializeMappings=function(){for(var e=0,t=1,r=0,n=0,i=0,a=0,o="",u,c,l,h,f=this._mappings.toArray(),d=0,g=f.length;d<g;d++){if(c=f[d],u="",c.generatedLine!==t)for(e=0;c.generatedLine!==t;)u+=";",t++;else if(d>0){if(!F.compareByGeneratedPositionsInflated(c,f[d-1]))continue;u+=","}u+=Qn.encode(c.generatedColumn-e),e=c.generatedColumn,c.source!=null&&(h=this._sources.indexOf(c.source),u+=Qn.encode(h-a),a=h,u+=Qn.encode(c.originalLine-1-n),n=c.originalLine-1,u+=Qn.encode(c.originalColumn-r),r=c.originalColumn,c.name!=null&&(l=this._names.indexOf(c.name),u+=Qn.encode(l-i),i=l)),o+=u}return o};rr.prototype._generateSourcesContent=function(e,t){return e.map(function(r){if(!this._sourcesContents)return null;t!=null&&(r=F.relative(t,r));var n=F.toSetString(r);return Object.prototype.hasOwnProperty.call(this._sourcesContents,n)?this._sourcesContents[n]:null},this)};rr.prototype.toJSON=function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(e.file=this._file),this._sourceRoot!=null&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e};rr.prototype.toString=function(){return JSON.stringify(this.toJSON())};var iB=rr,TI={SourceMapGenerator:iB},zm=be(function(s,e){e.GREATEST_LOWER_BOUND=1,e.LEAST_UPPER_BOUND=2;function t(r,n,i,a,o,u){var c=Math.floor((n-r)/2)+r,l=o(i,a[c],!0);return l===0?c:l>0?n-c>1?t(c,n,i,a,o,u):u==e.LEAST_UPPER_BOUND?n<a.length?n:-1:c:c-r>1?t(r,c,i,a,o,u):u==e.LEAST_UPPER_BOUND?c:r<0?-1:r}e.search=function(n,i,a,o){if(i.length===0)return-1;var u=t(-1,i.length,n,i,a,o||e.GREATEST_LOWER_BOUND);if(u<0)return-1;for(;u-1>=0&&a(i[u],i[u-1],!0)===0;)--u;return u}});function aB(s){function e(n,i,a){var o=n[i];n[i]=n[a],n[a]=o}function t(n,i){return Math.round(n+Math.random()*(i-n))}function r(n,i,a,o){if(a<o){var u=t(a,o),c=a-1;e(n,u,o);for(var l=n[o],h=a;h<o;h++)i(n[h],l,!1)<=0&&(c+=1,e(n,c,h));e(n,c+1,h);var f=c+1;r(n,i,a,f-1),r(n,i,f+1,o)}}return r}function oB(s){let e=aB.toString();return new Function(`return ${e}`)()(s)}let kv=new WeakMap;var uB=function(s,e,t=0){let r=kv.get(e);r===void 0&&(r=oB(e),kv.set(e,r)),r(s,e,t,s.length-1)},cB={quickSort:uB},Mi=wI.ArraySet,ko=cB.quickSort;function Ne(s,e){var t=s;return typeof s=="string"&&(t=F.parseSourceMapInput(s)),t.sections!=null?new fr(t,e):new vt(t,e)}Ne.fromSourceMap=function(s,e){return vt.fromSourceMap(s,e)};Ne.prototype._version=3;Ne.prototype.__generatedMappings=null;Object.defineProperty(Ne.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}});Ne.prototype.__originalMappings=null;Object.defineProperty(Ne.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}});Ne.prototype._charIsMappingSeparator=function(e,t){var r=e.charAt(t);return r===";"||r===","};Ne.prototype._parseMappings=function(e,t){throw new Error("Subclasses must implement _parseMappings")};Ne.GENERATED_ORDER=1;Ne.ORIGINAL_ORDER=2;Ne.GREATEST_LOWER_BOUND=1;Ne.LEAST_UPPER_BOUND=2;Ne.prototype.eachMapping=function(e,t,r){var n=t||null,i=r||Ne.GENERATED_ORDER,a;switch(i){case Ne.GENERATED_ORDER:a=this._generatedMappings;break;case Ne.ORIGINAL_ORDER:a=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}for(var o=this.sourceRoot,u=e.bind(n),c=this._names,l=this._sources,h=this._sourceMapURL,f=0,d=a.length;f<d;f++){var g=a[f],p=g.source===null?null:l.at(g.source);p=F.computeSourceURL(o,p,h),u({source:p,generatedLine:g.generatedLine,generatedColumn:g.generatedColumn,originalLine:g.originalLine,originalColumn:g.originalColumn,name:g.name===null?null:c.at(g.name)})}};Ne.prototype.allGeneratedPositionsFor=function(e){var t=F.getArg(e,"line"),r={source:F.getArg(e,"source"),originalLine:t,originalColumn:F.getArg(e,"column",0)};if(r.source=this._findSourceIndex(r.source),r.source<0)return[];var n=[],i=this._findMapping(r,this._originalMappings,"originalLine","originalColumn",F.compareByOriginalPositions,zm.LEAST_UPPER_BOUND);if(i>=0){var a=this._originalMappings[i];if(e.column===void 0)for(var o=a.originalLine;a&&a.originalLine===o;)n.push({line:F.getArg(a,"generatedLine",null),column:F.getArg(a,"generatedColumn",null),lastColumn:F.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++i];else for(var u=a.originalColumn;a&&a.originalLine===t&&a.originalColumn==u;)n.push({line:F.getArg(a,"generatedLine",null),column:F.getArg(a,"generatedColumn",null),lastColumn:F.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++i]}return n};var lB=Ne;function vt(s,e){var t=s;typeof s=="string"&&(t=F.parseSourceMapInput(s));var r=F.getArg(t,"version"),n=F.getArg(t,"sources"),i=F.getArg(t,"names",[]),a=F.getArg(t,"sourceRoot",null),o=F.getArg(t,"sourcesContent",null),u=F.getArg(t,"mappings"),c=F.getArg(t,"file",null);if(r!=this._version)throw new Error("Unsupported version: "+r);a&&(a=F.normalize(a)),n=n.map(String).map(F.normalize).map(function(l){return a&&F.isAbsolute(a)&&F.isAbsolute(l)?F.relative(a,l):l}),this._names=Mi.fromArray(i.map(String),!0),this._sources=Mi.fromArray(n,!0),this._absoluteSources=this._sources.toArray().map(function(l){return F.computeSourceURL(a,l,e)}),this.sourceRoot=a,this.sourcesContent=o,this._mappings=u,this._sourceMapURL=e,this.file=c}vt.prototype=Object.create(Ne.prototype);vt.prototype.consumer=Ne;vt.prototype._findSourceIndex=function(s){var e=s;if(this.sourceRoot!=null&&(e=F.relative(this.sourceRoot,e)),this._sources.has(e))return this._sources.indexOf(e);var t;for(t=0;t<this._absoluteSources.length;++t)if(this._absoluteSources[t]==s)return t;return-1};vt.fromSourceMap=function(e,t){var r=Object.create(vt.prototype),n=r._names=Mi.fromArray(e._names.toArray(),!0),i=r._sources=Mi.fromArray(e._sources.toArray(),!0);r.sourceRoot=e._sourceRoot,r.sourcesContent=e._generateSourcesContent(r._sources.toArray(),r.sourceRoot),r.file=e._file,r._sourceMapURL=t,r._absoluteSources=r._sources.toArray().map(function(d){return F.computeSourceURL(r.sourceRoot,d,t)});for(var a=e._mappings.toArray().slice(),o=r.__generatedMappings=[],u=r.__originalMappings=[],c=0,l=a.length;c<l;c++){var h=a[c],f=new bI;f.generatedLine=h.generatedLine,f.generatedColumn=h.generatedColumn,h.source&&(f.source=i.indexOf(h.source),f.originalLine=h.originalLine,f.originalColumn=h.originalColumn,h.name&&(f.name=n.indexOf(h.name)),u.push(f)),o.push(f)}return ko(r.__originalMappings,F.compareByOriginalPositions),r};vt.prototype._version=3;Object.defineProperty(vt.prototype,"sources",{get:function(){return this._absoluteSources.slice()}});function bI(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}const jh=F.compareByGeneratedPositionsDeflatedNoLine;function Nv(s,e){let t=s.length,r=s.length-e;if(!(r<=1))if(r==2){let n=s[e],i=s[e+1];jh(n,i)>0&&(s[e]=i,s[e+1]=n)}else if(r<20)for(let n=e;n<t;n++)for(let i=n;i>e;i--){let a=s[i-1],o=s[i];if(jh(a,o)<=0)break;s[i-1]=o,s[i]=a}else ko(s,jh,e)}vt.prototype._parseMappings=function(e,t){var r=1,n=0,i=0,a=0,o=0,u=0,c=e.length,l=0,h={},f=[],d=[],g,p,m,v;let S=0;for(;l<c;)if(e.charAt(l)===";")r++,l++,n=0,Nv(d,S),S=d.length;else if(e.charAt(l)===",")l++;else{for(g=new bI,g.generatedLine=r,m=l;m<c&&!this._charIsMappingSeparator(e,m);m++);for(e.slice(l,m),p=[];l<m;)Qn.decode(e,l,h),v=h.value,l=h.rest,p.push(v);if(p.length===2)throw new Error("Found a source, but no line and column");if(p.length===3)throw new Error("Found a source and line, but no column");if(g.generatedColumn=n+p[0],n=g.generatedColumn,p.length>1&&(g.source=o+p[1],o+=p[1],g.originalLine=i+p[2],i=g.originalLine,g.originalLine+=1,g.originalColumn=a+p[3],a=g.originalColumn,p.length>4&&(g.name=u+p[4],u+=p[4])),d.push(g),typeof g.originalLine=="number"){let I=g.source;for(;f.length<=I;)f.push(null);f[I]===null&&(f[I]=[]),f[I].push(g)}}Nv(d,S),this.__generatedMappings=d;for(var b=0;b<f.length;b++)f[b]!=null&&ko(f[b],F.compareByOriginalPositionsNoSource);this.__originalMappings=[].concat(...f)};vt.prototype._findMapping=function(e,t,r,n,i,a){if(e[r]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[r]);if(e[n]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[n]);return zm.search(e,t,i,a)};vt.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var t=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var r=this._generatedMappings[e+1];if(t.generatedLine===r.generatedLine){t.lastGeneratedColumn=r.generatedColumn-1;continue}}t.lastGeneratedColumn=1/0}};vt.prototype.originalPositionFor=function(e){var t={generatedLine:F.getArg(e,"line"),generatedColumn:F.getArg(e,"column")},r=this._findMapping(t,this._generatedMappings,"generatedLine","generatedColumn",F.compareByGeneratedPositionsDeflated,F.getArg(e,"bias",Ne.GREATEST_LOWER_BOUND));if(r>=0){var n=this._generatedMappings[r];if(n.generatedLine===t.generatedLine){var i=F.getArg(n,"source",null);i!==null&&(i=this._sources.at(i),i=F.computeSourceURL(this.sourceRoot,i,this._sourceMapURL));var a=F.getArg(n,"name",null);return a!==null&&(a=this._names.at(a)),{source:i,line:F.getArg(n,"originalLine",null),column:F.getArg(n,"originalColumn",null),name:a}}}return{source:null,line:null,column:null,name:null}};vt.prototype.hasContentsOfAllSources=function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return e==null}):!1};vt.prototype.sourceContentFor=function(e,t){if(!this.sourcesContent)return null;var r=this._findSourceIndex(e);if(r>=0)return this.sourcesContent[r];var n=e;this.sourceRoot!=null&&(n=F.relative(this.sourceRoot,n));var i;if(this.sourceRoot!=null&&(i=F.urlParse(this.sourceRoot))){var a=n.replace(/^file:\/\//,"");if(i.scheme=="file"&&this._sources.has(a))return this.sourcesContent[this._sources.indexOf(a)];if((!i.path||i.path=="/")&&this._sources.has("/"+n))return this.sourcesContent[this._sources.indexOf("/"+n)]}if(t)return null;throw new Error('"'+n+'" is not in the SourceMap.')};vt.prototype.generatedPositionFor=function(e){var t=F.getArg(e,"source");if(t=this._findSourceIndex(t),t<0)return{line:null,column:null,lastColumn:null};var r={source:t,originalLine:F.getArg(e,"line"),originalColumn:F.getArg(e,"column")},n=this._findMapping(r,this._originalMappings,"originalLine","originalColumn",F.compareByOriginalPositions,F.getArg(e,"bias",Ne.GREATEST_LOWER_BOUND));if(n>=0){var i=this._originalMappings[n];if(i.source===r.source)return{line:F.getArg(i,"generatedLine",null),column:F.getArg(i,"generatedColumn",null),lastColumn:F.getArg(i,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}};var hB=vt;function fr(s,e){var t=s;typeof s=="string"&&(t=F.parseSourceMapInput(s));var r=F.getArg(t,"version"),n=F.getArg(t,"sections");if(r!=this._version)throw new Error("Unsupported version: "+r);this._sources=new Mi,this._names=new Mi;var i={line:-1,column:0};this._sections=n.map(function(a){if(a.url)throw new Error("Support for url field in sections not implemented.");var o=F.getArg(a,"offset"),u=F.getArg(o,"line"),c=F.getArg(o,"column");if(u<i.line||u===i.line&&c<i.column)throw new Error("Section offsets must be ordered and non-overlapping.");return i=o,{generatedOffset:{generatedLine:u+1,generatedColumn:c+1},consumer:new Ne(F.getArg(a,"map"),e)}})}fr.prototype=Object.create(Ne.prototype);fr.prototype.constructor=Ne;fr.prototype._version=3;Object.defineProperty(fr.prototype,"sources",{get:function(){for(var s=[],e=0;e<this._sections.length;e++)for(var t=0;t<this._sections[e].consumer.sources.length;t++)s.push(this._sections[e].consumer.sources[t]);return s}});fr.prototype.originalPositionFor=function(e){var t={generatedLine:F.getArg(e,"line"),generatedColumn:F.getArg(e,"column")},r=zm.search(t,this._sections,function(i,a){var o=i.generatedLine-a.generatedOffset.generatedLine;return o||i.generatedColumn-a.generatedOffset.generatedColumn}),n=this._sections[r];return n?n.consumer.originalPositionFor({line:t.generatedLine-(n.generatedOffset.generatedLine-1),column:t.generatedColumn-(n.generatedOffset.generatedLine===t.generatedLine?n.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}};fr.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})};fr.prototype.sourceContentFor=function(e,t){for(var r=0;r<this._sections.length;r++){var n=this._sections[r],i=n.consumer.sourceContentFor(e,!0);if(i)return i}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')};fr.prototype.generatedPositionFor=function(e){for(var t=0;t<this._sections.length;t++){var r=this._sections[t];if(r.consumer._findSourceIndex(F.getArg(e,"source"))!==-1){var n=r.consumer.generatedPositionFor(e);if(n){var i={line:n.line+(r.generatedOffset.generatedLine-1),column:n.column+(r.generatedOffset.generatedLine===n.line?r.generatedOffset.generatedColumn-1:0)};return i}}}return{line:null,column:null}};fr.prototype._parseMappings=function(e,t){this.__generatedMappings=[],this.__originalMappings=[];for(var r=0;r<this._sections.length;r++)for(var n=this._sections[r],i=n.consumer._generatedMappings,a=0;a<i.length;a++){var o=i[a],u=n.consumer._sources.at(o.source);u=F.computeSourceURL(n.consumer.sourceRoot,u,this._sourceMapURL),this._sources.add(u),u=this._sources.indexOf(u);var c=null;o.name&&(c=n.consumer._names.at(o.name),this._names.add(c),c=this._names.indexOf(c));var l={source:u,generatedLine:o.generatedLine+(n.generatedOffset.generatedLine-1),generatedColumn:o.generatedColumn+(n.generatedOffset.generatedLine===o.generatedLine?n.generatedOffset.generatedColumn-1:0),originalLine:o.originalLine,originalColumn:o.originalColumn,name:c};this.__generatedMappings.push(l),typeof l.originalLine=="number"&&this.__originalMappings.push(l)}ko(this.__generatedMappings,F.compareByGeneratedPositionsDeflated),ko(this.__originalMappings,F.compareByOriginalPositions)};var fB=fr,dB={SourceMapConsumer:lB,BasicSourceMapConsumer:hB,IndexedSourceMapConsumer:fB},pB=TI.SourceMapGenerator,mB=/(\r?\n)/,gB=10,ea="$$$isSourceNode$$$";function zt(s,e,t,r,n){this.children=[],this.sourceContents={},this.line=s==null?null:s,this.column=e==null?null:e,this.source=t==null?null:t,this.name=n==null?null:n,this[ea]=!0,r!=null&&this.add(r)}zt.fromStringWithSourceMap=function(e,t,r){var n=new zt,i=e.split(mB),a=0,o=function(){var f=g(),d=g()||"";return f+d;function g(){return a<i.length?i[a++]:void 0}},u=1,c=0,l=null;return t.eachMapping(function(f){if(l!==null)if(u<f.generatedLine)h(l,o()),u++,c=0;else{var d=i[a]||"",g=d.substr(0,f.generatedColumn-c);i[a]=d.substr(f.generatedColumn-c),c=f.generatedColumn,h(l,g),l=f;return}for(;u<f.generatedLine;)n.add(o()),u++;if(c<f.generatedColumn){var d=i[a]||"";n.add(d.substr(0,f.generatedColumn)),i[a]=d.substr(f.generatedColumn),c=f.generatedColumn}l=f},this),a<i.length&&(l&&h(l,o()),n.add(i.splice(a).join(""))),t.sources.forEach(function(f){var d=t.sourceContentFor(f);d!=null&&(r!=null&&(f=F.join(r,f)),n.setSourceContent(f,d))}),n;function h(f,d){if(f===null||f.source===void 0)n.add(d);else{var g=r?F.join(r,f.source):f.source;n.add(new zt(f.originalLine,f.originalColumn,g,d,f.name))}}};zt.prototype.add=function(e){if(Array.isArray(e))e.forEach(function(t){this.add(t)},this);else if(e[ea]||typeof e=="string")e&&this.children.push(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this};zt.prototype.prepend=function(e){if(Array.isArray(e))for(var t=e.length-1;t>=0;t--)this.prepend(e[t]);else if(e[ea]||typeof e=="string")this.children.unshift(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this};zt.prototype.walk=function(e){for(var t,r=0,n=this.children.length;r<n;r++)t=this.children[r],t[ea]?t.walk(e):t!==""&&e(t,{source:this.source,line:this.line,column:this.column,name:this.name})};zt.prototype.join=function(e){var t,r,n=this.children.length;if(n>0){for(t=[],r=0;r<n-1;r++)t.push(this.children[r]),t.push(e);t.push(this.children[r]),this.children=t}return this};zt.prototype.replaceRight=function(e,t){var r=this.children[this.children.length-1];return r[ea]?r.replaceRight(e,t):typeof r=="string"?this.children[this.children.length-1]=r.replace(e,t):this.children.push("".replace(e,t)),this};zt.prototype.setSourceContent=function(e,t){this.sourceContents[F.toSetString(e)]=t};zt.prototype.walkSourceContents=function(e){for(var t=0,r=this.children.length;t<r;t++)this.children[t][ea]&&this.children[t].walkSourceContents(e);for(var n=Object.keys(this.sourceContents),t=0,r=n.length;t<r;t++)e(F.fromSetString(n[t]),this.sourceContents[n[t]])};zt.prototype.toString=function(){var e="";return this.walk(function(t){e+=t}),e};zt.prototype.toStringWithSourceMap=function(e){var t={code:"",line:1,column:0},r=new pB(e),n=!1,i=null,a=null,o=null,u=null;return this.walk(function(c,l){t.code+=c,l.source!==null&&l.line!==null&&l.column!==null?((i!==l.source||a!==l.line||o!==l.column||u!==l.name)&&r.addMapping({source:l.source,original:{line:l.line,column:l.column},generated:{line:t.line,column:t.column},name:l.name}),i=l.source,a=l.line,o=l.column,u=l.name,n=!0):n&&(r.addMapping({generated:{line:t.line,column:t.column}}),i=null,n=!1);for(var h=0,f=c.length;h<f;h++)c.charCodeAt(h)===gB?(t.line++,t.column=0,h+1===f?(i=null,n=!1):n&&r.addMapping({source:l.source,original:{line:l.line,column:l.column},generated:{line:t.line,column:t.column},name:l.name})):t.column++}),this.walkSourceContents(function(c,l){r.setSourceContent(c,l)}),{code:t.code,map:r}};var yB=zt,vB={SourceNode:yB},wB=TI.SourceMapGenerator,TB=dB.SourceMapConsumer,bB=vB.SourceNode,Wm={SourceMapGenerator:wB,SourceMapConsumer:TB,SourceNode:bB};let SB="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",EB=(s,e)=>()=>{let t="",r=e;for(;r--;)t+=s[Math.random()*s.length|0];return t},IB=(s=21)=>{let e="",t=s;for(;t--;)e+=SB[Math.random()*64|0];return e};var _B={nanoid:IB,customAlphabet:EB};let{SourceMapConsumer:Ov,SourceMapGenerator:Dv}=Wm,{existsSync:xB,readFileSync:AB}=EU,{dirname:Gh,join:PB}=qm;function CB(s){return R?R.from(s,"base64").toString():window.atob(s)}class nd{constructor(e,t){if(t.map===!1)return;this.loadAnnotation(e),this.inline=this.startWith(this.annotation,"data:");let r=t.map?t.map.prev:void 0,n=this.loadMap(t.from,r);!this.mapFile&&t.from&&(this.mapFile=t.from),this.mapFile&&(this.root=Gh(this.mapFile)),n&&(this.text=n)}consumer(){return this.consumerCache||(this.consumerCache=new Ov(this.text)),this.consumerCache}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}startWith(e,t){return e?e.substr(0,t.length)===t:!1}getAnnotationURL(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}loadAnnotation(e){let t=e.match(/\/\*\s*# sourceMappingURL=/gm);if(!t)return;let r=e.lastIndexOf(t.pop()),n=e.indexOf("*/",r);r>-1&&n>-1&&(this.annotation=this.getAnnotationURL(e.substring(r,n)))}decodeInline(e){let t=/^data:application\/json;charset=utf-?8;base64,/,r=/^data:application\/json;base64,/,n=/^data:application\/json;charset=utf-?8,/,i=/^data:application\/json,/;if(n.test(e)||i.test(e))return decodeURIComponent(e.substr(RegExp.lastMatch.length));if(t.test(e)||r.test(e))return CB(e.substr(RegExp.lastMatch.length));let a=e.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+a)}loadFile(e){if(this.root=Gh(e),xB(e))return this.mapFile=e,AB(e,"utf-8").toString().trim()}loadMap(e,t){if(t===!1)return!1;if(t){if(typeof t=="string")return t;if(typeof t=="function"){let r=t(e);if(r){let n=this.loadFile(r);if(!n)throw new Error("Unable to load previous source map: "+r.toString());return n}}else{if(t instanceof Ov)return Dv.fromSourceMap(t).toString();if(t instanceof Dv)return t.toString();if(this.isMap(t))return JSON.stringify(t);throw new Error("Unsupported previous source map format: "+t.toString())}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let r=this.annotation;return e&&(r=PB(Gh(e),r)),this.loadFile(r)}}}isMap(e){return typeof e!="object"?!1:typeof e.mappings=="string"||typeof e._mappings=="string"||Array.isArray(e.sections)}}var SI=nd;nd.default=nd;var EI=lu(XF);let{SourceMapConsumer:kB,SourceMapGenerator:NB}=Wm,{fileURLToPath:Rv,pathToFileURL:Fu}=EI,{resolve:id,isAbsolute:ad}=qm,{nanoid:OB}=_B,zh=Symbol("fromOffsetCache"),DB=Boolean(kB&&NB),Mv=Boolean(id&&ad);class Jc{constructor(e,t={}){if(e===null||typeof e=="undefined"||typeof e=="object"&&!e.toString)throw new Error(`PostCSS received ${e} instead of CSS string`);if(this.css=e.toString(),this.css[0]==="\uFEFF"||this.css[0]==="\uFFFE"?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,t.from&&(!Mv||/^\w+:\/\//.test(t.from)||ad(t.from)?this.file=t.from:this.file=id(t.from)),Mv&&DB){let r=new SI(this.css,t);if(r.text){this.map=r;let n=r.consumer().file;!this.file&&n&&(this.file=this.mapResolve(n))}}this.file||(this.id="<input css "+OB(6)+">"),this.map&&(this.map.file=this.from)}fromOffset(e){let t,r;if(this[zh])r=this[zh];else{let i=this.css.split(`
`);r=new Array(i.length);let a=0;for(let o=0,u=i.length;o<u;o++)r[o]=a,a+=i[o].length+1;this[zh]=r}t=r[r.length-1];let n=0;if(e>=t)n=r.length-1;else{let i=r.length-2,a;for(;n<i;)if(a=n+(i-n>>1),e<r[a])i=a-1;else if(e>=r[a+1])n=a+1;else{n=a;break}}return{line:n+1,col:e-r[n]+1}}error(e,t,r,n={}){let i,a,o;if(t&&typeof t=="object"){let c=t,l=r;if(typeof t.offset=="number"){let h=this.fromOffset(c.offset);t=h.line,r=h.col}else t=c.line,r=c.column;if(typeof l.offset=="number"){let h=this.fromOffset(l.offset);a=h.line,o=h.col}else a=l.line,o=l.column}else if(!r){let c=this.fromOffset(t);t=c.line,r=c.col}let u=this.origin(t,r,a,o);return u?i=new Qc(e,u.endLine===void 0?u.line:{line:u.line,column:u.column},u.endLine===void 0?u.column:{line:u.endLine,column:u.endColumn},u.source,u.file,n.plugin):i=new Qc(e,a===void 0?t:{line:t,column:r},a===void 0?r:{line:a,column:o},this.css,this.file,n.plugin),i.input={line:t,column:r,endLine:a,endColumn:o,source:this.css},this.file&&(Fu&&(i.input.url=Fu(this.file).toString()),i.input.file=this.file),i}origin(e,t,r,n){if(!this.map)return!1;let i=this.map.consumer(),a=i.originalPositionFor({line:e,column:t});if(!a.source)return!1;let o;typeof r=="number"&&(o=i.originalPositionFor({line:r,column:n}));let u;ad(a.source)?u=Fu(a.source):u=new URL(a.source,this.map.consumer().sourceRoot||Fu(this.map.mapFile));let c={url:u.toString(),line:a.line,column:a.column,endLine:o&&o.line,endColumn:o&&o.column};if(u.protocol==="file:")if(Rv)c.file=Rv(u);else throw new Error("file: protocol is not available in this PostCSS build");let l=i.sourceContentFor(a.source);return l&&(c.source=l),c}mapResolve(e){return/^\w+:\/\//.test(e)?e:id(this.map.consumer().sourceRoot||this.map.root||".",e)}get from(){return this.file||this.id}toJSON(){let e={};for(let t of["hasBOM","css","file","id"])this[t]!=null&&(e[t]=this[t]);return this.map&&(e.map={...this.map},e.map.consumerCache&&(e.map.consumerCache=void 0)),e}}var ih=Jc;Jc.default=Jc;Wa&&Wa.registerInput&&Wa.registerInput(Jc);let{SourceMapConsumer:II,SourceMapGenerator:tc}=Wm,{dirname:rc,resolve:_I,relative:xI,sep:AI}=qm,{pathToFileURL:Lv}=EI,RB=Boolean(II&&tc),MB=Boolean(rc&&_I&&xI&&AI);class LB{constructor(e,t,r,n){this.stringify=e,this.mapOpts=r.map||{},this.root=t,this.opts=r,this.css=n}isMap(){return typeof this.opts.map!="undefined"?!!this.opts.map:this.previous().length>0}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(e=>{if(e.source&&e.source.input.map){let t=e.source.input.map;this.previousMaps.includes(t)||this.previousMaps.push(t)}});else{let e=new ih(this.css,this.opts);e.map&&this.previousMaps.push(e.map)}return this.previousMaps}isInline(){if(typeof this.mapOpts.inline!="undefined")return this.mapOpts.inline;let e=this.mapOpts.annotation;return typeof e!="undefined"&&e!==!0?!1:this.previous().length?this.previous().some(t=>t.inline):!0}isSourcesContent(){return typeof this.mapOpts.sourcesContent!="undefined"?this.mapOpts.sourcesContent:this.previous().length?this.previous().some(e=>e.withContent()):!0}clearAnnotation(){if(this.mapOpts.annotation!==!1)if(this.root){let e;for(let t=this.root.nodes.length-1;t>=0;t--)e=this.root.nodes[t],e.type==="comment"&&e.text.indexOf("# sourceMappingURL=")===0&&this.root.removeChild(t)}else this.css&&(this.css=this.css.replace(/(\n)?\/\*#[\S\s]*?\*\/$/gm,""))}setSourcesContent(){let e={};if(this.root)this.root.walk(t=>{if(t.source){let r=t.source.input.from;r&&!e[r]&&(e[r]=!0,this.map.setSourceContent(this.toUrl(this.path(r)),t.source.input.css))}});else if(this.css){let t=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(t,this.css)}}applyPrevMaps(){for(let e of this.previous()){let t=this.toUrl(this.path(e.file)),r=e.root||rc(e.file),n;this.mapOpts.sourcesContent===!1?(n=new II(e.text),n.sourcesContent&&(n.sourcesContent=n.sourcesContent.map(()=>null))):n=e.consumer(),this.map.applySourceMap(n,t,this.toUrl(this.path(r)))}}isAnnotation(){return this.isInline()?!0:typeof this.mapOpts.annotation!="undefined"?this.mapOpts.annotation:this.previous().length?this.previous().some(e=>e.annotation):!0}toBase64(e){return R?R.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}addAnnotation(){let e;this.isInline()?e="data:application/json;base64,"+this.toBase64(this.map.toString()):typeof this.mapOpts.annotation=="string"?e=this.mapOpts.annotation:typeof this.mapOpts.annotation=="function"?e=this.mapOpts.annotation(this.opts.to,this.root):e=this.outputFile()+".map";let t=`
`;this.css.includes(`\r
`)&&(t=`\r
`),this.css+=t+"/*# sourceMappingURL="+e+" */"}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}generateMap(){if(this.root)this.generateString();else if(this.previous().length===1){let e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=tc.fromSourceMap(e)}else this.map=new tc({file:this.outputFile()}),this.map.addMapping({source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>",generated:{line:1,column:0},original:{line:1,column:0}});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}path(e){if(e.indexOf("<")===0||/^\w+:\/\//.test(e)||this.mapOpts.absolute)return e;let t=this.opts.to?rc(this.opts.to):".";return typeof this.mapOpts.annotation=="string"&&(t=rc(_I(t,this.mapOpts.annotation))),e=xI(t,e),e}toUrl(e){return AI==="\\"&&(e=e.replace(/\\/g,"/")),encodeURI(e).replace(/[#?]/g,encodeURIComponent)}sourcePath(e){if(this.mapOpts.from)return this.toUrl(this.mapOpts.from);if(this.mapOpts.absolute){if(Lv)return Lv(e.source.input.from).toString();throw new Error("`map.absolute` option is not available in this PostCSS build")}else return this.toUrl(this.path(e.source.input.from))}generateString(){this.css="",this.map=new tc({file:this.outputFile()});let e=1,t=1,r="<no source>",n={source:"",generated:{line:0,column:0},original:{line:0,column:0}},i,a;this.stringify(this.root,(o,u,c)=>{if(this.css+=o,u&&c!=="end"&&(n.generated.line=e,n.generated.column=t-1,u.source&&u.source.start?(n.source=this.sourcePath(u),n.original.line=u.source.start.line,n.original.column=u.source.start.column-1,this.map.addMapping(n)):(n.source=r,n.original.line=1,n.original.column=0,this.map.addMapping(n))),i=o.match(/\n/g),i?(e+=i.length,a=o.lastIndexOf(`
`),t=o.length-a):t+=o.length,u&&c!=="start"){let l=u.parent||{raws:{}};(u.type!=="decl"||u!==l.last||l.raws.semicolon)&&(u.source&&u.source.end?(n.source=this.sourcePath(u),n.original.line=u.source.end.line,n.original.column=u.source.end.column-1,n.generated.line=e,n.generated.column=t-2,this.map.addMapping(n)):(n.source=r,n.original.line=1,n.original.column=0,n.generated.line=e,n.generated.column=t-1,this.map.addMapping(n)))}})}generate(){if(this.clearAnnotation(),MB&&RB&&this.isMap())return this.generateMap();{let e="";return this.stringify(this.root,t=>{e+=t}),[e]}}}var PI=LB;class od extends sh{constructor(e){super(e),this.type="comment"}}var ta=od;od.default=od;let{isClean:CI,my:kI}=$m,NI,Km,Hm;function OI(s){return s.map(e=>(e.nodes&&(e.nodes=OI(e.nodes)),delete e.source,e))}function DI(s){if(s[CI]=!1,s.proxyOf.nodes)for(let e of s.proxyOf.nodes)DI(e)}class Mr extends sh{push(e){return e.parent=this,this.proxyOf.nodes.push(e),this}each(e){if(!this.proxyOf.nodes)return;let t=this.getIterator(),r,n;for(;this.indexes[t]<this.proxyOf.nodes.length&&(r=this.indexes[t],n=e(this.proxyOf.nodes[r],r),n!==!1);)this.indexes[t]+=1;return delete this.indexes[t],n}walk(e){return this.each((t,r)=>{let n;try{n=e(t,r)}catch(i){throw t.addToError(i)}return n!==!1&&t.walk&&(n=t.walk(e)),n})}walkDecls(e,t){return t?e instanceof RegExp?this.walk((r,n)=>{if(r.type==="decl"&&e.test(r.prop))return t(r,n)}):this.walk((r,n)=>{if(r.type==="decl"&&r.prop===e)return t(r,n)}):(t=e,this.walk((r,n)=>{if(r.type==="decl")return t(r,n)}))}walkRules(e,t){return t?e instanceof RegExp?this.walk((r,n)=>{if(r.type==="rule"&&e.test(r.selector))return t(r,n)}):this.walk((r,n)=>{if(r.type==="rule"&&r.selector===e)return t(r,n)}):(t=e,this.walk((r,n)=>{if(r.type==="rule")return t(r,n)}))}walkAtRules(e,t){return t?e instanceof RegExp?this.walk((r,n)=>{if(r.type==="atrule"&&e.test(r.name))return t(r,n)}):this.walk((r,n)=>{if(r.type==="atrule"&&r.name===e)return t(r,n)}):(t=e,this.walk((r,n)=>{if(r.type==="atrule")return t(r,n)}))}walkComments(e){return this.walk((t,r)=>{if(t.type==="comment")return e(t,r)})}append(...e){for(let t of e){let r=this.normalize(t,this.last);for(let n of r)this.proxyOf.nodes.push(n)}return this.markDirty(),this}prepend(...e){e=e.reverse();for(let t of e){let r=this.normalize(t,this.first,"prepend").reverse();for(let n of r)this.proxyOf.nodes.unshift(n);for(let n in this.indexes)this.indexes[n]=this.indexes[n]+r.length}return this.markDirty(),this}cleanRaws(e){if(super.cleanRaws(e),this.nodes)for(let t of this.nodes)t.cleanRaws(e)}insertBefore(e,t){e=this.index(e);let r=e===0?"prepend":!1,n=this.normalize(t,this.proxyOf.nodes[e],r).reverse();for(let a of n)this.proxyOf.nodes.splice(e,0,a);let i;for(let a in this.indexes)i=this.indexes[a],e<=i&&(this.indexes[a]=i+n.length);return this.markDirty(),this}insertAfter(e,t){e=this.index(e);let r=this.normalize(t,this.proxyOf.nodes[e]).reverse();for(let i of r)this.proxyOf.nodes.splice(e+1,0,i);let n;for(let i in this.indexes)n=this.indexes[i],e<n&&(this.indexes[i]=n+r.length);return this.markDirty(),this}removeChild(e){e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1);let t;for(let r in this.indexes)t=this.indexes[r],t>=e&&(this.indexes[r]=t-1);return this.markDirty(),this}removeAll(){for(let e of this.proxyOf.nodes)e.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}replaceValues(e,t,r){return r||(r=t,t={}),this.walkDecls(n=>{t.props&&!t.props.includes(n.prop)||t.fast&&!n.value.includes(t.fast)||(n.value=n.value.replace(e,r))}),this.markDirty(),this}every(e){return this.nodes.every(e)}some(e){return this.nodes.some(e)}index(e){return typeof e=="number"?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}get first(){if(!!this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(!!this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}normalize(e,t){if(typeof e=="string")e=OI(NI(e).nodes);else if(Array.isArray(e)){e=e.slice(0);for(let n of e)n.parent&&n.parent.removeChild(n,"ignore")}else if(e.type==="root"&&this.type!=="document"){e=e.nodes.slice(0);for(let n of e)n.parent&&n.parent.removeChild(n,"ignore")}else if(e.type)e=[e];else if(e.prop){if(typeof e.value=="undefined")throw new Error("Value field is missed in node creation");typeof e.value!="string"&&(e.value=String(e.value)),e=[new Zi(e)]}else if(e.selector)e=[new Km(e)];else if(e.name)e=[new Hm(e)];else if(e.text)e=[new ta(e)];else throw new Error("Unknown node type in node creation");return e.map(n=>(n[kI]||Mr.rebuild(n),n=n.proxyOf,n.parent&&n.parent.removeChild(n),n[CI]&&DI(n),typeof n.raws.before=="undefined"&&t&&typeof t.raws.before!="undefined"&&(n.raws.before=t.raws.before.replace(/\S/g,"")),n.parent=this,n))}getProxyProcessor(){return{set(e,t,r){return e[t]===r||(e[t]=r,(t==="name"||t==="params"||t==="selector")&&e.markDirty()),!0},get(e,t){return t==="proxyOf"?e:e[t]?t==="each"||typeof t=="string"&&t.startsWith("walk")?(...r)=>e[t](...r.map(n=>typeof n=="function"?(i,a)=>n(i.toProxy(),a):n)):t==="every"||t==="some"?r=>e[t]((n,...i)=>r(n.toProxy(),...i)):t==="root"?()=>e.root().toProxy():t==="nodes"?e.nodes.map(r=>r.toProxy()):t==="first"||t==="last"?e[t].toProxy():e[t]:e[t]}}}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let e=this.lastEach;return this.indexes[e]=0,e}}Mr.registerParse=s=>{NI=s};Mr.registerRule=s=>{Km=s};Mr.registerAtRule=s=>{Hm=s};var ls=Mr;Mr.default=Mr;Mr.rebuild=s=>{s.type==="atrule"?Object.setPrototypeOf(s,Hm.prototype):s.type==="rule"?Object.setPrototypeOf(s,Km.prototype):s.type==="decl"?Object.setPrototypeOf(s,Zi.prototype):s.type==="comment"&&Object.setPrototypeOf(s,ta.prototype),s[kI]=!0,s.nodes&&s.nodes.forEach(e=>{Mr.rebuild(e)})};let RI,MI;class No extends ls{constructor(e){super({type:"document",...e}),this.nodes||(this.nodes=[])}toResult(e={}){return new RI(new MI,this,e).stringify()}}No.registerLazyResult=s=>{RI=s};No.registerProcessor=s=>{MI=s};var ah=No;No.default=No;let Fv={};var LI=function(e){Fv[e]||(Fv[e]=!0,typeof console!="undefined"&&console.warn&&console.warn(e))};class ud{constructor(e,t={}){if(this.type="warning",this.text=e,t.node&&t.node.source){let r=t.node.rangeBy(t);this.line=r.start.line,this.column=r.start.column,this.endLine=r.end.line,this.endColumn=r.end.column}for(let r in t)this[r]=t[r]}toString(){return this.node?this.node.error(this.text,{plugin:this.plugin,index:this.index,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}}var FI=ud;ud.default=ud;class cd{constructor(e,t,r){this.processor=e,this.messages=[],this.root=t,this.opts=r,this.css=void 0,this.map=void 0}toString(){return this.css}warn(e,t={}){t.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(t.plugin=this.lastPlugin.postcssPlugin);let r=new FI(e,t);return this.messages.push(r),r}warnings(){return this.messages.filter(e=>e.type==="warning")}get content(){return this.css}}var Xc=cd;cd.default=cd;class Zc extends ls{constructor(e){super(e),this.type="atrule"}append(...e){return this.proxyOf.nodes||(this.nodes=[]),super.append(...e)}prepend(...e){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...e)}}var oh=Zc;Zc.default=Zc;ls.registerAtRule(Zc);let UI,BI;class Oo extends ls{constructor(e){super(e),this.type="root",this.nodes||(this.nodes=[])}removeChild(e,t){let r=this.index(e);return!t&&r===0&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[r].raws.before),super.removeChild(e)}normalize(e,t,r){let n=super.normalize(e);if(t){if(r==="prepend")this.nodes.length>1?t.raws.before=this.nodes[1].raws.before:delete t.raws.before;else if(this.first!==t)for(let i of n)i.raws.before=t.raws.before}return n}toResult(e={}){return new UI(new BI,this,e).stringify()}}Oo.registerLazyResult=s=>{UI=s};Oo.registerProcessor=s=>{BI=s};var ra=Oo;Oo.default=Oo;let Do={split(s,e,t){let r=[],n="",i=!1,a=0,o=!1,u=!1;for(let c of s)u?u=!1:c==="\\"?u=!0:o?c===o&&(o=!1):c==='"'||c==="'"?o=c:c==="("?a+=1:c===")"?a>0&&(a-=1):a===0&&e.includes(c)&&(i=!0),i?(n!==""&&r.push(n.trim()),n="",i=!1):n+=c;return(t||n!=="")&&r.push(n.trim()),r},space(s){let e=[" ",`
`,"	"];return Do.split(s,e)},comma(s){return Do.split(s,[","],!0)}};var VI=Do;Do.default=Do;class el extends ls{constructor(e){super(e),this.type="rule",this.nodes||(this.nodes=[])}get selectors(){return VI.comma(this.selector)}set selectors(e){let t=this.selector?this.selector.match(/,\s*/):null,r=t?t[0]:","+this.raw("between","beforeOpen");this.selector=e.join(r)}}var Ro=el;el.default=el;ls.registerRule(el);class FB{constructor(e){this.input=e,this.root=new ra,this.current=this.root,this.spaces="",this.semicolon=!1,this.customProperty=!1,this.createTokenizer(),this.root.source={input:e,start:{offset:0,line:1,column:1}}}createTokenizer(){this.tokenizer=hI(this.input)}parse(){let e;for(;!this.tokenizer.endOfFile();)switch(e=this.tokenizer.nextToken(),e[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e);break}this.endFile()}comment(e){let t=new ta;this.init(t,e[2]),t.source.end=this.getPosition(e[3]||e[2]);let r=e[1].slice(2,-2);if(/^\s*$/.test(r))t.text="",t.raws.left=r,t.raws.right="";else{let n=r.match(/^(\s*)([^]*\S)(\s*)$/);t.text=n[2],t.raws.left=n[1],t.raws.right=n[3]}}emptyRule(e){let t=new Ro;this.init(t,e[2]),t.selector="",t.raws.between="",this.current=t}other(e){let t=!1,r=null,n=!1,i=null,a=[],o=e[1].startsWith("--"),u=[],c=e;for(;c;){if(r=c[0],u.push(c),r==="("||r==="[")i||(i=c),a.push(r==="("?")":"]");else if(o&&n&&r==="{")i||(i=c),a.push("}");else if(a.length===0)if(r===";")if(n){this.decl(u,o);return}else break;else if(r==="{"){this.rule(u);return}else if(r==="}"){this.tokenizer.back(u.pop()),t=!0;break}else r===":"&&(n=!0);else r===a[a.length-1]&&(a.pop(),a.length===0&&(i=null));c=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(t=!0),a.length>0&&this.unclosedBracket(i),t&&n){for(;u.length&&(c=u[u.length-1][0],!(c!=="space"&&c!=="comment"));)this.tokenizer.back(u.pop());this.decl(u,o)}else this.unknownWord(u)}rule(e){e.pop();let t=new Ro;this.init(t,e[0][2]),t.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(t,"selector",e),this.current=t}decl(e,t){let r=new Zi;this.init(r,e[0][2]);let n=e[e.length-1];for(n[0]===";"&&(this.semicolon=!0,e.pop()),r.source.end=this.getPosition(n[3]||n[2]);e[0][0]!=="word";)e.length===1&&this.unknownWord(e),r.raws.before+=e.shift()[1];for(r.source.start=this.getPosition(e[0][2]),r.prop="";e.length;){let u=e[0][0];if(u===":"||u==="space"||u==="comment")break;r.prop+=e.shift()[1]}r.raws.between="";let i;for(;e.length;)if(i=e.shift(),i[0]===":"){r.raws.between+=i[1];break}else i[0]==="word"&&/\w/.test(i[1])&&this.unknownWord([i]),r.raws.between+=i[1];(r.prop[0]==="_"||r.prop[0]==="*")&&(r.raws.before+=r.prop[0],r.prop=r.prop.slice(1));let a=this.spacesAndCommentsFromStart(e);this.precheckMissedSemicolon(e);for(let u=e.length-1;u>=0;u--){if(i=e[u],i[1].toLowerCase()==="!important"){r.important=!0;let c=this.stringFrom(e,u);c=this.spacesFromEnd(e)+c,c!==" !important"&&(r.raws.important=c);break}else if(i[1].toLowerCase()==="important"){let c=e.slice(0),l="";for(let h=u;h>0;h--){let f=c[h][0];if(l.trim().indexOf("!")===0&&f!=="space")break;l=c.pop()[1]+l}l.trim().indexOf("!")===0&&(r.important=!0,r.raws.important=l,e=c)}if(i[0]!=="space"&&i[0]!=="comment")break}let o=e.some(u=>u[0]!=="space"&&u[0]!=="comment");this.raw(r,"value",e),o?r.raws.between+=a:r.value=a+r.value,r.value.includes(":")&&!t&&this.checkMissedSemicolon(e)}atrule(e){let t=new oh;t.name=e[1].slice(1),t.name===""&&this.unnamedAtrule(t,e),this.init(t,e[2]);let r,n,i,a=!1,o=!1,u=[],c=[];for(;!this.tokenizer.endOfFile();){if(e=this.tokenizer.nextToken(),r=e[0],r==="("||r==="["?c.push(r==="("?")":"]"):r==="{"&&c.length>0?c.push("}"):r===c[c.length-1]&&c.pop(),c.length===0)if(r===";"){t.source.end=this.getPosition(e[2]),this.semicolon=!0;break}else if(r==="{"){o=!0;break}else if(r==="}"){if(u.length>0){for(i=u.length-1,n=u[i];n&&n[0]==="space";)n=u[--i];n&&(t.source.end=this.getPosition(n[3]||n[2]))}this.end(e);break}else u.push(e);else u.push(e);if(this.tokenizer.endOfFile()){a=!0;break}}t.raws.between=this.spacesAndCommentsFromEnd(u),u.length?(t.raws.afterName=this.spacesAndCommentsFromStart(u),this.raw(t,"params",u),a&&(e=u[u.length-1],t.source.end=this.getPosition(e[3]||e[2]),this.spaces=t.raws.between,t.raws.between="")):(t.raws.afterName="",t.params=""),o&&(t.nodes=[],this.current=t)}end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current=this.current.parent):this.unexpectedClose(e)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces}freeSemicolon(e){if(this.spaces+=e[1],this.current.nodes){let t=this.current.nodes[this.current.nodes.length-1];t&&t.type==="rule"&&!t.raws.ownSemicolon&&(t.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(e){let t=this.input.fromOffset(e);return{offset:e,line:t.line,column:t.col}}init(e,t){this.current.push(e),e.source={start:this.getPosition(t),input:this.input},e.raws.before=this.spaces,this.spaces="",e.type!=="comment"&&(this.semicolon=!1)}raw(e,t,r){let n,i,a=r.length,o="",u=!0,c,l,h=/^([#.|])?(\w)+/i;for(let f=0;f<a;f+=1){if(n=r[f],i=n[0],i==="comment"&&e.type==="rule"){l=r[f-1],c=r[f+1],l[0]!=="space"&&c[0]!=="space"&&h.test(l[1])&&h.test(c[1])?o+=n[1]:u=!1;continue}i==="comment"||i==="space"&&f===a-1?u=!1:o+=n[1]}if(!u){let f=r.reduce((d,g)=>d+g[1],"");e.raws[t]={value:o,raw:f}}e[t]=o}spacesAndCommentsFromEnd(e){let t,r="";for(;e.length&&(t=e[e.length-1][0],!(t!=="space"&&t!=="comment"));)r=e.pop()[1]+r;return r}spacesAndCommentsFromStart(e){let t,r="";for(;e.length&&(t=e[0][0],!(t!=="space"&&t!=="comment"));)r+=e.shift()[1];return r}spacesFromEnd(e){let t,r="";for(;e.length&&(t=e[e.length-1][0],t==="space");)r=e.pop()[1]+r;return r}stringFrom(e,t){let r="";for(let n=t;n<e.length;n++)r+=e[n][1];return e.splice(t,e.length-t),r}colon(e){let t=0,r,n,i;for(let[a,o]of e.entries()){if(r=o,n=r[0],n==="("&&(t+=1),n===")"&&(t-=1),t===0&&n===":")if(!i)this.doubleColon(r);else{if(i[0]==="word"&&i[1]==="progid")continue;return a}i=r}return!1}unclosedBracket(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}unknownWord(e){throw this.input.error("Unknown word",{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}unexpectedClose(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}unclosedBlock(){let e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}doubleColon(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}unnamedAtrule(e,t){throw this.input.error("At-rule without name",{offset:t[2]},{offset:t[2]+t[1].length})}precheckMissedSemicolon(){}checkMissedSemicolon(e){let t=this.colon(e);if(t===!1)return;let r=0,n;for(let i=t-1;i>=0&&(n=e[i],!(n[0]!=="space"&&(r+=1,r===2)));i--);throw this.input.error("Missed semicolon",n[0]==="word"?n[3]+1:n[2])}}var UB=FB;function tl(s,e){let t=new ih(s,e),r=new UB(t);try{r.parse()}catch(n){throw n.name==="CssSyntaxError"&&e&&e.from&&(/\.scss$/i.test(e.from)?n.message+=`
You tried to parse SCSS with the standard CSS parser; try again with the postcss-scss parser`:/\.sass/i.test(e.from)?n.message+=`
You tried to parse Sass with the standard CSS parser; try again with the postcss-sass parser`:/\.less$/i.test(e.from)&&(n.message+=`
You tried to parse Less with the standard CSS parser; try again with the postcss-less parser`)),n}return r.root}var Qm=tl;tl.default=tl;ls.registerParse(tl);let{isClean:pr,my:BB}=$m;const VB={document:"Document",root:"Root",atrule:"AtRule",rule:"Rule",decl:"Declaration",comment:"Comment"},qB={postcssPlugin:!0,prepare:!0,Once:!0,Document:!0,Root:!0,Declaration:!0,Rule:!0,AtRule:!0,Comment:!0,DeclarationExit:!0,RuleExit:!0,AtRuleExit:!0,CommentExit:!0,RootExit:!0,DocumentExit:!0,OnceExit:!0},$B={postcssPlugin:!0,prepare:!0,Once:!0},Li=0;function wa(s){return typeof s=="object"&&typeof s.then=="function"}function qI(s){let e=!1,t=VB[s.type];return s.type==="decl"?e=s.prop.toLowerCase():s.type==="atrule"&&(e=s.name.toLowerCase()),e&&s.append?[t,t+"-"+e,Li,t+"Exit",t+"Exit-"+e]:e?[t,t+"-"+e,t+"Exit",t+"Exit-"+e]:s.append?[t,Li,t+"Exit"]:[t,t+"Exit"]}function Uv(s){let e;return s.type==="document"?e=["Document",Li,"DocumentExit"]:s.type==="root"?e=["Root",Li,"RootExit"]:e=qI(s),{node:s,events:e,eventIndex:0,visitors:[],visitorIndex:0,iterator:0}}function ld(s){return s[pr]=!1,s.nodes&&s.nodes.forEach(e=>ld(e)),s}let hd={};class Ls{constructor(e,t,r){this.stringified=!1,this.processed=!1;let n;if(typeof t=="object"&&t!==null&&(t.type==="root"||t.type==="document"))n=ld(t);else if(t instanceof Ls||t instanceof Xc)n=ld(t.root),t.map&&(typeof r.map=="undefined"&&(r.map={}),r.map.inline||(r.map.inline=!1),r.map.prev=t.map);else{let i=Qm;r.syntax&&(i=r.syntax.parse),r.parser&&(i=r.parser),i.parse&&(i=i.parse);try{n=i(t,r)}catch(a){this.processed=!0,this.error=a}n&&!n[BB]&&ls.rebuild(n)}this.result=new Xc(e,n,r),this.helpers={...hd,result:this.result,postcss:hd},this.plugins=this.processor.plugins.map(i=>typeof i=="object"&&i.prepare?{...i,...i.prepare(this.result)}:i)}get[Symbol.toStringTag](){return"LazyResult"}get processor(){return this.result.processor}get opts(){return this.result.opts}get css(){return this.stringify().css}get content(){return this.stringify().content}get map(){return this.stringify().map}get root(){return this.sync().root}get messages(){return this.sync().messages}warnings(){return this.sync().warnings()}toString(){return this.css}then(e,t){return"from"in this.opts||LI("Without `from` option PostCSS could generate wrong source map and will not find Browserslist config. Set it to CSS file path or to `undefined` to prevent this warning."),this.async().then(e,t)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let e of this.plugins){let t=this.runOnRoot(e);if(wa(t))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[pr];)e[pr]=!0,this.walkSync(e);if(this.listeners.OnceExit)if(e.type==="document")for(let t of e.nodes)this.visitSync(this.listeners.OnceExit,t);else this.visitSync(this.listeners.OnceExit,e)}return this.result}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let e=this.result.opts,t=rh;e.syntax&&(t=e.syntax.stringify),e.stringifier&&(t=e.stringifier),t.stringify&&(t=t.stringify);let n=new PI(t,this.result.root,this.result.opts).generate();return this.result.css=n[0],this.result.map=n[1],this.result}walkSync(e){e[pr]=!0;let t=qI(e);for(let r of t)if(r===Li)e.nodes&&e.each(n=>{n[pr]||this.walkSync(n)});else{let n=this.listeners[r];if(n&&this.visitSync(n,e.toProxy()))return}}visitSync(e,t){for(let[r,n]of e){this.result.lastPlugin=r;let i;try{i=n(t,this.helpers)}catch(a){throw this.handleError(a,t.proxyOf)}if(t.type!=="root"&&t.type!=="document"&&!t.parent)return!0;if(wa(i))throw this.getAsyncError()}}runOnRoot(e){this.result.lastPlugin=e;try{if(typeof e=="object"&&e.Once){if(this.result.root.type==="document"){let t=this.result.root.nodes.map(r=>e.Once(r,this.helpers));return wa(t[0])?Promise.all(t):t}return e.Once(this.result.root,this.helpers)}else if(typeof e=="function")return e(this.result.root,this.result)}catch(t){throw this.handleError(t)}}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(e,t){let r=this.result.lastPlugin;try{if(t&&t.addToError(e),this.error=e,e.name==="CssSyntaxError"&&!e.plugin)e.plugin=r.postcssPlugin,e.setMessage();else if(r.postcssVersion&&{}.NODE_ENV!=="production"){let n=r.postcssPlugin,i=r.postcssVersion,a=this.result.processor.version,o=i.split("."),u=a.split(".");(o[0]!==u[0]||parseInt(o[1])>parseInt(u[1]))&&console.error("Unknown error from PostCSS plugin. Your current PostCSS version is "+a+", but "+n+" uses "+i+". Perhaps this is the source of the error below.")}}catch(n){console&&console.error&&console.error(n)}return e}async runAsync(){this.plugin=0;for(let e=0;e<this.plugins.length;e++){let t=this.plugins[e],r=this.runOnRoot(t);if(wa(r))try{await r}catch(n){throw this.handleError(n)}}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[pr];){e[pr]=!0;let t=[Uv(e)];for(;t.length>0;){let r=this.visitTick(t);if(wa(r))try{await r}catch(n){let i=t[t.length-1].node;throw this.handleError(n,i)}}}if(this.listeners.OnceExit)for(let[t,r]of this.listeners.OnceExit){this.result.lastPlugin=t;try{if(e.type==="document"){let n=e.nodes.map(i=>r(i,this.helpers));await Promise.all(n)}else await r(e,this.helpers)}catch(n){throw this.handleError(n)}}}return this.processed=!0,this.stringify()}prepareVisitors(){this.listeners={};let e=(t,r,n)=>{this.listeners[r]||(this.listeners[r]=[]),this.listeners[r].push([t,n])};for(let t of this.plugins)if(typeof t=="object")for(let r in t){if(!qB[r]&&/^[A-Z]/.test(r))throw new Error(`Unknown event ${r} in ${t.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!$B[r])if(typeof t[r]=="object")for(let n in t[r])n==="*"?e(t,r,t[r][n]):e(t,r+"-"+n.toLowerCase(),t[r][n]);else typeof t[r]=="function"&&e(t,r,t[r])}this.hasListener=Object.keys(this.listeners).length>0}visitTick(e){let t=e[e.length-1],{node:r,visitors:n}=t;if(r.type!=="root"&&r.type!=="document"&&!r.parent){e.pop();return}if(n.length>0&&t.visitorIndex<n.length){let[a,o]=n[t.visitorIndex];t.visitorIndex+=1,t.visitorIndex===n.length&&(t.visitors=[],t.visitorIndex=0),this.result.lastPlugin=a;try{return o(r.toProxy(),this.helpers)}catch(u){throw this.handleError(u,r)}}if(t.iterator!==0){let a=t.iterator,o;for(;o=r.nodes[r.indexes[a]];)if(r.indexes[a]+=1,!o[pr]){o[pr]=!0,e.push(Uv(o));return}t.iterator=0,delete r.indexes[a]}let i=t.events;for(;t.eventIndex<i.length;){let a=i[t.eventIndex];if(t.eventIndex+=1,a===Li){r.nodes&&r.nodes.length&&(r[pr]=!0,t.iterator=r.getIterator());return}else if(this.listeners[a]){t.visitors=this.listeners[a];return}}e.pop()}}Ls.registerPostcss=s=>{hd=s};var $I=Ls;Ls.default=Ls;ra.registerLazyResult(Ls);ah.registerLazyResult(Ls);class fd{constructor(e,t,r){t=t.toString(),this.stringified=!1,this._processor=e,this._css=t,this._opts=r,this._map=void 0;let n,i=rh;this.result=new Xc(this._processor,n,this._opts),this.result.css=t;let a=this;Object.defineProperty(this.result,"root",{get(){return a.root}});let o=new PI(i,n,this._opts,t);if(o.isMap()){let[u,c]=o.generate();u&&(this.result.css=u),c&&(this.result.map=c)}}get[Symbol.toStringTag](){return"NoWorkResult"}get processor(){return this.result.processor}get opts(){return this.result.opts}get css(){return this.result.css}get content(){return this.result.css}get map(){return this.result.map}get root(){if(this._root)return this._root;let e,t=Qm;try{e=t(this._css,this._opts)}catch(r){this.error=r}return this._root=e,e}get messages(){return[]}warnings(){return[]}toString(){return this._css}then(e,t){return"from"in this._opts||LI("Without `from` option PostCSS could generate wrong source map and will not find Browserslist config. Set it to CSS file path or to `undefined` to prevent this warning."),this.async().then(e,t)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}sync(){if(this.error)throw this.error;return this.result}}var jB=fd;fd.default=fd;class Mo{constructor(e=[]){this.version="8.4.4",this.plugins=this.normalize(e)}use(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}process(e,t={}){return this.plugins.length===0&&typeof t.parser=="undefined"&&typeof t.stringifier=="undefined"&&typeof t.syntax=="undefined"?new jB(this,e,t):new $I(this,e,t)}normalize(e){let t=[];for(let r of e)if(r.postcss===!0?r=r():r.postcss&&(r=r.postcss),typeof r=="object"&&Array.isArray(r.plugins))t=t.concat(r.plugins);else if(typeof r=="object"&&r.postcssPlugin)t.push(r);else if(typeof r=="function")t.push(r);else throw typeof r=="object"&&(r.parse||r.stringify)?new Error("PostCSS syntaxes cannot be used as plugins. Instead, please use one of the syntax/parser/stringifier options as outlined in your PostCSS runner documentation."):new Error(r+" is not a PostCSS plugin");return t}}var Ym=Mo;Mo.default=Mo;ra.registerProcessor(Mo);ah.registerProcessor(Mo);function Lo(s,e){if(Array.isArray(s))return s.map(n=>Lo(n));let{inputs:t,...r}=s;if(t){e=[];for(let n of t){let i={...n,__proto__:ih.prototype};i.map&&(i.map={...i.map,__proto__:SI.prototype}),e.push(i)}}if(r.nodes&&(r.nodes=s.nodes.map(n=>Lo(n,e))),r.source){let{inputId:n,...i}=r.source;r.source=i,n!=null&&(r.source.input=e[n])}if(r.type==="root")return new ra(r);if(r.type==="decl")return new Zi(r);if(r.type==="rule")return new Ro(r);if(r.type==="comment")return new ta(r);if(r.type==="atrule")return new oh(r);throw new Error("Unknown node type: "+s.type)}var GB=Lo;Lo.default=Lo;function Ae(...s){return s.length===1&&Array.isArray(s[0])&&(s=s[0]),new Ym(s)}Ae.plugin=function(e,t){console&&console.warn&&console.warn(e+`: postcss.plugin was deprecated. Migration guide:
https://evilmartians.com/chronicles/postcss-8-plugin-migration`);function r(...i){let a=t(...i);return a.postcssPlugin=e,a.postcssVersion=new Ym().version,a}let n;return Object.defineProperty(r,"postcss",{get(){return n||(n=r()),n}}),r.process=function(i,a,o){return Ae([r(o)]).process(i,a)},r};Ae.stringify=rh;Ae.parse=Qm;Ae.fromJSON=GB;Ae.list=VI;Ae.comment=s=>new ta(s);Ae.atRule=s=>new oh(s);Ae.decl=s=>new Zi(s);Ae.rule=s=>new Ro(s);Ae.root=s=>new ra(s);Ae.document=s=>new ah(s);Ae.CssSyntaxError=Qc;Ae.Declaration=Zi;Ae.Container=ls;Ae.Processor=Ym;Ae.Document=ah;Ae.Comment=ta;Ae.Warning=FI;Ae.AtRule=oh;Ae.Result=Xc;Ae.Input=ih;Ae.Rule=Ro;Ae.Root=ra;Ae.Node=sh;$I.registerPostcss(Ae);Ae.default=Ae;var jI=be(function(s,e){e.__esModule=!0,e.default=n;function t(i){for(var a=i.toLowerCase(),o="",u=!1,c=0;c<6&&a[c]!==void 0;c++){var l=a.charCodeAt(c),h=l>=97&&l<=102||l>=48&&l<=57;if(u=l===32,!h)break;o+=a[c]}if(o.length!==0){var f=parseInt(o,16),d=f>=55296&&f<=57343;return d||f===0||f>1114111?["\uFFFD",o.length+(u?1:0)]:[String.fromCodePoint(f),o.length+(u?1:0)]}}var r=/\\/;function n(i){var a=r.test(i);if(!a)return i;for(var o="",u=0;u<i.length;u++){if(i[u]==="\\"){var c=t(i.slice(u+1,u+7));if(c!==void 0){o+=c[0],u+=c[1];continue}if(i[u+1]==="\\"){o+="\\",u++;continue}i.length===u+1&&(o+=i[u]);continue}o+=i[u]}return o}s.exports=e.default}),zB=be(function(s,e){e.__esModule=!0,e.default=t;function t(r){for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];for(;i.length>0;){var o=i.shift();if(!r[o])return;r=r[o]}return r}s.exports=e.default}),WB=be(function(s,e){e.__esModule=!0,e.default=t;function t(r){for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];for(;i.length>0;){var o=i.shift();r[o]||(r[o]={}),r=r[o]}}s.exports=e.default}),KB=be(function(s,e){e.__esModule=!0,e.default=t;function t(r){for(var n="",i=r.indexOf("/*"),a=0;i>=0;){n=n+r.slice(a,i);var o=r.indexOf("*/",i+2);if(o<0)return n;a=o+2,i=r.indexOf("/*",a)}return n=n+r.slice(a),n}s.exports=e.default}),_e=be(function(s,e){e.__esModule=!0,e.stripComments=e.ensureObject=e.getProp=e.unesc=void 0;var t=a(jI);e.unesc=t.default;var r=a(zB);e.getProp=r.default;var n=a(WB);e.ensureObject=n.default;var i=a(KB);e.stripComments=i.default;function a(o){return o&&o.__esModule?o:{default:o}}}),zs=be(function(s,e){e.__esModule=!0,e.default=void 0;function t(a,o){for(var u=0;u<o.length;u++){var c=o[u];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}}function r(a,o,u){return o&&t(a.prototype,o),u&&t(a,u),a}var n=function a(o,u){if(typeof o!="object"||o===null)return o;var c=new o.constructor;for(var l in o)if(!!o.hasOwnProperty(l)){var h=o[l],f=typeof h;l==="parent"&&f==="object"?u&&(c[l]=u):h instanceof Array?c[l]=h.map(function(d){return a(d,c)}):c[l]=a(h,c)}return c},i=function(){function a(u){u===void 0&&(u={}),Object.assign(this,u),this.spaces=this.spaces||{},this.spaces.before=this.spaces.before||"",this.spaces.after=this.spaces.after||""}var o=a.prototype;return o.remove=function(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this},o.replaceWith=function(){if(this.parent){for(var c in arguments)this.parent.insertBefore(this,arguments[c]);this.remove()}return this},o.next=function(){return this.parent.at(this.parent.index(this)+1)},o.prev=function(){return this.parent.at(this.parent.index(this)-1)},o.clone=function(c){c===void 0&&(c={});var l=n(this);for(var h in c)l[h]=c[h];return l},o.appendToPropertyAndEscape=function(c,l,h){this.raws||(this.raws={});var f=this[c],d=this.raws[c];this[c]=f+l,d||h!==l?this.raws[c]=(d||f)+h:delete this.raws[c]},o.setPropertyAndEscape=function(c,l,h){this.raws||(this.raws={}),this[c]=l,this.raws[c]=h},o.setPropertyWithoutEscape=function(c,l){this[c]=l,this.raws&&delete this.raws[c]},o.isAtPosition=function(c,l){if(this.source&&this.source.start&&this.source.end)return!(this.source.start.line>c||this.source.end.line<c||this.source.start.line===c&&this.source.start.column>l||this.source.end.line===c&&this.source.end.column<l)},o.stringifyProperty=function(c){return this.raws&&this.raws[c]||this[c]},o.valueToString=function(){return String(this.stringifyProperty("value"))},o.toString=function(){return[this.rawSpaceBefore,this.valueToString(),this.rawSpaceAfter].join("")},r(a,[{key:"rawSpaceBefore",get:function(){var c=this.raws&&this.raws.spaces&&this.raws.spaces.before;return c===void 0&&(c=this.spaces&&this.spaces.before),c||""},set:function(c){(0,_e.ensureObject)(this,"raws","spaces"),this.raws.spaces.before=c}},{key:"rawSpaceAfter",get:function(){var c=this.raws&&this.raws.spaces&&this.raws.spaces.after;return c===void 0&&(c=this.spaces.after),c||""},set:function(c){(0,_e.ensureObject)(this,"raws","spaces"),this.raws.spaces.after=c}}]),a}();e.default=i,s.exports=e.default}),he=be(function(s,e){e.__esModule=!0,e.UNIVERSAL=e.ATTRIBUTE=e.CLASS=e.COMBINATOR=e.COMMENT=e.ID=e.NESTING=e.PSEUDO=e.ROOT=e.SELECTOR=e.STRING=e.TAG=void 0;var t="tag";e.TAG=t;var r="string";e.STRING=r;var n="selector";e.SELECTOR=n;var i="root";e.ROOT=i;var a="pseudo";e.PSEUDO=a;var o="nesting";e.NESTING=o;var u="id";e.ID=u;var c="comment";e.COMMENT=c;var l="combinator";e.COMBINATOR=l;var h="class";e.CLASS=h;var f="attribute";e.ATTRIBUTE=f;var d="universal";e.UNIVERSAL=d}),Jm=be(function(s,e){e.__esModule=!0,e.default=void 0;var t=a(zs),r=i(he);function n(){if(typeof WeakMap!="function")return null;var p=new WeakMap;return n=function(){return p},p}function i(p){if(p&&p.__esModule)return p;if(p===null||typeof p!="object"&&typeof p!="function")return{default:p};var m=n();if(m&&m.has(p))return m.get(p);var v={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var b in p)if(Object.prototype.hasOwnProperty.call(p,b)){var I=S?Object.getOwnPropertyDescriptor(p,b):null;I&&(I.get||I.set)?Object.defineProperty(v,b,I):v[b]=p[b]}return v.default=p,m&&m.set(p,v),v}function a(p){return p&&p.__esModule?p:{default:p}}function o(p,m){var v;if(typeof Symbol=="undefined"||p[Symbol.iterator]==null){if(Array.isArray(p)||(v=u(p))||m&&p&&typeof p.length=="number"){v&&(p=v);var S=0;return function(){return S>=p.length?{done:!0}:{done:!1,value:p[S++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return v=p[Symbol.iterator](),v.next.bind(v)}function u(p,m){if(!!p){if(typeof p=="string")return c(p,m);var v=Object.prototype.toString.call(p).slice(8,-1);if(v==="Object"&&p.constructor&&(v=p.constructor.name),v==="Map"||v==="Set")return Array.from(p);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return c(p,m)}}function c(p,m){(m==null||m>p.length)&&(m=p.length);for(var v=0,S=new Array(m);v<m;v++)S[v]=p[v];return S}function l(p,m){for(var v=0;v<m.length;v++){var S=m[v];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(p,S.key,S)}}function h(p,m,v){return m&&l(p.prototype,m),v&&l(p,v),p}function f(p,m){p.prototype=Object.create(m.prototype),p.prototype.constructor=p,d(p,m)}function d(p,m){return d=Object.setPrototypeOf||function(S,b){return S.__proto__=b,S},d(p,m)}var g=function(p){f(m,p);function m(S){var b;return b=p.call(this,S)||this,b.nodes||(b.nodes=[]),b}var v=m.prototype;return v.append=function(b){return b.parent=this,this.nodes.push(b),this},v.prepend=function(b){return b.parent=this,this.nodes.unshift(b),this},v.at=function(b){return this.nodes[b]},v.index=function(b){return typeof b=="number"?b:this.nodes.indexOf(b)},v.removeChild=function(b){b=this.index(b),this.at(b).parent=void 0,this.nodes.splice(b,1);var I;for(var y in this.indexes)I=this.indexes[y],I>=b&&(this.indexes[y]=I-1);return this},v.removeAll=function(){for(var b=o(this.nodes),I;!(I=b()).done;){var y=I.value;y.parent=void 0}return this.nodes=[],this},v.empty=function(){return this.removeAll()},v.insertAfter=function(b,I){I.parent=this;var y=this.index(b);this.nodes.splice(y+1,0,I),I.parent=this;var T;for(var P in this.indexes)T=this.indexes[P],y<=T&&(this.indexes[P]=T+1);return this},v.insertBefore=function(b,I){I.parent=this;var y=this.index(b);this.nodes.splice(y,0,I),I.parent=this;var T;for(var P in this.indexes)T=this.indexes[P],T<=y&&(this.indexes[P]=T+1);return this},v._findChildAtPosition=function(b,I){var y=void 0;return this.each(function(T){if(T.atPosition){var P=T.atPosition(b,I);if(P)return y=P,!1}else if(T.isAtPosition(b,I))return y=T,!1}),y},v.atPosition=function(b,I){if(this.isAtPosition(b,I))return this._findChildAtPosition(b,I)||this},v._inferEndPosition=function(){this.last&&this.last.source&&this.last.source.end&&(this.source=this.source||{},this.source.end=this.source.end||{},Object.assign(this.source.end,this.last.source.end))},v.each=function(b){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach++;var I=this.lastEach;if(this.indexes[I]=0,!!this.length){for(var y,T;this.indexes[I]<this.length&&(y=this.indexes[I],T=b(this.at(y),y),T!==!1);)this.indexes[I]+=1;if(delete this.indexes[I],T===!1)return!1}},v.walk=function(b){return this.each(function(I,y){var T=b(I,y);if(T!==!1&&I.length&&(T=I.walk(b)),T===!1)return!1})},v.walkAttributes=function(b){var I=this;return this.walk(function(y){if(y.type===r.ATTRIBUTE)return b.call(I,y)})},v.walkClasses=function(b){var I=this;return this.walk(function(y){if(y.type===r.CLASS)return b.call(I,y)})},v.walkCombinators=function(b){var I=this;return this.walk(function(y){if(y.type===r.COMBINATOR)return b.call(I,y)})},v.walkComments=function(b){var I=this;return this.walk(function(y){if(y.type===r.COMMENT)return b.call(I,y)})},v.walkIds=function(b){var I=this;return this.walk(function(y){if(y.type===r.ID)return b.call(I,y)})},v.walkNesting=function(b){var I=this;return this.walk(function(y){if(y.type===r.NESTING)return b.call(I,y)})},v.walkPseudos=function(b){var I=this;return this.walk(function(y){if(y.type===r.PSEUDO)return b.call(I,y)})},v.walkTags=function(b){var I=this;return this.walk(function(y){if(y.type===r.TAG)return b.call(I,y)})},v.walkUniversals=function(b){var I=this;return this.walk(function(y){if(y.type===r.UNIVERSAL)return b.call(I,y)})},v.split=function(b){var I=this,y=[];return this.reduce(function(T,P,E){var w=b.call(I,P);return y.push(P),w?(T.push(y),y=[]):E===I.length-1&&T.push(y),T},[])},v.map=function(b){return this.nodes.map(b)},v.reduce=function(b,I){return this.nodes.reduce(b,I)},v.every=function(b){return this.nodes.every(b)},v.some=function(b){return this.nodes.some(b)},v.filter=function(b){return this.nodes.filter(b)},v.sort=function(b){return this.nodes.sort(b)},v.toString=function(){return this.map(String).join("")},h(m,[{key:"first",get:function(){return this.at(0)}},{key:"last",get:function(){return this.at(this.length-1)}},{key:"length",get:function(){return this.nodes.length}}]),m}(t.default);e.default=g,s.exports=e.default}),GI=be(function(s,e){e.__esModule=!0,e.default=void 0;var t=r(Jm);function r(c){return c&&c.__esModule?c:{default:c}}function n(c,l){for(var h=0;h<l.length;h++){var f=l[h];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}function i(c,l,h){return l&&n(c.prototype,l),h&&n(c,h),c}function a(c,l){c.prototype=Object.create(l.prototype),c.prototype.constructor=c,o(c,l)}function o(c,l){return o=Object.setPrototypeOf||function(f,d){return f.__proto__=d,f},o(c,l)}var u=function(c){a(l,c);function l(f){var d;return d=c.call(this,f)||this,d.type=he.ROOT,d}var h=l.prototype;return h.toString=function(){var d=this.reduce(function(g,p){return g.push(String(p)),g},[]).join(",");return this.trailingComma?d+",":d},h.error=function(d,g){return this._error?this._error(d,g):new Error(d)},i(l,[{key:"errorGenerator",set:function(d){this._error=d}}]),l}(t.default);e.default=u,s.exports=e.default}),zI=be(function(s,e){e.__esModule=!0,e.default=void 0;var t=r(Jm);function r(o){return o&&o.__esModule?o:{default:o}}function n(o,u){o.prototype=Object.create(u.prototype),o.prototype.constructor=o,i(o,u)}function i(o,u){return i=Object.setPrototypeOf||function(l,h){return l.__proto__=h,l},i(o,u)}var a=function(o){n(u,o);function u(c){var l;return l=o.call(this,c)||this,l.type=he.SELECTOR,l}return u}(t.default);e.default=a,s.exports=e.default});/*! https://mths.be/cssesc v3.0.0 by @mathias */var HB={},QB=HB.hasOwnProperty,YB=function(e,t){if(!e)return t;var r={};for(var n in t)r[n]=QB.call(e,n)?e[n]:t[n];return r},JB=/[ -,\.\/:-@\[-\^`\{-~]/,XB=/[ -,\.\/:-@\[\]\^`\{-~]/,ZB=/(^|\\+)?(\\[A-F0-9]{1,6})\x20(?![a-fA-F0-9\x20])/g,Xm=function s(e,t){t=YB(t,s.options),t.quotes!="single"&&t.quotes!="double"&&(t.quotes="single");for(var r=t.quotes=="double"?'"':"'",n=t.isIdentifier,i=e.charAt(0),a="",o=0,u=e.length;o<u;){var c=e.charAt(o++),l=c.charCodeAt(),h=void 0;if(l<32||l>126){if(l>=55296&&l<=56319&&o<u){var f=e.charCodeAt(o++);(f&64512)==56320?l=((l&1023)<<10)+(f&1023)+65536:o--}h="\\"+l.toString(16).toUpperCase()+" "}else t.escapeEverything?JB.test(c)?h="\\"+c:h="\\"+l.toString(16).toUpperCase()+" ":/[\t\n\f\r\x0B]/.test(c)?h="\\"+l.toString(16).toUpperCase()+" ":c=="\\"||!n&&(c=='"'&&r==c||c=="'"&&r==c)||n&&XB.test(c)?h="\\"+c:h=c;a+=h}return n&&(/^-[-\d]/.test(a)?a="\\-"+a.slice(1):/\d/.test(i)&&(a="\\3"+i+" "+a.slice(1))),a=a.replace(ZB,function(d,g,p){return g&&g.length%2?d:(g||"")+p}),!n&&t.wrap?r+a+r:a};Xm.options={escapeEverything:!1,isIdentifier:!1,quotes:"single",wrap:!1};Xm.version="3.0.0";var Zm=Xm,WI=be(function(s,e){e.__esModule=!0,e.default=void 0;var t=n(Zm),r=n(zs);function n(l){return l&&l.__esModule?l:{default:l}}function i(l,h){for(var f=0;f<h.length;f++){var d=h[f];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(l,d.key,d)}}function a(l,h,f){return h&&i(l.prototype,h),f&&i(l,f),l}function o(l,h){l.prototype=Object.create(h.prototype),l.prototype.constructor=l,u(l,h)}function u(l,h){return u=Object.setPrototypeOf||function(d,g){return d.__proto__=g,d},u(l,h)}var c=function(l){o(h,l);function h(d){var g;return g=l.call(this,d)||this,g.type=he.CLASS,g._constructed=!0,g}var f=h.prototype;return f.valueToString=function(){return"."+l.prototype.valueToString.call(this)},a(h,[{key:"value",get:function(){return this._value},set:function(g){if(this._constructed){var p=(0,t.default)(g,{isIdentifier:!0});p!==g?((0,_e.ensureObject)(this,"raws"),this.raws.value=p):this.raws&&delete this.raws.value}this._value=g}}]),h}(r.default);e.default=c,s.exports=e.default}),KI=be(function(s,e){e.__esModule=!0,e.default=void 0;var t=r(zs);function r(o){return o&&o.__esModule?o:{default:o}}function n(o,u){o.prototype=Object.create(u.prototype),o.prototype.constructor=o,i(o,u)}function i(o,u){return i=Object.setPrototypeOf||function(l,h){return l.__proto__=h,l},i(o,u)}var a=function(o){n(u,o);function u(c){var l;return l=o.call(this,c)||this,l.type=he.COMMENT,l}return u}(t.default);e.default=a,s.exports=e.default}),HI=be(function(s,e){e.__esModule=!0,e.default=void 0;var t=r(zs);function r(o){return o&&o.__esModule?o:{default:o}}function n(o,u){o.prototype=Object.create(u.prototype),o.prototype.constructor=o,i(o,u)}function i(o,u){return i=Object.setPrototypeOf||function(l,h){return l.__proto__=h,l},i(o,u)}var a=function(o){n(u,o);function u(l){var h;return h=o.call(this,l)||this,h.type=he.ID,h}var c=u.prototype;return c.valueToString=function(){return"#"+o.prototype.valueToString.call(this)},u}(t.default);e.default=a,s.exports=e.default}),eg=be(function(s,e){e.__esModule=!0,e.default=void 0;var t=n(Zm),r=n(zs);function n(l){return l&&l.__esModule?l:{default:l}}function i(l,h){for(var f=0;f<h.length;f++){var d=h[f];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(l,d.key,d)}}function a(l,h,f){return h&&i(l.prototype,h),f&&i(l,f),l}function o(l,h){l.prototype=Object.create(h.prototype),l.prototype.constructor=l,u(l,h)}function u(l,h){return u=Object.setPrototypeOf||function(d,g){return d.__proto__=g,d},u(l,h)}var c=function(l){o(h,l);function h(){return l.apply(this,arguments)||this}var f=h.prototype;return f.qualifiedName=function(g){return this.namespace?this.namespaceString+"|"+g:g},f.valueToString=function(){return this.qualifiedName(l.prototype.valueToString.call(this))},a(h,[{key:"namespace",get:function(){return this._namespace},set:function(g){if(g===!0||g==="*"||g==="&"){this._namespace=g,this.raws&&delete this.raws.namespace;return}var p=(0,t.default)(g,{isIdentifier:!0});this._namespace=g,p!==g?((0,_e.ensureObject)(this,"raws"),this.raws.namespace=p):this.raws&&delete this.raws.namespace}},{key:"ns",get:function(){return this._namespace},set:function(g){this.namespace=g}},{key:"namespaceString",get:function(){if(this.namespace){var g=this.stringifyProperty("namespace");return g===!0?"":g}else return""}}]),h}(r.default);e.default=c,s.exports=e.default}),QI=be(function(s,e){e.__esModule=!0,e.default=void 0;var t=r(eg);function r(o){return o&&o.__esModule?o:{default:o}}function n(o,u){o.prototype=Object.create(u.prototype),o.prototype.constructor=o,i(o,u)}function i(o,u){return i=Object.setPrototypeOf||function(l,h){return l.__proto__=h,l},i(o,u)}var a=function(o){n(u,o);function u(c){var l;return l=o.call(this,c)||this,l.type=he.TAG,l}return u}(t.default);e.default=a,s.exports=e.default}),YI=be(function(s,e){e.__esModule=!0,e.default=void 0;var t=r(zs);function r(o){return o&&o.__esModule?o:{default:o}}function n(o,u){o.prototype=Object.create(u.prototype),o.prototype.constructor=o,i(o,u)}function i(o,u){return i=Object.setPrototypeOf||function(l,h){return l.__proto__=h,l},i(o,u)}var a=function(o){n(u,o);function u(c){var l;return l=o.call(this,c)||this,l.type=he.STRING,l}return u}(t.default);e.default=a,s.exports=e.default}),JI=be(function(s,e){e.__esModule=!0,e.default=void 0;var t=r(Jm);function r(o){return o&&o.__esModule?o:{default:o}}function n(o,u){o.prototype=Object.create(u.prototype),o.prototype.constructor=o,i(o,u)}function i(o,u){return i=Object.setPrototypeOf||function(l,h){return l.__proto__=h,l},i(o,u)}var a=function(o){n(u,o);function u(l){var h;return h=o.call(this,l)||this,h.type=he.PSEUDO,h}var c=u.prototype;return c.toString=function(){var h=this.length?"("+this.map(String).join(",")+")":"";return[this.rawSpaceBefore,this.stringifyProperty("value"),h,this.rawSpaceAfter].join("")},u}(t.default);e.default=a,s.exports=e.default}),Ta=IU.deprecate,XI=be(function(s,e){e.__esModule=!0,e.unescapeValue=p,e.default=void 0;var t=a(Zm),r=a(jI),n=a(eg),i;function a(I){return I&&I.__esModule?I:{default:I}}function o(I,y){for(var T=0;T<y.length;T++){var P=y[T];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(I,P.key,P)}}function u(I,y,T){return y&&o(I.prototype,y),T&&o(I,T),I}function c(I,y){I.prototype=Object.create(y.prototype),I.prototype.constructor=I,l(I,y)}function l(I,y){return l=Object.setPrototypeOf||function(P,E){return P.__proto__=E,P},l(I,y)}var h=/^('|")([^]*)\1$/,f=Ta(function(){},"Assigning an attribute a value containing characters that might need to be escaped is deprecated. Call attribute.setValue() instead."),d=Ta(function(){},"Assigning attr.quoted is deprecated and has no effect. Assign to attr.quoteMark instead."),g=Ta(function(){},"Constructing an Attribute selector with a value without specifying quoteMark is deprecated. Note: The value should be unescaped now.");function p(I){var y=!1,T=null,P=I,E=P.match(h);return E&&(T=E[1],P=E[2]),P=(0,r.default)(P),P!==I&&(y=!0),{deprecatedUsage:y,unescaped:P,quoteMark:T}}function m(I){if(I.quoteMark!==void 0||I.value===void 0)return I;g();var y=p(I.value),T=y.quoteMark,P=y.unescaped;return I.raws||(I.raws={}),I.raws.value===void 0&&(I.raws.value=I.value),I.value=P,I.quoteMark=T,I}var v=function(I){c(y,I);function y(P){var E;return P===void 0&&(P={}),E=I.call(this,m(P))||this,E.type=he.ATTRIBUTE,E.raws=E.raws||{},Object.defineProperty(E.raws,"unquoted",{get:Ta(function(){return E.value},"attr.raws.unquoted is deprecated. Call attr.value instead."),set:Ta(function(){return E.value},"Setting attr.raws.unquoted is deprecated and has no effect. attr.value is unescaped by default now.")}),E._constructed=!0,E}var T=y.prototype;return T.getQuotedValue=function(E){E===void 0&&(E={});var w=this._determineQuoteMark(E),x=S[w],C=(0,t.default)(this._value,x);return C},T._determineQuoteMark=function(E){return E.smart?this.smartQuoteMark(E):this.preferredQuoteMark(E)},T.setValue=function(E,w){w===void 0&&(w={}),this._value=E,this._quoteMark=this._determineQuoteMark(w),this._syncRawValue()},T.smartQuoteMark=function(E){var w=this.value,x=w.replace(/[^']/g,"").length,C=w.replace(/[^"]/g,"").length;if(x+C===0){var A=(0,t.default)(w,{isIdentifier:!0});if(A===w)return y.NO_QUOTE;var H=this.preferredQuoteMark(E);if(H===y.NO_QUOTE){var Y=this.quoteMark||E.quoteMark||y.DOUBLE_QUOTE,fe=S[Y],me=(0,t.default)(w,fe);if(me.length<A.length)return Y}return H}else return C===x?this.preferredQuoteMark(E):C<x?y.DOUBLE_QUOTE:y.SINGLE_QUOTE},T.preferredQuoteMark=function(E){var w=E.preferCurrentQuoteMark?this.quoteMark:E.quoteMark;return w===void 0&&(w=E.preferCurrentQuoteMark?E.quoteMark:this.quoteMark),w===void 0&&(w=y.DOUBLE_QUOTE),w},T._syncRawValue=function(){var E=(0,t.default)(this._value,S[this.quoteMark]);E===this._value?this.raws&&delete this.raws.value:this.raws.value=E},T._handleEscapes=function(E,w){if(this._constructed){var x=(0,t.default)(w,{isIdentifier:!0});x!==w?this.raws[E]=x:delete this.raws[E]}},T._spacesFor=function(E){var w={before:"",after:""},x=this.spaces[E]||{},C=this.raws.spaces&&this.raws.spaces[E]||{};return Object.assign(w,x,C)},T._stringFor=function(E,w,x){w===void 0&&(w=E),x===void 0&&(x=b);var C=this._spacesFor(w);return x(this.stringifyProperty(E),C)},T.offsetOf=function(E){var w=1,x=this._spacesFor("attribute");if(w+=x.before.length,E==="namespace"||E==="ns")return this.namespace?w:-1;if(E==="attributeNS"||(w+=this.namespaceString.length,this.namespace&&(w+=1),E==="attribute"))return w;w+=this.stringifyProperty("attribute").length,w+=x.after.length;var C=this._spacesFor("operator");w+=C.before.length;var A=this.stringifyProperty("operator");if(E==="operator")return A?w:-1;w+=A.length,w+=C.after.length;var H=this._spacesFor("value");w+=H.before.length;var Y=this.stringifyProperty("value");if(E==="value")return Y?w:-1;w+=Y.length,w+=H.after.length;var fe=this._spacesFor("insensitive");return w+=fe.before.length,E==="insensitive"&&this.insensitive?w:-1},T.toString=function(){var E=this,w=[this.rawSpaceBefore,"["];return w.push(this._stringFor("qualifiedAttribute","attribute")),this.operator&&(this.value||this.value==="")&&(w.push(this._stringFor("operator")),w.push(this._stringFor("value")),w.push(this._stringFor("insensitiveFlag","insensitive",function(x,C){return x.length>0&&!E.quoted&&C.before.length===0&&!(E.spaces.value&&E.spaces.value.after)&&(C.before=" "),b(x,C)}))),w.push("]"),w.push(this.rawSpaceAfter),w.join("")},u(y,[{key:"quoted",get:function(){var E=this.quoteMark;return E==="'"||E==='"'},set:function(E){d()}},{key:"quoteMark",get:function(){return this._quoteMark},set:function(E){if(!this._constructed){this._quoteMark=E;return}this._quoteMark!==E&&(this._quoteMark=E,this._syncRawValue())}},{key:"qualifiedAttribute",get:function(){return this.qualifiedName(this.raws.attribute||this.attribute)}},{key:"insensitiveFlag",get:function(){return this.insensitive?"i":""}},{key:"value",get:function(){return this._value},set:function(E){if(this._constructed){var w=p(E),x=w.deprecatedUsage,C=w.unescaped,A=w.quoteMark;if(x&&f(),C===this._value&&A===this._quoteMark)return;this._value=C,this._quoteMark=A,this._syncRawValue()}else this._value=E}},{key:"attribute",get:function(){return this._attribute},set:function(E){this._handleEscapes("attribute",E),this._attribute=E}}]),y}(n.default);e.default=v,v.NO_QUOTE=null,v.SINGLE_QUOTE="'",v.DOUBLE_QUOTE='"';var S=(i={"'":{quotes:"single",wrap:!0},'"':{quotes:"double",wrap:!0}},i[null]={isIdentifier:!0},i);function b(I,y){return""+y.before+I+y.after}}),ZI=be(function(s,e){e.__esModule=!0,e.default=void 0;var t=r(eg);function r(o){return o&&o.__esModule?o:{default:o}}function n(o,u){o.prototype=Object.create(u.prototype),o.prototype.constructor=o,i(o,u)}function i(o,u){return i=Object.setPrototypeOf||function(l,h){return l.__proto__=h,l},i(o,u)}var a=function(o){n(u,o);function u(c){var l;return l=o.call(this,c)||this,l.type=he.UNIVERSAL,l.value="*",l}return u}(t.default);e.default=a,s.exports=e.default}),e1=be(function(s,e){e.__esModule=!0,e.default=void 0;var t=r(zs);function r(o){return o&&o.__esModule?o:{default:o}}function n(o,u){o.prototype=Object.create(u.prototype),o.prototype.constructor=o,i(o,u)}function i(o,u){return i=Object.setPrototypeOf||function(l,h){return l.__proto__=h,l},i(o,u)}var a=function(o){n(u,o);function u(c){var l;return l=o.call(this,c)||this,l.type=he.COMBINATOR,l}return u}(t.default);e.default=a,s.exports=e.default}),t1=be(function(s,e){e.__esModule=!0,e.default=void 0;var t=r(zs);function r(o){return o&&o.__esModule?o:{default:o}}function n(o,u){o.prototype=Object.create(u.prototype),o.prototype.constructor=o,i(o,u)}function i(o,u){return i=Object.setPrototypeOf||function(l,h){return l.__proto__=h,l},i(o,u)}var a=function(o){n(u,o);function u(c){var l;return l=o.call(this,c)||this,l.type=he.NESTING,l.value="&",l}return u}(t.default);e.default=a,s.exports=e.default}),e3=be(function(s,e){e.__esModule=!0,e.default=t;function t(r){return r.sort(function(n,i){return n-i})}s.exports=e.default}),r1=be(function(s,e){e.__esModule=!0,e.combinator=e.word=e.comment=e.str=e.tab=e.newline=e.feed=e.cr=e.backslash=e.bang=e.slash=e.doubleQuote=e.singleQuote=e.space=e.greaterThan=e.pipe=e.equals=e.plus=e.caret=e.tilde=e.dollar=e.closeSquare=e.openSquare=e.closeParenthesis=e.openParenthesis=e.semicolon=e.colon=e.comma=e.at=e.asterisk=e.ampersand=void 0;var t=38;e.ampersand=t;var r=42;e.asterisk=r;var n=64;e.at=n;var i=44;e.comma=i;var a=58;e.colon=a;var o=59;e.semicolon=o;var u=40;e.openParenthesis=u;var c=41;e.closeParenthesis=c;var l=91;e.openSquare=l;var h=93;e.closeSquare=h;var f=36;e.dollar=f;var d=126;e.tilde=d;var g=94;e.caret=g;var p=43;e.plus=p;var m=61;e.equals=m;var v=124;e.pipe=v;var S=62;e.greaterThan=S;var b=32;e.space=b;var I=39;e.singleQuote=I;var y=34;e.doubleQuote=y;var T=47;e.slash=T;var P=33;e.bang=P;var E=92;e.backslash=E;var w=13;e.cr=w;var x=12;e.feed=x;var C=10;e.newline=C;var A=9;e.tab=A;var H=I;e.str=H;var Y=-1;e.comment=Y;var fe=-2;e.word=fe;var me=-3;e.combinator=me}),t3=be(function(s,e){e.__esModule=!0,e.default=p,e.FIELDS=void 0;var t=a(r1),r,n;function i(){if(typeof WeakMap!="function")return null;var m=new WeakMap;return i=function(){return m},m}function a(m){if(m&&m.__esModule)return m;if(m===null||typeof m!="object"&&typeof m!="function")return{default:m};var v=i();if(v&&v.has(m))return v.get(m);var S={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var I in m)if(Object.prototype.hasOwnProperty.call(m,I)){var y=b?Object.getOwnPropertyDescriptor(m,I):null;y&&(y.get||y.set)?Object.defineProperty(S,I,y):S[I]=m[I]}return S.default=m,v&&v.set(m,S),S}for(var o=(r={},r[t.tab]=!0,r[t.newline]=!0,r[t.cr]=!0,r[t.feed]=!0,r),u=(n={},n[t.space]=!0,n[t.tab]=!0,n[t.newline]=!0,n[t.cr]=!0,n[t.feed]=!0,n[t.ampersand]=!0,n[t.asterisk]=!0,n[t.bang]=!0,n[t.comma]=!0,n[t.colon]=!0,n[t.semicolon]=!0,n[t.openParenthesis]=!0,n[t.closeParenthesis]=!0,n[t.openSquare]=!0,n[t.closeSquare]=!0,n[t.singleQuote]=!0,n[t.doubleQuote]=!0,n[t.plus]=!0,n[t.pipe]=!0,n[t.tilde]=!0,n[t.greaterThan]=!0,n[t.equals]=!0,n[t.dollar]=!0,n[t.caret]=!0,n[t.slash]=!0,n),c={},l="0123456789abcdefABCDEF",h=0;h<l.length;h++)c[l.charCodeAt(h)]=!0;function f(m,v){var S=v,b;do{if(b=m.charCodeAt(S),u[b])return S-1;b===t.backslash?S=d(m,S)+1:S++}while(S<m.length);return S-1}function d(m,v){var S=v,b=m.charCodeAt(S+1);if(!o[b])if(c[b]){var I=0;do S++,I++,b=m.charCodeAt(S+1);while(c[b]&&I<6);I<6&&b===t.space&&S++}else S++;return S}var g={TYPE:0,START_LINE:1,START_COL:2,END_LINE:3,END_COL:4,START_POS:5,END_POS:6};e.FIELDS=g;function p(m){var v=[],S=m.css.valueOf(),b=S,I=b.length,y=-1,T=1,P=0,E=0,w,x,C,A,H,Y,fe,me,se,Ze,Ht,G,j;function z(O,B){if(m.safe)S+=B,se=S.length-1;else throw m.error("Unclosed "+O,T,P-y,P)}for(;P<I;){switch(w=S.charCodeAt(P),w===t.newline&&(y=P,T+=1),w){case t.space:case t.tab:case t.newline:case t.cr:case t.feed:se=P;do se+=1,w=S.charCodeAt(se),w===t.newline&&(y=se,T+=1);while(w===t.space||w===t.newline||w===t.tab||w===t.cr||w===t.feed);j=t.space,A=T,C=se-y-1,E=se;break;case t.plus:case t.greaterThan:case t.tilde:case t.pipe:se=P;do se+=1,w=S.charCodeAt(se);while(w===t.plus||w===t.greaterThan||w===t.tilde||w===t.pipe);j=t.combinator,A=T,C=P-y,E=se;break;case t.asterisk:case t.ampersand:case t.bang:case t.comma:case t.equals:case t.dollar:case t.caret:case t.openSquare:case t.closeSquare:case t.colon:case t.semicolon:case t.openParenthesis:case t.closeParenthesis:se=P,j=w,A=T,C=P-y,E=se+1;break;case t.singleQuote:case t.doubleQuote:G=w===t.singleQuote?"'":'"',se=P;do for(H=!1,se=S.indexOf(G,se+1),se===-1&&z("quote",G),Y=se;S.charCodeAt(Y-1)===t.backslash;)Y-=1,H=!H;while(H);j=t.str,A=T,C=P-y,E=se+1;break;default:w===t.slash&&S.charCodeAt(P+1)===t.asterisk?(se=S.indexOf("*/",P+2)+1,se===0&&z("comment","*/"),x=S.slice(P,se+1),me=x.split(`
`),fe=me.length-1,fe>0?(Ze=T+fe,Ht=se-me[fe].length):(Ze=T,Ht=y),j=t.comment,T=Ze,A=Ze,C=se-Ht):w===t.slash?(se=P,j=w,A=T,C=P-y,E=se+1):(se=f(S,P),j=t.word,A=T,C=se-y),E=se+1;break}v.push([j,T,P-y,A,C,P,E]),Ht&&(y=Ht,Ht=null),P=E}return v}}),r3=be(function(s,e){e.__esModule=!0,e.default=void 0;var t=T(GI),r=T(zI),n=T(WI),i=T(KI),a=T(HI),o=T(QI),u=T(YI),c=T(JI),l=y(XI),h=T(ZI),f=T(e1),d=T(t1),g=T(e3),p=y(t3),m=y(r1),v=y(he),S,b;function I(){if(typeof WeakMap!="function")return null;var G=new WeakMap;return I=function(){return G},G}function y(G){if(G&&G.__esModule)return G;if(G===null||typeof G!="object"&&typeof G!="function")return{default:G};var j=I();if(j&&j.has(G))return j.get(G);var z={},O=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var B in G)if(Object.prototype.hasOwnProperty.call(G,B)){var ie=O?Object.getOwnPropertyDescriptor(G,B):null;ie&&(ie.get||ie.set)?Object.defineProperty(z,B,ie):z[B]=G[B]}return z.default=G,j&&j.set(G,z),z}function T(G){return G&&G.__esModule?G:{default:G}}function P(G,j){for(var z=0;z<j.length;z++){var O=j[z];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(G,O.key,O)}}function E(G,j,z){return j&&P(G.prototype,j),z&&P(G,z),G}var w=(S={},S[m.space]=!0,S[m.cr]=!0,S[m.feed]=!0,S[m.newline]=!0,S[m.tab]=!0,S),x=Object.assign({},w,(b={},b[m.comment]=!0,b));function C(G){return{line:G[p.FIELDS.START_LINE],column:G[p.FIELDS.START_COL]}}function A(G){return{line:G[p.FIELDS.END_LINE],column:G[p.FIELDS.END_COL]}}function H(G,j,z,O){return{start:{line:G,column:j},end:{line:z,column:O}}}function Y(G){return H(G[p.FIELDS.START_LINE],G[p.FIELDS.START_COL],G[p.FIELDS.END_LINE],G[p.FIELDS.END_COL])}function fe(G,j){if(!!G)return H(G[p.FIELDS.START_LINE],G[p.FIELDS.START_COL],j[p.FIELDS.END_LINE],j[p.FIELDS.END_COL])}function me(G,j){var z=G[j];if(typeof z=="string")return z.indexOf("\\")!==-1&&((0,_e.ensureObject)(G,"raws"),G[j]=(0,_e.unesc)(z),G.raws[j]===void 0&&(G.raws[j]=z)),G}function se(G,j){for(var z=-1,O=[];(z=G.indexOf(j,z+1))!==-1;)O.push(z);return O}function Ze(){var G=Array.prototype.concat.apply([],arguments);return G.filter(function(j,z){return z===G.indexOf(j)})}var Ht=function(){function G(z,O){O===void 0&&(O={}),this.rule=z,this.options=Object.assign({lossy:!1,safe:!1},O),this.position=0,this.css=typeof this.rule=="string"?this.rule:this.rule.selector,this.tokens=(0,p.default)({css:this.css,error:this._errorGenerator(),safe:this.options.safe});var B=fe(this.tokens[0],this.tokens[this.tokens.length-1]);this.root=new t.default({source:B}),this.root.errorGenerator=this._errorGenerator();var ie=new r.default({source:{start:{line:1,column:1}}});this.root.append(ie),this.current=ie,this.loop()}var j=G.prototype;return j._errorGenerator=function(){var O=this;return function(B,ie){return typeof O.rule=="string"?new Error(B):O.rule.error(B,ie)}},j.attribute=function(){var O=[],B=this.currToken;for(this.position++;this.position<this.tokens.length&&this.currToken[p.FIELDS.TYPE]!==m.closeSquare;)O.push(this.currToken),this.position++;if(this.currToken[p.FIELDS.TYPE]!==m.closeSquare)return this.expected("closing square bracket",this.currToken[p.FIELDS.START_POS]);var ie=O.length,D={source:H(B[1],B[2],this.currToken[3],this.currToken[4]),sourceIndex:B[p.FIELDS.START_POS]};if(ie===1&&!~[m.word].indexOf(O[0][p.FIELDS.TYPE]))return this.expected("attribute",O[0][p.FIELDS.START_POS]);for(var de=0,Ie="",Se="",ae=null,Ce=!1;de<ie;){var et=O[de],le=this.content(et),Ve=O[de+1];switch(et[p.FIELDS.TYPE]){case m.space:if(Ce=!0,this.options.lossy)break;if(ae){(0,_e.ensureObject)(D,"spaces",ae);var Fr=D.spaces[ae].after||"";D.spaces[ae].after=Fr+le;var dr=(0,_e.getProp)(D,"raws","spaces",ae,"after")||null;dr&&(D.raws.spaces[ae].after=dr+le)}else Ie=Ie+le,Se=Se+le;break;case m.asterisk:if(Ve[p.FIELDS.TYPE]===m.equals)D.operator=le,ae="operator";else if((!D.namespace||ae==="namespace"&&!Ce)&&Ve){Ie&&((0,_e.ensureObject)(D,"spaces","attribute"),D.spaces.attribute.before=Ie,Ie=""),Se&&((0,_e.ensureObject)(D,"raws","spaces","attribute"),D.raws.spaces.attribute.before=Ie,Se=""),D.namespace=(D.namespace||"")+le;var Ut=(0,_e.getProp)(D,"raws","namespace")||null;Ut&&(D.raws.namespace+=le),ae="namespace"}Ce=!1;break;case m.dollar:if(ae==="value"){var Tt=(0,_e.getProp)(D,"raws","value");D.value+="$",Tt&&(D.raws.value=Tt+"$");break}case m.caret:Ve[p.FIELDS.TYPE]===m.equals&&(D.operator=le,ae="operator"),Ce=!1;break;case m.combinator:if(le==="~"&&Ve[p.FIELDS.TYPE]===m.equals&&(D.operator=le,ae="operator"),le!=="|"){Ce=!1;break}Ve[p.FIELDS.TYPE]===m.equals?(D.operator=le,ae="operator"):!D.namespace&&!D.attribute&&(D.namespace=!0),Ce=!1;break;case m.word:if(Ve&&this.content(Ve)==="|"&&O[de+2]&&O[de+2][p.FIELDS.TYPE]!==m.equals&&!D.operator&&!D.namespace)D.namespace=le,ae="namespace";else if(!D.attribute||ae==="attribute"&&!Ce){Ie&&((0,_e.ensureObject)(D,"spaces","attribute"),D.spaces.attribute.before=Ie,Ie=""),Se&&((0,_e.ensureObject)(D,"raws","spaces","attribute"),D.raws.spaces.attribute.before=Se,Se=""),D.attribute=(D.attribute||"")+le;var sr=(0,_e.getProp)(D,"raws","attribute")||null;sr&&(D.raws.attribute+=le),ae="attribute"}else if(!D.value&&D.value!==""||ae==="value"&&!Ce){var nr=(0,_e.unesc)(le),hs=(0,_e.getProp)(D,"raws","value")||"",fu=D.value||"";D.value=fu+nr,D.quoteMark=null,(nr!==le||hs)&&((0,_e.ensureObject)(D,"raws"),D.raws.value=(hs||fu)+le),ae="value"}else{var du=le==="i"||le==="I";(D.value||D.value==="")&&(D.quoteMark||Ce)?(D.insensitive=du,(!du||le==="I")&&((0,_e.ensureObject)(D,"raws"),D.raws.insensitiveFlag=le),ae="insensitive",Ie&&((0,_e.ensureObject)(D,"spaces","insensitive"),D.spaces.insensitive.before=Ie,Ie=""),Se&&((0,_e.ensureObject)(D,"raws","spaces","insensitive"),D.raws.spaces.insensitive.before=Se,Se="")):(D.value||D.value==="")&&(ae="value",D.value+=le,D.raws.value&&(D.raws.value+=le))}Ce=!1;break;case m.str:if(!D.attribute||!D.operator)return this.error("Expected an attribute followed by an operator preceding the string.",{index:et[p.FIELDS.START_POS]});var sa=(0,l.unescapeValue)(le),n1=sa.unescaped,i1=sa.quoteMark;D.value=n1,D.quoteMark=i1,ae="value",(0,_e.ensureObject)(D,"raws"),D.raws.value=le,Ce=!1;break;case m.equals:if(!D.attribute)return this.expected("attribute",et[p.FIELDS.START_POS],le);if(D.value)return this.error('Unexpected "=" found; an operator was already defined.',{index:et[p.FIELDS.START_POS]});D.operator=D.operator?D.operator+le:le,ae="operator",Ce=!1;break;case m.comment:if(ae)if(Ce||Ve&&Ve[p.FIELDS.TYPE]===m.space||ae==="insensitive"){var a1=(0,_e.getProp)(D,"spaces",ae,"after")||"",o1=(0,_e.getProp)(D,"raws","spaces",ae,"after")||a1;(0,_e.ensureObject)(D,"raws","spaces",ae),D.raws.spaces[ae].after=o1+le}else{var u1=D[ae]||"",c1=(0,_e.getProp)(D,"raws",ae)||u1;(0,_e.ensureObject)(D,"raws"),D.raws[ae]=c1+le}else Se=Se+le;break;default:return this.error('Unexpected "'+le+'" found.',{index:et[p.FIELDS.START_POS]})}de++}me(D,"attribute"),me(D,"namespace"),this.newNode(new l.default(D)),this.position++},j.parseWhitespaceEquivalentTokens=function(O){O<0&&(O=this.tokens.length);var B=this.position,ie=[],D="",de=void 0;do if(w[this.currToken[p.FIELDS.TYPE]])this.options.lossy||(D+=this.content());else if(this.currToken[p.FIELDS.TYPE]===m.comment){var Ie={};D&&(Ie.before=D,D=""),de=new i.default({value:this.content(),source:Y(this.currToken),sourceIndex:this.currToken[p.FIELDS.START_POS],spaces:Ie}),ie.push(de)}while(++this.position<O);if(D){if(de)de.spaces.after=D;else if(!this.options.lossy){var Se=this.tokens[B],ae=this.tokens[this.position-1];ie.push(new u.default({value:"",source:H(Se[p.FIELDS.START_LINE],Se[p.FIELDS.START_COL],ae[p.FIELDS.END_LINE],ae[p.FIELDS.END_COL]),sourceIndex:Se[p.FIELDS.START_POS],spaces:{before:D,after:""}}))}}return ie},j.convertWhitespaceNodesToSpace=function(O,B){var ie=this;B===void 0&&(B=!1);var D="",de="";O.forEach(function(Se){var ae=ie.lossySpace(Se.spaces.before,B),Ce=ie.lossySpace(Se.rawSpaceBefore,B);D+=ae+ie.lossySpace(Se.spaces.after,B&&ae.length===0),de+=ae+Se.value+ie.lossySpace(Se.rawSpaceAfter,B&&Ce.length===0)}),de===D&&(de=void 0);var Ie={space:D,rawSpace:de};return Ie},j.isNamedCombinator=function(O){return O===void 0&&(O=this.position),this.tokens[O+0]&&this.tokens[O+0][p.FIELDS.TYPE]===m.slash&&this.tokens[O+1]&&this.tokens[O+1][p.FIELDS.TYPE]===m.word&&this.tokens[O+2]&&this.tokens[O+2][p.FIELDS.TYPE]===m.slash},j.namedCombinator=function(){if(this.isNamedCombinator()){var O=this.content(this.tokens[this.position+1]),B=(0,_e.unesc)(O).toLowerCase(),ie={};B!==O&&(ie.value="/"+O+"/");var D=new f.default({value:"/"+B+"/",source:H(this.currToken[p.FIELDS.START_LINE],this.currToken[p.FIELDS.START_COL],this.tokens[this.position+2][p.FIELDS.END_LINE],this.tokens[this.position+2][p.FIELDS.END_COL]),sourceIndex:this.currToken[p.FIELDS.START_POS],raws:ie});return this.position=this.position+3,D}else this.unexpected()},j.combinator=function(){var O=this;if(this.content()==="|")return this.namespace();var B=this.locateNextMeaningfulToken(this.position);if(B<0||this.tokens[B][p.FIELDS.TYPE]===m.comma){var ie=this.parseWhitespaceEquivalentTokens(B);if(ie.length>0){var D=this.current.last;if(D){var de=this.convertWhitespaceNodesToSpace(ie),Ie=de.space,Se=de.rawSpace;Se!==void 0&&(D.rawSpaceAfter+=Se),D.spaces.after+=Ie}else ie.forEach(function(hs){return O.newNode(hs)})}return}var ae=this.currToken,Ce=void 0;B>this.position&&(Ce=this.parseWhitespaceEquivalentTokens(B));var et;if(this.isNamedCombinator()?et=this.namedCombinator():this.currToken[p.FIELDS.TYPE]===m.combinator?(et=new f.default({value:this.content(),source:Y(this.currToken),sourceIndex:this.currToken[p.FIELDS.START_POS]}),this.position++):w[this.currToken[p.FIELDS.TYPE]]||Ce||this.unexpected(),et){if(Ce){var le=this.convertWhitespaceNodesToSpace(Ce),Ve=le.space,Fr=le.rawSpace;et.spaces.before=Ve,et.rawSpaceBefore=Fr}}else{var dr=this.convertWhitespaceNodesToSpace(Ce,!0),Ut=dr.space,Tt=dr.rawSpace;Tt||(Tt=Ut);var sr={},nr={spaces:{}};Ut.endsWith(" ")&&Tt.endsWith(" ")?(sr.before=Ut.slice(0,Ut.length-1),nr.spaces.before=Tt.slice(0,Tt.length-1)):Ut.startsWith(" ")&&Tt.startsWith(" ")?(sr.after=Ut.slice(1),nr.spaces.after=Tt.slice(1)):nr.value=Tt,et=new f.default({value:" ",source:fe(ae,this.tokens[this.position-1]),sourceIndex:ae[p.FIELDS.START_POS],spaces:sr,raws:nr})}return this.currToken&&this.currToken[p.FIELDS.TYPE]===m.space&&(et.spaces.after=this.optionalSpace(this.content()),this.position++),this.newNode(et)},j.comma=function(){if(this.position===this.tokens.length-1){this.root.trailingComma=!0,this.position++;return}this.current._inferEndPosition();var O=new r.default({source:{start:C(this.tokens[this.position+1])}});this.current.parent.append(O),this.current=O,this.position++},j.comment=function(){var O=this.currToken;this.newNode(new i.default({value:this.content(),source:Y(O),sourceIndex:O[p.FIELDS.START_POS]})),this.position++},j.error=function(O,B){throw this.root.error(O,B)},j.missingBackslash=function(){return this.error("Expected a backslash preceding the semicolon.",{index:this.currToken[p.FIELDS.START_POS]})},j.missingParenthesis=function(){return this.expected("opening parenthesis",this.currToken[p.FIELDS.START_POS])},j.missingSquareBracket=function(){return this.expected("opening square bracket",this.currToken[p.FIELDS.START_POS])},j.unexpected=function(){return this.error("Unexpected '"+this.content()+"'. Escaping special characters with \\ may help.",this.currToken[p.FIELDS.START_POS])},j.namespace=function(){var O=this.prevToken&&this.content(this.prevToken)||!0;if(this.nextToken[p.FIELDS.TYPE]===m.word)return this.position++,this.word(O);if(this.nextToken[p.FIELDS.TYPE]===m.asterisk)return this.position++,this.universal(O)},j.nesting=function(){if(this.nextToken){var O=this.content(this.nextToken);if(O==="|"){this.position++;return}}var B=this.currToken;this.newNode(new d.default({value:this.content(),source:Y(B),sourceIndex:B[p.FIELDS.START_POS]})),this.position++},j.parentheses=function(){var O=this.current.last,B=1;if(this.position++,O&&O.type===v.PSEUDO){var ie=new r.default({source:{start:C(this.tokens[this.position-1])}}),D=this.current;for(O.append(ie),this.current=ie;this.position<this.tokens.length&&B;)this.currToken[p.FIELDS.TYPE]===m.openParenthesis&&B++,this.currToken[p.FIELDS.TYPE]===m.closeParenthesis&&B--,B?this.parse():(this.current.source.end=A(this.currToken),this.current.parent.source.end=A(this.currToken),this.position++);this.current=D}else{for(var de=this.currToken,Ie="(",Se;this.position<this.tokens.length&&B;)this.currToken[p.FIELDS.TYPE]===m.openParenthesis&&B++,this.currToken[p.FIELDS.TYPE]===m.closeParenthesis&&B--,Se=this.currToken,Ie+=this.parseParenthesisToken(this.currToken),this.position++;O?O.appendToPropertyAndEscape("value",Ie,Ie):this.newNode(new u.default({value:Ie,source:H(de[p.FIELDS.START_LINE],de[p.FIELDS.START_COL],Se[p.FIELDS.END_LINE],Se[p.FIELDS.END_COL]),sourceIndex:de[p.FIELDS.START_POS]}))}if(B)return this.expected("closing parenthesis",this.currToken[p.FIELDS.START_POS])},j.pseudo=function(){for(var O=this,B="",ie=this.currToken;this.currToken&&this.currToken[p.FIELDS.TYPE]===m.colon;)B+=this.content(),this.position++;if(!this.currToken)return this.expected(["pseudo-class","pseudo-element"],this.position-1);if(this.currToken[p.FIELDS.TYPE]===m.word)this.splitWord(!1,function(D,de){B+=D,O.newNode(new c.default({value:B,source:fe(ie,O.currToken),sourceIndex:ie[p.FIELDS.START_POS]})),de>1&&O.nextToken&&O.nextToken[p.FIELDS.TYPE]===m.openParenthesis&&O.error("Misplaced parenthesis.",{index:O.nextToken[p.FIELDS.START_POS]})});else return this.expected(["pseudo-class","pseudo-element"],this.currToken[p.FIELDS.START_POS])},j.space=function(){var O=this.content();this.position===0||this.prevToken[p.FIELDS.TYPE]===m.comma||this.prevToken[p.FIELDS.TYPE]===m.openParenthesis||this.current.nodes.every(function(B){return B.type==="comment"})?(this.spaces=this.optionalSpace(O),this.position++):this.position===this.tokens.length-1||this.nextToken[p.FIELDS.TYPE]===m.comma||this.nextToken[p.FIELDS.TYPE]===m.closeParenthesis?(this.current.last.spaces.after=this.optionalSpace(O),this.position++):this.combinator()},j.string=function(){var O=this.currToken;this.newNode(new u.default({value:this.content(),source:Y(O),sourceIndex:O[p.FIELDS.START_POS]})),this.position++},j.universal=function(O){var B=this.nextToken;if(B&&this.content(B)==="|")return this.position++,this.namespace();var ie=this.currToken;this.newNode(new h.default({value:this.content(),source:Y(ie),sourceIndex:ie[p.FIELDS.START_POS]}),O),this.position++},j.splitWord=function(O,B){for(var ie=this,D=this.nextToken,de=this.content();D&&~[m.dollar,m.caret,m.equals,m.word].indexOf(D[p.FIELDS.TYPE]);){this.position++;var Ie=this.content();if(de+=Ie,Ie.lastIndexOf("\\")===Ie.length-1){var Se=this.nextToken;Se&&Se[p.FIELDS.TYPE]===m.space&&(de+=this.requiredSpace(this.content(Se)),this.position++)}D=this.nextToken}var ae=se(de,".").filter(function(Ve){var Fr=de[Ve-1]==="\\",dr=/^\d+\.\d+%$/.test(de);return!Fr&&!dr}),Ce=se(de,"#").filter(function(Ve){return de[Ve-1]!=="\\"}),et=se(de,"#{");et.length&&(Ce=Ce.filter(function(Ve){return!~et.indexOf(Ve)}));var le=(0,g.default)(Ze([0].concat(ae,Ce)));le.forEach(function(Ve,Fr){var dr=le[Fr+1]||de.length,Ut=de.slice(Ve,dr);if(Fr===0&&B)return B.call(ie,Ut,le.length);var Tt,sr=ie.currToken,nr=sr[p.FIELDS.START_POS]+le[Fr],hs=H(sr[1],sr[2]+Ve,sr[3],sr[2]+(dr-1));if(~ae.indexOf(Ve)){var fu={value:Ut.slice(1),source:hs,sourceIndex:nr};Tt=new n.default(me(fu,"value"))}else if(~Ce.indexOf(Ve)){var du={value:Ut.slice(1),source:hs,sourceIndex:nr};Tt=new a.default(me(du,"value"))}else{var sa={value:Ut,source:hs,sourceIndex:nr};me(sa,"value"),Tt=new o.default(sa)}ie.newNode(Tt,O),O=null}),this.position++},j.word=function(O){var B=this.nextToken;return B&&this.content(B)==="|"?(this.position++,this.namespace()):this.splitWord(O)},j.loop=function(){for(;this.position<this.tokens.length;)this.parse(!0);return this.current._inferEndPosition(),this.root},j.parse=function(O){switch(this.currToken[p.FIELDS.TYPE]){case m.space:this.space();break;case m.comment:this.comment();break;case m.openParenthesis:this.parentheses();break;case m.closeParenthesis:O&&this.missingParenthesis();break;case m.openSquare:this.attribute();break;case m.dollar:case m.caret:case m.equals:case m.word:this.word();break;case m.colon:this.pseudo();break;case m.comma:this.comma();break;case m.asterisk:this.universal();break;case m.ampersand:this.nesting();break;case m.slash:case m.combinator:this.combinator();break;case m.str:this.string();break;case m.closeSquare:this.missingSquareBracket();case m.semicolon:this.missingBackslash();default:this.unexpected()}},j.expected=function(O,B,ie){if(Array.isArray(O)){var D=O.pop();O=O.join(", ")+" or "+D}var de=/^[aeiou]/.test(O[0])?"an":"a";return ie?this.error("Expected "+de+" "+O+', found "'+ie+'" instead.',{index:B}):this.error("Expected "+de+" "+O+".",{index:B})},j.requiredSpace=function(O){return this.options.lossy?" ":O},j.optionalSpace=function(O){return this.options.lossy?"":O},j.lossySpace=function(O,B){return this.options.lossy?B?" ":"":O},j.parseParenthesisToken=function(O){var B=this.content(O);return O[p.FIELDS.TYPE]===m.space?this.requiredSpace(B):B},j.newNode=function(O,B){return B&&(/^ +$/.test(B)&&(this.options.lossy||(this.spaces=(this.spaces||"")+B),B=!0),O.namespace=B,me(O,"namespace")),this.spaces&&(O.spaces.before=this.spaces,this.spaces=""),this.current.append(O)},j.content=function(O){return O===void 0&&(O=this.currToken),this.css.slice(O[p.FIELDS.START_POS],O[p.FIELDS.END_POS])},j.locateNextMeaningfulToken=function(O){O===void 0&&(O=this.position+1);for(var B=O;B<this.tokens.length;)if(x[this.tokens[B][p.FIELDS.TYPE]]){B++;continue}else return B;return-1},E(G,[{key:"currToken",get:function(){return this.tokens[this.position]}},{key:"nextToken",get:function(){return this.tokens[this.position+1]}},{key:"prevToken",get:function(){return this.tokens[this.position-1]}}]),G}();e.default=Ht,s.exports=e.default}),s3=be(function(s,e){e.__esModule=!0,e.default=void 0;var t=r(r3);function r(i){return i&&i.__esModule?i:{default:i}}var n=function(){function i(o,u){this.func=o||function(){},this.funcRes=null,this.options=u}var a=i.prototype;return a._shouldUpdateSelector=function(u,c){c===void 0&&(c={});var l=Object.assign({},this.options,c);return l.updateSelector===!1?!1:typeof u!="string"},a._isLossy=function(u){u===void 0&&(u={});var c=Object.assign({},this.options,u);return c.lossless===!1},a._root=function(u,c){c===void 0&&(c={});var l=new t.default(u,this._parseOptions(c));return l.root},a._parseOptions=function(u){return{lossy:this._isLossy(u)}},a._run=function(u,c){var l=this;return c===void 0&&(c={}),new Promise(function(h,f){try{var d=l._root(u,c);Promise.resolve(l.func(d)).then(function(g){var p=void 0;return l._shouldUpdateSelector(u,c)&&(p=d.toString(),u.selector=p),{transform:g,root:d,string:p}}).then(h,f)}catch(g){f(g);return}})},a._runSync=function(u,c){c===void 0&&(c={});var l=this._root(u,c),h=this.func(l);if(h&&typeof h.then=="function")throw new Error("Selector processor returned a promise to a synchronous call.");var f=void 0;return c.updateSelector&&typeof u!="string"&&(f=l.toString(),u.selector=f),{transform:h,root:l,string:f}},a.ast=function(u,c){return this._run(u,c).then(function(l){return l.root})},a.astSync=function(u,c){return this._runSync(u,c).root},a.transform=function(u,c){return this._run(u,c).then(function(l){return l.transform})},a.transformSync=function(u,c){return this._runSync(u,c).transform},a.process=function(u,c){return this._run(u,c).then(function(l){return l.string||l.root.toString()})},a.processSync=function(u,c){var l=this._runSync(u,c);return l.string||l.root.toString()},i}();e.default=n,s.exports=e.default}),Wh=be(function(s,e){e.__esModule=!0,e.universal=e.tag=e.string=e.selector=e.root=e.pseudo=e.nesting=e.id=e.comment=e.combinator=e.className=e.attribute=void 0;var t=g(XI),r=g(WI),n=g(e1),i=g(KI),a=g(HI),o=g(t1),u=g(JI),c=g(GI),l=g(zI),h=g(YI),f=g(QI),d=g(ZI);function g(C){return C&&C.__esModule?C:{default:C}}var p=function(A){return new t.default(A)};e.attribute=p;var m=function(A){return new r.default(A)};e.className=m;var v=function(A){return new n.default(A)};e.combinator=v;var S=function(A){return new i.default(A)};e.comment=S;var b=function(A){return new a.default(A)};e.id=b;var I=function(A){return new o.default(A)};e.nesting=I;var y=function(A){return new u.default(A)};e.pseudo=y;var T=function(A){return new c.default(A)};e.root=T;var P=function(A){return new l.default(A)};e.selector=P;var E=function(A){return new h.default(A)};e.string=E;var w=function(A){return new f.default(A)};e.tag=w;var x=function(A){return new d.default(A)};e.universal=x}),Kh=be(function(s,e){e.__esModule=!0,e.isNode=n,e.isPseudoElement=S,e.isPseudoClass=b,e.isContainer=I,e.isNamespace=y,e.isUniversal=e.isTag=e.isString=e.isSelector=e.isRoot=e.isPseudo=e.isNesting=e.isIdentifier=e.isComment=e.isCombinator=e.isClassName=e.isAttribute=void 0;var t,r=(t={},t[he.ATTRIBUTE]=!0,t[he.CLASS]=!0,t[he.COMBINATOR]=!0,t[he.COMMENT]=!0,t[he.ID]=!0,t[he.NESTING]=!0,t[he.PSEUDO]=!0,t[he.ROOT]=!0,t[he.SELECTOR]=!0,t[he.STRING]=!0,t[he.TAG]=!0,t[he.UNIVERSAL]=!0,t);function n(T){return typeof T=="object"&&r[T.type]}function i(T,P){return n(P)&&P.type===T}var a=i.bind(null,he.ATTRIBUTE);e.isAttribute=a;var o=i.bind(null,he.CLASS);e.isClassName=o;var u=i.bind(null,he.COMBINATOR);e.isCombinator=u;var c=i.bind(null,he.COMMENT);e.isComment=c;var l=i.bind(null,he.ID);e.isIdentifier=l;var h=i.bind(null,he.NESTING);e.isNesting=h;var f=i.bind(null,he.PSEUDO);e.isPseudo=f;var d=i.bind(null,he.ROOT);e.isRoot=d;var g=i.bind(null,he.SELECTOR);e.isSelector=g;var p=i.bind(null,he.STRING);e.isString=p;var m=i.bind(null,he.TAG);e.isTag=m;var v=i.bind(null,he.UNIVERSAL);e.isUniversal=v;function S(T){return f(T)&&T.value&&(T.value.startsWith("::")||T.value.toLowerCase()===":before"||T.value.toLowerCase()===":after")}function b(T){return f(T)&&!S(T)}function I(T){return!!(n(T)&&T.walk)}function y(T){return a(T)||m(T)}}),n3=be(function(s,e){e.__esModule=!0,Object.keys(he).forEach(function(t){t==="default"||t==="__esModule"||t in e&&e[t]===he[t]||(e[t]=he[t])}),Object.keys(Wh).forEach(function(t){t==="default"||t==="__esModule"||t in e&&e[t]===Wh[t]||(e[t]=Wh[t])}),Object.keys(Kh).forEach(function(t){t==="default"||t==="__esModule"||t in e&&e[t]===Kh[t]||(e[t]=Kh[t])})});be(function(s,e){e.__esModule=!0,e.default=void 0;var t=a(s3),r=i(n3);function n(){if(typeof WeakMap!="function")return null;var c=new WeakMap;return n=function(){return c},c}function i(c){if(c&&c.__esModule)return c;if(c===null||typeof c!="object"&&typeof c!="function")return{default:c};var l=n();if(l&&l.has(c))return l.get(c);var h={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in c)if(Object.prototype.hasOwnProperty.call(c,d)){var g=f?Object.getOwnPropertyDescriptor(c,d):null;g&&(g.get||g.set)?Object.defineProperty(h,d,g):h[d]=c[d]}return h.default=c,l&&l.set(c,h),h}function a(c){return c&&c.__esModule?c:{default:c}}var o=function(l){return new t.default(l)};Object.assign(o,r),delete o.__esModule;var u=o;e.default=u,s.exports=e.default});const i3={apiKey:"AIzaSyDp8xc0RSmIPo8V2UjTh4Mo2uyGG1gJ3HI",authDomain:"heckin-snackers.firebaseapp.com",projectId:"heckin-snackers",storageBucket:"heckin-snackers.appspot.com",messagingSenderId:"912862229478",appId:"1:912862229478:web:2e3c44a73123db5507dc27"};kr.apps.length||(console.log("init firebase"),kr.initializeApp(i3));const mr=y1();kr.getCurrentUser=()=>new Promise((s,e)=>{const t=kr.auth().onAuthStateChanged(r=>{mr.updateUser(r),t(),s(r)},e)});kr.getCurrentUser();const s1=kr.firestore();async function o3(){var r,n,i,a,o,u,c,l,h,f;const s=mr.user.uid,e=ID(),t={firstname:(n=(r=mr.user)==null?void 0:r.firstname)!=null?n:"",lastname:(a=(i=mr.user)==null?void 0:i.lastname)!=null?a:"",name:(u=(o=mr.user)==null?void 0:o.name)!=null?u:"",phone:(l=(c=mr.user)==null?void 0:c.phone)!=null?l:"",address:(f=(h=mr.user)==null?void 0:h.address)!=null?f:"",cartItems:mr.cart,status:"pending"};await s1.collection("orders").doc(s).collection("user_orders").doc(e).set(t),mr.updateOrder({orderId:e,orderInfo:t}),console.log(t,"done")}async function u3(s,e){if(!s)throw new Error("Order Id is required");const t=mr.user.uid;await s1.collection("orders").doc(t).collection("user_orders").doc(s).update(e)}export{o3 as createOrder,s1 as db,h3 as default,u3 as updateOrder};
