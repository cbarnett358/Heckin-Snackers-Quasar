import{v as Y,aN as Z,aO as p,I as ee,x as b,aS as te,y as q,U as ae,aH as j,a3 as C,D as oe,a7 as z,u as D,n as Q,a8 as U,a9 as $,ah as w,ae as n,ab as i,ak as E,aj as M,ai as ne,ac as u,ad as h,aa as le,b0 as re,aq as x,af as N}from"./index.7d032ad3.js";import{Q as ie,a as F}from"./QBreadcrumbs.7f662c0c.js";import{b as se,Q as ce}from"./QItem.521ed6e9.js";import{b as ue,Q as de}from"./QLinearProgress.2bbfb0c9.js";import{a as V,Q as B}from"./QCard.4c93b115.js";import{L as me,Q as fe}from"./LogoutBtn.ca345b8f.js";import{S as ge}from"./SignInBtn.7599d37d.js";import{u as ve,a as he,b as ye,Q as be}from"./QInput.4c7b4b43.js";import{Q as _e}from"./QForm.1e516db5.js";import"./focus-manager.8a4757a3.js";var Se=Y({name:"QRating",props:{...Z,...ve,modelValue:{type:Number,required:!0},max:{type:[String,Number],default:5},icon:[String,Array],iconHalf:[String,Array],iconSelected:[String,Array],iconAriaLabel:[String,Array],color:[String,Array],colorHalf:[String,Array],colorSelected:[String,Array],noReset:Boolean,noDimming:Boolean,readonly:Boolean,disable:Boolean},emits:["update:modelValue"],setup(e,{slots:l,emit:d}){const{proxy:{$q:y}}=oe(),_=p(e),I=he(e),r=ye(I),s=ee(0);let m={};const S=b(()=>e.readonly!==!0&&e.disable!==!0),K=b(()=>`q-rating row inline items-center q-rating--${S.value===!0?"":"non-"}editable`+(e.noDimming===!0?" q-rating--no-dimming":"")+(e.disable===!0?" disabled":"")+(e.color!==void 0&&Array.isArray(e.color)===!1?` text-${e.color}`:"")),T=b(()=>{const o=Array.isArray(e.icon)===!0?e.icon.length:0,t=Array.isArray(e.iconSelected)===!0?e.iconSelected.length:0,c=Array.isArray(e.iconHalf)===!0?e.iconHalf.length:0,g=Array.isArray(e.color)===!0?e.color.length:0,v=Array.isArray(e.colorSelected)===!0?e.colorSelected.length:0,a=Array.isArray(e.colorHalf)===!0?e.colorHalf.length:0;return{iconLen:o,icon:o>0?e.icon[o-1]:e.icon,selIconLen:t,selIcon:t>0?e.iconSelected[t-1]:e.iconSelected,halfIconLen:c,halfIcon:c>0?e.iconHalf[t-1]:e.iconHalf,colorLen:g,color:g>0?e.color[g-1]:e.color,selColorLen:v,selColor:v>0?e.colorSelected[v-1]:e.colorSelected,halfColorLen:a,halfColor:a>0?e.colorHalf[a-1]:e.colorHalf}}),O=b(()=>{if(typeof e.iconAriaLabel=="string"){const o=e.iconAriaLabel.length>0?`${e.iconAriaLabel} `:"";return t=>`${o}${t}`}if(Array.isArray(e.iconAriaLabel)===!0){const o=e.iconAriaLabel.length;if(o>0)return t=>e.iconAriaLabel[Math.min(t,o)-1]}return(o,t)=>`${t} ${o}`}),G=b(()=>{const o=[],t=T.value,c=Math.ceil(e.modelValue),g=S.value===!0?0:null,v=e.iconHalf===void 0||c===e.modelValue?-1:c;for(let a=1;a<=e.max;a++){const f=s.value===0&&e.modelValue>=a||s.value>0&&s.value>=a,A=v===a&&s.value<a,L=s.value>0&&(A===!0?c:e.modelValue)>=a&&s.value<a,k=A===!0?a<=t.halfColorLen?e.colorHalf[a-1]:t.halfColor:t.selColor!==void 0&&f===!0?a<=t.selColorLen?e.colorSelected[a-1]:t.selColor:a<=t.colorLen?e.color[a-1]:t.color,X=(A===!0?a<=t.halfIconLen?e.iconHalf[a-1]:t.halfIcon:t.selIcon!==void 0&&(f===!0||L===!0)?a<=t.selIconLen?e.iconSelected[a-1]:t.selIcon:a<=t.iconLen?e.icon[a-1]:t.icon)||y.iconSet.rating.icon;o.push({name:(A===!0?a<=t.halfIconLen?e.iconHalf[a-1]:t.halfIcon:t.selIcon!==void 0&&(f===!0||L===!0)?a<=t.selIconLen?e.iconSelected[a-1]:t.selIcon:a<=t.iconLen?e.icon[a-1]:t.icon)||y.iconSet.rating.icon,attrs:{tabindex:g,role:"radio","aria-checked":e.modelValue===a?"true":"false","aria-label":O.value(a,X)},iconClass:"q-rating__icon"+(f===!0||A===!0?" q-rating__icon--active":"")+(L===!0?" q-rating__icon--exselected":"")+(s.value===a?" q-rating__icon--hovered":"")+(k!==void 0?` text-${k}`:"")})}return o}),J=b(()=>{const o={role:"radiogroup"};return e.disable===!0&&(o["aria-disabled"]="true"),e.readonly===!0&&(o["aria-readonly"]="true"),o});function R(o){if(S.value===!0){const t=ue(parseInt(o,10),1,parseInt(e.max,10)),c=e.noReset!==!0&&e.modelValue===t?0:t;c!==e.modelValue&&d("update:modelValue",c),s.value=0}}function H(o){S.value===!0&&(s.value=o)}function W(o,t){switch(o.keyCode){case 13:case 32:return R(t),C(o);case 37:case 40:return m[`rt${t-1}`]&&m[`rt${t-1}`].$el.focus(),C(o);case 39:case 38:return m[`rt${t+1}`]&&m[`rt${t+1}`].$el.focus(),C(o)}}function P(){s.value=0}return te(()=>{m={}}),()=>{const o=[];return G.value.forEach(({iconClass:t,name:c,attrs:g},v)=>{const a=v+1;o.push(q("div",{key:a,ref:f=>{m[`rt${a}`]=f},class:"q-rating__icon-container flex flex-center",...g,onClick(){R(a)},onMouseover(){H(a)},onMouseout:P,onFocus(){H(a)},onBlur:P,onKeyup(f){W(f,a)}},ae(l[`tip-${a}`],[q(j,{class:t,name:c})])))}),e.name!==void 0&&e.disable!==!0&&r(o,"push"),q("div",{class:K.value,style:_.value,...J.value},o)}}});const Ae=z({name:"RateProduct",setup(){const e=D();return{store:e,rateProduct:d=>{e.rateProduct(d)}}},data(){return{user:"",email:""}},created(){Q.auth().onAuthStateChanged(e=>{e?(this.user=e.displayName,this.email=e.email):console.log("user name is null")})},methods:{addReview(){Q.firestore().collection("reviews").add({text:this.text,user:this.user,email:this.email})}},actions:{addReview({commit:e},l){e("addReview",l)}},mutations:{addReview(e,l){e.reviews.push(l)}},getters:{reviews(e){return e.reviews}}}),$e=u("h3",{class:"text-info q-mb-sm"},"Review Product",-1),Ie={class:"text-h6"},Le={class:"text-subtitle2"},qe={class:"text-subtitle2"},Ce={class:"text-subtitle2"};function we(e,l,d,y,_,I){return $(),w(M,null,[$e,n(_e,null,{default:i(()=>[n(Se,{modelValue:e.rating,"onUpdate:modelValue":l[0]||(l[0]=r=>e.rating=r),class:"q-mb-md q-mt-md",color:"primary",icon:"pets",size:"lg","max-value":5,value:e.rating,onInput:e.updateRating},null,8,["modelValue","value","onInput"]),n(be,{class:"q-mb-md",modelValue:e.review,"onUpdate:modelValue":l[1]||(l[1]=r=>e.review=r),label:"Review",filled:"",type:"textarea"},null,8,["modelValue"]),n(E,{label:"Submit Review",color:"primary",onClick:e.submitReview},null,8,["onClick"])]),_:1}),($(!0),w(M,null,ne(e.reviews,r=>($(),w("div",{key:r.id},[n(B,null,{default:i(()=>[n(V,null,{default:i(()=>[u("div",Ie,h(r.name),1),u("div",Le,h(r.date),1),u("div",qe,h(r.rating),1),u("div",Ce,h(r.review),1)]),_:2},1024)]),_:2},1024)]))),128))],64)}var xe=U(Ae,[["render",we]]);const Qe=z({name:"ProductPage",setup(){const l=re().params.id,d=D(),y=d.products.find(_=>_.id==l);return{id:l,item:y,store:d}},data(){return{text:"",user:"",email:""}},created(){Q.auth().onAuthStateChanged(e=>{e?(this.user=e.displayName,this.email=e.email):console.log("user name is null")})},components:{LogoutBtn:me,SignInBtn:ge,RateProduct:xe}}),Ve={class:"q-gutter-sm bg-white"},Be={class:"q-mx-lg"},Re={class:"full-width row wrap justify-center q-pa-lg q-gutter-md"},He=["src"],Pe={class:"q-mb-none q-mt-sm text-primary"},ke={class:"q-my-sm"};function Me(e,l,d,y,_,I){const r=x("SignInBtn"),s=x("LogoutBtn"),m=x("RateProduct");return $(),le(fe,null,{default:i(()=>[u("div",Ve,[u("div",Be,[n(ce,{class:"text-right q-gutter-sm"},{default:i(()=>[n(ie,{class:"text-info q-mt-md"},{separator:i(()=>[n(j,{size:"1.5em",name:"chevron_right",color:"primary"})]),default:i(()=>[n(F,{to:"/",label:"Home",icon:"home"}),n(F,{to:"/shop",label:"Shop",icon:"pets"})]),_:1}),n(se,null,{default:i(()=>[N(h(e.email),1)]),_:1}),n(r),n(s)]),_:1})])]),u("div",Re,[n(B,null,{default:i(()=>[u("img",{src:"./images/products/"+e.item.id+".jpg"},null,8,He),n(de,{value:.6,color:"primary"},null,8,["value"]),n(B,null,{default:i(()=>[n(V,null,{default:i(()=>[u("h3",Pe,h(e.item.name),1),u("p",ke,h(e.item.description),1),n(E,{flat:"",onClick:l[0]||(l[0]=S=>e.store.addToCart(e.item)),class:"q-mt-none btn btn-primary bg-primary text-white"},{default:i(()=>[N("Add to Cart")]),_:1})]),_:1}),n(V,{class:"q-pt-none"},{default:i(()=>[n(m)]),_:1})]),_:1})]),_:1})])]),_:1})}var Ge=U(Qe,[["render",Me]]);export{Ge as default};
