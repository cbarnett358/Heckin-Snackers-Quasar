import{v as h,y as Q,z as V,x as k,a6 as I,D as F,a7 as x,n as g,a8 as w,a9 as i,ah as c,ae as e,ab as o,a5 as U,ak as p,ac as d,aq as b,aa as C,ag as A,u as E,aH as T}from"./index.7d032ad3.js";import{Q as B,a as P}from"./QBreadcrumbs.7f662c0c.js";import{u as z,a as L,b as N,Q as R}from"./QItem.521ed6e9.js";import{b as W,c as G,d as H,e as j,f as J}from"./QDialog.619a12c9.js";import{u as K,a as M,b as O,c as X}from"./use-panel.9b898605.js";import{a as v,Q as D}from"./QCard.4c93b115.js";import{L as Y,Q as Z}from"./LogoutBtn.ca345b8f.js";import{Q as _}from"./QInput.4c7b4b43.js";import{Q as S}from"./QForm.1e516db5.js";import{Q as ee}from"./QCardActions.383e3cb6.js";import{C as te}from"./ClosePopup.993d4c4f.js";import"./focus-manager.8a4757a3.js";import"./focusout.f5538097.js";import"./touch.70a9dd44.js";import"./selection.0443ddf8.js";var y=h({name:"QTab",props:W,emits:G,setup(a,{slots:t,emit:s}){const{renderTab:u}=H(a,t,s);return()=>u("div")}}),q=h({name:"QTabPanel",props:K,setup(a,{slots:t}){return()=>Q("div",{class:"q-tab-panel",role:"tabpanel"},V(t.default))}}),ae=h({name:"QTabPanels",props:{...M,...z},emits:O,setup(a,{slots:t}){const s=F(),u=L(a,s.proxy.$q),{updatePanelsList:r,getPanelContent:m,panelDirectives:l}=X(),n=k(()=>"q-tab-panels q-panel-parent"+(u.value===!0?" q-tab-panels--dark q-dark":""));return()=>(r(t),I("div",{class:n.value},m(),"pan",a.swipeable,()=>l.value))}});const se=Q("div",{class:"q-space"});var $=h({name:"QSpace",setup(){return()=>se}});const oe=x({name:"ForgotPassword",data(){return{form:{email:""}}},methods:{resetPassword(){this.$refs.resetPasswordForm.validate(),g.auth().sendPasswordResetEmail(this.form.email).then(()=>{this.$q.notify({message:"Password reset email sent.",color:"primary",position:"top"}),this.$router.push("/auth")}).catch(a=>{this.$q.notify({message:a.message,color:"negative",position:"top"})})}}}),re={class:"flex flex-center"},le=d("div",{class:"text-h6"},"Reset Password",-1),ne={class:"row q-mt-xs"};function ie(a,t,s,u,r,m){return i(),c("div",re,[e(D,{style:{width:"500px","max-width":"40vw"}},{default:o(()=>[e(v,{class:"row items-center q-pb-none"},{default:o(()=>[le,e($),U(e(p,{icon:"close",flat:"",round:"",dense:""},null,512),[[te]])]),_:1}),e(v,{class:"q-pt-md"},{default:o(()=>[e(S,{ref:"resetPasswordForm"},{default:o(()=>[e(_,{type:"email",modelValue:a.form.email,"onUpdate:modelValue":t[0]||(t[0]=l=>a.form.email=l),label:"Email *","lazy-rules":"",rules:[l=>l&&l.length>0||"Please type your email"]},null,8,["modelValue","rules"])]),_:1},512),e(ee,{align:"right"},{default:o(()=>[d("div",ne,[e(p,{class:"q-pl-md q-pr-md q-mr-md text-capitalize rounded-borders",label:"Submit",color:"primary",onClick:a.resetPassword},null,8,["onClick"])])]),_:1})]),_:1})]),_:1})])}var me=w(oe,[["render",ie]]);const de={name:"AuthComponent",props:["tab"],components:{ForgotPassword:me},data(){return{formData:{email:"",password:""},resetPwdDialog:!1}},methods:{submitForm(){console.log("submitForm",this.formData),this.tab==="login"?this.signInExistingUser(this.formData.email,this.formData.password):this.createUser(this.formData.email,this.formData.password)},createUser(a,t){g.auth().createUserWithEmailAndPassword(a,t).then(s=>{this.$q.notify({message:"Account Created.",position:"top",color:"green"}),this.$router.push("/")}).catch(s=>{console.log(s),this.$q.notify({message:"User already exists.",position:"top",color:"negative"})})},signInExistingUser(a,t){g.auth().signInWithEmailAndPassword(a,t).then(s=>{this.$q.notify({message:"Sign In Success.",position:"top",color:"green"}),this.$router.push("/")}).catch(s=>{this.$q.notify({message:"Sign In Failed.",position:"top",color:"negative"}),console.log(s)})},google(){const a=new g.auth.GoogleAuthProvider;g.auth().signInWithPopup(a).then(t=>{console.log("result",t),this.$q.notify({message:"Sign In Success.",position:"top",color:"green"}),this.$router.push("/")}).catch(t=>this.$q.notify({message:"Sign In Failed.",position:"top",color:"negative"}),console.log(error))},forgotPassword(){this.resetPwdDialog=!0}}},ue={key:0,class:"text-center q-mb-lg"},ce={key:1,class:"text-center q-mb-lg"},pe={class:"flex flex-center"},ge={key:2,class:"text-center"},he={key:3,class:"text-center"},fe={class:"row"},be={class:"text-center q-my-md"};function _e(a,t,s,u,r,m){const l=b("ForgotPassword");return i(),c("div",null,[s.tab==="register"?(i(),c("div",ue,"Sign up with")):(i(),c("div",ce,"Sign in with")),d("div",pe,[e(p,{class:"flex flex-center q-px-lg q-py-sm q-mb-md",color:"primary",size:"md",label:"Google",onClick:m.google},null,8,["onClick"])]),s.tab==="register"?(i(),c("p",ge,"Sign up with credentials")):(i(),c("p",he,"Sign in with credentials")),e(S,{onSubmit:m.submitForm},{default:o(()=>[e(_,{outlined:"",class:"q-mb-md",type:"email",label:"Email",modelValue:r.formData.email,"onUpdate:modelValue":t[0]||(t[0]=n=>r.formData.email=n)},null,8,["modelValue"]),e(_,{outlined:"",class:"q-mb-md",type:"password",label:"Password",modelValue:r.formData.password,"onUpdate:modelValue":t[1]||(t[1]=n=>r.formData.password=n)},null,8,["modelValue"]),d("div",fe,[e($),e(p,{type:"submit",color:"primary",label:s.tab},null,8,["label"])])]),_:1},8,["onSubmit"]),d("div",be,[s.tab!=="register"?(i(),C(p,{key:0,flat:"",label:"Forgot Password?",color:"negative",class:"text-capitalize rounded-borders",onClick:m.forgotPassword},null,8,["onClick"])):A("",!0)]),e(j,{modelValue:r.resetPwdDialog,"onUpdate:modelValue":t[2]||(t[2]=n=>r.resetPwdDialog=n)},{default:o(()=>[e(l)]),_:1},8,["modelValue"])])}var we=w(de,[["render",_e]]);const Pe=x({name:"AuthPage",components:{AuthComponent:we,LogoutBtn:Y},data(){return{tab:"login"}},setup(){return{store:E()}}}),ve={class:"q-gutter-sm bg-white"},ye={class:"q-mx-lg"};function qe(a,t,s,u,r,m){const l=b("LogoutBtn"),n=b("AuthComponent");return i(),C(Z,null,{default:o(()=>[d("div",ve,[d("div",ye,[e(R,{class:"text-right q-gutter-sm"},{default:o(()=>[e(B,{class:"text-info q-mt-md"},{separator:o(()=>[e(T,{size:"1.5em",name:"chevron_right",color:"primary"})]),default:o(()=>[e(P,{to:"/",label:"Home",icon:"home"}),e(P,{to:"/auth",label:"Sign In",icon:"person"})]),_:1}),e(N),e(p,{to:"/auth",flat:"",label:"Sign In",class:"btn btn-primary text-primary"}),e(l)]),_:1})])]),e(D,{class:"q-mt-xl"},{default:o(()=>[e(J,{modelValue:a.tab,"onUpdate:modelValue":t[0]||(t[0]=f=>a.tab=f),dense:"",class:"text-grey","active-color":"white","active-bg-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:o(()=>[e(y,{name:"login",label:"Login"}),e(y,{name:"register",label:"Register"})]),_:1},8,["modelValue"]),e(ae,{modelValue:a.tab,"onUpdate:modelValue":t[1]||(t[1]=f=>a.tab=f),animated:""},{default:o(()=>[e(q,{name:"login"},{default:o(()=>[e(n,{tab:a.tab},null,8,["tab"])]),_:1}),e(q,{name:"register"},{default:o(()=>[e(n,{tab:a.tab},null,8,["tab"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}var ze=w(Pe,[["render",qe]]);export{ze as default};
